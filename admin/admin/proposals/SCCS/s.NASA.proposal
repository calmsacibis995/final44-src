h06091
s 00006/00002/00212
d D 1.8 91/09/30 14:53:38 bostic 8 7
c minor updates for Gail
e
s 00001/00001/00213
d D 1.7 91/09/17 12:07:15 bostic 7 6
c checkpoint
e
s 00008/00001/00206
d D 1.6 91/09/17 11:29:41 bostic 6 5
c checkpoint
e
s 00020/00121/00187
d D 1.5 91/08/28 16:14:25 bostic 5 4
c they wanted specific bullet items instead of broad discussion
e
s 00046/00012/00262
d D 1.4 91/07/31 17:35:56 mckusick 4 3
c add more on multiprocessing
e
s 00262/00142/00012
d D 1.3 91/06/26 13:26:54 bostic 3 2
c do in NASA's format
e
s 00021/00019/00133
d D 1.2 91/04/02 08:49:35 bostic 2 1
c checkpoint
e
s 00152/00000/00000
d D 1.1 91/03/19 17:51:02 mckusick 1 0
c date and time created 91/03/19 17:51:02 by mckusick
e
u
U
t
T
I 1
.\"	%W%	%E%
I 6
.\"
.\" use the me macro package
.\"
E 6
D 3
.if n \{\
.ND
.rm CH
.ll 7i
.nr LL 7i
.ad l
.\}
.so HEADERS
.HE D
E 3
I 3
.fo +CSRG NASA proposal++%
.nr si 3n
E 3
.nr PS 11
.nr VS 13
.nr LL 6i
.nr OI 0.5i
.in 0.5i
.ps 11p
I 8
.sh 1 Title
.sp
The 4.4BSD Operating Systems Project
E 8
D 3
.LP
E 3
I 3
.sh 1 Summary
.sp
The attached is an unsolicited proposal for NASA requesting funding
for the support of the 4.4BSD project.
This proposal has not been submitted to any other organization or NASA
installation.
.sh 2 Organization
.sp
E 3
.nf
D 3
Mr. Tom Woodrow
NASA Research Center
.sp 2
.LP
Dear Mr. Woodrow
.PP
I am writing to you in my role as the head of operating
system and networking research for the \s-1UNIX\s0 project in the Computer
Science Division of the University of California, Berkeley, known as
the Computer Systems Research Group (\s-1CSRG\s0).
Current funding for \s-1CSRG\s0 is provided by the Open Software
Foundation (\s-1OSF\s0), Hewlett-Packard (HP), and Cray Research.
Because of the current economic climate,
D 2
these organizations have had to reduce their support of \s-1CSRG\s0;
so we have had to seek additional funding from other sources so that we
can continue our work at the university.
E 2
I 2
these organizations have had to reduce their support of \s-1CSRG\s0, 
and we are seeking additional funding from other sources so that we
may continue our research.
E 2
.PP
D 2
Our strategy is to increase from three to four sources of funding,
each of which would provide about one quarter of our annual budget.
Annual grants of about $400,000 or
annual gifts of about $200,000 would provide roughly
a quarter of the budget needed by \s-1CSRG\s0
E 2
I 2
Our strategy is to add an additional source of funding to our current
three, and have each of the additional sources provide about one fourth
of our annual budget.
Annual grants of about $400,000 or annual gifts of about $200,000 would
provide roughly a quarter of the budget needed by \s-1CSRG\s0
E 2
for salaries and benefits, maintenance and network access fees,
travel and other expenses.
D 2
I understand that \s-1NASA\s0 cannot provide
funding at this level in the current year,
however, I would hope that a successful year at a lower level of funding
could promote us to consideration for a larger grant in future years.
E 2
I 2
I realize that \s-1NASA\s0 cannot provide funding at this level in the
current year, however, I would hope that a successful year at a lower
level of funding would promote us to consideration for a larger grant
in future years.
E 2
.PP
The goal of the \s-1CSRG\s0 project
is to use leading edge research ideas in a stable and reliable
implementation that solves current problems in operating systems research.
The project also includes incorporation of network protocols and other
subsystems into the operating system while maintaining consistency
with the existing system call interface.
The resulting system is widely used by other
researchers in operating systems and network protocols.
The most recent two releases, \s-14.2BSD\s0
and \s-14.3BSD\s0, provide the
core of the standard networking and/or operating system software for
nearly all vendors of \s-1UNIX\s0-based workstations and minicomputers.
D 2
\s-14.3BSD\s0-based network support are included in the current systems
released by both \s-1OSF\s0 (\s-1OSF-1\s0)
and \s-1AT&T\s0 (System V, Release 4).
E 2
I 2
The network support in the current systems released by both \s-1OSF\s0
(\s-1OSF-1\s0) and \s-1AT&T\s0 (System V, Release 4) is based
\s-14.3BSD\s0.
E 2
.PP
\s-1CSRG\s0 includes four full-time research staff (Mike Karels,
Keith Bostic, Marc Teitelbaum and myself),
and one three-quarter-time programmer on loan
from another group (Keith Sklower).
In addition, two full-time administrative and secretarial people
handle licensing and software distribution as well as office support.
.PP
\s-1CSRG\s0 anticipates that its next major release, tentatively called
\s-14.4BSD\s0, will be completed and begin shipment late in 1991.
Although \s-14.4BSD\s0 will still require an AT&T source license,
we plan to put together a subset release,
nicknamed \s-14.4BSD\s0-Lite,
that will not contain any proprietary code and hence will be
available without any licenses.
The only restriction on use or redistribution will be a requirement
that due credit be given to the Regents of the University of California
(except for the GNU software, currently the compiler and debugger,
that have more stringent release requirements).
At present, 80% of the utilities, and nearly all the kernel
is non-proprietary.
We expect that \s-14.4BSD\s0-Lite will contain a bootable system
and have all the important utilities.
We will have machine support for 386/486 based PCs,
Hewlett-Packard's Motorola 68000 based workstations,
D 2
and Sun 4 workstations.
E 2
I 2
and Sun 4 workstations, as well as the traditional support for VAXes
and machines based on Computer Consoles' 6/32 architecture.
E 2
We are moderately confident of having support for \s-1MIPS\s0 workstations
D 2
and DEC \s-1SPIM\s0 (byte reversed \s-1MIPS\s0) workstations.
E 2
I 2
and DEC \s-1SPIM\s0 (byte reversed \s-1MIPS\s0) workstations, and may have
support for other architectures.
E 2
.PP
The file system interface
has been extended to allow greater flexibility and performance,
D 2
and a public-domain version of \s-1NFS\s0 is included.
E 2
I 2
and a freely redistributable version of \s-1NFS\s0 is included.
E 2
The new system integrates an implementation of the
\s-1ISO OSI\s0 networking protocols into the existing
socket interface and internal network architecture.
This work will include a revised internal network
architecture incorporating the best features of both the existing
socket support and the ``streams'' layering of the Ninth Edition
research version of \s-1UNIX\s0.
Both filesystem and networking interfaces
improve on previous work with better support for caching in layered
architectures.
These caching techniques are based on work done by Van
Jacobson at the Lawrence Berkeley Laboratory,
and will be fully exploited by the \s-1TCP/IP\s0 networking protocols.
The applicability of
these techniques in the \s-1OSI\s0 protocol suite
will be investigated as well.
.PP
The system will also include an \s-1IEEE\s0 P1003.1 \s-1(POSIX)\s0 standard
operating system interface integrated with the existing system
interface in such a way that both interfaces are fully supported and
interoperate fully.
We have also been closely tracking the P1003.2 and P1003.2a shell
and utility standards, and have been updating our utilities to reflect
that proposed standard.
If the standard has been ratified by the time that we prepare to
D 2
ship \s-14.4BSD\s0, we will be able to be compliant with it.
E 2
I 2
ship \s-14.4BSD\s0, we expect to be compliant with it, as well.
E 2
We have been attending the meetings of several other \s-1POSIX\s0
working groups, including P1003.4 (real-time) P1003.4a (multiprocessing),
P1003.8 (networked filesystems), and P1003.12 (networking interfaces).
We hope to prototype and eventually incorporate
support for these standards as they come into existence.
.PP
The system is expected to include a new
virtual memory system derived from that of the
public domain portion of the Mach operating system
from \s-1CMU\s0 and incorporated into \s-14.3BSD\s0 by the University of Utah.
The virtual memory system already contains support for multiprocessors.
In the future, we will extend this multiprocessor support to the
other major kernel subsystems including the networking, filesystem,
and terminal handling.
The kernel level multiprocessing support will also be exported from
the kernel through the P1003.4a multiprocessing interface to
user programs that wish to exploit it.
We expect that the products of this work will become the interfaces and
implementations of choice for other operating systems and networking
researchers in the near future.
.sp 2
.in +3i
Sincerely,
.sp .65i
E 3
I 3
Computer Systems Research Group
455 Evans Hall
University of California
Berkeley CA 94720
.fi
.sh 2 "Type of organization"
.sp
Educational
.sh 2 "Principal Investigator"
.sp
.nf
I 4
Professor Susan L. Graham
Computer Systems Research Group
Computer Science Division
University of California
Berkeley, CA 94720
.fi
.sh 2 "Research Investigator"
.sp
.nf
E 4
E 3
Dr. Marshall Kirk McKusick
D 3
.in -3i
.sp 2
E 3
I 3
455 Evans Hall
Computer Systems Research Group
Computer Science Division
University of California
Berkeley, CA 94720
415-642-4948
.fi
.sh 2 "Preliminary Discussions"
.pp
Preliminary discussions have been held with:
.sp
E 3
.nf
D 3
cc:	Mike Karels
E 3
I 3
Thomas Woodrow
Numerical Aerodynamic Simulation Division
Systems Development Branch
NASA Ames Research Center
Mail Stop 258-5
Moffett Field, CA 94035
415-604-3966
E 3
.fi
I 3
.sh 2 Funding
.pp
The funding requested is $100,000.
D 7
The project will start September 1, 1991, and will last for one year.
E 7
I 7
The project will start November 1, 1991, and will last for one year.
E 7
.bp
.sh 1 Abstract
.pp
The primary goal of the 4.4BSD project is to incorporate leading edge
research ideas in a stable and reliable implementation dealing with
current problems in operating systems research.
These research areas include networking protocols, virtual
D 5
memory, shared memory, threads and multi-processing.
E 5
I 5
memory, shared memory, threads and multiprocessing.
E 5
The resulting system is widely used by other researchers in operating
systems and network protocols and by vendor organizations.
The most recent two releases made by the Computer Systems Research Group
(CSRG), 4.2BSD and 4.3BSD, provide the core of the standard networking
and/or operating system software for nearly all vendors of UNIX-based
workstations and minicomputers.
The network support in the current systems released by both the Open
Software Foundation (OSF), OSF-1, and AT&T, System V Release 4, is
based on that found in 4.3BSD.
.pp
A secondary goal of our research is to make an inexpensive, cutting-edge
research system available to anyone without restrictions based on
the inclusion of proprietary software or restrictive licensing.
CSRG is unquestionably the largest current distributor of technologically
advanced, freely redistributable software.
I 4
D 5
In June 1991, CSRG made an unencumbered release that includes nearly
all of the kernel and about 75% of the utilities found on 4.3BSD.
E 4
.sh 1 "Project Description"
E 5
I 5
In June 1991, CSRG made an unencumbered release that includes most
of the kernel and about 75% of the utilities found on 4.3BSD.
E 5
.pp
During the funding period, CSRG anticipates that it will complete
its next major release, 4.4BSD.
As soon as this release is complete, CSRG will begin work on a
D 4
follow-on release, tentatively named 5BSD.
E 4
I 4
follow-on release, tentatively named 4.5BSD.
I 6
The 4.5BSD release is expected to include full multiprocessor support.
E 6
E 4
The requested funding will support the development of software for
both releases.
I 5
.sp 2
.sh 1 "Project Description"
E 5
.pp
D 5
Current development efforts in the CSRG include many different areas.
Some of them are as follows:
.sh 2 "New Architecture Support"
.pp
The 4.4BSD release will support the 386/486 based PC architectures,
Hewlett-Packard's (HP) Motorola 68000 based workstations and 9000/7000
RISC workstations, Digital Equipment
Corporation's (DEC) DECstation, and
Sun Microsystem's Sparcstations, as well as the traditional BSD
D 4
platforms, DEC's VAX architectures and Computer Consoles' 6/32
architectures.
E 4
I 4
platform, DEC's VAX architecture.
E 4
We are moderately confident of having support for various MIPS workstations
and the Data General Avion workstations as well.
.sh 2 "New Virtual Memory"
.pp
We have already integrated and are currently testing a new virtual
memory system derived from that of the Mach operating system distributed
by Carnegie-Mellon University and ported to 4.3BSD by the University
of Utah.
Among the many new features provided by the new virtual memory implementation
will be an integration of the buffer cache and virtual memory, shared memory,
semaphores and memory mapped I/O.
.sh 2 "File Systems"
.pp
The fast file system interface has been extended to allow greater flexibility
and performance.
We have also included a freely redistributable implementation of Sun
Microsystem's Network File System (NFS), including the ability to
run NFS over TCP.
.sh 2 "Networking"
We are in the process of integrating an implementation of the ISO OSI
networking protocols into the existing socket interface and internal
network architecture.
This work includes a revised internal network architecture incorporating
the best features of both the existing socket support and the ``streams''
layering presented in the Ninth Edition research version of UNIX.
Both the local filesystem and networking interfaces improve on previous
work with enhanced support for caching in layered architectures.
These caching techniques are based, in part, on work done by Van Jacobson
at the Lawrence Berkeley Laboratory, and will be fully exploited by the
TCP/IP networking protocols.
We are investigating the applicability of these techniques to the OSI
protocol suite as well.
.sh 2 "Standards"
.pp
Members of the CSRG have been closely tracking industry standards,
including ANSI C and the IEEE POSIX standards.
In addition, members of the CSRG have served as technical reviewers
for several of the IEEE POSIX standards groups.
The 4.4BSD release will include ANSI C support as well as an IEEE
POSIX 1003.1 standard operating system interface integrated with
the existing system interface in such a way that both interfaces
fully interoperate.
We have also been closely tracking the POSIX 1003.2 and 1003.2a shell
and utility standards, and have been updating our utilities to reflect
that proposed standard.
If these standards have been ratified by the time that we prepare to
ship 4.4BSD, we expect to be compliant with them as well.
We have been monitoring several other POSIX working groups, including
POSIX 1003.4 (real-time), 1003.4a (multiprocessing), 1003.8 (networked
filesystems), and 1003.12 (networking interfaces).
We expect to prototype and eventually incorporate support for these
standards as they come into existence.
.sh 2 "Open Systems"
.pp
In an effort to make this research as widely available as
possible, the CSRG is actively replacing the portions of the system that
are proprietary with implementations that are freely redistributable.
While it is expected that 4.4BSD will still require an AT&T source
license, CSRG will offer a subset release which will not contain
any proprietary source code and which will not require licenses other
than the University of California's.
(The only restriction on use or redistribution will be a requirement
that due credit be given to the Regents of the University of California,
except for any included Free Software Foundation software, which has
more restrictive release requirements.)
This subset release will be a bootable, usable system and will contain
approximately 95% of the source code in the full release.
At present, 75% of the utilities and much of the kernel is non-proprietary.
.sh 2 "After 4.4BSD"
.pp
The first major project that will be done as part of the release after
4.4BSD will be support for multi-processors.
The virtual memory system we are currently integrating already contains
support for multiprocessors.
The new internal network architecture, streams, will also be designed
with multiprocessors in mind.
As part of this future release, we will extend this support to the other
major kernel subsystems including the networking, filesystem, and terminal
handling.
D 4
Appropriate user interfaces to multiprocessing, perhaps modeled on the
POSIX 1003.4a interfaces, will be designed and implemented as well.
E 4
I 4
Much of the ground work for doing multiprocessing has already been done
by removing global kernel state and encapsulating it in well defined
data structures.
The remaining work to be done is to implement locking on these data
structures and to reorder the code to ensure locks are acquired in
in a specific order to avoid deadlocks.
.pp
A kernel that supports multiprocessing,
allows immediate throughput improvements for
environments doing timesharing or with single
applications made up of several processes.
However, an application that uses a single process
will not be able to utilize more than a single CPU.
To provide speedup for these applications, 
the multiprocessing must be exported from the kernel
so that the application can be written to explicitly use it.
This export is typically done by allowing a single process to
have multiple ``threads'' of execution.
The system must also provide primitives to provide thread
synchronization, scheduling, and mutual exclusion.
There are many interfaces for these primitives in the research
and commercial communities.
The POSIX 1003.4a group has been working to find a commonality
among these interfaces and to develop a coherent standard interface.
We are involved in this POSIX group,
and plan to build a prototype of its interface.
E 4
.bp
E 5
I 5
D 6
The project will include the following specific goals:
E 6
I 6
The project will help fund the following specific goals:
E 6
.ip \(bu
Integrate a new virtual memory subsystem into the kernel which
includes multiprocessor support.
.ip \(bu
Design and implement a new networking subsystem into the kernel which
includes multiprocessor support.
.ip \(bu
Implement a prototype of the POSIX 1003.4a threads model with support
for multiple threads of execution through the use of primitives providing
thread synchronization, scheduling and mutual exclusion.
I 6
.ip \(bu
Design and implement the machine dependent code to support a multiprocessor
version of at least one architecture.
E 6
.ip \(bu
Replace the remaining proprietary source code in the machine independent
portions of the kernel.
.sp 2
E 5
.sh 1 "Personnel"
.pp
There are five members of the CSRG research staff: Kirk McKusick,
Mike Karels, Keith Bostic, Keith Sklower and Marc Teitelbaum.
.pp
Dr. McKusick received his undergraduate degree in Electrical Engineering
from Cornell University.
His graduate work was done at the University of California, where he
received Masters degrees in Computer Science and Business Administration,
and a Ph.D. in the area of programming languages.
While at Berkeley he implemented the 4.2BSD fast file system and was
involved in implementing the Berkeley Pascal system.
He currently is the Research Computer Scientist at the Berkeley Computer
Systems Research Group.
D 4
He is president of the Usenix Association, a member of the editorial board
of UNIX Review Magazine, and a member of ACM and IEEE.
E 4
I 4
He is president of the Usenix Association and a member of ACM and IEEE.
E 4
He is a co-author of the book ``The Design and Implementation of the
4.3BSD UNIX Operating System.''
.pp
Michael J. Karels is the Principal Programmer of the Computer Systems
Research Group at the University of California, Berkeley.
Since the release of 4.2BSD, he has been the primary system architect
for Berkeley UNIX, continuing the development of new versions of BSD.
Michael Karels received his B.S. in Microbiology from the University of
Notre Dame.
He was the principal developer of the 2.9BSD UNIX release of the Berkeley
Software Distribution for the PDP-11.
He is a member of the ACM, the IEEE and the Internet Engineering Task
force.
He is a co-author of the book ``The Design and Implementation of the
4.3BSD UNIX Operating System.''
.pp
A representative selection of CSRG's relevant publications are as follows:
E 3
.sp
D 3
MKM/tl
E 3
I 3
M. McKusick, M. Karels, K. Bostic,
``A Pageable Memory-Based Filesystem'',
\fIProceedings of the Anaheim Usenix Conference\fP,
pp 137-144, June 1990.
.sp
.lp
M. McKusick, M. Karels, K. Bostic,
``The Release Engineering of 4.3BSD'',
\fIProceedings of the New Orleans Usenix Workshop on Software Management\fP,
pp 95-100, April 1989.
.sp
.lp
M. McKusick, M. Karels,
``Design of a General Purpose Memory Allocator for the 4.3BSD UNIX Kernel'',
\fIProceedings of the San Francisco Usenix Conference\fP,
pp 295-304, June 1988.
.sp
.lp
M. McKusick, M. Karels,
``Directions of UNIX at Berkeley'',
\fIDigest of Papers of the Thirty-second IEEE Computer Society
International Conference\fP,
Compcon, San Francisco, pp. 196-199, February 23-27, 1987.
.sp
.lp
M. McKusick, M. Karels,
``A New Virtual Memory Implementation for Berkeley UNIX'',
\fIProceedings of the European UNIX Users Group Meeting\fP,
Manchester, England, pp. 451-460, September 1986.
.sp
.lp
M. Karels, M. McKusick,
``Towards a Compatible Filesystem Interface'',
\fIProceedings of the European UNIX Users Group Meeting\fP,
Manchester, England, pp. 481-496, September 1986.
D 5
.bp
E 5
.sh 1 "Facilities and Equipment"
.pp
Equipment for the CSRG is currently being provided by Computer Consoles
D 4
Inc., Hewlett-Packard Corp. and Compaq Corporation.  No additional equipment is required for the proposed project.
E 4
I 4
Inc., Hewlett-Packard Corp. and Compaq Corporation.
I 8
This equipment is located in 458 Evans Hall.
E 8
No additional equipment is required for the proposed project.
E 4
.sh 1 "Proposed Costs"
.pp
The CSRG currently requires funding at a level of $31,179 per month
for salaries and $6,800 for supplies and expenses such as equipment
maintenance and power.
D 4
Of the requested funding of $100,000, $48,000 will go directly
E 4
I 4
Of the requested funding of $100,000, $49,000 will go directly
E 4
to the University of California as overhead.
D 4
The remaining $52,000 of funding will fund the CSRG for slightly under
E 4
I 4
The remaining $51,000 of funding will fund the CSRG for slightly under
E 4
1.5 months.
Of course, NASA is not the only source of funding for the CSRG.
Current funding is provided by the Open Software Foundation,
Hewlett-Packard Corp. and Cray Research.
.sh 1 "Current Projects"
.pp
D 4
No other current projects are being conducted by the principal
investigator, or by other members of CSRG.
E 4
I 4
No other current projects are being conducted by the
research investigator, or by other members of CSRG.
E 4
.sp 8
.nf
.in +1.0i
D 8
Marshall Kirk McKusick
Research Computer Scientist, CSRG
E 8
I 8
Professor Susan L. Graham
Principal Investigator
E 8
E 3
E 1
