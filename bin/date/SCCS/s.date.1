h09065
s 00004/00002/00202
d D 8.3 95/04/28 09:45:21 bostic 26 25
c POSIX.2 states that user-defined formats are always followed by a
c <newline>
c From: Charles Hannum <mycroft@NetBSD.ORG>
e
s 00010/00000/00194
d D 8.2 93/11/17 07:16:47 bostic 25 24
c add the TZ environmental variable
e
s 00000/00000/00194
d D 8.1 93/06/01 17:17:18 bostic 24 23
c 4.4BSD snapshot (revision 8.1)
e
s 00001/00001/00193
d D 6.19 93/06/01 17:17:08 bostic 23 21
c typo, it's %S, not %s
e
s 00000/00000/00194
d R 8.1 93/06/01 17:14:02 bostic 22 21
c 4.4BSD snapshot (revision 8.1)
e
s 00013/00014/00181
d D 6.18 93/06/01 17:13:07 bostic 21 19
c cleanup from George Lavender
e
s 00002/00002/00193
d R 8.1 93/05/31 14:20:35 bostic 20 19
c 4.4BSD snapshot (revision 8.1); add 1993 to copyright
e
s 00001/00001/00194
d D 6.17 92/03/20 10:02:43 bostic 19 18
c document that seconds are 0 to 61
e
s 00003/00002/00192
d D 6.16 91/07/30 18:02:04 cael 18 17
c formalize HISTORY
e
s 00003/00000/00191
d D 6.15 91/06/27 17:16:27 bostic 17 16
c add POSIX/IEEE contribution notice
e
s 00002/00002/00189
d D 6.14 91/06/27 15:05:31 bostic 16 15
c minor format cleanups
e
s 00079/00054/00112
d D 6.13 91/04/24 18:52:43 cael 15 14
c mdoc version three
e
s 00006/00001/00160
d D 6.12 91/03/09 18:43:47 bostic 14 13
c add -r option so user can specify an Epoch # of seconds
e
s 00001/00001/00160
d D 6.11 91/01/19 17:35:46 bostic 13 12
c get quotes around the string
e
s 00002/00002/00159
d D 6.10 91/01/15 14:03:14 bostic 12 11
c time structure stores month from 0-11; man page shouldn't list
c "impossible" times
e
s 00069/00039/00092
d D 6.9 90/12/04 22:06:15 bostic 11 10
c add format string, some rewording for clarity, minor rearranging
e
s 00022/00024/00109
d D 6.8 90/07/24 22:43:27 cael 10 9
c .Xr botch fix
e
s 00115/00058/00018
d D 6.7 90/06/11 05:55:36 cael 9 8
c converted man page
e
s 00008/00007/00068
d D 6.6 87/04/01 10:37:47 bostic 8 7
c timezone is really minutes_west
e
s 00011/00014/00064
d D 6.5 87/03/24 13:04:51 bostic 7 6
c added -t, -u for timezone, dst setting
e
s 00003/00000/00075
d D 6.4 86/05/18 21:55:06 lepreau 6 5
c exit status
e
s 00004/00002/00071
d D 6.3 86/04/13 21:05:45 karels 5 4
c add -n
e
s 00031/00015/00042
d D 6.2 85/06/24 13:12:50 gusella 4 3
c Date has been modified to work with timed(8) for 4.3BSD
e
s 00001/00001/00056
d D 6.1 85/04/29 14:21:23 mckusick 3 2
c 4.3BSD beta release manual page
e
s 00010/00007/00047
d D 5.1 85/04/29 14:21:16 mckusick 2 1
c manual page distributed with 4.2BSD
e
s 00054/00000/00000
d D 4.1 85/04/29 14:21:09 mckusick 1 0
c manual page distributed with 4.1BSD
e
u
U
t
T
I 9
D 21
.\" Copyright (c) 1980, 1990 The Regents of the University of California.
.\" All rights reserved.
E 21
I 21
.\" Copyright (c) 1980, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
E 21
.\"
I 17
.\" This code is derived from software contributed to Berkeley by
.\" the Institute of Electrical and Electronics Engineers, Inc.
.\"
E 17
D 15
.\" %sccs.include.redist.man%
E 15
I 15
.\" %sccs.include.redist.roff%
E 15
.\"
.\"     %W% (Berkeley) %G%
.\"
.Dd %Q%
D 10
.\" .Os BSD 4.4
E 9
I 1
.\" Copyright (c) 1980 Regents of the University of California.
.\" All rights reserved.  The Berkeley software License Agreement
.\" specifies the terms and conditions for redistribution.
.\"
D 9
.\"	%W% (Berkeley) %G%
E 9
I 9
.\"	@(#)date.1	6.6 (Berkeley) 4/1/87
E 9
.\"
E 10
D 2
.TH DATE 1 VAX/11
E 2
I 2
D 3
.TH DATE 1 "1 April 1983"
E 3
I 3
D 9
.TH DATE 1 "%Q%"
E 3
E 2
.UC 4
.SH NAME
date \- print and set the date
.SH SYNOPSIS
.B date
D 2
.RB "[ yymmddhhmm [ " . "ss ] ]"
E 2
I 2
D 5
.RB "[ -u ] [ yymmddhhmm [ " . "ss ] ]"
E 5
I 5
D 7
.RB "[ -n ] [ -u ] [ yymmddhhmm [ " . "ss ] ]"
E 7
I 7
D 8
.RB "[-nu] [-d dst] [-t timezone] [yymmddhhmm [" . "ss] ]"
E 8
I 8
.RB "[-nu] [-d dst] [-t minutes_west] [yymmddhhmm [" . "ss] ]"
E 8
E 7
E 5
E 2
.SH DESCRIPTION
D 2
If no argument is given, the current date and time are printed.
If an argument is given, the current date is set.
E 2
I 2
D 8
If no arguments are given, the current date and time are printed.
D 4
If a date is specified, the current date is set.
E 4
I 4
D 7
Providing an argument will set the desired date.
Only the superuser can set the date.
E 4
The
.I -u
D 4
flag is used to display the date in GMT (universal) time.
This flag may also be used to set GMT time.
E 4
I 4
flag is used to display or set the date in GMT (universal) time.
E 7
I 7
Providing an argument will set the desired date; only the superuser
can set the date.  The \fI-d\fP and \fI-t\fP flags set the kernel's
values for daylight savings time and minutes west of GMT.  If \fIdst\fP
is non-zero, future calls to \fIgettimeofday\fP(2) will return a non-zero
\fItz_dsttime\fP.  \fITimezone\fP provides the number of minutes returned
E 8
I 8
If no arguments are given, the current date and time are
printed.  Providing an argument will set the desired date;
only the superuser can set the date. The \fI-d\fP and \fI-t\fP
flags set the kernel's values for daylight savings time and
minutes west of GMT.  If \fIdst\fP is non-zero, future calls
to \fIgettimeofday\fP(2) will return a non-zero \fItz_dsttime\fP.
\fIMinutes_west\fP provides the number of minutes returned
E 8
by future calls to \fIgettimeofday\fP(2) in \fItz_minuteswest\fP.  The
\fI-u\fP flag is used to display or set the date in GMT (universal) time.
E 7
E 4
E 2
.I yy
D 4
is the last two digits of the year;
E 4
I 4
represents the last two digits of the year;
E 4
the first
.I mm
is the month number;
.I dd
D 4
is the day number in the month;
E 4
I 4
is the day number;
E 4
.I hh
is the hour number (24 hour system);
the second
.I mm
is the minute number;
.BI . ss
D 4
is optional and is the seconds.
E 4
I 4
is optional and represents the seconds.
E 4
For example:
.IP
D 4
date 10080045
E 4
I 4
date 8506131627
E 4
.PP
D 4
sets the date to Oct 8, 12:45 AM.
The year, month and day may be omitted, the current
values being the defaults.
E 4
I 4
D 7
sets the date to June 13 1985, 4:27 PM.
The year, month and day may be omitted; the default
values will be the current ones.
E 4
The system operates in GMT.
.I Date
takes care of the conversion to and from
E 7
I 7
sets the date to June 13 1985, 4:27 PM.  The year, month and day may
be omitted; the default values will be the current ones.  The system
operates in GMT.  \fIDate\fP takes care of the conversion to and from
E 7
D 4
local standard and daylight time.
E 4
I 4
local standard and daylight-saving time.
.PP
If 
.I timed(8)
E 9
I 9
.Dt DATE 1
D 10
.Os BSD 4
E 10
I 10
D 15
.Os BSD 4.4
E 15
I 15
.Os
E 15
E 10
.Sh NAME
.Nm date
.Nd display or set date and time
.Sh SYNOPSIS
.Nm date
D 15
.Op Fl nu
E 15
.Op Fl d Ar dst
I 14
.Op Fl r Ar seconds
E 14
.Op Fl t Ar minutes_west
D 10
.Op yymmddhhmm Op ss
E 10
I 10
D 11
.Op yymmddhhmm [\&.ss]
E 11
I 11
D 15
.Op +format
E 15
I 15
.Op Fl nu
.Op Cm + Ns Ar format
E 15
.Op [yy[mm[dd[hh]]]]mm[\&.ss]
E 11
E 10
.Sh DESCRIPTION
.Nm Date
D 11
displays today's date and time when invoked without
arguments.  Providing an argument will set the desired date;
D 10
only the superuser can set the date. The
E 10
I 10
only the superuser can set the date.
E 11
I 11
displays the current date and time when invoked without arguments.
Providing arguments will format the date and time in a user-defined
way or set the date.
Only the superuser may set the date.
E 11
.Pp
D 14
Options are:
E 14
I 14
The options are as follows:
E 14
D 15
.Pp
.Tw Ds
E 10
.Tp Fl d
E 15
I 15
.Bl -tag -width Ds
.It Fl d
E 15
D 21
Set the kernel's values for daylight savings time.
E 21
I 21
Set the kernel's value for daylight savings time.
E 21
If
.Ar dst
is non-zero, future calls
to
D 10
.Ar gettimeofday
2  will return a non-zero
.Ar tz_dsttime  .
E 10
I 10
.Xr gettimeofday 2
will return a non-zero
.Ql tz_dsttime  .
I 11
D 15
.Tp Fl n
E 15
I 15
.It Fl n
E 15
The utility
.Xr timed 8
D 21
is used to synchronize the clocks of groups of machines.
E 21
I 21
is used to synchronize the clocks on groups of machines.
E 21
By default, if
.Xr timed
is running,
.Nm date
will set the time on all of the machines in the local group.
The
.Fl n
option stops
.Nm date
from setting the time for other than the current machine.
I 14
D 15
.Tp Fl r
E 15
I 15
.It Fl r
E 15
D 21
Print out the date and time for
E 21
I 21
Print out the date and time in
E 21
.Ar seconds
from the Epoch.
E 14
E 11
E 10
D 15
.Tp Fl t
Set the kernel's values for minutes west of GMT.
E 15
I 15
.It Fl t
D 21
Set the kernel's values for minutes west of
E 21
I 21
Set the kernel's value for minutes west of
E 21
.Tn GMT .
E 15
.Ar Minutes_west
D 11
provides the number of minutes returned by future calls to
D 10
.Ar gettimeofday
2  in
.Ar tz_minuteswest  .
E 10
I 10
.Xr gettimeofday 2
in
.Ql tz_minuteswest  .
E 11
I 11
specifies the number of minutes returned in
.Ql tz_minuteswest  
by future calls to
.Xr gettimeofday 2 .
E 11
E 10
D 15
.Tp Fl u
D 11
Display or set the date in GMT (universal) time.
E 11
I 11
Display or set the date in UCT (universal) time.
E 11
.Tp
E 15
I 15
.It Fl u
Display or set the date in
.Tn UCT
(universal) time.
.El
E 15
.Pp
I 11
An operand with a leading plus (``+'') sign signals a user-defined format
string which specifies the format in which to display the date and time.
The format string may contain any of the conversion specifications described
in the 
.Xr strftime 3
manual page, as well as any arbitrary text.
I 26
A <newline> character is always output after the characters specified by
the format string.
E 26
The format string for the default display is:
I 15
.Bd -literal -offset indent
D 16
``%a %b %e %H:%M:%S %Z %Y\en''.
E 16
I 16
D 26
``%a %b %e %H:%M:%S %Z %Y%n''.
E 26
I 26
``%a %b %e %H:%M:%S %Z %Y''.
E 26
E 16
.Ed
E 15
.Pp
D 15
.Dl ``%a %b %e %H:%M:%S %Z %Y\en''.
.Pp
E 15
If an operand does not have a leading plus sign, it is interpreted as
a value for setting the system's notion of the current date and time.
E 11
D 21
The canonical representation for setting the date and time:
E 21
I 21
The canonical representation for setting the date and time is:
E 21
I 10
D 15
.Dw Ds
E 10
.Dp Ar yy
E 15
I 15
.Pp
.Bl -tag -width Ds -compact -offset indent
.It Ar yy
E 15
Year in abbreviated form (.e.g 89 for 1989).
D 15
.Dp Ar mm
E 15
I 15
.It Ar mm
E 15
Numeric month.
D 11
A number from 01 to 12.
E 11
I 11
A number from 1 to 12.
E 11
D 15
.Dp Ar dd
E 15
I 15
.It Ar dd
E 15
D 11
Day, a number from 01 to 31.
E 11
I 11
Day, a number from 1 to 31.
E 11
D 15
.Dp Ar hh
E 15
I 15
.It Ar hh
E 15
D 11
Hour, a number from 00 to 24.
E 11
I 11
D 12
Hour, a number from 0 to 24.
E 12
I 12
Hour, a number from 0 to 23.
E 12
E 11
D 15
.Dp Ar mm
E 15
I 15
.It Ar mm
E 15
D 11
Minutes, a number from 00 to 60.
E 11
I 11
D 12
Minutes, a number from 0 to 60.
E 12
I 12
Minutes, a number from 0 to 59.
E 12
E 11
D 15
.Dp Ar .ss
D 11
Seconds, a number from 00 to 60.
E 11
I 11
Seconds, a number from 0 to 60.
E 11
.Dp
E 15
I 15
.It Ar .ss
D 19
Seconds, a number from 0 to 59.
E 19
I 19
Seconds, a number from 0 to 61 (59 plus a a maximum of two leap seconds).
E 19
.El
E 15
I 11
.Pp
D 21
Everything but the minutes are optional.
E 21
I 21
Everything but the minutes is optional.
E 21
.Pp
Time changes for Daylight Saving and Standard time and leap seconds
and years are handled automatically.
.Sh EXAMPLES
E 11
The command:
I 15
.Bd -literal -offset indent
D 16
date ``+DATE: %m/%d/%y%nTIME: %H:%M:0n''
E 16
I 16
D 21
date ``+DATE: %m/%d/%y%nTIME: %H:%M:%n''
E 21
I 21
D 23
date ``+DATE: %m/%d/%y%nTIME: %H:%M:%s%n''
E 23
I 23
D 26
date ``+DATE: %m/%d/%y%nTIME: %H:%M:%S%n''
E 26
I 26
date ``+DATE: %m/%d/%y%nTIME: %H:%M:%S''
E 26
E 23
E 21
E 16
.Ed
E 15
.Pp
I 11
D 13
.Dl date +DATE: %m/%d/%y%nTIME: %H:%M:%S\en
E 13
I 13
D 15
.Dl date ``+DATE: %m/%d/%y%nTIME: %H:%M:%S%n''
E 13
.Pp
E 15
will display:
I 15
.Bd -literal -offset indent
DATE: 11/21/87
TIME: 13:36:16
.Ed
E 15
.Pp
D 15
.Dl DATE: 11/21/87
.Dl TIME: 13:36:16
.Pp
E 15
The command:
I 15
.Bd -literal -offset indent
date 8506131627
.Ed
E 15
.Pp
E 11
D 15
.Dl date 8506131627
E 15
I 15
sets the date to
D 21
.Dq Li "June 13 1985, 4:27 PM" .
E 21
I 21
.Dq Li "June 13, 1985, 4:27 PM" .
E 21
E 15
.Pp
D 15
sets the date to June 13 1985, 4:27 PM.
.Pp
E 15
D 11
To reset today's time, the incantation can be shortened
to just the hours and minutes:
E 11
I 11
The command:
I 15
.Bd -literal -offset indent
date 1432
.Ed
E 15
E 11
.Pp
D 15
.Dl date 1432
.Pp
D 11
sets the time to 2:32 PM, unaffecting the date.
.Pp
Providing a system stays running, date will handle
time changes for daylight/standards savings time and leap times.
.Pp
If
D 10
.Ar timed 8
E 10
I 10
.Xr timed 8
E 10
E 9
is running to synchronize the clocks of machines in a local
D 9
area network, \fIdate\fP sets the time globally on all those
E 9
I 9
area network,
.Nm date
sets the time globally on all those
E 9
D 5
machines.
E 5
I 5
machines unless the
D 9
.B \-n
E 9
I 9
.Fl n
E 9
option is given.
E 11
I 11
sets the time to 2:32 PM, without modifying the date.
E 15
I 15
sets the time to
.Li "2:32 PM" ,
without modifying the date.
I 25
.Sh ENVIRONMENTAL VARIABLES
The following environment variables affect the execution of
.Nm date :
.Bl -tag -width TZ
.It Ev TZ
The timezone to use when displaying dates.
See
.Xr environ 7
for more information.
.El
E 25
E 15
E 11
E 5
E 4
D 9
.SH FILES
D 4
/usr/adm/wtmp to record time-setting
E 4
I 4
/usr/adm/wtmp to record time-setting.
In /usr/adm/messages, \fIdate\fP records the name of the user
E 9
I 9
.Sh FILES
D 10
.Dw Pa /usr/adm/messages
E 10
I 10
D 15
.Dw /var/log/messages
E 10
.Di L
D 10
.Dp Pa /usr/adm/wtmp
E 10
I 10
.Dp Pa /var/log/wtmp
E 15
I 15
.Bl -tag -width /var/log/messages -compact
.It Pa /var/log/wtmp
E 15
E 10
A record of date resets and time changes.
D 10
.Dp Pa /usr/adm/messages,
E 10
I 10
D 15
.Dp Pa /var/log/messages
E 15
I 15
.It Pa /var/log/messages
E 15
E 10
D 11
A record of the name of the user
E 9
setting the time.
E 11
I 11
A record of the user setting the time.
I 15
.El
E 15
E 11
E 4
D 9
.SH SEE ALSO
D 4
utmp(5)
E 4
I 4
gettimeofday(2), utmp(5), timed(8),
E 9
I 9
.Sh SEE ALSO
.Xr gettimeofday 2 ,
I 11
.Xr strftime 3 ,
E 11
.Xr utmp 5 ,
D 10
.Xr timed 8 ,
E 10
I 10
.Xr timed 8
E 10
E 9
D 15
.br
D 9
\fITSP: The Time Synchronization Protocol for UNIX 4.3BSD\fP, 
R. Gusella and S. Zatti
E 4
.SH DIAGNOSTICS
E 9
I 9
.Em TSP:\ The\ Time\ Synchronization Protocol
.Em for UNIX 4.3BSD ,
R. Gusella
and\ S.\ Zatti
.Sh HISTORY
D 10
.Nm
E 10
I 10
.Nm Date
E 10
appeared in Version 6 AT&T UNIX.
E 15
I 15
.Rs
.%T "TSP: The Time Synchronization Protocol for UNIX 4.3BSD"
.%A R. Gusella
.%A S. Zatti
.Re
E 15
.Sh DIAGNOSTICS
E 9
I 6
D 11
Exit status is 0 on success, 1 on complete failure to set the date,
and 2 on successfully setting the local date but failing globally.
E 11
I 11
D 15
Exit status is 0 on success, 1 on if unable to set the date, and 2 on
E 15
I 15
Exit status is 0 on success, 1 if unable to set the date, and 2
E 15
D 21
if able to set the local date but failing to set it globally.
E 21
I 21
if able to set the local date, but unable to set it globally.
E 21
E 11
D 9
.PP
E 6
D 2
`No permission' if
you aren't the super-user and you try to change the date;
`bad conversion' if the date set is syntactically incorrect.
E 2
I 2
D 4
`Failed to set date: Not owner' if you try to change the date
E 4
I 4
D 7
`You are not superuser: date not set' if you try to change the date
E 4
but are not the super-user.
E 7
I 4
Occasionally, when \fItimed\fP synchronizes the time on many hosts, 
E 9
I 9
.Pp
Occasionally, when
D 10
.Ar timed
E 10
I 10
.Xr timed
E 10
D 11
synchronizes the time on many hosts,
E 9
the setting of a new time value may require more than a few seconds.
E 11
I 11
synchronizes the time on many hosts, the setting of a new time value may
require more than a few seconds.
E 11
D 9
On these occasions, \fIdate\fP prints: `Network time being set'.
E 9
I 9
On these occasions,
.Nm date
D 15
prints: `Network time being set'.
E 9
The message `Communication error with timed' occurs when the communication
E 15
I 15
prints:
.Ql Network time being set .
The message
.Ql Communication error with timed
occurs when the communication
E 15
D 9
between \fIdate\fP and \fItimed\fP fails.
E 4
E 2
.SH BUGS
E 9
I 9
between
.Nm date
and
D 10
.Ar timed
E 10
I 10
.Xr timed
E 10
fails.
.Sh BUGS
E 9
The system attempts to keep the date in a format closely compatible
D 11
with VMS.  VMS, however, uses local time (rather than GMT) and does
D 4
not understand daylight savings time.  Thus if you use both UNIX
E 4
I 4
not understand daylight-saving time.  Thus, if you use both UNIX
E 4
and VMS, VMS will be running on GMT.
E 11
I 11
D 15
with VMS.
VMS, however, uses local time (rather than GMT) and does not understand
E 15
I 15
with
.Tn VMS .
.Tn VMS ,
however, uses local time (rather than
.Tn GMT )
D 21
and does not understand
E 15
daylight-saving time.
E 21
I 21
and does not understand daylight-savings time.
E 21
D 15
Thus, if you use both UNIX and VMS, VMS will be running on GMT.
E 15
I 15
Thus, if you use both
.Tn UNIX
and
.Tn VMS ,
.Tn VMS
will be running on
.Tn GMT .
D 21
.Sh HISTORY
E 21
I 21
.Sh STANDARDS
E 21
D 18
This
E 18
I 18
The
.Nm date
E 18
command is expected to be compatible with
D 18
.Tn POSIX .
E 18
I 18
.St -p1003.2 .
E 18
E 15
E 11
E 1
