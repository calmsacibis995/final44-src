h54100
s 00001/00001/00128
d D 8.5 94/12/05 11:23:34 pendry 20 19
c unwhiteout.2 -> undelete.2
e
s 00003/00001/00126
d D 8.4 94/10/18 15:38:47 mckusick 19 18
c more accurate definition of -W option
e
s 00004/00001/00123
d D 8.3 94/07/29 18:38:50 pendry 18 17
c add whiteouts
e
s 00014/00002/00110
d D 8.2 94/04/18 06:21:47 bostic 17 16
c add the -P (paranoid) option, overwrite regular files
e
s 00002/00002/00110
d D 8.1 93/05/31 15:09:02 bostic 16 15
c 4.4BSD snapshot (revision 8.1); add 1993 to copyright
e
s 00002/00002/00110
d D 6.11 92/07/27 13:44:57 bostic 15 14
c on second thought, make it symlink(7)
e
s 00001/00000/00111
d D 6.10 92/07/27 13:41:25 bostic 14 13
c add symlin(1)
e
s 00016/00013/00095
d D 6.9 91/07/27 20:17:27 cael 13 12
c mdoc version three
e
s 00003/00000/00105
d D 6.8 91/06/27 17:23:02 bostic 12 11
c add POSIX/IEEE contribution notice
e
s 00002/00002/00103
d D 6.7 91/03/14 14:29:35 cael 11 8
c add .Vx so tmac.andoc will call tmac.mdoc-old, delete ext. Tp
e
s 00003/00001/00104
d R 6.7 91/03/14 00:10:15 cael 10 8
c add .Vx so tmac.andoc will call tmac.mdoc-old
e
s 00001/00000/00105
d R 6.7 91/03/13 20:29:40 cael 9 8
c add .Vx so tmac.andoc will call tmac.mdoc-old
e
s 00020/00016/00085
d D 6.6 91/03/10 14:51:37 bostic 8 7
c new fts(3) sets errno correctly, don't second-guess it; bring man page
c up to date with POSIX.2 Draft 11, add COMPATIBILITY section
e
s 00052/00015/00049
d D 6.5 90/12/08 00:01:00 bostic 7 6
c new version of rm from scratch and the POSIX.2 description
e
s 00005/00004/00059
d D 6.4 90/07/24 22:51:00 cael 6 5
c .Xr botch fix
e
s 00061/00059/00002
d D 6.3 90/06/11 06:00:15 cael 5 4
c converted man page
e
s 00003/00007/00058
d D 6.2 89/05/23 12:17:13 bostic 4 3
c replace '-' documentation with '--' from getopt
e
s 00001/00001/00064
d D 6.1 85/04/29 15:00:55 mckusick 3 2
c 4.3BSD beta release manual page
e
s 00014/00032/00051
d D 5.1 85/04/29 15:00:41 mckusick 2 1
c manual page distributed with 4.2BSD
e
s 00083/00000/00000
d D 4.1 85/04/29 15:00:24 mckusick 1 0
c manual page distributed with 4.1BSD
e
u
U
t
T
I 1
D 5
.\" Copyright (c) 1980 Regents of the University of California.
.\" All rights reserved.  The Berkeley software License Agreement
.\" specifies the terms and conditions for redistribution.
E 5
I 5
D 16
.\" Copyright (c) 1990 The Regents of the University of California.
.\" All rights reserved.
E 16
I 16
D 17
.\" Copyright (c) 1990, 1993
E 17
I 17
.\" Copyright (c) 1990, 1993, 1994
E 17
.\"	The Regents of the University of California.  All rights reserved.
E 16
E 5
.\"
I 12
.\" This code is derived from software contributed to Berkeley by
.\" the Institute of Electrical and Electronics Engineers, Inc.
.\"
E 12
D 5
.\"	%W% (Berkeley) %G%
E 5
I 5
D 13
.\" %sccs.include.redist.man%
E 13
I 13
.\" %sccs.include.redist.roff%
E 13
E 5
.\"
D 2
.TH RM 1 4/1/81
E 2
I 2
D 3
.TH RM 1 "1 April 1981"
E 3
I 3
D 5
.TH RM 1 "%Q%"
E 3
E 2
.UC 4
.SH NAME
D 2
rm, rmdir  \- remove (unlink) files
E 2
I 2
rm, rmdir  \- remove (unlink) files or directories
E 2
.SH SYNOPSIS
.B rm
[
.B \-f
] [
.B \-r
] [
.B \-i
D 4
] [
.B \-
E 4
] file ...
.PP
.B rmdir
dir ...
.PP
.SH DESCRIPTION
.I Rm
D 2
removes the entries for one or more
files
from a directory.
If an entry was the last link to the file, the file
is destroyed.
E 2
I 2
removes the entries for one or more files from a directory.
If an entry was the last link to the file, the file is destroyed.
E 2
Removal of a file requires write permission in its directory,
but neither read nor write permission on the file itself.
.PP
D 2
If a file has no write permission
and the standard input is a terminal,
its permissions are printed and a line is read from
the standard input.
If that line begins with `y' the file is deleted,
otherwise the file remains.
No questions are asked
and no errors are reported
when the
E 2
I 2
If a file has no write permission and the standard input is a terminal,
its permissions are printed and a line is read from the standard input.
If that line begins with `y' the file is deleted, otherwise the file remains.
No questions are asked and no errors are reported when the
E 2
.B \-f
(force) option is given.
.PP
If a designated file is a directory,
D 2
an error comment is printed unless the optional
argument
E 2
I 2
an error comment is printed unless the optional argument
E 2
.B \-r
D 2
has been used.
In that case,
E 2
I 2
has been used.  In that case,
E 2
.I rm
D 2
recursively deletes the
entire contents of the specified directory,
E 2
I 2
recursively deletes the entire contents of the specified directory,
E 2
and the directory itself.
.PP
If the
.B \-i
(interactive) option is in effect,
.I rm
D 2
asks whether to delete each file,
and, under
E 2
I 2
asks whether to delete each file, and, under
E 2
.BR \-r ,
whether to examine each directory.
.PP
D 4
The null option
.B \-
indicates that all the arguments following it are to be treated as
file names.  This allows the specification of file names starting with
a minus.
E 4
I 4
Since getopt recognizes the string ``--'' as terminating the set
of options, it can be used to allow the removal of file names
starting with a dash.
E 4
.PP
.I Rmdir
D 2
removes entries for the named directories,
which must be empty.
E 2
I 2
removes entries for the named directories, which must be empty.
E 2
.SH "SEE ALSO"
D 2
unlink(2)
.SH DIAGNOSTICS
Generally self-explanatory.
It is forbidden to remove the file `..' merely to avoid the
antisocial consequences of inadvertently doing something like
`rm \-r .*'.
E 2
I 2
rm(1), unlink(2), rmdir(2)
E 5
I 5
D 13
.\"     %W% (Berkeley) %G%
E 13
I 13
.\"	%W% (Berkeley) %G%
E 13
.\"
I 11
D 13
.Vx
E 13
E 11
.Dd %Q%
.Dt RM 1
D 11
.Os BSD 4.4
E 11
I 11
.Os
E 11
.Sh NAME
.Nm rm
.Nd remove directory entries
.Sh SYNOPSIS
.Nm rm
D 13
.Op Fl f Li \&| Fl i
E 13
I 13
.Op Fl f | Fl i
E 13
D 7
.Op Fl Rr
E 7
I 7
D 17
.Op Fl dRr
E 17
I 17
D 18
.Op Fl dPRr
E 18
I 18
.Op Fl dPRrW
E 18
E 17
E 7
.Ar file ...
.Sh DESCRIPTION
D 7
The rm utility removes the directory entry specified by each
file argument.
E 7
I 7
The
.Nm rm
utility attempts to remove the non-directory type files specified on the
command line.
If the permissions of the file do not permit writing, and the standard
D 8
input device is a terminal, the user is prompted for confirmation.
E 8
I 8
input device is a terminal, the user is prompted (on the standard error
output) for confirmation.
E 8
E 7
.Pp
D 8
The following options are available:
E 8
I 8
The options are as follows:
E 8
I 6
D 13
.Tw 8n
I 7
.Tp Fl d
E 13
I 13
.Bl -tag -width flag
.It Fl d
E 13
Attempt to remove directories as well as other types of files.
E 7
E 6
D 13
.Tp Fl f
E 13
I 13
.It Fl f
E 13
D 7
Force each specified directory entry to be removed
without prompting for confirmation, regardless of
the permissions of the file to which it refers.
Suppress diagnostic messages regarding non-existent
operands.
E 7
I 7
Attempt to remove the files without prompting for confirmation,
regardless of the file's permissions.
If the file does not exist, do not display a diagnostic message or modify
the exit status to reflect an error.
The
.Fl f
option overrides any previous
.Fl i 
options.
E 7
D 13
.Tp Fl i
E 13
I 13
.It Fl i
E 13
D 7
Write a prompt to the standard error output
requesting confirmation before removing each existing
directory entry, regardless of the permissions
of the file to which it refers.
E 7
I 7
Request confirmation before attempting to remove each file, regardless of
the file's permissions, or whether or not the standard input device is a
terminal.
The
.Fl i
option overrides any previous
.Fl f 
options.
I 17
.It Fl P
Overwrite regular files before deleting them.
Files are overwritten three times, first with the byte pattern 0xff,
then 0x00, and then 0xff again, before they are deleted.
E 17
E 7
D 13
.Tp Fl R
E 13
I 13
.It Fl R
E 13
D 6
Permit directories to be removed.
E 6
I 6
D 7
Permit directories to be removed (recursively).
E 7
I 7
Attempt to remove the file hierarchy rooted in each file argument.
The 
.Fl R
option implies the
.Fl d
option.
If the
.Fl i
option is specified, the user is prompted for confirmation before 
each directory's contents are processed (as well as before the attempt
is made to remove the directory).
If the user does not respond affirmatively, the file hierarchy rooted in
that directory is skipped.
E 7
E 6
.Pp
D 13
.Tp Fl r
E 13
I 13
.It Fl r
E 13
Equivalent to
D 6
.FL R.
E 6
I 6
.Fl R .
I 18
.It Fl W
D 19
Removes a whiteout.
E 19
I 19
Attempts to undelete the named files.
Currently, this option can only be used to recover
files covered by whiteouts.
E 19
E 18
E 6
D 13
.Tp
E 13
I 13
.El
E 13
.Pp
D 6
The following operands are available:
E 6
I 6
D 8
The following argument is available:
E 6
.Tw Fl
.Tp Ar file
A pathname of a directory entry to be removed.
.Tp
.Pp
E 8
The
.Nm rm
I 7
utility removes symbolic links, not the files referenced by the links.
.Pp
It is an error to attempt to remove the files ``.'' and ``..''.
.Pp
The
.Nm rm
E 7
D 8
utility exits with one of the following values:
.Tw Ds
.Tp Li 0
D 7
All the named directory entries were removed.
E 7
I 7
All the named files were removed or the
E 8
I 8
utility exits 0 if all of the named files or file hierarchies were removed,
or if the
E 8
.Fl f
D 8
option was specified and some of the directory entries did not exist.
E 7
.Tp Li >0
An error occurred.
E 8
I 8
option was specified and all of the existing files or file hierarchies were
removed.
If an error occurs,
.Nm rm
exits with a value >0.
E 8
D 11
.Tp
E 11
D 6
.Sh ENVIRONMENT
E 6
.Sh SEE ALSO
I 6
D 7
.Xr rmdir 1
E 7
I 7
.Xr rmdir 1 ,
I 20
.Xr undelete 2 ,
E 20
I 14
D 15
.Xr symlink 1 ,
E 15
E 14
D 8
.Xr stat 2 ,
E 8
.Xr unlink 2 ,
I 18
D 20
.Xr unwhiteout 2 ,
E 20
E 18
D 15
.Xr fts 3
E 15
I 15
.Xr fts 3 ,
.Xr symlink 7
I 17
.Sh BUGS
The
.Fl P
option assumes that the underlying file system is a fixed-block file
system.
UFS is a fixed-block file system, LFS is not.
In addition, only regular files are overwritten, other types of files
are not.
E 17
E 15
I 8
.Sh COMPATIBILITY
The
.Nm rm
utility differs from historical implementations in that the
.Fl f
option only masks attempts to remove non-existent files instead of
masking a large variety of errors.
.Pp
D 13
Also, historical BSD implementations prompted on the standard output,
E 13
I 13
Also, historical
.Bx
implementations prompted on the standard output,
E 13
not the standard error output.
E 8
E 7
E 6
.Sh STANDARDS
The
.Nm rm
D 13
function is expected to be POSIX 1003.2 compatible.
E 13
I 13
command is expected to be
.St -p1003.2
compatible.
E 13
E 5
E 2
E 1
