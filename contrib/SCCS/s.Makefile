h46846
s 00001/00001/00010
d D 8.13 95/04/29 09:29:47 bostic 53 52
c replace flex-2.4.6 with flex-2.5.2
e
s 00001/00001/00010
d D 8.12 94/08/11 06:09:16 bostic 52 51
c make nvi generic
e
s 00001/00001/00010
d D 8.11 94/04/18 16:19:06 bostic 51 50
c upgrade mh to 6.8.3a
e
s 00001/00001/00010
d D 8.10 94/04/18 13:35:53 bostic 50 49
c upgrade nvi to 1.14
e
s 00001/00001/00010
d D 8.9 94/04/04 12:23:39 bostic 49 48
c make the LBL stand out
e
s 00002/00006/00009
d D 8.8 94/04/02 16:14:39 bostic 48 47
c upgrade gzip to 1.2.4
e
s 00001/00001/00014
d D 8.7 94/04/02 14:04:31 bostic 47 46
c replace nvi.1.02 with nvi.1.11
e
s 00001/00001/00014
d D 8.6 94/02/17 14:39:30 bostic 46 45
c delete bind.4.9 in favor of bind-4.9.2
e
s 00006/00002/00009
d D 8.5 94/01/23 11:44:09 bostic 45 44
c I had forgotten this, but gzip uses hand-coded 680x0 assembly.
c Obviously this is NOT going to work on the sparc.  No problem,
c match.S contains i386 assembly too!  (Who let these guys out
c anyway? :-)); From: Chris Torek <torek@BSDI.COM>
e
s 00001/00001/00010
d D 8.4 94/01/09 15:47:17 bostic 44 43
c make nvi unnumbered, it's changing too fast
e
s 00003/00003/00008
d D 8.3 94/01/06 18:41:21 bostic 43 42
c add lex
e
s 00001/00001/00010
d D 8.2 94/01/02 21:23:03 bostic 42 41
c nvi 0.94 looks like the winner
e
s 00000/00000/00011
d D 8.1 93/06/12 15:30:29 bostic 41 40
c 4.4BSD snapshot (revision 8.1)
e
s 00002/00002/00009
d D 5.11 93/06/12 15:28:36 bostic 40 38
c move nvi here, install hunt by default
e
s 00000/00000/00011
d R 8.1 93/06/09 21:20:41 bostic 39 38
c 4.4BSD snapshot (revision 8.1)
e
s 00001/00001/00010
d D 5.10 93/06/09 21:20:37 bostic 38 36
c add an obj target
e
s 00000/00000/00011
d R 8.1 93/06/09 20:50:32 bostic 37 36
c 4.4BSD snapshot (revision 8.1)
e
s 00001/00001/00010
d D 5.9 93/06/07 23:29:24 bostic 36 35
c add bib
e
s 00003/00003/00008
d D 5.8 93/06/05 14:51:07 bostic 35 34
c add bind-.49
e
s 00001/00002/00010
d D 5.7 93/06/02 16:34:54 bostic 34 33
c add in mh6.8, from John Romine
e
s 00001/00001/00011
d D 5.6 93/06/01 11:42:36 bostic 33 32
c move to gawk-2.15.2
e
s 00003/00003/00009
d D 5.5 93/05/30 19:25:25 bostic 32 31
c groff now works
e
s 00003/00002/00009
d D 5.4 93/05/27 17:03:54 bostic 31 30
c ad in gdb-4.7.lbl
e
s 00001/00001/00010
d D 5.3 93/05/26 11:54:52 bostic 30 29
c add rcs
e
s 00001/00001/00010
d D 5.2 93/05/26 10:38:21 elan 29 28
c rename
e
s 00007/00004/00004
d D 5.1 93/05/26 10:35:19 bostic 28 27
c everything but mh and groff
e
s 00006/00033/00002
d D 4.27 90/06/30 22:54:22 bostic 27 26
c quickie for the June tape
e
s 00009/00007/00026
d D 4.26 90/06/30 22:24:58 bostic 26 25
c checkpoint for new format
e
s 00014/00024/00019
d D 4.25 87/12/05 16:05:46 bostic 25 24
c tahoe beta update
e
s 00003/00003/00040
d D 4.24 87/07/27 16:55:28 bostic 24 23
c emacs standard, make X.local
e
s 00002/00000/00041
d D 4.23 87/05/30 15:01:10 bostic 23 22
c added depend lable
e
s 00001/00001/00040
d D 4.22 87/02/12 09:43:05 mckusick 22 21
c only build things to be installed
e
s 00001/00001/00040
d D 4.21 86/06/07 00:13:25 lepreau 21 20
c typo in nntp name
e
s 00003/00002/00038
d D 4.20 86/06/06 15:26:52 mckusick 20 19
c final form for 4.3BSD distribution (like wow!)
e
s 00008/00000/00032
d D 4.19 86/05/25 15:21:15 mckusick 19 18
c default installation
e
s 00001/00001/00031
d D 4.18 86/04/25 19:27:30 mckusick 18 17
c pup goes away again...
e
s 00003/00003/00029
d D 4.17 86/03/27 23:55:00 mckusick 17 16
c sccstorcs moves into rcs; learn moves to usr.bin/learn;
c add np100 and pup
e
s 00008/00003/00024
d D 4.16 86/02/12 10:42:13 karels 16 15
c move kermit to standard
e
s 00001/00001/00026
d D 4.15 86/02/01 14:03:22 mckusick 15 14
c add pathalias
e
s 00001/00001/00026
d D 4.14 86/01/11 12:47:30 mckusick 14 13
c tn3270 moves to ucb; add B
e
s 00001/00001/00026
d D 4.13 85/09/17 19:30:39 mckusick 13 12
c add dipress to OPTDIR
e
s 00002/00002/00025
d D 4.12 85/09/09 19:19:03 mckusick 12 11
c xns becomes `local option'
e
s 00006/00003/00021
d D 4.11 85/09/07 15:35:41 mckusick 11 10
c decide on local versus generally useful things to install
e
s 00001/00001/00023
d D 4.10 85/09/04 17:07:36 mckusick 10 9
c add X window stuff
e
s 00002/00002/00022
d D 4.9 85/08/14 19:05:49 mckusick 9 8
c editing errors
e
s 00003/00002/00021
d D 4.8 85/08/13 17:44:26 mckusick 8 7
c update to current distribution
e
s 00001/00001/00022
d D 4.7 85/06/09 01:47:38 lepreau 7 6
c add `tac'
e
s 00002/00002/00021
d D 4.6 85/06/06 15:28:30 kre 6 5
c install & clean should not drop dead on errs in subdirs (added '-')
e
s 00002/00102/00021
d D 4.5 84/07/05 20:11:46 sam 5 4
c revert to previous version after moving ch* to local where they belong
e
s 00102/00002/00021
d D 4.4 84/03/27 10:13:09 layer 4 3
c rewrote for "depend"
e
s 00001/00001/00022
d D 4.3 83/07/21 14:56:22 presotto 3 2
c I added dsh to the release -- presotto
e
s 00002/00001/00021
d D 4.2 83/07/08 03:53:41 sam 2 1
c some new things
e
s 00022/00000/00000
d D 4.1 83/07/03 18:53:34 sam 1 0
c date and time created 83/07/03 18:53:34 by sam
e
u
U
t
T
I 1
D 25
#	%M%	%I%	%E%
E 25
D 27
#
I 25
# Copyright (c) 1987 Regents of the University of California.
# All rights reserved.  The Berkeley software License Agreement
# specifies the terms and conditions for redistribution.
#
#	%W%	(Berkeley)	%G%
#
E 25
DESTDIR=
CFLAGS=	-O
I 25
LIBC=	/lib/libc.a
E 27
I 27
#	%W% (Berkeley) %G%
E 27
E 25

D 27
# Programs that live in subdirectories, and have makefiles of their own.
#
D 2
SUBDIR=	apl bib courier cpm icon hyper mh news notes rcs sccstorcs spms
E 2
I 2
D 3
SUBDIR=	apl bib courier cpm icon hyper learn mh news notes rcs sccstorcs \
E 3
I 3
D 8
SUBDIR=	apl bib courier cpm dsh icon hyper learn mh news notes rcs sccstorcs \
E 3
D 7
	spms tools 
E 7
I 7
	spms tac tools 
E 8
I 8
D 9
SUBDIR=	ansi apl bib courier cpm dsh help hyper icon jove kermit learn
	mh mkmf mmdf news notes patch rcs rn sccstorcs spms sumacc sunrpc
E 9
I 9
D 11
SUBDIR=	ansi apl bib courier cpm dsh help hyper icon jove kermit learn \
	mh mkmf mmdf news notes patch rcs rn sccstorcs spms sumacc sunrpc \
E 9
D 10
	tac teft tn3270 tools xns
E 10
I 10
	tac teft tn3270 tools xns X
E 11
I 11
D 16
SUBDIR=	ansi apl bib courier cpm dsh help hyper icon jove learn mh \
E 16
I 16
D 17
SUBDIR=	ansi apl bib courier cpm dsh help hyper icon jove kermit learn mh \
E 16
D 12
	mkmf patch rcs sccstorcs spms sunrpc tac tools xns
E 12
I 12
	mkmf patch rcs sccstorcs spms sunrpc tac tools
E 17
I 17
D 25
SUBDIR=	ansi apl bib courier cpm dsh help hyper icon jove kermit mh \
D 20
	mkmf np100 patch rcs spms sunrpc tac tools
E 20
I 20
	mkmf np100 patch rcs sunrpc tac tools
E 20
E 17
E 12
#
I 19
# Default programs that are installed
#
D 24
STDINST=bib jove mh patch rcs
E 24
I 24
STDINST=ansi bib emacs jove kermit mh patch rcs
E 24
#
E 19
D 16
# Special purpose software that requires custom installation
E 16
I 16
# Special purpose software that requires custom installation,
# or may not be needed by all sites
E 16
#
D 12
OPTDIR=	kermit mmdf news notes rn sumacc tn3270 umodem X
E 12
I 12
D 13
OPTDIR=	kermit mmdf news notes rn sumacc tn3270 umodem xns X
E 13
I 13
D 14
OPTDIR=	dipress kermit mmdf news notes rn sumacc tn3270 umodem xns X
E 14
I 14
D 15
OPTDIR=	B dipress kermit mmdf news notes rn sumacc umodem xns X
E 15
I 15
D 16
OPTDIR=	B dipress kermit mmdf news notes pathalias rn sumacc umodem xns X
E 16
I 16
D 17
OPTDIR=	B dipress mmdf news notes pathalias rn sumacc umodem xns X
E 17
I 17
D 18
OPTDIR=	B dipress mmdf news notes pathalias pup rn sumacc umodem xns X
E 18
I 18
D 20
OPTDIR=	B dipress mmdf news notes pathalias rn sumacc umodem xns X
E 20
I 20
D 21
OPTDIR=	B dipress emacs enet mmdf news nnpt notes pathalias rn \
E 21
I 21
D 24
OPTDIR=	B dipress emacs enet mmdf news nntp notes pathalias rn \
E 21
	spms sumacc umodem xns X
E 24
I 24
OPTDIR=	B dipress enet mmdf news nntp notes pathalias rn \
	spms sumacc umodem xns X X.local/xlock
E 25
I 25
D 26
SUBDIR=	ansi bib emacs jove kermit mh patch rcs X X/X.local
E 26
I 26
# emacs doesn't work anymore
SUBDIR=	ansi bib jove kermit mh patch rcs X X/X.local
E 27
I 27
D 28
# all of these compile, but only ansi, patch, and vmsprep have been
# converted to the BSD style obj directories and installation paths.
#SUBDIR=	ansi bib emacs jove kermit mh patch rcs vmsprep
SUBDIR=	ansi patch vmsprep
E 28
I 28
D 32
# doesn't work: mh6.8 groff-1.08
E 32
I 32
D 34
# doesn't work: mh6.8
E 34
E 32
D 31
SUBDIR=	ansi gawk-2.15 emacs-18.57 gas-1.38 gcc-2.3.3 libg++-2.3 \
D 29
	gzip-1.0.7 jove.4.14.6 kermit.5A.188 perl-4.036
E 29
I 29
D 30
	gzip-1.0.7 jove-4.14.6 kermit-5A.188 perl-4.036
E 30
I 30
	gzip-1.0.7 jove-4.14.6 kermit-5A.188 perl-4.036 rcs-V5.6
E 31
I 31
D 33
SUBDIR=	ansi gawk-2.15 emacs-18.57 gas-1.38 gcc-2.3.3 gdb-4.7.lbl \
E 33
I 33
D 35
SUBDIR=	ansi gawk-2.15.2 emacs-18.57 gas-1.38 gcc-2.3.3 gdb-4.7.lbl \
E 33
D 32
	libg++-2.3 gzip-1.0.7 jove-4.14.6 kermit-5A.188 perl-4.036 \
	rcs-V5.6
E 32
I 32
	groff-1.08 gzip-1.0.7 jove-4.14.6 kermit-5A.188 libg++-2.3 \
D 34
	perl-4.036 rcs-V5.6
E 34
I 34
	mh-6.8 perl-4.036 rcs-V5.6
E 35
I 35
D 36
SUBDIR=	ansi bind-4.9 gawk-2.15.2 emacs-18.57 gas-1.38 gcc-2.3.3 \
E 36
I 36
D 43
SUBDIR=	ansi bib bind-4.9 gawk-2.15.2 emacs-18.57 gas-1.38 gcc-2.3.3 \
E 36
D 40
	gdb-4.7.lbl groff-1.08 gzip-1.0.7 jove-4.14.6 kermit-5A.188 \
	libg++-2.3 mh-6.8 perl-4.036 rcs-V5.6
E 40
I 40
	gdb-4.7.lbl groff-1.08 gzip-1.0.7 hunt jove-4.14.6 kermit-5A.188 \
D 42
	libg++-2.3 mh-6.8 nvi perl-4.036 rcs-V5.6
E 42
I 42
	libg++-2.3 mh-6.8 nvi.0.94 perl-4.036 rcs-V5.6
E 43
I 43
D 46
SUBDIR=	ansi bib bind-4.9 flex-2.4.6 gawk-2.15.2 emacs-18.57 gas-1.38 \
E 46
I 46
D 53
SUBDIR=	ansi bib bind-4.9.2 flex-2.4.6 gawk-2.15.2 emacs-18.57 gas-1.38 \
E 53
I 53
SUBDIR=	ansi bib bind-4.9.2 flex-2.5.2 gawk-2.15.2 emacs-18.57 gas-1.38 \
E 53
E 46
D 45
	gcc-2.3.3 gdb-4.7.lbl groff-1.08 gzip-1.0.7 hunt jove-4.14.6 \
D 44
	kermit-5A.188 libg++-2.3 mh-6.8 nvi.0.94 perl-4.036 rcs-V5.6
E 44
I 44
	kermit-5A.188 libg++-2.3 mh-6.8 nvi perl-4.036 rcs-V5.6
E 45
I 45
D 48
	gcc-2.3.3 gdb-4.7.lbl groff-1.08 hunt jove-4.14.6 kermit-5A.188 \
D 47
	libg++-2.3 mh-6.8 nvi perl-4.036 rcs-V5.6
E 47
I 47
	libg++-2.3 mh-6.8 nvi.1.11 perl-4.036 rcs-V5.6
E 47

.if ${MACHINE} != "sparc"
SUBDIR+=gzip-1.0.7
.endif
E 48
I 48
D 49
	gcc-2.3.3 gdb-4.7.lbl groff-1.08 gzip-1.2.4 hunt jove-4.14.6 \
E 49
I 49
	gcc-2.3.3 gdb-4.7.LBL groff-1.08 gzip-1.2.4 hunt jove-4.14.6 \
E 49
D 50
	kermit-5A.188 libg++-2.3 mh-6.8 nvi.1.11 perl-4.036 rcs-V5.6
E 50
I 50
D 51
	kermit-5A.188 libg++-2.3 mh-6.8 nvi.1.14 perl-4.036 rcs-V5.6
E 51
I 51
D 52
	kermit-5A.188 libg++-2.3 mh-6.8.3a nvi.1.14 perl-4.036 rcs-V5.6
E 52
I 52
	kermit-5A.188 libg++-2.3 mh-6.8.3a nvi perl-4.036 rcs-V5.6
E 52
E 51
E 50
E 48
E 45
E 44
E 43
E 42
E 40
E 35
E 34
E 32
E 31
E 30
E 29

cleandir: clean

D 38
depend tags: 
E 38
I 38
obj depend tags: 
E 38
E 28
E 27
E 26
E 25
E 24
E 20
E 18
E 17
E 16
E 15
E 14
E 13
E 12
E 11
E 10
E 8
E 7
E 2

D 4
all:	${SUBDIR}
E 4
I 4
D 5
# Shell scripts that need only be installed and are never removed.
#
SHSCRIPT= 
CSHSCRIPT= 
E 5
I 5
D 22
all:	${SUBDIR}
E 22
I 22
D 25
all:	${STDINST}
E 25
I 25
D 27
all: ${SUBDIR}
E 25
E 22
E 5
E 4

I 4
D 5
# C programs that live in the current directory and do not need
# explicit make lines.
#
STD=	chmod chown chgrp

# Programs that must run setuid to root
#
SETUID=	

# C programs that live in the current directory and need explicit make lines.
#
NSTD=	

all:	${SUBDIR} ${STD} ${NSTD}

E 5
E 4
${SUBDIR}: FRC
	cd $@; make ${MFLAGS}

I 16
D 25
${OPTDIR}: FRC
	cd $@; make ${MFLAGS} all

I 23
depend:

E 25
E 23
E 16
I 4
D 5
${STD}:
	cc ${CFLAGS} -o $@ $@.c

E 5
E 4
install:
I 19
D 25
	-for i in ${STDINST}; do \
		(cd $$i; make ${MFLAGS} DESTDIR=${DESTDIR} install); done

installall:
E 25
E 19
D 6
	for i in ${SUBDIR}; do \
E 6
I 6
D 26
	-for i in ${SUBDIR}; do \
E 6
		(cd $$i; make ${MFLAGS} DESTDIR=${DESTDIR} install); done
E 26
I 26
	@-for i in ${SUBDIR}; do \
		(echo "==> $$i"; \
		    cd $$i; make ${MFLAGS} DESTDIR=${DESTDIR} install); done
E 26
I 25
	for file in `find /usr/new/man -type f -name '*.0' -print`; do \
		sed -n -f /usr/man/makewhatis.sed $$file; \
	done | sort -u > whatis.db
	install -o bin -g bin -m 444 whatis.db ${DESTDIR}/usr/new/man/whatis
E 25
I 4
D 5
	for i in ${SHSCRIPT}; do \
		(install -c $$i.sh ${DESTDIR}/usr/ucb/$$i); done
	for i in ${CSHSCRIPT}; do \
		(install -c $$i.csh ${DESTDIR}/usr/ucb/$$i); done
	for i in ${STD} ${NSTD}; do \
		(install -s $$i ${DESTDIR}/usr/ucb/$$i); \
	done
	for i in ${SETUID}; do (chown root ${DESTDIR}/usr/ucb/$$i; \
		chmod 4755 ${DESTDIR}/usr/ucb/$$i); done
E 5
E 4

D 26
clean:
D 4
	for i in ${SUBDIR}; do (echo $$i; cd $$i; make ${MFLAGS} clean); done
E 4
I 4
D 5
	rm -f a.out core *.s *.o
	for i in ${SUBDIR}; do (cd $$i; make ${MFLAGS} clean); done
	rm -f ${STD} ${NSTD}
E 5
I 5
D 6
	for i in ${SUBDIR}; do (echo $$i; cd $$i; make ${MFLAGS} clean); done
E 6
I 6
	-for i in ${SUBDIR}; do (echo $$i; cd $$i; make ${MFLAGS} clean); done
E 26
I 26
cleandir clean:
	@-for i in ${SUBDIR}; do \
		(echo "==> $$i"; cd $$i; make ${MFLAGS} clean); done
E 26
I 16
D 25
	-for i in ${OPTDIR}; do (echo $$i; cd $$i; make ${MFLAGS} clean); done
E 25
E 16
E 6
E 5
E 4

I 25
D 26
depend:
E 25
FRC:
E 26
I 26
depend FRC:
E 27
I 27
.include <bsd.subdir.mk>
E 27
E 26
I 4
D 5

depend:
	cat </dev/null >x.c
	for i in ${STD} ${NSTD}; do \
		(echo $$i: $$i.c >>makedep; \
		/bin/grep '^#[ 	]*include' x.c $$i.c | sed \
			-e 's,<\(.*\)>,"/usr/include/\1",' \
			-e 's/:[^"]*"\([^"]*\)".*/: \1/' \
			-e 's/\.c//' >>makedep); done
	echo '/^# DO NOT DELETE THIS LINE/+2,$$d' >eddep
	echo '$$r makedep' >>eddep
	echo 'w' >>eddep
	cp Makefile Makefile.bak
	ex - Makefile < eddep
	rm eddep makedep x.c
	echo '# DEPENDENCIES MUST END AT END OF FILE' >> Makefile
	echo '# IF YOU PUT STUFF HERE IT WILL GO AWAY' >> Makefile
	echo '# see make depend above' >> Makefile

# Files listed in ${NSTD} have explicit make lines given below.

# DO NOT DELETE THIS LINE -- make depend uses it

chmod: chmod.c
chmod: /usr/include/stdio.h
chmod: /usr/include/sys/types.h
chmod: /usr/include/sys/stat.h
chmod: /usr/include/sys/dir.h
chown: chown.c
chown: /usr/include/stdio.h
chown: /usr/include/ctype.h
chown: /usr/include/sys/types.h
chown: /usr/include/sys/stat.h
chown: /usr/include/pwd.h
chown: /usr/include/sys/dir.h
chown: /usr/include/grp.h
chgrp: chgrp.c
chgrp: /usr/include/stdio.h
chgrp: /usr/include/ctype.h
chgrp: /usr/include/sys/types.h
chgrp: /usr/include/sys/stat.h
chgrp: /usr/include/grp.h
chgrp: /usr/include/pwd.h
chgrp: /usr/include/sys/dir.h
chmod: chmod.c
chmod: /usr/include/stdio.h
chmod: /usr/include/sys/types.h
chmod: /usr/include/sys/stat.h
chmod: /usr/include/sys/dir.h
chown: chown.c
chown: /usr/include/stdio.h
chown: /usr/include/ctype.h
chown: /usr/include/sys/types.h
chown: /usr/include/sys/stat.h
chown: /usr/include/pwd.h
chown: /usr/include/sys/dir.h
chown: /usr/include/grp.h
chgrp: chgrp.c
chgrp: /usr/include/stdio.h
chgrp: /usr/include/ctype.h
chgrp: /usr/include/sys/types.h
chgrp: /usr/include/sys/stat.h
chgrp: /usr/include/grp.h
chgrp: /usr/include/pwd.h
chgrp: /usr/include/sys/dir.h
# DEPENDENCIES MUST END AT END OF FILE
# IF YOU PUT STUFF HERE IT WILL GO AWAY
# see make depend above
E 5
E 4
E 1
