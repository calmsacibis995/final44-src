h10538
s 00000/00000/00376
d D 8.1 93/06/09 12:51:08 bostic 38 37
c 4.4BSD snapshot (revision 8.1)
e
s 00000/00005/00376
d D 4.36 93/06/09 12:50:11 bostic 37 36
c no copyright needed
e
s 00001/00000/00380
d D 4.35 91/10/07 13:44:01 marc 36 35
c add /dev/zero
e
s 00005/00003/00375
d D 4.34 91/04/08 16:59:18 bostic 35 34
c new copyright; att/bsd/shared
e
s 00085/00074/00293
d D 4.33 90/03/16 14:27:45 bostic 34 33
c add stdin, stdout, stderr, and fd/*; use PATH, not absolute paths
e
s 00074/00074/00293
d D 4.32 90/02/02 20:23:00 sklower 33 32
c mknod moved from etc to sbin
e
s 00010/00004/00357
d D 4.31 88/07/16 15:47:06 karels 32 31
c add tmscp, kra, csa* on 8200
e
s 00001/00001/00360
d D 4.30 87/08/08 00:01:34 lepreau 31 30
c typo on tu78 nrmt16
e
s 00016/00003/00345
d D 4.29 87/07/18 22:52:29 karels 30 29
c add qvss/ttyv0; kUmem is tested!
e
s 00032/00001/00316
d D 4.28 86/04/28 14:18:15 mckusick 29 28
c hack around to make tu78 consistent with other drives
c THIS SHOULD BE DONE IN THE DRIVER!!!
e
s 00001/00001/00316
d D 4.27 86/04/15 15:09:29 bloom 28 27
c fix comment so script will run
e
s 00003/00001/00314
d D 4.26 86/04/10 17:24:36 bloom 27 26
c even more ptys
e
s 00002/00001/00313
d D 4.25 86/04/10 15:10:07 bloom 26 25
c add fourth set of ptys
e
s 00019/00000/00295
d D 4.24 86/02/17 12:18:25 sklower 25 24
c add interlan smart [sic] board
e
s 00002/00001/00293
d D 4.23 85/10/18 13:39:48 mckusick 24 23
c allow maximum number of disks (32)
e
s 00037/00018/00257
d D 4.22 85/10/16 18:42:39 karels 23 22
c add dmz support; separate name space
e
s 00002/00002/00273
d D 4.21 85/10/10 16:05:04 bloom 22 21
c fix permissions on kUmem and drum
e
s 00001/00000/00274
d D 4.20 85/08/12 11:30:17 bloom 21 20
c add crl to std
e
s 00005/00002/00269
d D 4.19 85/07/25 10:59:39 mckusick 20 19
c correct modes on disks and klog; add dhu support
e
s 00007/00002/00264
d D 4.18 85/06/08 12:09:59 mckusick 19 18
c Add copyright
e
s 00007/00004/00259
d D 4.17 85/03/01 16:43:33 ralph 18 17
c added klog in standard. changed disks to be mode 640 root operator.
e
s 00019/00005/00244
d D 4.16 83/07/23 00:43:02 sam 17 16
c add some missing devices
e
s 00001/00001/00248
d D 4.15 83/07/04 00:07:36 sam 16 15
c fix comment
e
s 00002/00001/00247
d D 4.14 83/06/01 11:52:35 sam 15 14
c make tu58's part of standard 
e
s 00016/00000/00232
d D 4.13 83/05/11 11:27:21 helge 14 13
c added uu* devices (tu58 on dl11 controller)
e
s 00001/00006/00231
d D 4.12 83/04/13 13:48:00 helge 13 11
c more fixes to the rx stuff
e
s 00000/00005/00232
d R 4.12 83/04/13 13:43:14 helge 12 11
c more changes to rx stuff
e
s 00002/00002/00235
d D 4.11 83/04/08 15:30:50 comay 11 10
c Fixed rb block major dev (from 13 to 11).
e
s 00000/00006/00237
d D 4.10 83/04/06 18:26:28 helge 10 9
c removed partitions b - h on rx?? (block devices)
e
s 00018/00010/00225
d D 4.9 83/03/28 16:46:25 helge 9 8
c added rx02 as block device, changed name of character device to rrx??
e
s 00020/00000/00215
d D 4.8 83/03/28 11:24:41 sam 8 7
c add rx02 stuff
e
s 00001/00001/00214
d D 4.7 83/02/20 14:43:00 sam 7 6
c screwed up ut mt20 device
e
s 00001/00001/00214
d D 4.6 83/02/16 16:16:27 sam 6 5
c pty madness
e
s 00012/00005/00203
d D 4.5 83/01/02 16:02:12 sam 5 4
c add varian and versatec
e
s 00001/00001/00207
d D 4.4 82/12/31 12:31:55 sam 4 3
c move local device configurations to a separate file
e
s 00001/00001/00207
d D 4.3 82/12/25 20:09:30 sam 3 2
c bungled dn install
e
s 00002/00001/00206
d D 4.2 82/12/25 20:05:34 sam 2 1
c bungles
e
s 00207/00000/00000
d D 4.1 82/12/25 19:36:40 sam 1 0
c date and time created 82/12/25 19:36:40 by sam
e
u
U
t
T
I 2
D 19
#! /bin/sh
E 2
I 1
#	%W%	%G%
E 19
I 19
#!/bin/sh -
#
D 35
# Copyright (c) 1980 Regents of the University of California.
# All rights reserved.  The Berkeley software License Agreement
# specifies the terms and conditions for redistribution.
E 35
I 35
D 37
# Copyright (c) 1991 The Regents of the University of California.
# All rights reserved.
E 35
#
I 35
# %sccs.include.redist.sh%
#
E 37
E 35
#	%W% (Berkeley) %G%
E 19
#
I 35

E 35
# Device "make" file.  Valid arguments:
D 16
#	std	standard devices (for 730 must be followed by tu0 & tu1)
E 16
I 16
#	std	standard devices
E 16
#	local	configuration specific devices
# Tapes:
#	ht*	massbus tm03 & tu??
#	tm*	unibus tm11 & te10 emulations (e.g. Emulex tc-11)
I 32
#	tms*	unibus/qbus TMSCP (e.g. TU81, TK50)
E 32
#	ts*	unibus ts11
#	mt*	massbus tu78
#	ut*	unibus tu45 emulations (e.g.si 9700)
D 15
#	tu*	730 tu58 console cassettes (tu0 in front, tu1 on side)
E 15
I 14
#	uu*	tu58 cassettes on dl11 controller
E 14
# Disks:
#	hp*	massbus rm??
#	hk*	unibus rk06 and rk07
#	up*	other unibus devices (e.g. on Emulex sc-21v controller)
#	ra*	unibus uda50 w/ ra??
I 32
#	kra*	bi kdb50 w/ ra??
E 32
I 17
#	rl*	unibus rl02
E 17
#	rb*	730 idc w/ rb80 and/or rb02
I 8
D 9
#	rx*	unibus rx211 floppy disk (raw device only)
E 9
I 9
#	rx*	unibus rx211 floppy disk 
E 9
E 8
# Terminal multiplexors:
#	dz*	unibus dz11 and dz32
#	dh*	unibus dh11 and emulations (e.g. Able dmax, Emulex cs-11)
#	dmf*	unibus dmf32
I 20
#	dhu*    unibus dhu11
I 23
#	dmz*    unibus dmz32
E 23
E 20
# Pseudo terminals:
#	pty*	set of 16 master and slave pseudo terminals
D 5
# Line printers:
E 5
I 5
# Printers:
I 17
#	ct*	unibus parallel interface to CAT typesetter
E 17
E 5
#	lp*	unibus lp11 parallel interface
I 5
#	va*	unibus varian parallel interface
#	vp*	unibus versatec parallel interface
E 5
# Call units:
#	dn*	unibus dn11 and emulations (e.g. Able Quadracall)
I 17
# Special purpose devices:
#	ik*	unibus interface to ikonas frame buffer
#	ps*	unibus interface to e&s picture system 2
#	ad*	unibus interface to data translation a/d converter
I 25
#	np*	unibus ethernet co-processor interface, for downloading.
I 30
#	qv*	qvss (microvax) display
#	ttyv0	qvss (microvax) display reserved pty
I 34
PATH=/sbin:/bin:/usr/bin
E 34
E 30
E 25
E 17
umask 77
for i
do
case $i in

std)
D 33
	/etc/mknod console	c 0 0
D 22
	/etc/mknod drum		c 7 0	; chmod 644 drum
E 22
I 22
	/etc/mknod drum		c 7 0	; chmod 640 drum ; chgrp kmem drum
E 22
	/etc/mknod floppy	c 8 0
I 21
	/etc/mknod crl		c 35 0
I 32
	/etc/mknod csa1		c 51 0
	/etc/mknod csa2		c 51 1
E 32
E 21
I 15
	/etc/mknod tu0		b 8 0
	/etc/mknod tu1		b 8 1
E 15
D 22
	/etc/mknod kUmem	c 3 3	;: no one has ever tried using this
E 22
I 22
D 28
	/etc/mknod kUmem	c 3 3	; chmod 600 kUmem ; :untested
E 28
I 28
D 30
	/etc/mknod kUmem	c 3 3	; chmod 600 kUmem ;: untested
E 30
I 30
	/etc/mknod kUmem	c 3 3	; chmod 600 kUmem
E 30
E 28
E 22
D 18
	/etc/mknod kmem		c 3 1	; chmod 644 kmem
	/etc/mknod mem		c 3 0	; chmod 644 mem
E 18
I 18
	/etc/mknod kmem		c 3 1	; chmod 640 kmem ; chgrp kmem kmem
	/etc/mknod mem		c 3 0	; chmod 640 mem ; chgrp kmem mem
E 18
	/etc/mknod null		c 3 2	; chmod 666 null
	/etc/mknod tty		c 2 0	; chmod 666 tty
I 18
D 20
	/etc/mknod klog		c 33 0	; chmod 644 klog
E 20
I 20
	/etc/mknod klog		c 33 0	; chmod 600 klog
E 33
I 33
D 34
	/sbin/mknod console	c 0 0
	/sbin/mknod drum		c 7 0	; chmod 640 drum ; chgrp kmem drum
	/sbin/mknod floppy	c 8 0
	/sbin/mknod crl		c 35 0
	/sbin/mknod csa1		c 51 0
	/sbin/mknod csa2		c 51 1
	/sbin/mknod tu0		b 8 0
	/sbin/mknod tu1		b 8 1
	/sbin/mknod kUmem	c 3 3	; chmod 600 kUmem
	/sbin/mknod kmem		c 3 1	; chmod 640 kmem ; chgrp kmem kmem
	/sbin/mknod mem		c 3 0	; chmod 640 mem ; chgrp kmem mem
	/sbin/mknod null		c 3 2	; chmod 666 null
	/sbin/mknod tty		c 2 0	; chmod 666 tty
	/sbin/mknod klog		c 33 0	; chmod 600 klog
E 34
I 34
	mknod console		c 0 0
	mknod drum		c 7 0	; chmod 640 drum ; chgrp kmem drum
	mknod floppy		c 8 0
	mknod crl		c 35 0
	mknod csa1		c 51 0
	mknod csa2		c 51 1
	mknod tu0		b 8 0
	mknod tu1		b 8 1
	mknod kUmem		c 3 3	; chmod 600 kUmem
	mknod kmem		c 3 1	; chmod 640 kmem ; chgrp kmem kmem
	mknod mem		c 3 0	; chmod 640 mem ; chgrp kmem mem
	mknod null		c 3 2	; chmod 666 null
I 36
	mknod zero              c 3 12  ; chmod 666 zero
E 36
	mknod tty		c 2 0	; chmod 666 tty
	mknod klog		c 33 0	; chmod 600 klog
	mknod stdin		c 53 0	; chmod 666 stdin
	mknod stdout		c 53 1	; chmod 666 stdout
	mknod stderr		c 53 2	; chmod 666 stderr
	mkdir fd > /dev/null 2>&1
	(cd fd && eval `echo "" | awk ' BEGIN { \
		for (i = 0; i < 64; i++) \
			printf("mknod %d c 53 %d;", i, i)}'`)
	chown -R bin.bin fd
	chmod 555 fd
	chmod 666 fd/*
E 34
E 33
E 20
E 18
	;;

D 29
ht*|tm*|ts*|mt*|ut*)
E 29
I 29
D 32
ht*|tm*|ts*|ut*)
E 29
	umask 0 ; unit=`expr $i : '..\(.*\)'`
E 32
I 32
ht*|tm*|tms*|ts*|ut*)
	umask 0 ; unit=`expr $i : '[^0-9]*\(.*\)'`
E 32
	case $i in
	ht*) blk=1; chr=5 ;;
I 32
	tms*) blk=15; chr=38;;
E 32
	tm*) blk=5; chr=14;;
	ts*) blk=6; chr=16;;
D 30
	mt*) blk=7; chr=19;;
E 30
	ut*) blk=10; chr=17;;
	esac
	case $unit in
	0|1|2|3|4|5|6|7)
		four=`expr $unit + 4` ; eight=`expr $unit + 8`
		twelve=`expr $unit + 12`; twenty=`expr $unit + 20`
D 33
		/etc/mknod mt$unit	b $blk $unit
		/etc/mknod mt$four	b $blk $four
		/etc/mknod mt$eight	b $blk $eight
		/etc/mknod mt$twelve	b $blk $twelve
		/etc/mknod nmt$unit	b $blk $four ;: sanity w/pdp11 v7
		/etc/mknod nmt$eight	b $blk $twelve ;: ditto
		/etc/mknod nrmt$unit	c $chr $four ;: sanity w/pdp11 v7
		/etc/mknod nrmt$eight	c $chr $twelve ;: ditto
		/etc/mknod rmt$unit	c $chr $unit
		/etc/mknod rmt$four	c $chr $four
		/etc/mknod rmt$eight	c $chr $eight
		/etc/mknod rmt$twelve	c $chr $twelve
E 33
I 33
D 34
		/sbin/mknod mt$unit	b $blk $unit
		/sbin/mknod mt$four	b $blk $four
		/sbin/mknod mt$eight	b $blk $eight
		/sbin/mknod mt$twelve	b $blk $twelve
		/sbin/mknod nmt$unit	b $blk $four ;: sanity w/pdp11 v7
		/sbin/mknod nmt$eight	b $blk $twelve ;: ditto
		/sbin/mknod nrmt$unit	c $chr $four ;: sanity w/pdp11 v7
		/sbin/mknod nrmt$eight	c $chr $twelve ;: ditto
		/sbin/mknod rmt$unit	c $chr $unit
		/sbin/mknod rmt$four	c $chr $four
		/sbin/mknod rmt$eight	c $chr $eight
		/sbin/mknod rmt$twelve	c $chr $twelve
E 34
I 34
		mknod mt$unit		b $blk $unit
		mknod mt$four		b $blk $four
		mknod mt$eight		b $blk $eight
		mknod mt$twelve		b $blk $twelve
		mknod nmt$unit		b $blk $four ;: sanity w/pdp11 v7
		mknod nmt$eight		b $blk $twelve ;: ditto
		mknod nrmt$unit		c $chr $four ;: sanity w/pdp11 v7
		mknod nrmt$eight	c $chr $twelve ;: ditto
		mknod rmt$unit		c $chr $unit
		mknod rmt$four		c $chr $four
		mknod rmt$eight		c $chr $eight
		mknod rmt$twelve	c $chr $twelve
E 34
E 33
D 2
		if [ $name = ut ] 
E 2
I 2
		if [ $i = ut ] 
E 2
		then
D 7
			/etc/mknod mt$twelve	b $blk $twenty
E 7
I 7
D 33
			/etc/mknod mt$twenty	b $blk $twenty
E 7
			/etc/mknod rmt$twenty	c $chr $twenty
E 33
I 33
D 34
			/sbin/mknod mt$twenty	b $blk $twenty
			/sbin/mknod rmt$twenty	c $chr $twenty
E 34
I 34
			mknod mt$twenty		b $blk $twenty
			mknod rmt$twenty	c $chr $twenty
E 34
E 33
		fi
I 29
		;;
	*)
		echo bad unit for tape in: $1
		;;
	esac
	umask 77
	;;

mt*)
	umask 0 ; unit=`expr $i : '..\(.*\)'`
	case $i in
	mt*) blk=7; chr=19;;
	esac
	case $unit in
	0|1|2|3|4|5|6|7)
		eight=`expr $unit + 0`;
		twelve=`expr $unit + 4`; 
		sixteen=`expr $unit + 8`;
		twenty=`expr $unit + 12`;
D 33
		/etc/mknod mt8		b $blk $eight
		/etc/mknod mt12		b $blk $twelve
		/etc/mknod mt16		b $blk $sixteen
		/etc/mknod mt20		b $blk $twenty
		/etc/mknod nmt8		b $blk $twelve ;: ditto
		/etc/mknod nrmt8	c $chr $twelve ;: ditto
		/etc/mknod rmt8		c $chr $eight
		/etc/mknod rmt12	c $chr $twelve
		/etc/mknod rmt16	c $chr $sixteen
		/etc/mknod rmt20	c $chr $twenty
		/etc/mknod nmt16	b $blk $twenty ;: ditto
D 31
		/etc/mknod nrmt16	c $blk $twenty ;: ditto
E 31
I 31
		/etc/mknod nrmt16	c $chr $twenty ;: ditto
E 33
I 33
D 34
		/sbin/mknod mt8		b $blk $eight
		/sbin/mknod mt12		b $blk $twelve
		/sbin/mknod mt16		b $blk $sixteen
		/sbin/mknod mt20		b $blk $twenty
		/sbin/mknod nmt8		b $blk $twelve ;: ditto
		/sbin/mknod nrmt8	c $chr $twelve ;: ditto
		/sbin/mknod rmt8		c $chr $eight
		/sbin/mknod rmt12	c $chr $twelve
		/sbin/mknod rmt16	c $chr $sixteen
		/sbin/mknod rmt20	c $chr $twenty
		/sbin/mknod nmt16	b $blk $twenty ;: ditto
		/sbin/mknod nrmt16	c $chr $twenty ;: ditto
E 34
I 34
		mknod mt8		b $blk $eight
		mknod mt12		b $blk $twelve
		mknod mt16		b $blk $sixteen
		mknod mt20		b $blk $twenty
		mknod nmt8		b $blk $twelve ;: ditto
		mknod nrmt8		c $chr $twelve ;: ditto
		mknod rmt8		c $chr $eight
		mknod rmt12		c $chr $twelve
		mknod rmt16		c $chr $sixteen
		mknod rmt20		c $chr $twenty
		mknod nmt16		b $blk $twenty ;: ditto
		mknod nrmt16		c $chr $twenty ;: ditto
E 34
E 33
E 31
E 29
D 18
		umask 77
E 18
		;;
	*)
D 11
		bad unit for tape in: $1
E 11
I 11
		echo bad unit for tape in: $1
E 11
		;;
	esac
I 18
	umask 77
E 18
	;;

D 17
hp*|hk*|up*|ra*|rb*)
E 17
I 17
D 32
hp*|hk*|up*|ra*|rl*|rb*)
E 32
I 32
hp*|hk*|up*|ra*|kra*|rl*|rb*)
E 32
E 17
D 18
	unit=`expr $i : '..\(.*\)'`
E 18
I 18
	umask 2 ; unit=`expr $i : '..\(.*\)'`
E 18
	case $i in
	hp*) name=hp; blk=0; chr=4;;
	hk*) name=hk; blk=3; chr=11;;
	up*) name=up; blk=2; chr=13;;
	ra*) name=ra; blk=9; chr=9;;
I 32
	kra*) name=kra; blk=16; chr=52;;
E 32
D 11
	rb*) name=rb; blk=13; chr=23;;
E 11
I 11
	rb*) name=rb; blk=11; chr=23;;
I 17
	rl*) name=rl; blk=14; chr=32;;
E 17
E 11
	esac
	case $unit in
D 24
	0|1|2|3|4|5|6|7)
E 24
I 24
	0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|\
	17|18|19|20|21|22|23|24|25|26|27|28|29|30|31)
E 24
D 33
		/etc/mknod ${name}${unit}a	b $blk `expr $unit '*' 8 + 0`
		/etc/mknod ${name}${unit}b	b $blk `expr $unit '*' 8 + 1`
		/etc/mknod ${name}${unit}c	b $blk `expr $unit '*' 8 + 2`
		/etc/mknod ${name}${unit}g	b $blk `expr $unit '*' 8 + 6`
		/etc/mknod r${name}${unit}a	c $chr `expr $unit '*' 8 + 0`
		/etc/mknod r${name}${unit}b	c $chr `expr $unit '*' 8 + 1`
		/etc/mknod r${name}${unit}c	c $chr `expr $unit '*' 8 + 2`
		/etc/mknod r${name}${unit}g	c $chr `expr $unit '*' 8 + 6`
E 33
I 33
D 34
		/sbin/mknod ${name}${unit}a	b $blk `expr $unit '*' 8 + 0`
		/sbin/mknod ${name}${unit}b	b $blk `expr $unit '*' 8 + 1`
		/sbin/mknod ${name}${unit}c	b $blk `expr $unit '*' 8 + 2`
		/sbin/mknod ${name}${unit}g	b $blk `expr $unit '*' 8 + 6`
		/sbin/mknod r${name}${unit}a	c $chr `expr $unit '*' 8 + 0`
		/sbin/mknod r${name}${unit}b	c $chr `expr $unit '*' 8 + 1`
		/sbin/mknod r${name}${unit}c	c $chr `expr $unit '*' 8 + 2`
		/sbin/mknod r${name}${unit}g	c $chr `expr $unit '*' 8 + 6`
E 34
I 34
		mknod ${name}${unit}a	b $blk `expr $unit '*' 8 + 0`
		mknod ${name}${unit}b	b $blk `expr $unit '*' 8 + 1`
		mknod ${name}${unit}c	b $blk `expr $unit '*' 8 + 2`
		mknod ${name}${unit}g	b $blk `expr $unit '*' 8 + 6`
		mknod r${name}${unit}a	c $chr `expr $unit '*' 8 + 0`
		mknod r${name}${unit}b	c $chr `expr $unit '*' 8 + 1`
		mknod r${name}${unit}c	c $chr `expr $unit '*' 8 + 2`
		mknod r${name}${unit}g	c $chr `expr $unit '*' 8 + 6`
E 34
E 33
		if [ $name != hk ]
		then
D 33
		/etc/mknod ${name}${unit}d	b $blk `expr $unit '*' 8 + 3`
		/etc/mknod ${name}${unit}e	b $blk `expr $unit '*' 8 + 4`
		/etc/mknod ${name}${unit}f	b $blk `expr $unit '*' 8 + 5`
		/etc/mknod ${name}${unit}h	b $blk `expr $unit '*' 8 + 7`
		/etc/mknod r${name}${unit}d	c $chr `expr $unit '*' 8 + 3`
		/etc/mknod r${name}${unit}e	c $chr `expr $unit '*' 8 + 4`
		/etc/mknod r${name}${unit}f	c $chr `expr $unit '*' 8 + 5`
		/etc/mknod r${name}${unit}h	c $chr `expr $unit '*' 8 + 7`
E 33
I 33
D 34
		/sbin/mknod ${name}${unit}d	b $blk `expr $unit '*' 8 + 3`
		/sbin/mknod ${name}${unit}e	b $blk `expr $unit '*' 8 + 4`
		/sbin/mknod ${name}${unit}f	b $blk `expr $unit '*' 8 + 5`
		/sbin/mknod ${name}${unit}h	b $blk `expr $unit '*' 8 + 7`
		/sbin/mknod r${name}${unit}d	c $chr `expr $unit '*' 8 + 3`
		/sbin/mknod r${name}${unit}e	c $chr `expr $unit '*' 8 + 4`
		/sbin/mknod r${name}${unit}f	c $chr `expr $unit '*' 8 + 5`
		/sbin/mknod r${name}${unit}h	c $chr `expr $unit '*' 8 + 7`
E 34
I 34
		mknod ${name}${unit}d	b $blk `expr $unit '*' 8 + 3`
		mknod ${name}${unit}e	b $blk `expr $unit '*' 8 + 4`
		mknod ${name}${unit}f	b $blk `expr $unit '*' 8 + 5`
		mknod ${name}${unit}h	b $blk `expr $unit '*' 8 + 7`
		mknod r${name}${unit}d	c $chr `expr $unit '*' 8 + 3`
		mknod r${name}${unit}e	c $chr `expr $unit '*' 8 + 4`
		mknod r${name}${unit}f	c $chr `expr $unit '*' 8 + 5`
		mknod r${name}${unit}h	c $chr `expr $unit '*' 8 + 7`
E 34
E 33
		fi
I 18
		chgrp operator ${name}${unit}[a-h] r${name}${unit}[a-h]
I 20
		chmod 640 ${name}${unit}[a-h] r${name}${unit}[a-h]
E 20
E 18
		;;
	*)
		echo bad unit for disk in: $i
		;;
	esac
I 18
	umask 77
E 18
	;;

I 8
rx*)
	unit=`expr $i : '..\(.*\)'`
D 9
	name=rx; chr=30
E 9
I 9
	name=rx; chr=30; blk=12;
E 9
	case $unit in
	0|1|2|3|4|5|6|7)
D 9
		/etc/mknod ${name}${unit}a	c $chr `expr $unit '*' 8 + 0`
		/etc/mknod ${name}${unit}b	c $chr `expr $unit '*' 8 + 1`
		/etc/mknod ${name}${unit}c	c $chr `expr $unit '*' 8 + 2`
		/etc/mknod ${name}${unit}d	c $chr `expr $unit '*' 8 + 3`
		/etc/mknod ${name}${unit}e	c $chr `expr $unit '*' 8 + 4`
		/etc/mknod ${name}${unit}f	c $chr `expr $unit '*' 8 + 5`
		/etc/mknod ${name}${unit}g	c $chr `expr $unit '*' 8 + 6`
		/etc/mknod ${name}${unit}h	c $chr `expr $unit '*' 8 + 7`
E 9
I 9
D 13
		/etc/mknod ${name}${unit}a	b $blk `expr $unit '*' 8 + 0`
		/etc/mknod ${name}${unit}b	b $blk `expr $unit '*' 8 + 1`
E 13
I 13
D 33
		/etc/mknod ${name}${unit}	b $blk `expr $unit '*' 8 + 0`
E 13
D 10
		/etc/mknod ${name}${unit}c	b $blk `expr $unit '*' 8 + 2`
		/etc/mknod ${name}${unit}d	b $blk `expr $unit '*' 8 + 3`
		/etc/mknod ${name}${unit}e	b $blk `expr $unit '*' 8 + 4`
		/etc/mknod ${name}${unit}f	b $blk `expr $unit '*' 8 + 5`
		/etc/mknod ${name}${unit}g	b $blk `expr $unit '*' 8 + 6`
		/etc/mknod ${name}${unit}h	b $blk `expr $unit '*' 8 + 7`
E 10
		/etc/mknod r${name}${unit}a	c $chr `expr $unit '*' 8 + 0`
		/etc/mknod r${name}${unit}b	c $chr `expr $unit '*' 8 + 1`
		/etc/mknod r${name}${unit}c	c $chr `expr $unit '*' 8 + 2`
		/etc/mknod r${name}${unit}d	c $chr `expr $unit '*' 8 + 3`
E 33
I 33
D 34
		/sbin/mknod ${name}${unit}	b $blk `expr $unit '*' 8 + 0`
		/sbin/mknod r${name}${unit}a	c $chr `expr $unit '*' 8 + 0`
		/sbin/mknod r${name}${unit}b	c $chr `expr $unit '*' 8 + 1`
		/sbin/mknod r${name}${unit}c	c $chr `expr $unit '*' 8 + 2`
		/sbin/mknod r${name}${unit}d	c $chr `expr $unit '*' 8 + 3`
E 34
I 34
		mknod ${name}${unit}	b $blk `expr $unit '*' 8 + 0`
		mknod r${name}${unit}a	c $chr `expr $unit '*' 8 + 0`
		mknod r${name}${unit}b	c $chr `expr $unit '*' 8 + 1`
		mknod r${name}${unit}c	c $chr `expr $unit '*' 8 + 2`
		mknod r${name}${unit}d	c $chr `expr $unit '*' 8 + 3`
E 34
E 33
D 13
		/etc/mknod r${name}${unit}e	c $chr `expr $unit '*' 8 + 4`
		/etc/mknod r${name}${unit}f	c $chr `expr $unit '*' 8 + 5`
		/etc/mknod r${name}${unit}g	c $chr `expr $unit '*' 8 + 6`
		/etc/mknod r${name}${unit}h	c $chr `expr $unit '*' 8 + 7`
E 13
E 9
		;;
	*)
		echo bad unit for floppy disk in: $i
		;;
	esac
	;;
I 14

uu*)
	unit=`expr $i : '..\(.*\)'`
	name=uu; blk=13;
	case $unit in
	0|1|2|3)
D 33
		/etc/mknod ${name}${unit}	b $blk `expr $unit '*' 2 + 0`
		/etc/mknod ${name}${unit}a	b $blk `expr $unit '*' 2 + 1`
E 33
I 33
D 34
		/sbin/mknod ${name}${unit}	b $blk `expr $unit '*' 2 + 0`
		/sbin/mknod ${name}${unit}a	b $blk `expr $unit '*' 2 + 1`
E 34
I 34
		mknod ${name}${unit}	b $blk `expr $unit '*' 2 + 0`
		mknod ${name}${unit}a	b $blk `expr $unit '*' 2 + 1`
E 34
E 33
		;;
	*)
		echo bad unit for uu cassette in: $i
		;;
	esac
	;;

E 14
E 8
dz*)
	unit=`expr $i : 'dz\(.*\)'`
	case $unit in
	0|1|2|3|4|5|6|7)
		eval `echo $unit | awk ' { u = $1 } END {
		    for (i = 0; i < 8; i++)
D 33
			printf("/etc/mknod tty%02d c 1 %d; ",u*8+i,u*8+i); }'`
E 33
I 33
D 34
			printf("/sbin/mknod tty%02d c 1 %d; ",u*8+i,u*8+i); }'`
E 34
I 34
			printf("mknod tty%02d c 1 %d; ",u*8+i,u*8+i); }'`
E 34
E 33
		;;
	*)
		echo bad unit for dz in: $i
		;;
	esac
	;;

D 20
dh*|dmf*)
E 20
I 20
D 23
dhu*|dh*|dmf*)
E 23
I 23
dhu*|dh*|dmf*|dmz*)
E 23
E 20
	case $i in
I 20
D 23
	dhu*) name=dhu; major=34;;
E 20
	dh*) name=dh; major=12;;
	dmf*) name=dmf; major=22;;
E 23
I 23
	dmz*)	name=dmz; major=37; count=24;
		unit=`expr $i : "$name\(.*\)"`
		case $unit in
		0) ch=a ;; 1) ch=b ;; 2) ch=c ;; 3) ch=e ;;
		4) ch=f ;; 5) ch=g ;;
		*) echo bad unit for $name in: $i ;;
		esac;;
	dmf*)	name=dmf; major=22; count=8;
		unit=`expr $i : "$name\(.*\)"`
		case $unit in
		0) ch=A ;; 1) ch=B ;; 2) ch=C ;; 3) ch=E ;;
		4) ch=F ;; 5) ch=G ;; 6) ch=H ;; 7) ch=I ;;
		*) echo bad unit for $name in: $i ;;
		esac;;
	dhu*)	name=dhu; major=34; count=16;
		unit=`expr $i : "$name\(.*\)"`;
		case $unit in
		0) ch=S ;; 1) ch=T ;; 2) ch=U ;; 3) ch=V ;;
		4) ch=W ;; 5) ch=X ;; 6) ch=Y ;; 7) ch=Z ;;
		*) echo bad unit for $name in: $i ;;
		esac;;
	dh*)	name=dh; major=12; count=16;
		unit=`expr $i : "$name\(.*\)"`
		case $unit in
		0) ch=h ;; 1) ch=i ;; 2) ch=j ;; 3) ch=k ;;
		4) ch=l ;; 5) ch=m ;; 6) ch=n ;; 7) ch=o ;;
		*) echo bad unit for $name in: $i ;;
		esac;;
E 23
	esac
D 23
	unit=`expr $i : "$name\(.*\)"`
	case $unit in
	0) ch=h ;; 1) ch=i ;; 2) ch=j ;; 3) ch=k ;;
	4) ch=l ;; 5) ch=m ;; 6) ch=n ;; 7) ch=o ;;
	*) echo bad unit for $name in: $i ;;
	esac
	case $ch in
	h|i|j|k|l|m|n|o)
		eval `echo $ch $unit $major |
		  awk ' { ch = $1; u = 16 * $2; m = $3 } END {
		    for (i = 0; i < 16; i++)
			printf("/etc/mknod tty%s%x c %d %d; ",ch,i,m,u+i); }'`
		;;
	esac
E 23
I 23
	eval `echo $ch $unit $major $count |
	  awk ' { ch = $1; u = $4 * $2; m = $3; cnt = $4 } END {
	    for (i = 0; i < cnt; i++)
	      if (i < 10)
D 33
		printf("/etc/mknod tty%s%x c %d %d; ",ch,i,m,u+i);
E 33
I 33
D 34
		printf("/sbin/mknod tty%s%x c %d %d; ",ch,i,m,u+i);
E 34
I 34
		printf("mknod tty%s%x c %d %d; ",ch,i,m,u+i);
E 34
E 33
	      else
D 33
		printf("/etc/mknod tty%s%c c %d %d; ",ch,87+i,m,u+i); }'`
E 33
I 33
D 34
		printf("/sbin/mknod tty%s%c c %d %d; ",ch,87+i,m,u+i); }'`
E 34
I 34
		printf("mknod tty%s%c c %d %d; ",ch,87+i,m,u+i); }'`
E 34
E 33
E 23
	;;

D 5
lp*)
	unit=`expr $i : 'lp\(.*\)'`
E 5
I 5
lp*|va*|vp*)
	case $i in
	lp*) name=lp; major=15;;
	va*) name=va; major=10;;
	vp*) name=vp; major=6;;
	esac
	unit=`expr $i : "$name\(.*\)"`
E 5
	case $unit in
	0|1|2|3|4|5|6|7)
D 5
		/etc/mknod $i c 15 $unit;
E 5
I 5
D 33
		/etc/mknod $i c $major $unit;
E 33
I 33
D 34
		/sbin/mknod $i c $major $unit;
E 34
I 34
		mknod $i c $major $unit;
E 34
E 33
E 5
		chmod 666 $i
		;;
	*)
D 5
		echo bad unit for lp in: $i
E 5
I 5
		echo bad unit for $name in: $i
E 5
		;;
	esac
	;;

pty*)
	class=`expr $i : 'pty\(.*\)'`
	case $class in
	0) offset=0 name=p;;
	1) offset=16 name=q;;
	2) offset=32 name=r;;
I 26
	3) offset=48 name=s;;
I 27
	4) offset=64 name=t;;
	5) offset=80 name=u;;
E 27
E 26
	*) echo bad unit for pty in: $i;;
	esac
	case $class in
D 26
	0|1|2)
E 26
I 26
D 27
	0|1|2|3)
E 27
I 27
	0|1|2|3|4|5)
E 27
E 26
		umask 0
D 6
		eval `echo $class $name | awk ' { b=$1; n=$2 } END {
E 6
I 6
		eval `echo $offset $name | awk ' { b=$1; n=$2 } END {
E 6
			for (i = 0; i < 16; i++)
D 33
				printf("/etc/mknod tty%s%x c 20 %d; \
					/etc/mknod pty%s%x c 21 %d; ", \
E 33
I 33
D 34
				printf("/sbin/mknod tty%s%x c 20 %d; \
					/sbin/mknod pty%s%x c 21 %d; ", \
E 34
I 34
				printf("mknod tty%s%x c 20 %d; \
					mknod pty%s%x c 21 %d; ", \
E 34
E 33
					n, i, b+i, n, i, b+i); }'`
		umask 77
I 25
		;;
	esac
	;;

np*)
	class=`expr $i : 'np\(.*\)'`
	case $class in
	0) offset=0 name=0;;
	1) offset=16 name=1;;
	2) offset=32 name=2;;
D 30
	*) echo bad unit for pty in: $i;;
E 30
I 30
	*) echo bad unit for np in: $i;;
E 30
	esac
	case $class in
	0|1|2)
		eval `echo $offset | awk ' { b=$1 } END {
			for (i = 0; i < 4; i++)
D 33
				printf("/etc/mknod np%02d c 39 %d;", \
E 33
I 33
D 34
				printf("/sbin/mknod np%02d c 39 %d;", \
E 34
I 34
				printf("mknod np%02d c 39 %d;", \
E 34
E 33
					b+i, b+i); }'`
E 25
		;;
	esac
	;;

D 17
dn*)
	unit=`expr $i : 'dn\(.*\)'`
E 17
I 17
dn*|ik*|ps*|ad*|ct*)
	unit=`expr $i : '..\(.*\)'`
	case $i in
	ct*) name=ct; chr=18;;
	dn*) name=cu; chr=24;;
	ps*) name=ps; chr=27;;
	ad*) name=ad; chr=29;;
	ik*) name=ik; chr=31;;
	esac
E 17
D 3
	case $i in
E 3
I 3
	case $unit in
E 3
	0|1|2|3|4|5|6|7)
		umask 0
D 17
		/etc/mknod cu${unit} c 24 ${unit}
E 17
I 17
D 33
		/etc/mknod ${name}${unit} c ${chr} ${unit}
E 33
I 33
D 34
		/sbin/mknod ${name}${unit} c ${chr} ${unit}
E 34
I 34
		mknod ${name}${unit} c ${chr} ${unit}
E 34
E 33
E 17
		umask 77
		;;
	*)
D 17
		echo bad unit for dn in: $i
E 17
I 17
		echo bad unit for ${name} in: $i
E 17
		;;
	esac
I 30
	;;

qv0)
D 33
	/etc/mknod qv0 c 40 0
	/etc/mknod qvcons c 40 1
	/etc/mknod mouse c 40 2
E 33
I 33
D 34
	/sbin/mknod qv0 c 40 0
	/sbin/mknod qvcons c 40 1
	/sbin/mknod mouse c 40 2
E 34
I 34
	mknod qv0 c 40 0
	mknod qvcons c 40 1
	mknod mouse c 40 2
E 34
E 33
	;;

ttyv0)
D 32
	if [ ! -f ttyqf ]; then sh ./MAKEDEV pty1; fi
E 32
I 32
	if [ ! -f ttyqe ]; then sh ./MAKEDEV pty1; fi
E 32
	mv ttyqf ttyv0
	mv ptyqf ptyv0
E 30
	;;

local)
D 4
	echo 'no "local" devices defined'
E 4
I 4
	sh MAKEDEV.local
E 4
	;;
esac
done
E 1
