h58936
s 00002/00002/00120
d D 8.1 93/06/04 12:02:26 bostic 12 11
c 4.4BSD snapshot (revision 8.1); add 1993 to copyright
e
s 00090/00062/00032
d D 6.9 91/04/19 14:49:13 cael 11 10
c macro and text revision (-mdoc version 3)
e
s 00001/00011/00093
d D 6.8 90/06/23 17:56:18 trent 10 9
c new copyright notice
e
s 00008/00005/00096
d D 6.7 89/08/18 19:30:03 mckusick 9 8
c update for new fstab format that supports vnodes
e
s 00011/00009/00090
d D 6.6 88/09/17 12:49:52 bostic 8 7
c rework get{gr,pw,fs}ent to all be about the same;
c fix some obvious problems, document that set{gr,pw,fs}ent closes any
c open files
e
s 00025/00007/00074
d D 6.5 88/09/16 17:09:35 bostic 7 6
c document all return values, add Berkeley copyright, minor cleanups
e
s 00008/00010/00073
d D 6.4 88/08/15 12:36:10 bostic 6 5
c remove getfstype(3); doc that lines w/ type of FSTAB_XX are ignored
e
s 00001/00001/00082
d D 6.3 86/05/12 18:18:37 karels 5 4
c fmt
e
s 00001/00001/00082
d D 6.2 86/05/12 17:40:50 karels 4 3
c move from 3X to 3
e
s 00001/00001/00082
d D 6.1 85/05/15 15:28:59 mckusick 3 2
c 4.3BSD beta release manual page
e
s 00024/00026/00059
d D 5.1 85/05/15 15:28:16 mckusick 2 1
c manual page distributed with 4.2BSD
e
s 00085/00000/00000
d D 4.1 85/05/15 15:27:21 mckusick 1 0
c manual page distributed with 4.1BSD
e
u
U
t
T
I 1
D 7
.\" Copyright (c) 1980 Regents of the University of California.
.\" All rights reserved.  The Berkeley software License Agreement
.\" specifies the terms and conditions for redistribution.
E 7
I 7
D 11
.\" Copyright (c) 1983 The Regents of the University of California.
E 11
I 11
D 12
.\" Copyright (c) 1983, 1991 The Regents of the University of California.
E 11
.\" All rights reserved.
E 12
I 12
.\" Copyright (c) 1983, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
E 12
E 7
.\"
I 7
D 10
.\" Redistribution and use in source and binary forms are permitted
.\" provided that the above copyright notice and this paragraph are
.\" duplicated in all such forms and that any documentation,
.\" advertising materials, and other materials related to such
.\" distribution and use acknowledge that the software was developed
.\" by the University of California, Berkeley.  The name of the
.\" University may not be used to endorse or promote products derived
.\" from this software without specific prior written permission.
.\" THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
.\" WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
E 10
I 10
.\" %sccs.include.redist.man%
E 10
.\"
E 7
D 11
.\"	%W% (Berkeley) %G%
E 11
I 11
.\"     %W% (Berkeley) %G%
E 11
.\"
D 2
.TH GETFSENT 3 
E 2
I 2
D 3
.TH GETFSENT 3X  "19 January 1983"
E 3
I 3
D 4
.TH GETFSENT 3X  "%Q%"
E 4
I 4
D 11
.TH GETFSENT 3  "%Q%"
E 4
E 3
E 2
.UC 4
.SH NAME
D 2
getfsent, getfsspec, getfsfile, setfsent, endfsent \- get file system descriptor file entry
E 2
I 2
D 6
getfsent, getfsspec, getfsfile, getfstype, setfsent, endfsent \- get file system descriptor file entry
E 6
I 6
getfsent, getfsspec, getfsfile, setfsent, endfsent \- get file system descriptor file entry
E 6
E 2
.SH SYNOPSIS
.nf
.B #include <fstab.h>
.PP
.B struct fstab *getfsent()
.PP
D 2
.B struct fstab *getfsspec(name)
.B char *name;
E 2
I 2
.B struct fstab *getfsspec(spec)
.B char *spec;
E 2
.PP
D 2
.B struct fstab *getfsfile(name)
.B char *name;
E 2
I 2
.B struct fstab *getfsfile(file)
.B char *file;
E 2
.PP
D 2
.B int setfsend()
E 2
I 2
D 6
.B struct fstab *getfstype(type)
.B char *type;
E 2
.PP
E 6
I 2
.B int setfsent()
.PP
E 2
D 7
.B int endfsent()
E 7
I 7
.B void endfsent()
E 7
.fi
.SH DESCRIPTION
D 2
.I Getfsent,
.I getfsspec
E 2
I 2
.IR Getfsent ,
.IR getfsspec ,
E 11
I 11
.Dd %Q%
.Dt GETFSENT 3
.Os BSD 4
.Sh NAME
.Nm getfsent ,
.Nm getfsspec ,
.Nm getfsfile ,
.Nm setfsent ,
.Nm endfsent
.Nd get file system descriptor file entry
.Sh SYNOPSIS
.Fd #include <fstab.h>
.Ft fstab *
.Fn getfsent void
.Ft struct fstab *
.Fn getfsspec "const char *spec"
.Ft struct fstab *
.Fn getfsfile "const char *file"
.Ft int
.Fn setfsent void
.Ft void
.Fn endfsent void
.Sh DESCRIPTION
The
.Fn getfsent ,
.Fn getfsspec ,
E 11
D 6
.IR getfstype ,
E 6
E 2
and
D 11
.I getfsfile
E 11
I 11
.Fn getfsfile
functions
E 11
D 2
each return a pointer to an object with the
following structure
containing the broken-out
fields of a line in the file system description file,
.I /usr/include/fstab.h.
E 2
I 2
each return a pointer to an object with the following structure
D 6
containing the broken-out fields of a line in the file system description file,
E 6
I 6
containing the broken-out fields of a line in the file system
description file,
E 6
D 11
.IR < fstab.h >.
E 2
.RS
.PP
.nf
I 9
.ta \w'#define 'u +\w'char\ \ 'u +\w'*fs_vfstype;\ \ 'u
E 11
I 11
.Aq Pa fstab.h .
.Bd -literal -offset indent
E 11
E 9
D 2
#define	FSNMLG	16

E 2
D 5
struct fstab{
E 5
I 5
struct fstab {
E 5
D 2
	char	fs_spec[FSNMLG];
	char	fs_file[FSNMLG];
	char	fs_type[3];
E 2
I 2
D 9
	char	*fs_spec;
	char	*fs_file;
	char	*fs_type;
E 2
	int	fs_freq;
	int	fs_passno;
E 9
I 9
	char	*fs_spec;	/* block special device name */
	char	*fs_file;	/* file system path prefix */
	char	*fs_vfstype;	/* type of file system */
	char	*fs_mntops;	/* comma separated mount options */
	char	*fs_type;	/* rw, ro, sw, or xx */
	int	fs_freq;	/* dump frequency, in days */
	int	fs_passno;	/* pass number on parallel dump */
E 9
};
D 11
.ft R
.ad
.fi
.RE
.PP
E 11
I 11
.Ed
.Pp
E 11
The fields have meanings described in
D 11
.IR fstab (5).
.PP
D 8
.I Getfsent
reads the next line of the file, opening the file if necessary.
.PP
E 8
.I Setfsent
E 11
I 11
.Xr fstab 5 .
.Pp
The
.Fn setfsent
function
E 11
D 7
opens and rewinds the file.
E 7
I 7
D 8
opens the file, or rewinds it if it is already open.
E 8
I 8
opens the file (closing any previously opened file) or rewinds it
if it is already open.
E 8
E 7
D 11
.PP
.I Endfsent
E 11
I 11
.Pp
The
.Fn endfsent
function
E 11
closes the file.
D 11
.PP
.I Getfsspec
E 11
I 11
.Pp
The
.Fn getfsspec
E 11
and
D 11
.I getfsfile
E 11
I 11
.Fn getfsfile
functions
E 11
D 2
sequentially search from the beginning
of the file until a matching
special file name or
file system file name is found,
E 2
I 2
D 8
sequentially search from the beginning of the file until a matching
D 6
special file name or file system file name is found,
E 2
or until EOF is encountered.
I 2
.I Getfstype
does likewise, matching on the file system type field.
E 6
I 6
special file name or file system file name is found, or until EOF is
encountered.
E 8
I 8
search the entire file (opening it if necessary) for a matching special
file name or file system file name.
E 8
D 11
.PP
E 11
I 11
.Pp
E 11
D 8
Entries in the file with a type field equivalent to \fIFSTAB_XX\fP
E 8
I 8
For programs wishing to read the entire database,
D 11
.I getfsent
E 11
I 11
.Fn getfsent
E 11
reads the next entry (opening the file if necessary).
D 11
.PP
E 11
I 11
.Pp
E 11
All entries in the file with a type field equivalent to
D 11
.I FSTAB_XX
E 11
I 11
.Dv FSTAB_XX
E 11
E 8
are ignored.
E 6
E 2
D 11
.SH FILES
/etc/fstab
.SH "SEE ALSO"
fstab(5)
.SH DIAGNOSTICS
D 7
Null pointer
(0) returned on EOF or error.
E 7
I 7
.IR Getfsent ,
.IR getfsspec ,
E 11
I 11
.Sh RETURN VALUES
The
.Fn getfsent ,
.Fn getfsspec ,
E 11
and
D 11
.I getfsfile
return a null pointer (0) on EOF or error.
.I Setfsent
E 11
I 11
.Fn getfsfile
functions
return a null pointer (0) on
.Dv EOF
or error.
The
.Fn setfsent
function
E 11
D 8
returns 0 on success, 1 on failure.
E 8
I 8
returns 0 on failure, 1 on success.
E 8
D 11
.I Endfsent
E 11
I 11
The
.Fn endfsent
function
E 11
returns nothing.
E 7
D 11
.SH BUGS
D 2
All information
is contained in a static area
so it must be copied if it is
E 2
I 2
All information is contained in a static area so it must be copied if it is
E 2
to be saved.
E 11
I 11
.Sh FILES
.Bl -tag -width /etc/fstab -compact
.It Pa /etc/fstab
.El
.Sh SEE ALSO
.Xr fstab 5
.Sh HISTORY
The
.Fn getfsent
function appeared in 
.Bx 4.0 ;
the
.Fn endfsent ,
.Fn getfsfile ,
.Fn getfsspec ,
and 
.Fn setfsent
functions appeared in
.Bx 4.3 .
.Sh BUGS
These functions use static data storage;
if the data is needed for future use, it should be
copied before any subsequent calls overwrite it.
E 11
E 1
