h53669
s 00002/00002/00069
d D 8.1 93/06/04 12:03:28 bostic 7 6
c 4.4BSD snapshot (revision 8.1); add 1993 to copyright
e
s 00054/00037/00017
d D 6.5 91/04/19 14:49:17 cael 6 5
c macro and text revision (-mdoc version 3)
e
s 00001/00011/00053
d D 6.4 90/06/23 17:55:59 trent 5 4
c new copyright notice
e
s 00014/00003/00050
d D 6.3 88/11/30 19:55:32 bostic 4 3
c add Berkeley copyright
e
s 00007/00003/00046
d D 6.2 86/12/01 18:39:35 bostic 3 1
c added "see also"
e
s 00012/00025/00024
d R 6.2 86/11/25 21:05:10 bostic 2 1
c rewrote to reflect reality
e
s 00049/00000/00000
d D 6.1 85/11/08 18:31:09 mckusick 1 0
c date and time created 85/11/08 18:31:09 by mckusick
e
u
U
t
T
I 1
D 4
.\" Copyright (c) 1985 Regents of the University of California.
.\" All rights reserved.  The Berkeley software License Agreement
.\" specifies the terms and conditions for redistribution.
E 4
I 4
D 6
.\" Copyright (c) 1985 The Regents of the University of California.
E 6
I 6
D 7
.\" Copyright (c) 1985, 1991 The Regents of the University of California.
E 6
.\" All rights reserved.
E 7
I 7
.\" Copyright (c) 1985, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
E 7
.\"
D 5
.\" Redistribution and use in source and binary forms are permitted
.\" provided that the above copyright notice and this paragraph are
.\" duplicated in all such forms and that any documentation,
.\" advertising materials, and other materials related to such
.\" distribution and use acknowledge that the software was developed
.\" by the University of California, Berkeley.  The name of the
.\" University may not be used to endorse or promote products derived
.\" from this software without specific prior written permission.
.\" THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
.\" WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
E 5
I 5
.\" %sccs.include.redist.man%
E 5
E 4
.\"
D 6
.\"	%W% (Berkeley) %G%
E 6
I 6
.\"     %W% (Berkeley) %G%
E 6
.\"
D 6
.TH GETUSERSHELL 3  "%Q%"
.UC 6
.SH NAME
getusershell, setusershell, endusershell \- get legal user shells
.SH SYNOPSIS
.nf
.B char *getusershell()
.PP
.B setusershell()
.PP
.B endusershell()
.fi
.SH DESCRIPTION
.I Getusershell
E 6
I 6
.Dd %Q%
.Dt GETUSERSHELL 3
.Os BSD 4.3
.Sh NAME
.Nm getusershell ,
.Nm setusershell ,
.Nm endusershell
.Nd get legal user shells
.Sh SYNOPSIS
.Ft char *
.Fn getusershell void
.Ft void
.Fn setusershell void
.Ft void
.Fn endusershell void
.Sh DESCRIPTION
The
.Fn getusershell
function
E 6
returns a pointer to a legal user shell as defined by the
system manager in the file 
D 6
.IR /etc/shells .
E 6
I 6
.Pa /etc/shells .
E 6
If 
D 6
.I /etc/shells
E 6
I 6
.Pa /etc/shells
E 6
D 3
does not exist, the two standard system shells
E 3
I 3
is unreadable or does not exist,
D 6
.I getusershell
E 6
I 6
.Fn getusershell
E 6
behaves as if
E 3
D 6
.I /bin/sh
E 6
I 6
.Pa /bin/sh
E 6
and
D 6
.I /bin/csh
E 6
I 6
.Pa /bin/csh
E 6
D 3
are returned.
E 3
I 3
were listed in the file.
E 3
D 6
.PP
.I Getusershell
E 6
I 6
.Pp
The
.Fn getusershell
function
E 6
reads the next
line (opening the file if necessary);
D 6
.I setusershell
E 6
I 6
.Fn setusershell
E 6
rewinds the file;
D 6
.I endusershell
E 6
I 6
.Fn endusershell
E 6
closes it.
D 6
.SH FILES
/etc/shells
I 3
.SH "SEE ALSO"
shells(5)
E 3
.SH DIAGNOSTICS
E 6
I 6
.Sh FILES
.Bl -tag -width /etc/shells -compact
.It Pa /etc/shells
.El
.Sh DIAGNOSTICS
E 6
The routine
D 6
.I getusershell
D 3
returns a null pointer (0) on EOF or error.
E 3
I 3
returns a null pointer (0) on EOF.
E 3
.SH BUGS
All information
is contained in a static area
so it must be copied if it is
to be saved.
E 6
I 6
.Fn getusershell
returns a null pointer (0) on
.Dv EOF .
.Sh SEE ALSO
.Xr shells 5
.Sh HISTORY
The
.Fn getusershell
function appeared in 
.Bx 4.3 .
.Sh BUGS
The
.Fn getusershell
function leaves its result in an internal static object and returns
a pointer to that object. Subsequent calls to
.Fn getusershell
will modify the same object.
E 6
E 1
