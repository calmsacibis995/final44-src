h39759
s 00004/00004/00068
d D 8.3 95/05/04 17:03:54 mckusick 3 2
c it is known as getbfsbyname
e
s 00001/00001/00071
d D 8.2 95/05/04 16:49:14 mckusick 2 1
c vfc_index => vfc_typenum
e
s 00072/00000/00000
d D 8.1 95/04/03 17:43:01 mckusick 1 0
c date and time created 95/04/03 17:43:01 by mckusick
e
u
U
t
T
I 1
.\" Copyright (c) 1995
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" %sccs.include.redist.man%
.\"
.\"     %W% (Berkeley) %G%
.\"
.Dd %Q%
D 3
.Dt KVM_GETVFSBYNAME 3
E 3
I 3
.Dt GETVFSBYNAME 3
E 3
.Os
.Sh NAME
D 3
.Nm kvm_getvfsbyname
E 3
I 3
.Nm getvfsbyname
E 3
.Nd get information about a filesystem
.Sh SYNOPSIS
.Fd #include <sys/types.h>
.Fd #include <sys/mount.h>
.Fd #include <kvm.h>
.br
.Ft int
D 3
.Fn kvm_getvfsbyname "const char *name" "struct vfsconf *vfc"
E 3
I 3
.Fn getvfsbyname "const char *name" "struct vfsconf *vfc"
E 3
.Sh DESCRIPTION
The
D 3
.Fn kvm_getvfsbyname
E 3
I 3
.Fn getvfsbyname
E 3
function provides access to information about a
filesystem module that is configured in the kernel.
If successful,
the requested filesystem
.Fa vfsconf
is returned in the location pointed to by
.Nm vfc .
The fields in a
.Dq Li struct vfsconf
are defined as follows:
.Pp
.Bl -tag -compact -width vfc_refcount
.It vfc_name
the name of the filesystem
D 2
.It vfc_index
E 2
I 2
.It vfc_typenum
E 2
the filesystem type number assigned by the kernel
.It vfc_refcount
the number of active mount points using the filesystem
.It vfc_flags
flag bits that are used to initialize a new mount point
using the filesystem
.El
.Sh RETURN VALUES
If the call to
.Nm getvfsbyname
is successful, 0 is returned.
Otherwise \-1 is returned and
.Va errno
is set appropriately.
.Sh ERRORS
The following errors may be reported:
.Bl -tag -width Er
.It Bq Er EFAULT
The
.Fa vfc
pointer contains an invalid address.
.It Bq Er ENOENT
The
.Fa name
specifies a filesystem that is unknown or not configured in the kernel.
.Sh SEE ALSO
.Xr sysctl 1 ,
.Xr mount 2 ,
.Xr sysctl 3 ,
.Xr mount 8
.Sh HISTORY
A variant of the
.Fn getvfsbyname
function first appeared in FreeBSD 2.0.
E 1
