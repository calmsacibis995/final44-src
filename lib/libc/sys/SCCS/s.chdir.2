h11855
s 00001/00001/00102
d D 8.2 93/12/11 23:08:07 mckusick 11 10
c copyediting for Usenix manuals
e
s 00002/00002/00101
d D 8.1 93/06/04 13:13:35 bostic 10 9
c 4.4BSD snapshot (revision 8.1); add 1993 to copyright
e
s 00076/00066/00027
d D 6.7 91/03/10 23:37:02 cael 9 8
c man page macro and text revisions (-mdoc version 3)
e
s 00006/00001/00087
d D 6.6 90/07/23 16:23:40 bostic 8 7
c add EACCES for fchdir (directory not searchable)
e
s 00001/00001/00087
d D 6.5 89/06/06 23:17:59 mckusick 7 6
c add fchdir to synopsis line
e
s 00024/00000/00064
d D 6.4 89/06/06 23:00:55 mckusick 6 5
c add fchdir
e
s 00003/00000/00061
d D 6.3 85/08/26 23:31:34 mckusick 5 4
c update error messages (mostly from sun!guy)
e
s 00010/00010/00051
d D 6.2 85/05/22 18:30:47 mckusick 4 3
c update the error return codes to reflect those in 4.3BSD
e
s 00001/00001/00060
d D 6.1 85/05/09 16:37:42 mckusick 3 2
c 4.3BSD beta release manual page
e
s 00044/00016/00017
d D 5.1 85/05/09 16:37:31 mckusick 2 1
c manual page distributed with 4.2BSD
e
s 00033/00000/00000
d D 4.1 85/05/09 16:37:21 mckusick 1 0
c manual page distributed with 4.1BSD
e
u
U
t
T
I 1
D 9
.\" Copyright (c) 1980 Regents of the University of California.
.\" All rights reserved.  The Berkeley software License Agreement
.\" specifies the terms and conditions for redistribution.
E 9
I 9
D 10
.\" Copyright (c) 1980, 1991 Regents of the University of California.
.\" All rights reserved.
E 10
I 10
.\" Copyright (c) 1980, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
E 10
E 9
.\"
D 9
.\"	%W% (Berkeley) %G%
E 9
I 9
.\" %sccs.include.redist.man%
E 9
.\"
D 2
.TH CHDIR 2 
E 2
I 2
D 3
.TH CHDIR 2 "2 July 1983"
E 3
I 3
D 9
.TH CHDIR 2 "%Q%"
E 3
E 2
.UC 4
.SH NAME
D 7
chdir \- change current working directory
E 7
I 7
chdir, fchdir \- change current working directory
E 7
.SH SYNOPSIS
.nf
D 2
.B chdir(dirname)
.B char *dirname;
E 2
I 2
.ft B
chdir(path)
char *path;
.ft R
E 2
.fi
I 6
.LP
.nf
.ft B
fchdir(fd)
int fd;
.fi
.ft R
E 6
.SH DESCRIPTION
D 2
.I Dirname
is the address of the pathname of a directory, terminated by a null byte.
E 2
I 2
.I Path
is the pathname of a directory.
E 2
.I Chdir
causes this directory
to become the current working directory,
D 2
the starting point for path names not beginning with `/'.
E 2
I 2
the starting point for path names not beginning with ``/''.
.PP
I 6
.I Fchdir
E 9
I 9
.\"     %W% (Berkeley) %G%
.\"
.Dd %Q%
.Dt CHDIR 2
.Os BSD 4
.Sh NAME
.Nm chdir ,
.Nm fchdir
.Nd change current working directory
.Sh SYNOPSIS
.Fd #include <unistd.h>
.Ft int
.Fn chdir "const char *path"
.Ft int
.Fn fchdir "int fd"
.Sh DESCRIPTION
The
.Fa path
D 11
arument points to the pathname of a directory.
E 11
I 11
argument points to the pathname of a directory.
E 11
The
.Fn chdir
function
causes the named directory
to become the current working directory, that is,
the starting point for path searches of pathnames not beginning with
a slash,
.Ql / .
.Pp
The
.Fn fchdir
function
E 9
causes the directory referenced by
D 9
.I fd
E 9
I 9
.Fa fd
E 9
to become the current working directory,
D 9
the starting point for path names not beginning with ``/''.
.PP
E 9
I 9
the starting point for path searches of pathnames not beginning with
a slash,
.Ql / .
.Pp
E 9
E 6
In order for a directory to become the current directory,
a process must have execute (search) access to the directory.
D 9
.SH "RETURN VALUE
E 9
I 9
.Sh RETURN VALUES
E 9
Upon successful completion, a value of 0 is returned.
D 9
Otherwise, a value of \-1 is returned and \fIerrno\fP is set to indicate
E 9
I 9
Otherwise, a value of -1 is returned and
.Va errno
is set to indicate
E 9
the error.
D 9
.SH ERRORS
.I Chdir
E 9
I 9
.Sh ERRORS
.Fn Chdir
E 9
will fail and the current working directory will be unchanged if
one or more of the following are true:
D 9
.TP 15
[ENOTDIR]
E 9
I 9
.Bl -tag -width Er
.It Bq Er ENOTDIR
E 9
D 4
A component of the pathname is not a directory.
E 4
I 4
A component of the path prefix is not a directory.
E 4
D 9
.TP 15
I 4
[EINVAL]
E 9
I 9
.It Bq Er EINVAL
E 9
The pathname contains a character with the high-order bit set.
D 9
.TP 15
[ENAMETOOLONG]
E 9
I 9
.It Bq Er ENAMETOOLONG
E 9
A component of a pathname exceeded 255 characters,
or an entire path name exceeded 1023 characters.
D 9
.TP 15
E 4
[ENOENT]
E 9
I 9
.It Bq Er ENOENT
E 9
The named directory does not exist.
D 9
.TP 15
D 4
[ENOENT]
The argument path name was too long.
E 4
I 4
[ELOOP]
E 9
I 9
.It Bq Er ELOOP
E 9
Too many symbolic links were encountered in translating the pathname.
E 4
D 9
.TP 15
D 4
[EPERM]
The argument contains a byte with the high-order bit set.
.TP 15
E 4
[EACCES]
E 9
I 9
.It Bq Er EACCES
E 9
Search permission is denied for any component of
the path name.
D 9
.TP 15
[EFAULT]
.I Path
E 9
I 9
.It Bq Er EFAULT
.Fa Path
E 9
points outside the process's allocated address space.
I 5
D 9
.TP 15
[EIO]
E 9
I 9
.It Bq Er EIO
E 9
An I/O error occurred while reading from or writing to the file system.
I 6
D 9
.LP
.I Fchdir
E 9
I 9
.El
.Pp
.Fn Fchdir
E 9
will fail and the current working directory will be unchanged if
one or more of the following are true:
D 9
.TP 15
I 8
[EACCES]
E 9
I 9
.Bl -tag -width Er
.It Bq Er EACCES
E 9
Search permission is denied for the directory referenced by the
file descriptor.
D 9
.TP 15
E 8
[ENOTDIR]
E 9
I 9
.It Bq Er ENOTDIR
E 9
The file descriptor does not reference a directory.
D 9
.TP 15
EBADF
E 9
I 9
.It Bq Er EBADF
E 9
I 8
The argument
E 8
D 9
.I fd
E 9
I 9
.Fa fd
E 9
D 8
is not a valid open file descriptor.
E 8
I 8
is not a valid file descriptor.
E 8
E 6
E 5
D 4
.TP 15
[ELOOP]
Too many symbolic links were encountered in translating
the pathname.
E 4
E 2
D 9
.SH "SEE ALSO"
D 2
cd(1)
.SH DIAGNOSTICS
Zero is returned if the directory is changed; \-1
is returned
if the given name is not that of a directory
or is not searchable.
.SH ASSEMBLER
(chdir = 12.)
.br
.B sys chdir; dirname
E 2
I 2
chroot(2)
E 9
I 9
.El
.Sh SEE ALSO
.Xr chroot 2
.Sh STANDARDS
.Fn Chdir
is expected to conform to IEEE Std 1003.1-1988
.Pq Dq Tn POSIX .
.Sh HISTORY
The
.Fn fchdir
function call
appeared in
.Bx 4.2 .
E 9
E 2
E 1
