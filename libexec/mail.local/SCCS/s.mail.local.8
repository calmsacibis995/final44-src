h01371
s 00001/00001/00078
d D 8.2 93/12/11 23:42:58 mckusick 12 11
c copyediting for Usenix manuals
e
s 00002/00002/00077
d D 8.1 93/06/04 18:56:15 bostic 11 10
c 4.4BSD snapshot (revision 8.1); add 1993 to copyright
e
s 00016/00018/00063
d D 6.8 91/04/27 21:53:27 cael 10 9
c mdoc version three
e
s 00054/00141/00027
d D 6.7 91/01/17 14:39:26 bostic 9 8
c from scratch -- /bin/mail was a security problem, and not worth fixing
e
s 00003/00004/00165
d D 6.6 90/06/26 01:01:13 cael 8 7
c converted man page
e
s 00132/00095/00037
d D 6.5 90/06/24 19:11:34 cael 7 6
c converted man page
e
s 00001/00001/00131
d D 6.4 90/06/24 17:57:44 bostic 6 5
c move delivermail to section 8
e
s 00000/00000/00132
d D 6.3 90/06/11 05:55:51 cael 5 4
c converted man page
e
s 00007/00009/00125
d D 6.2 89/05/11 14:13:13 bostic 4 3
c file reorg, pathnames.h, paths.h
e
s 00001/00001/00133
d D 6.1 85/04/29 17:40:29 mckusick 3 2
c 4.3BSD beta release manual page
e
s 00022/00036/00112
d D 5.1 85/04/29 17:40:19 mckusick 2 1
c manual page distributed with 4.2BSD
e
s 00148/00000/00000
d D 4.1 85/04/29 17:40:13 mckusick 1 0
c manual page distributed with 4.1BSD
e
u
U
t
T
I 1
D 7
.\"	%W% (Berkeley) %G%
E 7
I 7
D 8
.\" Copyright (c) 1990 The Regents of the University of California.
.\" All rights reserved.
E 7
.\"
D 2
.TH BINMAIL 1 11/16/79
E 2
I 2
D 3
.TH BINMAIL 1 "16 November 1979"
E 3
I 3
D 4
.TH BINMAIL 1 "%Q%"
E 4
I 4
D 6
.TH DELIVERMAIL 1 "%Q%"
E 6
I 6
D 7
.TH DELIVERMAIL 8 "%Q%"
E 6
E 4
E 3
E 2
.AT 3
.SH NAME
D 2
mail \- send or receive mail among users
E 2
I 2
D 4
binmail \- send or receive mail among users
E 4
I 4
delivermail \- send or receive mail among users
E 4
E 2
.SH SYNOPSIS
D 4
.B /bin/mail
E 4
I 4
.B delivermail
E 4
[
.B +
] [
.B \-i
] [ person ] ...
.br
D 4
.B /bin/mail
E 4
I 4
.B delivermail
E 4
.B "[ + ]"
[
.B \-i
]
.B \-f
file
.LP
.SH DESCRIPTION
E 7
I 7
.\" %sccs.include.redist.man%
E 8
I 8
D 9
.\" Copyright (c) 1990 Regents of the University of California.
.\" All rights reserved.  The Berkeley software License Agreement
.\" specifies the terms and conditions for redistribution.
E 9
I 9
D 11
.\" Copyright (c) 1990 The Regents of the University of California.
.\" All rights reserved.
E 11
I 11
.\" Copyright (c) 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
E 11
E 9
E 8
.\"
D 9
.\"     %W% (Berkeley) %G%
E 9
I 9
D 10
.\" %sccs.include.redist.man%
E 10
I 10
.\" %sccs.include.redist.roff%
E 10
E 9
.\"
I 9
.\"	%W% (Berkeley) %G%
.\"
E 9
.Dd %Q%
D 9
.Dt DELIVERMAIL 8
E 9
I 9
.Dt MAIL.LOCAL 8
E 9
D 10
.Os ATT 7th
E 10
I 10
.Os
E 10
.Sh NAME
D 9
.Nm delivermail
.Nd send or receive mail among users
E 9
I 9
.Nm mail.local
.Nd store mail in a mailbox
E 9
.Sh SYNOPSIS
D 9
.Nm delivermail
.Op Ic +
.Op Fl i
.Op Ar person
.Op \&...
.Nm delivermail
.Op Ic +
.Op Fl i
.Fl f
.Ar file
E 9
I 9
.Nm mail.local
.Op Fl f Ar from
.Ar user ...
E 9
D 10
.Pp
E 10
.Sh DESCRIPTION
E 7
D 2
Note: This is one of two mailers with the name
.I mail.
The default
E 2
I 2
D 9
Note: This is the old version 7 UNIX system mail program.  The default
E 2
D 7
.I mail
E 7
I 7
.Nm mail
E 7
command is described in
D 2
.IR mail (1),
E 2
I 2
D 4
.IR Mail (1),
E 2
and its binary is in the directory
D 2
.I /usr/ucb.
E 2
I 2
.IR /usr/ucb .
E 4
I 4
D 7
.IR Mail (1).
E 4
E 2
.PP
D 2
.I Mail
with no argument
prints
a user's mail,
message-by-message,
in last-in, first-out order;
the optional argument
E 2
I 2
.I mail
E 7
I 7
.Xr Mail  1  .
E 9
I 9
.Nm Mail.local
reads the standard input up to an end-of-file and appends it to each
D 10
.Sf Ar user \'s
E 10
I 10
D 12
.Ar user 's
E 12
I 12
.Ar user's
E 12
E 10
.Pa mail
file.
The
.Ar user
must be a valid user name.
E 9
.Pp
D 9
.Nm Mail
E 7
with no argument prints a user's mail, message-by-message,
in last-in, first-out order; the optional argument
E 2
D 7
.B +
E 7
I 7
.Ic +
E 7
D 2
causes first-in, first-out order.
For each message,
it reads a line from the standard input
E 2
I 2
displays the mail messages in first-in, first-out order.
For each message, it reads a line from the standard input
E 2
to direct disposition of the message.
E 9
I 9
The options are as follows:
E 9
D 7
.TP
newline
E 7
I 7
D 10
.Tw Fl
D 9
.Tp Li newline
E 7
Go on to next message.
D 7
.TP
d
E 7
I 7
.Tp Ic d
E 7
Delete message and go on to the next.
D 7
.TP
p
E 7
I 7
.Tp Ic p
E 7
Print message again.
D 7
.TP
\-
E 7
I 7
.Tp Fl
E 7
Go back to previous message.
D 7
.TP
.RI "s [" " file " "] ..."
E 7
I 7
.Tc Ic s
.Op Ar file
.Cx \&...
E 9
I 9
.Tc Fl f
.Ws
.Ar from
E 9
.Cx
E 10
I 10
.Bl -tag -width xxxfrom
.It Fl f Ar from
E 10
E 7
D 9
Save the message in the named
D 7
.I files
E 7
I 7
.Ar files
E 7
(`mbox' default).
D 7
.TP
.RI "w [" " file " "] ..."
E 7
I 7
.Tc Ic w
.Op Ar file
.Cx \&...
.Cx
E 7
Save the message, without a header, in the named
D 7
.I files
(`mbox' default).
.TP
.RI "m [" " person " "] ..."
E 7
I 7
.Ar files ,
.Pa mbox
is the default.
.Tc Ic m
.Op Ar person
.Cx \&...
.Cx
E 7
Mail the message to the named
D 7
.I persons
E 7
I 7
.Ar persons
E 7
(yourself is default).
D 7
.TP
EOT (control-D)
E 7
I 7
.Tp Li EOT
(control-D)
E 7
Put unexamined mail back in the mailbox and stop.
D 7
.TP
q
Same as EOT.
.TP
.RI ! command
E 7
I 7
.Tp Ic q
Same as
.Li EOT .
.Tc Ic \&!
.Ar command
.Cx
E 7
Escape to the Shell to do
D 7
.IR command .
.TP
*
E 7
I 7
.Ar command  .
.Tp Ic \&*
E 7
Print a command summary.
E 9
I 9
Specify the sender's name.
E 9
D 7
.PP
D 2
.PP
An interrupt normally causes termination of the command;
the mail file is unchanged.
The optional argument
E 2
I 2
An interrupt normally terminates the 
.I mail
E 7
I 7
D 10
.Tp
E 10
I 10
.El
E 10
.Pp
D 9
An interrupt normally terminates the
.Ar mail
E 7
command; the mail file is unchanged.  The optional argument
E 2
D 7
.B \(mii
E 7
I 7
.Fl i
E 7
D 2
causes
E 2
I 2
tells
E 2
D 7
.I mail
E 7
I 7
.Ar mail
E 7
to continue after interrupts.
E 9
I 9
Individual mail messages in the mailbox are delimited by an empty
line followed by a line beginning with the string ``From ''.
A line containing the string ``From '', the sender's name and a time stamp
is prepended to each delivered mail message.
A blank line is appended to each message.
A greater-than character (``>'') is prepended to any line in the message
which could be mistaken for a ``From '' delimiter line.
E 9
D 7
.PP
E 7
I 7
.Pp
E 7
D 9
When
D 7
.I persons
E 7
I 7
.Ar persons
E 7
are named,
D 7
.I mail
E 7
I 7
.Ar mail
E 7
D 2
takes the standard input up to an end-of-file
(or a line with just `.')
E 2
I 2
takes the standard input up to an end-of-file (or a line with just `.')
E 2
and adds it to each
D 7
.I person's
D 2
`mail' file.
The message is preceded by the sender's name and a postmark.
Lines that look like postmarks are
prepended with `>'.
A
E 2
I 2
`mail' file.  The message is preceded by the sender's name and a postmark.
E 7
I 7
.Sf Ar person \'s
.Pa mail
file.  The message is preceded by the sender's name and a postmark.
E 7
Lines that look like postmarks are prepended with `>'.  A
E 2
D 7
.I person
E 7
I 7
.Ar person
E 7
is usually a user name recognized by
D 7
.IR  login (1).
To denote a recipient on a remote system, prefix 
.I person
E 7
I 7
.Xr login  1  .
To denote a recipient on a remote system, prefix
.Ar person
E 7
by the system name and exclamation mark (see
D 2
.IR uucp (1)).
E 2
I 2
D 4
.IR uucp (1C)).
E 4
I 4
D 7
.IR uucp (1)).
E 4
E 2
.PP
E 7
I 7
.Xr uucp  1  ) .
E 9
I 9
The mail files are exclusively locked with 
.Xr flock 2
while mail is appended.
E 9
.Pp
E 7
D 9
The
D 7
.B \-f
D 2
option causes the named file, e.g. `mbox',
E 2
I 2
option causes the named file, for example, `mbox',
E 7
I 7
.Fl f
option causes the named file, for example,
.Pa mbox ,
E 7
E 2
to be printed as if it were the mail file.
E 9
I 9
If the ``biff'' service is returned by
.Xr getservbyname 3 ,
the biff server is notified of delivered mail.
E 9
D 7
.PP
E 7
I 7
.Pp
E 7
D 2
When a user logs in he is informed of the presence
of mail.
E 2
I 2
D 9
When a user logs in he is informed of the presence of mail.
E 9
I 9
The
.Nm mail.local
utility exits 0 on success, and >0 if an error occurs.
E 9
E 2
D 7
.SH FILES
.ta \w'/usr/spool/mail/*.lock 'u
/etc/passwd	to identify sender and locate persons
.br
.li
/usr/spool/mail/*	incoming mail for user *
.br
mbox		saved mail
.br
/tmp/ma*	temp file
.br
/usr/spool/mail/*.lock	lock for mail directory
.br
dead.letter	unmailable text
.br
.SH "SEE ALSO"
D 2
mail(1), write(1), uucp(1), uux(1), xsend(1), delivermail(8)
E 2
I 2
D 4
Mail(1), write(1), uucp(1C), uux(1C), xsend(1), sendmail(8)
E 4
I 4
Mail(1), write(1), uucp(1), uux(1), xsend(1), sendmail(8)
E 4
E 2
.SH BUGS
E 7
I 7
.Sh ENVIRONMENT
D 10
.Tw Fl
D 9
.Tp Ev HOME
The
.Ev HOME
variable is used by
.Nm delivermail
to find the file
.Pa mbox.
.Tp Ev HOSTALIASES
Used to find host aliases.
.Tp Ev NAME
.Nm Delivermail
extracts the users full name from the
.Ev NAME
variable.
E 9
.Tp Ev TZ
E 10
I 10
.Bl -tag -width indent
.It Ev TZ
E 10
D 9
Used to set the appropriate time zone
on the postmark.
E 9
I 9
Used to set the appropriate time zone on the timestamp.
I 10
.El
E 10
E 9
.Sh FILES
D 9
.Dw /var/spool/mail/*
E 9
I 9
D 10
.Dw /tmp/local.XXXXXX
E 9
.Di L
D 9
.Dp Pa /etc/passwd
to identify sender and locate persons
.Dp Pa /var/spool/mail/*
incoming mail for user *
.Dp Pa mbox
saved mail
.Dp Pa /tmp/ma*
temp file
.Dp Pa dead.letter
unmailable text
E 9
I 9
.Dp Pa /tmp/local.XXXXXX
E 10
I 10
.Bl -tag -width /tmp/local.XXXXXX -compact
.It Pa /tmp/local.XXXXXX
E 10
temporary files
D 10
.Dp Pa /var/mail/user
E 10
I 10
.It Pa /var/mail/user
E 10
user's mailbox directory
E 9
D 10
.Dp
E 10
I 10
.El
E 10
.Sh SEE ALSO
D 9
.Xr Mail 1 ,
.Xr write 1 ,
.Xr uucp 1 ,
.Xr uux 1 ,
E 9
I 9
.Xr mail 1 ,
E 9
.Xr xsend 1 ,
I 9
.Xr flock 2 ,
.Xr getservbyname 3 ,
.Xr comsat 8 ,
E 9
.Xr sendmail 8
.Sh HISTORY
D 9
.Nm Delivermail
E 9
I 9
A superset of
.Nm mail.local
(handling mailbox reading as well as mail delivery)
E 9
D 10
appeared in Version 7 AT&T Unix as the program
E 10
I 10
appeared in
.At v7 .
as the program
E 10
D 9
.Nm mail.
.Sh BUGS
E 7
D 2
Race conditions sometimes result
in a failure to remove a lock file.
E 2
I 2
Race conditions sometimes result in a failure to remove a lock file.
E 2
D 7
.PP
E 7
I 7
.Pp
E 7
Normally anybody can read your mail, unless it is sent by
D 7
.IR xsend (1).
E 7
I 7
.Xr xsend  1  .
E 7
An installation can overcome this by making
D 7
.I mail
E 7
I 7
.Nm mail
E 7
a set-user-id command that owns the mail directory.
E 9
I 9
.Nm mail .
E 9
E 1
