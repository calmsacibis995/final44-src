/* 
 * Mach Operating System
 * Copyright (c) 1989 Carnegie-Mellon University
 * Copyright (c) 1988 Carnegie-Mellon University
 * All rights reserved.  The CMU software License Agreement specifies
 * the terms and conditions for use and redistribution.
 */
/*
 * HISTORY
 * $Log:	ka88.h,v $
 * Revision 2.4  89/03/09  22:30:58  rpd
 * 	More cleanup.
 * 
 * Revision 2.3  89/02/26  10:58:58  gm0w
 * 	Changes for cleanup.
 * 
 * Revision 2.2  88/08/10  10:51:31  rvb
 * 	Created.
 * 
 */
/*
 *	File:	ka88.h
 *	Author:	Robert V. Baron
 *
 *	Yet another strange new bus
 *	ALSO definitions for the cpu structures
 */
/*
 * 8800 processor registers
 */
#define MCSTS	0x26		/* machine check status register */
#define NICTRL	0x80		/* NMI control register */
#define INOP	0x81		/* 8800 interrupt other processor */
#define NMIFSR	0x82		/* NMI Fault Status Register */
#define NMISILO	0x83		/* NMI SILO Register */
#define NMIEAR	0x84		/* NMI Error Address Register */
#define COR	0x85		/* Cache on register */
#define REVR1	0x86		/* Revision Register 1 */
#define REVR2	0x87		/* Revision Register 2 */
#define TOSTS	0x88		/* Time Out Status Register*/

/*
 * get bits for REVR2
 */

#define NMI_MCL    0x3e000000

#define NMI_NBI    (caddr_t) 0x20000000
#define NMI_NBI_SZ  0x2000000
#define NMI_NBIA   0x00080000


#define C88MCSTS_MCKINTR	0x00000004
#define C88MCSTS_MCKIP		0x00000002
#define C88MCSTS_ABORT		0x00000001
#define C88MCSTS	"\20\03MCKINTR\02MCKIP\01ABORT"

#define NICTRL_DEV0IE		0x00000080
#define NICTRL_DEV1IE		0x00000040
#define NICTRL_M+NMIFIE		0x00000020
#define NICTRL_B	"\20\10DEV0IE\07DEV1IE\06M+NMIFIE"

#define NMIFSR_FLT		0x10000000
#define NMIFSR_BID		0x0c000000
#define NMIFSR_ADPE		0x02000000
#define NMIFSR_CPE		0x01000000
#define NMIFSR_RSE		0x00100000
#define NMIFSR_TRANSMIT		0x00080000
#define NMIFSR_TIMOUT		0x00070000
#define NMIFSR_B	"\20\35FLT\34\33BID\32ADPE\31CPE\25RSE\24TRANSMIT\23\21TIMOUT"

#define NMISILO_AFLT		0x08000000
#define NMISILO_MARKER		0x04000000
#define NMISILO_MEMBSY		0x02000000
#define NMISILO_IO0ARB		0x01000000
#define NMISILO_IO1ARB		0x00800000
#define NMISILO_MEMARB		0x00400000
#define NMISILO_LCPUARB		0x00200000
#define NMISILO_RCPUARB		0x00100000
#define NMISILO_ID		0x000f0000
#define NMISILO_FN		0x0000f800
#define NMISILO_AD		0x00000400
#define NMISILO_CNFRM		0x00000300

#define NMISILO_B	"\20\34AFLT\33MARKER\32MEMBSY\31IO0ARB\30IO1ARB\27MEMARB\26LCPUARB\25RCPUARB\
\24\21ID\20\14FN\13AD\12\11CNFRM"

#define NMIEAR_ADDR		0x3fffffff
#define NMIEAR_B	"\20\36\1ADDR"

#define COR_COR			0x00000001
#define C88COR		"\20\01COR"

#define C88REVR1_SHR		0xf0000000
#define C88REVR1_SLC1		0x0f000000
#define C88REVR1_SLC0		0x00f00000
#define C88REVR1_ADP		0x000f0000
#define C88REVR1_CCS		0x0000f000
#define C88REVR1_DEC		0x00000f00
#define C88REVR1_SEQ		0x000000f0
#define C88REVR1_WCS		0x0000000f
#define C88REVR1	"\20\40\35SHR\34\31SLC1\30\25SLC0\24\21ADP\20\15CCS\14\11DEC\10\05SEQ\04\01WCS"

#define C88REVR2_UCODE_TOP	0xff000000
#define C88REVR2_UCODE_USER	0x00ff0000
#define C88REVR2_CONS_TOP	0x0000ff00
#define C88REVR2_BACKPLN	0x000000f0
#define C88REVR2_CLK		0x0000000f
#define C88REVR2	"\20\40\31UCODE_TOP\30\21UCODE_USER\20\11CONS_TOP\10\05BACKPLN\04\01CLK"

#ifndef	ASSEMBLER

#endif	ASSEMBLER
#define CBOX_VAPE		0x00300000
#define CBOX_TBPE		0x00070000
#define CBOX_CPE		0x00003000
#define CBOX_MPE		0x00000f00
#define CBOX_TBTAGPE		0x00000010
#define CBOX_NMICSPE		0x00000008
#define CBOX_BADREAD		0x00000004
#define CBOX_BADPIBA		0x00000002
#define CBOX_NMIDATAPE		0x00000001
#define CBOX		"\20\26\25VAPE\23\21TBPE\16\15CPE\14\11MPE\05TBTAGPE\04NMICSPE\03BADREAD\02BADPIBA\01NMIDATAPE"

#define IBOX_PIBAFAIL		0x00000800
#define IBOX_BADUADDR		0x00000400
#define IBOX_IBPEUP		0x00000200
#define IBOX_IBPELOW		0x00000100
#define IBOX_SEQIPRPE		0x00000080
#define IBOX_DECIPRPE		0x00000040
#define IBOX_DECRAMPE		0x00000020
#define IBOX_CONXDECPE		0x00000010
#define IBOX_CS0PE		0x00000008
#define IBOX_CS1PE		0x00000004
#define IBOX_CS2PE		0x00000002
#define IBOX_DECXCONPE		0x00000001
#define IBOX		"\20\14PIBAFAIL\13BADUADDR\12IBPEUP\11IBPELOW\10SEQIPRPE\07DECIPRPE\06DECRAMPE\05CONXDECPE\04CS0PE\03CS1PE\02CS2PE\01DECXCONPE"

#define EBOX_BPE		0x00000080
#define EBOX_APE		0x00000040
#define EBOX_SRCB		0x00000038
#define EBOX_SRCA		0x00000007
#define EBOX		"\20\10BPE\07APE\06\04SRCB\03\01SRCA"
#ifndef	ASSEMBLER

#endif	ASSEMBLER
/*
 *	Nautilus memory controller registers.
 */
#ifdef	KERNEL
#ifndef	ASSEMBLER
struct mcl {
	int	csr0;
	int	csr1;
	int	csr2;
	int	csr3;
	int	csr4;
	int	csr5;
	int	csr6;
	int	csr7;
};
#endif	ASSEMBLER
#endif	KERNEL
#define MCLCSR0_DPE		0x80000000
#define MCLCSR0_CPE		0x40000000
#define MCLCSR0_WSE		0x10000000
#define MCLCSR0_TDF		0x08000000
#define MCLCSR0_TMOUT		0x07000000
#define MCLCSR0_REV		0x000f0000
#define MCLCSR0_TYPE		0x000000ff
#define MCLCSR0		"\20\40DPE\37CPE\35WSE\34TDF\33\31TMOUT\24\21REV\10\01TYPE"

#define MCLSR1_ADDR		0x3ffffc10
#define MCLSR1_ADDR_K		0x3ffffc00
#define MCLSR1_ADDR_PG		0x00000010
#define MCLSR1		"\20\36\13ADDR_K\05ADDR_PG"

#define MCLCSR1_ADDR_K		0x1fc00000
#define MCLCSR1_WEN		0x00100000
#define MCLCSR1_PAR		0x00000100
#define MCLCSR1_ALTNUM		0x000000e0
#define MCLCSR1_ADDR_PG		0x00000010
#define MCLCSR1_PRESENT		0x00000008
#define MCLCSR1_PRIMNUM		0x00000007
#define MCLCSR1		"\20\35\27ADDR_K\25WEN\11PAR\10\06ALTNUM\05ADDR_PG\04PRESENT\03\01PRIMNUM"

#define MCLCSR2_RDSHI		0x80000000
#define MCLCSR2_RDS		0x40000000
#define MCLCSR2_CRD		0x20000000
#define MCLCSR2_FRCDBE		0x10000000
#define MCLCSR2_DIAGEN		0x00800000
#define MCLCSR2_ECCDIS		0x00400000
#define MCLCSR2_SUBCKBTEN	0x00200000
#define MCLCSR2_FRCPE		0x00180000
#define MCLCSR2_LOOP		0x00040000
#define MCLCSR2_FRCBAD		0x00020000
#define MCLCSR2_CHKBT		0x00008000
#define MCLCSR2_CHKBITS		0x00007f00
#define MCLCSR2_SYN		0x0000007f
#define MCLCSR2		"\20\40RDSHI\37RDS\36CRD\35FRCDBE\30DIAGEN\27ECCDIS\26SUBCKBTEN\25\24FRCPE\
\23LOOP\22FRCBAD\20CHKBT\17\11CHKBITS\07\01SYN"

#define MCLCSR3_INTLIE		0x80000000
#define MCLCSR3_TMOUTIE		0x40000000
#define MCLCSR3_SBEIE		0x20000000
#define MCLCSR3_DBEIE		0x10000000
#define MCLCSR3_COLDSTRT	0x04000000
#define MCLCSR3_INTLERR		0x02000000
#define MCLCSR3_MSK		0x00000007
#define MCLCSR3	"\20\40INTLIE\37TMOUTIE\36SBEIE\35DBEIE\33COLDSTRT\32INTLERR"
#ifndef	ASSEMBLER

#endif	ASSEMBLER
/*
 *	NMI - BI adaptor registers.
 */
#ifdef	KERNEL
#ifndef	ASSEMBLER
struct nbi {
	int	csr0;			/* CSR 0 */
	int	csr1;			/* CSR 1 */
	int	rsvd0;			/* reserved */
	int	rsvd1;			/* reserved */
	int	br4vr;			/* BR4 Vector Register */
	int	br5vr;			/* BR5 Vector Register */
	int	br6vr;			/* BR6 Vector Register */
	int	br7vr;			/* BR7 Vector Register */
};
#endif	ASSEMBLER
#endif	KERNEL

#define NBIACSR0_DFLT		0x80000000
#define NBIACSR0_CFLT		0x40000000
#define NBIACSR0_RSE		0x20000000
#define NBIACSR0_WSE		0x10000000
#define NBIACSR0_TDFLT		0x08000000
#define NBIACSR0_TMOUT		0x07000000
#define NBIACSR0_IE		0x00200000
#define NBIACSR0_FLIP		0x00080000
#define NBIACSR0_FRCDMABSY	0x00040000
#define NBIACSR0_FRCPE		0x00020000
#define NBIACSR0_BIICLOOP	0x00010000
#define NBIACSR0_NBIPE		0x00008000
#define NBIACSR0_VOR		0x00007c00
#define NBIACSR0_TYPE		0x000000ff
#define NBIACSR0	"\20\40DFLT\37CFLT\36RSE\35WSE\34TDFLT\33\31TMOUT\26IE\24FLIP\
\23FRCDMABSY\22FRCPE\21BIICLOOP\20NBIPE\17\13VOR\10\01TYPE"


#define NBIACSR1_REV		0x0000f000
#define NBIACSR1_FRCBIPE	0x00000400
#define NBIACSR1_NBIAWRAP	0x00000200
#define NBIACSR1_BI1PWR		0x00000080
#define NBIACSR1_BI0PWR		0x00000040
#define NBIACSR1_AFNPE		0x00000020
#define NBIACSR1_BI1PE		0x00000010
#define NBIACSR1_BI0PE		0x00000008
#define NBIACSR1_BI1		0x00000004
#define NBIACSR1_BI0		0x00000002
#define NBIACSR1_INIT		0x00000001
#define NBIACSR1	"\20\20\15REV\13FRCBIPE\12NBIAWRAP\10BI1PWR\07BI0PWR\06AFNPE\05BI1PE\04BI0PE\03BI1\02BI0\01INIT"
