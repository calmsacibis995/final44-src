.NH 1
Examples
.NH 2
B-Trees
.PP
This example depicts a B-tree whose nodes have many children.*
.FS
*P. J. Weinberger, Unix B-trees, Bell Laboratories, 1981.
.FE
.IS
...colwid 6.0
...width 3.0
...maxx 4.200000
...maxy 3.000000
...minx -0.653991
...miny -2.487688
...center 0.600000 1.500000 '.
...center 1.000000 1.500000 '.
...center 1.400000 1.500000 '.
...center 1.800000 1.500000 '.
...center 3.200000 -1.400000 '\(bu
...center 3.600000 -1.200000 '\(bu
...center 4.000000 -1.000000 '\(bu
...center 1.200000 -0.400000 '\(bu
...center 1.600000 -0.200000 '\(bu
...center 2.000000 0.000000 '\(bu
...line 0.000000 2.000000 0.084524 2.181262
...line 0.181262 2.084524 0.000000 2.000000
...line 0.000000 2.000000 1.000000 3.000000
...line 2.200000 0.200000 2.103814 0.375352
...line 2.239032 0.396155 2.200000 0.200000
...line 2.200000 0.200000 2.000000 1.500000
...line 1.000000 -0.400000 0.878177 -0.241384
...line 1.008635 -0.200186 1.000000 -0.400000
...line 1.000000 -0.400000 0.400000 1.500000
...line 0.400000 -0.700000 0.314862 -0.519026
...line 0.451108 -0.506640 0.400000 -0.700000
...line 0.400000 -0.700000 0.200000 1.500000
...line -0.200000 -1.000000 -0.253199 -0.807205
...line -0.116827 -0.818115 -0.200000 -1.000000
...line -0.200000 -1.000000 0.000000 1.500000
...line -0.200000 -1.000000 1.800000 -1.000000
...line -0.200000 -2.000000 -0.200000 -1.000000
...line 1.800000 -2.000000 -0.200000 -2.000000
...line 1.800000 -1.000000 1.800000 -2.000000
...line 2.253990 -2.391006 2.107719 -2.254607
...line 2.229616 -2.192497 2.253990 -2.391006
...line 2.253990 -2.391006 1.800000 -1.500000
...line 1.296434 -2.487688 1.199472 -2.312764
...line 1.334596 -2.291363 1.296434 -2.487688
...line 1.296434 -2.487688 1.140000 -1.500000
...line 0.303565 -2.487688 0.265404 -2.291363
...line 0.400527 -2.312764 0.303565 -2.487688
...line 0.303565 -2.487688 0.460000 -1.500000
...line -0.653991 -2.391006 -0.629617 -2.192497
...line -0.507720 -2.254607 -0.653991 -2.391006
...line -0.653991 -2.391006 -0.200000 -1.500000
...line 0.400000 -0.700000 2.400000 -0.700000
...line 0.400000 -1.000000 0.400000 -0.700000
...line 2.400000 -1.700000 1.800000 -1.700000
...line 2.400000 -0.700000 2.400000 -1.700000
...line 1.000000 -0.400000 3.000000 -0.400000
...line 1.000000 -0.700000 1.000000 -0.400000
...line 3.000000 -1.400000 2.400000 -1.400000
...line 3.000000 -0.400000 3.000000 -1.400000
...line 2.200000 0.200000 4.200000 0.200000
...line 2.200000 -0.400000 2.200000 0.200000
...line 4.200000 -0.800000 3.000000 -0.800000
...line 4.200000 0.200000 4.200000 -0.800000
...line 0.000000 2.000000 2.000000 2.000000
...line 0.000000 1.000000 0.000000 2.000000
...line 2.000000 1.000000 0.000000 1.000000
...line 2.000000 2.000000 2.000000 1.000000
.IF
.P1
\&...libfile rect
arrow {
	var tl, hd, headvec, head;
	headvec = hd + head*(tl - hd)/abs(tl - hd);
	conn tl to hd;
	conn hd + cis(20)*(headvec - hd)
		to hd
		to hd + cis(-20)*(headvec - hd);
}

dot {
	var s, e;
	'\e(bu' at 0.5[s, e] - (0,0.1);
}

per {
	var s, e;
	'.' at 0.5[s, e];
}

main {
	var rw, rh;
	rw = 2;
	rh = 1;
	var hmv, vmv;
	hmv = 0.6;
	vmv = 0.3;
	var ah;
	ah = 0.2;
	put root: rect {
		sw = (0,1);
		wd = rw;
		ht = 1;
	};
	put next: rect {
		sw = youngest.sw + 2*(hmv, vmv);
		wd = rw;
		ht = rh;
	};
	put youngest: rect {
		sw = bro.sw + (hmv, vmv);
		wd = rw;
		ht = rh;
		opaque;
	};
	put bro: rect {
		sw = eldest.sw + (hmv, vmv);
		wd = rw;
		ht = rh;
		opaque;
	};
	put eldest: rect {
		im(nw) = im(3[root.nw,root.sw]);
		re(0.5[nw, next.nw]) = re(0.5[root.nw, root.ne]);
		wd = rw;
		ht = rh;
		opaque;
		put arrow {
			head = ah;
			tl = 0.0[sw, se] + 0.5 * (nw - sw);
			hd = tl - (0, 1) * cis(-27);
		};
		put arrow {
			head = ah;
			tl = 0.33[sw, se] + 0.5 * (nw -sw);
			hd = tl - (0,1) * cis(-9);
		};
		put arrow {
			head = ah;
			tl = 0.67[sw, se] + 0.5 * (nw - sw);
			hd = tl - (0,1) * cis(9);
		};
		put arrow {
			head = ah;
			tl = 1.0[sw, se] + 0.5 * (nw -sw);
			hd = tl - (0,1) * cis(27);
		};
	};
	put arrow {
		head = ah;
		tl=root.sw + 0.5 * (root.nw - root.sw);
		hd=eldest.nw;
	};
	put arrow {
		head = ah;
		tl=0.1[root.sw,root.se] + 0.5 * (root.nw - root.sw);
		hd=bro.nw;
	};
	put a: arrow {
		head = ah;
		tl=0.2[root.sw,root.se] + 0.5 * (root.nw - root.sw);
		hd=youngest.nw;
	};
	put b: arrow {
		head = ah;
		tl = 0.5[root.ne, root.se];
		hd = next.nw;
	};
	put arrow {
		head = ah;
		hd = root.nw;
		tl = 0.5[root.nw, root.ne] + (0, 1.0);
	};
	conn next.nw to youngest.nw using 3 dot{}<s, e>;
	conn next.se to youngest.se using 3 dot{}<s, e>;
	conn b.tl to a.tl using 4 per{}<s, e>;
}
.P2
.NH 2
A Sector Grid
.PP
Norm Schryer used this figure to show how numerical integration
is used to find the area of planar regions.
.IS
...colwid 8.0
...width 2.0
...maxx 1.000000
...maxy 1.000000
...minx 0.000000
...miny 0.000000
...line 0.950000 0.312250 0.950000 0.000000
...line 0.900000 0.435890 0.900000 0.000000
...line 0.850000 0.526783 0.850000 0.000000
...line 0.800000 0.600000 0.800000 0.000000
...line 0.750000 0.661438 0.750000 0.000000
...line 0.700000 0.714143 0.700000 0.000000
...line 0.650000 0.759934 0.650000 0.000000
...line 0.600000 0.800000 0.600000 0.000000
...line 0.550000 0.835165 0.550000 0.000000
...line 0.500000 0.866025 0.500000 0.000000
...line 0.450000 0.893029 0.450000 0.000000
...line 0.400000 0.916515 0.400000 0.000000
...line 0.350000 0.936750 0.350000 0.000000
...line 0.300000 0.953939 0.300000 0.000000
...line 0.250000 0.968246 0.250000 0.000000
...line 0.200000 0.979796 0.200000 0.000000
...line 0.150000 0.988686 0.150000 0.000000
...line 0.100000 0.994987 0.100000 0.000000
...line 0.050000 0.998749 0.050000 0.000000
...line 0.000000 1.000000 0.000000 0.000000
...line 0.312250 0.950000 0.000000 0.950000
...line 0.435890 0.900000 0.000000 0.900000
...line 0.526783 0.850000 0.000000 0.850000
...line 0.600000 0.800000 0.000000 0.800000
...line 0.661438 0.750000 0.000000 0.750000
...line 0.714143 0.700000 0.000000 0.700000
...line 0.759934 0.650000 0.000000 0.650000
...line 0.800000 0.600000 0.000000 0.600000
...line 0.835165 0.550000 0.000000 0.550000
...line 0.866025 0.500000 0.000000 0.500000
...line 0.893029 0.450000 0.000000 0.450000
...line 0.916515 0.400000 0.000000 0.400000
...line 0.936750 0.350000 0.000000 0.350000
...line 0.953939 0.300000 0.000000 0.300000
...line 0.968246 0.250000 0.000000 0.250000
...line 0.979796 0.200000 0.000000 0.200000
...line 0.988686 0.150000 0.000000 0.150000
...line 0.994987 0.100000 0.000000 0.100000
...line 0.998749 0.050000 0.000000 0.050000
...line 1.000000 0.000000 0.000000 0.000000
.IF
.P1





\&...libfile hole
gridline {
	var a,b;
	var neg, pos;
	conn a - neg to a + pos;
}

main {
	var n;
	n = 21;
	conn (0,0) to (0,1+1/(n-1))
		using n gridline {
			neg = 0;
			pos = 1;
		} <a,b>;
	conn (0,0) to (1+1/(n-1),0)
		using n gridline {
			neg = 0;
			pos = (0,1);
		} <a,b>;
	put hole {
		radius = 1;
		center = (0,0);
		opaque exterior;
	};
}
.P2
.NH 2
Polygon Clipping
.PP
This example illustrates all possible positions of a line
segment with respect to a polygon.
It will appear in a book on graphics and image processing.*
.FS
*T. Pavlidis, Graphics and Image Processing, to be published.
.FE
.ps 8
.EQ
delim $$
gsize 8
define P12 " P sub 1 ( P sub 2 ) "
define P21 " P sub 2 ( P sub 1 )"
.EN
.IS
...width 4.5
...colwid 6.0
...minx -1
...maxx 6
...miny -1
...maxy 12
...maxx 4.700000
...maxy 10.600000
...minx -0.077382
...miny -0.600000
...left 3.600000 0.800000 '$P21$
...left 3.600000 1.200000 '$P12$
...circle 3.500000 0.800000 0.020000
...arc 3.500000 1.200000 3.520000 1.200000 3.520000 1.200000 0.000000 6.283185 0.020000
...line 3.500000 -0.600000 3.500000 0.780003
...line 3.500000 0.819994 3.500000 1.180000
...line 3.500000 1.220001 3.500000 2.600000
...line 4.500000 1.000000 4.000000 0.133975
...line 4.000000 0.133975 2.515192 0.826352
...line 2.515192 0.826352 2.515192 1.173648
...line 2.515192 1.173648 3.922618 1.906308
...line 3.922618 1.906308 4.500000 1.000000
...arc 1.000000 -0.400000 1.020000 -0.400000 1.020000 -0.400000 0.000000 6.283185 0.020000
...arc 1.000000 0.000000 1.020000 0.000000 1.020000 0.000000 0.000000 6.283185 0.020000
...line 1.000000 -0.600000 1.000000 -0.420000
...line 1.000000 -0.380000 1.000000 -0.020000
...line 1.000000 0.020000 1.000000 2.600000
...line 2.000000 1.000000 1.500000 0.133975
...line 1.500000 0.133975 0.015192 0.826352
...line 0.015192 0.826352 0.015192 1.173648
...line 0.015192 1.173648 1.422618 1.906308
...line 1.422618 1.906308 2.000000 1.000000
...arc 3.500000 4.000000 3.520000 4.000000 3.520000 4.000000 0.000000 6.283185 0.020000
...arc 3.500000 5.200000 3.520000 5.200000 3.520000 5.200000 0.000000 6.283185 0.020000
...line 3.500000 3.400000 3.500000 3.980000
...line 3.500000 4.020000 3.500000 5.180005
...line 3.500000 5.219995 3.500000 6.600000
...line 4.500000 5.000000 4.000000 4.133975
...line 4.000000 4.133975 2.515192 4.826352
...line 2.515192 4.826352 2.515192 5.173648
...line 2.515192 5.173648 3.922618 5.906308
...line 3.922618 5.906308 4.500000 5.000000
...arc 1.000000 4.000000 1.020000 4.000000 1.020000 4.000000 0.000000 6.283185 0.020000
...arc 1.000000 6.100000 1.020000 6.100000 1.020000 6.100000 0.000000 6.283185 0.020000
...line 1.000000 3.400000 1.000000 3.980000
...line 1.000000 4.020000 1.000000 6.080015
...line 1.000000 6.119984 1.000000 6.600000
...line 2.000000 5.000000 1.500000 4.133975
...line 1.500000 4.133975 0.015192 4.826352
...line 0.015192 4.826352 0.015192 5.173648
...line 0.015192 5.173648 1.422618 5.906308
...line 1.422618 5.906308 2.000000 5.000000
...arc 3.500000 9.200000 3.520000 9.200000 3.520000 9.200000 0.000000 6.283185 0.020000
...arc 3.500000 10.100000 3.520000 10.100000 3.520000 10.100000 0.000000 6.283185 0.020000
...line 3.500000 7.400000 3.500000 9.179997
...line 3.500000 9.220005 3.500000 10.080006
...line 3.500000 10.119987 3.500000 10.600000
...line 4.500000 9.000000 4.000000 8.133975
...line 4.000000 8.133975 2.515192 8.826352
...line 2.515192 8.826352 2.515192 9.173648
...line 2.515192 9.173648 3.922618 9.906308
...line 3.922618 9.906308 4.500000 9.000000
...arc 1.000000 10.400000 1.020000 10.400000 1.020000 10.400000 0.000000 6.283185 0.020000
...arc 1.000000 10.100000 1.020000 10.100000 1.020000 10.100000 0.000000 6.283185 0.020000
...line 1.000000 7.400000 1.000000 10.080006
...line 1.000000 10.119987 1.000000 10.379999
...line 2.000000 9.000000 1.500000 8.133975
...line 1.500000 8.133975 0.015192 8.826352
...line 0.015192 8.826352 0.015192 9.173648
...line 0.015192 9.173648 1.422618 9.906308
...line 1.422618 9.906308 2.000000 9.000000
...right 2.800000 -0.200000 '(f)
...left 4.700000 1.000000 '$----$
...left 1.100000 -0.400000 '$P21$
...left 1.100000 0.000000 '$P12$
...right 0.300000 -0.200000 '(e)
...left 0.015192 0.326352 '$--++$
...left 3.600000 4.000000 '$P21$
...left 3.600000 5.200000 '$P12$
...right 2.800000 3.800000 '(d)(d1)
...left 4.422618 5.456308 '$(--+-)$
...left 4.422618 5.606308 '$---+$
...left 1.100000 4.000000 '$P21$
...left 1.100000 6.100000 '$P12$
...right 0.300000 3.800000 '(c)(c1)
...left -0.077382 5.756308 '$(-++-)$
...left -0.077382 5.906308 '$+--+$
...left 3.600000 9.200000 '$P21$
...left 3.600000 10.100000 '$P12$
...right 2.800000 7.800000 '(b)(b1)
...left 4.422618 9.756309 '$(-+--)$
...left 4.422618 9.906308 '$+---$
...left 1.100000 10.400000 '$P21$
...left 1.100000 10.100000 '$P12$
...right 0.300000 7.800000 '(a)
...left -0.077382 9.906308 '$++--$
.IE
.ps
.P1
\&.ps 8
.EQ
delim off
.EN
\&.EQ
gsize 8
define P12 " P sub 1 ( P sub 2 ) "
define P21 " P sub 2 ( P sub 1 )"
\&.EN
\&...libfile circle
\&...minx -1
\&...maxx 6
\&...miny -1
\&...maxy 12
box spot{
	var loc;
	put circle{
		var center, radius;
		center = loc;
		radius = 0.02;
		opaque;
		};
	}
box vert{
	var midd, llength;
	conn midd+llength to midd-llength;
	}
box poly{
	var c1,p1,p2,p3,p4,p5,r1,tp,bp,ta,tb;
	p1 = c1+r1;
	p2 = cis(65)[c1,p1];
	p3 = cis(170)[c1,p1];
	p4 = cis(190)[c1,p1];
	p5 = cis(300)[c1,p1];
	tp = c1+(0,ta)*r1;
	bp = c1+(0,tb)*r1;
	conn p1 to p2;
	conn p2 to p3;
	conn p3 to p4;
	conn p4 to p5;
	conn p5 to p1;
	put vert{ midd=c1; llength=(0,1.6)*r1; };
	put spot{ loc=tp; };
	put spot{ loc=bp; };
	left '$P12$' at tp+0.1;
	left '$P21$' at bp+0.1;
	}
box main {
	put poly{
		c1 =(1,9); r1 = (1,0); ta=1.1; tb=1.4;
		left '$++--$' at p2-1.5;
		right '(a)' at c1-(0.7,1.2);
		};
	put poly{
		c1 =(3.5,9); r1 = (1,0); ta=1.1; tb=0.2;
		left '$+---$' at p2+0.5;
		left '$(-+--)$' at p2+(0.5,-0.15);
		right '(b)(b1)' at c1-(0.7,1.2);
		};
	put poly{
		c1 =(1,5); r1 = (1,0); ta=1.1; tb=-1;
		left '$+--+$' at p2-1.5;
		left '$(-++-)$' at p2-(1.5,0.15);
		right '(c)(c1)' at c1-(0.7,1.2);
		};
	put poly{
		c1 =(3.5,5); r1 = (1,0); ta=0.2; tb=-1;
		left '$---+$' at p2+(0.5,-0.3);
		left '$(--+-)$' at p2+(0.5,-0.45);
		right '(d)(d1)' at c1-(0.7,1.2);
		};
	put poly{
		c1 =(1,1); r1 = (1,0); ta=-1; tb=-1.4;
		left '$--++$' at p4-(0,0.5);
		right '(e)' at c1-(0.7,1.2);
		};
	put poly{
		c1 =(3.5,1); r1 = (1,0); ta=0.2; tb=-0.2;
		left '$----$' at p1+0.2;
		right '(f)' at c1-(0.7,1.2);
		};
}
.P2
.NH 1
Acknowledgements
.PP
My thanks to all who read drafts of this manual and
criticized constructively:
Al Aho,
Lorinda Cherry,
Eric Grosse,
Steve Johnson,
Brian Kernighan,
John Mashey,
Doug McIlroy,
and
Theo Pavlidis;
and to early users of \*(id, especially
Eric Grosse,
Theo Pavlidis,
Norm Schryer,
and
Peter Weinberger.
