.TH TDI 1
.UC 4
.SH NAME
tdi - Transition Diagram Interpreter
.SH SYNOPSIS
.B tdi
[ \fB-abdnRru\fR ] infiles  [ -o outfile ]
.sp
outfile [ \fB-abdnRru ]
.SH DESCRIPTION
The
.I tdi
command is part of the RAPID/USE system for the creation and modification
of screen-oriented interactive dialogues and systems.
The Transition Diagram Interpreter is a subsystem of RAPID/USE
intended specifically for rapid testing and modification of the
user interface, optionally combined with operations using the
Troll/USE relational database management system.
To link a set of transition diagram descriptions with programmed actions,
one should use rapid (1).
.LP
The 
.I infiles
contain a set of dialogue descriptions, representing a
set of USE transition diagrams.
Multiple diagram descriptions may appear in a single file.
If there exists a diagram named \fImain\fR in any of the files,
execution starts at its entry node; otherwise, execution begins
at the entry node of the first diagram declared in the first file.
.LP
The default name of the executable name is the base name of the first
infile with the suffix ".tdi", e.g., \fImain.tdi\fR.
This name may be overridden by use of the -o flag to produce a
named outfile.
Successful compilation of the \fIinfiles\fR will cause immediate
execution of the resulting program.
The executable program may also be subsequently invoked.
If no flags are given on the subsequent call, all flags used in the
original call to \fItdi\fR are set; if any flags are given, the
executable program is executed with the new set of flags.
.LP
Flags for \fItdi\fR are as follows:
.TP 8
.B \-a
Dialogue only, with no execution of actions.
Action numbers, \fBcall\fR, and \fBdo\fR statements
may appear in the arc descriptions, but no actions will be
executed when the arc is traversed.
If several \fBwhen\fR branches follow the action call (\fBdo\fR),
the first of these branches will be taken (see -d).
.TP
.B \-b
Turn off checking for screen boundaries and suppress error messages
for screen boundary violations.
.TP
.B \-d
Dialogue only, with no execution of actions (even if database operations
are present).
Action numbers, \fBcall\fR, and \fBdo\fR statements may still
appear in the arc descriptions, but no actions will be
executed when the arc is traversed. 
A prompt will appear on the bottom
line on the screen asking for a return value from the action.  
The arc corresponding to that action value will be traversed
if such an arc exists. (see -a).
.TP
.B \-n
Compiler warnings are suppressed.
.TP
.B \-o \fRoutfile
Name the executable program
.I outfile
instead of \fIinfile.tdi\fR.
.TP
.B \-R
Run \fItdi\fR in raw mode.  Normally, \fItdi\fR is run in
.I cbreak
mode where some
character processing takes place, such as recognition of
.B BREAK
or
.B DEL.
In 
.I raw
mode, complete control over all keys is possible, however, caution
must be taken as the program cannot be exited with
.B BREAK
or
.B DEL.
The
.I raw
and
.I cbreak
modes are described in tty(4).
.TP
.B \-r
Create a log file named
.I outfile.rlog.nn, 
where outfile is the base name of the executable program, and 
.I nn
is a unique sequence number generated by
.I tdi
from the set 00-99. 
(The name \fIoutfile\fR may be truncated to the first six letters on
systems with a fixed length for file names.)
The log contains the exact raw input from a user session. 
The file can be used to run the executable program again with the exact same
set of inputs.  
.TP
.B \-u
Create a log file named
.I outfile.ulog.nn, 
where outfile is the base name of the executable program, and 
.I nn
is a unique sequence number generated by
.I tdi
from the set 00-99. 
(The name \fIoutfile\fR may be truncated to the first six letters on
systems with a fixed length for file names.)
The log contains a line for each time a node is
visited or an action executed.  A timestamp begins each line.
For nodes, each line ends with the input the user entered at that node.
.LP
During execution, two system commands are available:
.LP
.B BREAK
(<BREAK> key) - terminate interpretation of the diagrams and return
the user to the Unix shell (if -R not selected).
.LP
!Unix command - the remainder of the
line after the '\!!' is sent to the Unix shell to be interpreted
as a Unix command.  A '\!!' is displayed and control is returned
to the node where this command was used.
.SH EXAMPLES
.ti +1i
tdi adtsystem -o tsystem
.sp 0.5v
will check the dialogue description
.I adtsystem,
and produce the executable file
.I tsystem
and execute it if possible.
.LP
.SH "SEE ALSO"
rapid(1), rapsum(1), troll(1), troll(3), tty(4)
.br
.I "A RAPID/USE Tutorial,"
by A.I. Wasserman and D.T. Shewmake
.br
.I "RAPID/USE Reference Manual",
by D.T. Shewmake, A.I. Wasserman, and P.A. Pircher
.SH AUTHORS
David Shewmake, Anthony Wasserman, Peter Pircher
.SH FILES
.ta 2.8i
.nf
/usr/local/rapcomp	rapid compiler
/usr/local/raptdi	transition diagram interpreter
/usr/local/lib/librapid.a	rapid library
/usr/local/lib/rap_errors	rapid compiler errors
/usr/local/lib/rapobj	base rapid object module
/usr/local/lib/rapproto	driver for transition diagram interpreter
outfile.rlog.nn	raw input log
outfile.ulog.nn	transition log
/tmp/rapcmp.$$	compiler temporaries
/tmp/raptxt.$$
/tmp/rapsca.$$
.fi
