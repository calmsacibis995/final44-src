Gadget Box

The gadget box is a 5"x3"x2" aluminum minibox containing level-converter
and modem circuitry and intended for use with host time servers
supporting the Network Time Protocol. It includes two subcircuits. One
of these converts a TTL positive edge into a fixed-width pulse at EIA
levels and is for use with a timecode receiver or oscillator including a
TTL one-pulse-per-second (1-pps) output. The other converts the timecode
modulation broadcast by Canadian time/frequency standard station CHU
into a 300-bps serial character stream at EIA levels and is for use with
the clk_chu.c or clk_chu_STREAMS.c modules in the xntp3 distribution.

This archive contains complete construction details for the gadget box,
including schematic, parts list and artwork for a two-sided, printed-
circuit board. All files are in PostScript, with the exception of this
file and an information file, which are in ASCII. The artwork is in the
1:1 scale and is suitable for direct printing on photographic resist for
each side of the board. While a plated-through-holes process is most
convenient, it is possible to bridge the two sides using soldered wires
where necessary.

Following is a brief functional description of the device. See the
schematic diagram gadget.s01 for reference. The audio output of a
shortwave radio tuned to CHU at 3330, 7335 or 14670 kHz is connected to
J2. A level of at least 30 mV peak-peak is required, such as provided by
the recorder output on many receivers. The input level is adjusted by
potentiometer R8 so that the timecode modulation broadcast at 31-39
seconds past the minute reliably lights green LED1, but the signals
broadcast during other seconds of the minute do not.

Opamp U4A provides low-impedance drive for the bridged-tee bandpass
filter U4B. The filter has a bandpass of about 600 Hz at the 6-dB points
and a center frequency of about 2150 Hz. It is designed to avoid
aliasing effects with receivers of relatively wide bandpass
characteristics. The modem itself is implemented by U2 and its
associated circuitry. Resistors R4 and R1 are a 40-dB pad which matches
the filter output to the modem input. U2 is a TTL/EIA level converter
with integral power supply for bipolar signals. The modem output is
available at pin 3 (receive data) of DB25 connector J1.

The TTL 1-pps signal is connected via J3 to a retriggerable one-shot
U3A, which generates a TTL pulse of width determined by potentiometer
R7. The pulse width is determined by the bit rate of the attached serial
port. In the common case the width is one bit-time, such as 26 us for
38.4 kbps, for example. This appears to the port as a single start bit
of zero followed by eight bits of ones and a stop bit of one. The second
one-shot U3B generates a 200-ms pulse suitable for driving the amber
LED3 as a visual monitor. The output of U3A is converted to EIA levels
by U1 and appears at pin 12 (secondary receive data) of J1.

If only the 1-pps circuit is required, U2 and U4 can be deleted and the
gadget box powered from the EIA modem-control signal at pin 20 (terminal
ready) of J1, assuming this signal is placed in the on (positive
voltage) condition by the computer program. J1 is wired to keep most
finicky UARTs and terminal-driver programs happy. If the CHU circuit is
required, an external 12-volt AC transformer or 9-12-volt DC supply
connected to J4 is required. Red LED2 indicates power is supplied to the
box.

Following is a list of files included in this archive. All files are in
PostScript, except this one (README) and the information file
(gadget.lst), which are in ASCII. The files gadget.s01, gadget.s02 and
gadget.lst were generated using the Schema schematic-capture program
from Omation. The printed-circuit files *.lpr were generated using
Schema-PCB, also from Omation.

Files
----------------------------------------
README          this file
gadget.s01      circuit schematic
gadget.s02      minibox assembly drawing
gadget.lst      net list, pin list, parts list, etc.
gen0102.lpr     pcb x-ray diagram
art01.lpr       pcb artword side 1
art02.lpr       pcb artwork side 2
adt0127.lpr     pcb assembly drawing
dd0124.lpr      pcb drill drawing
sm0228.lpr      pcb solder mask (side 2)
sst0126.lpr     pcb silkscreen mask (side 1)

Dave Mills
University of Delaware
6 July 1992
Revised 21 August 1992
