%!PS-Adobe-1.0
%%Creator: utopia:margo (& Seltzer,608-13E,8072,)
%%Title: stdin (ditroff)
%%CreationDate: Fri Dec 11 11:48:48 1992
%%EndComments
%	@(#)psdit.pro	1.3 4/15/88
% lib/psdit.pro -- prolog for psdit (ditroff) files
% Copyright (c) 1984, 1985 Adobe Systems Incorporated. All Rights Reserved.
% last edit: shore Sat Nov 23 20:28:03 1985
% RCSID: $Header: psdit.pro,v 2.1 85/11/24 12:19:43 shore Rel $

% Changed by Edward Wang (edward@ucbarpa.berkeley.edu) to handle graphics,
% 17 Feb, 87.

/$DITroff 140 dict def $DITroff begin
/fontnum 1 def /fontsize 10 def /fontheight 10 def /fontslant 0 def
/xi{0 72 11 mul translate 72 resolution div dup neg scale 0 0 moveto
 /fontnum 1 def /fontsize 10 def /fontheight 10 def /fontslant 0 def F
 /pagesave save def}def
/PB{save /psv exch def currentpoint translate 
 resolution 72 div dup neg scale 0 0 moveto}def
/PE{psv restore}def
/arctoobig 90 def /arctoosmall .05 def
/m1 matrix def /m2 matrix def /m3 matrix def /oldmat matrix def
/tan{dup sin exch cos div}def
/point{resolution 72 div mul}def
/dround	{transform round exch round exch itransform}def
/xT{/devname exch def}def
/xr{/mh exch def /my exch def /resolution exch def}def
/xp{}def
/xs{docsave restore end}def
/xt{}def
/xf{/fontname exch def /slotno exch def fontnames slotno get fontname eq not
 {fonts slotno fontname findfont put fontnames slotno fontname put}if}def
/xH{/fontheight exch def F}def
/xS{/fontslant exch def F}def
/s{/fontsize exch def /fontheight fontsize def F}def
/f{/fontnum exch def F}def
/F{fontheight 0 le{/fontheight fontsize def}if
 fonts fontnum get fontsize point 0 0 fontheight point neg 0 0 m1 astore
 fontslant 0 ne{1 0 fontslant tan 1 0 0 m2 astore m3 concatmatrix}if
 makefont setfont .04 fontsize point mul 0 dround pop setlinewidth}def
/X{exch currentpoint exch pop moveto show}def
/N{3 1 roll moveto show}def
/Y{exch currentpoint pop exch moveto show}def
/S{show}def
/ditpush{}def/ditpop{}def
/AX{3 -1 roll currentpoint exch pop moveto 0 exch ashow}def
/AN{4 2 roll moveto 0 exch ashow}def
/AY{3 -1 roll currentpoint pop exch moveto 0 exch ashow}def
/AS{0 exch ashow}def
/MX{currentpoint exch pop moveto}def
/MY{currentpoint pop exch moveto}def
/MXY{moveto}def
/cb{pop}def	% action on unknown char -- nothing for now
/n{}def/w{}def
/p{pop showpage pagesave restore /pagesave save def}def
/Dt{/Dlinewidth exch def}def 1 Dt
/Ds{/Ddash exch def}def -1 Ds
/Di{/Dstipple exch def}def 1 Di
/Dsetlinewidth{2 Dlinewidth mul setlinewidth}def
/Dsetdash{Ddash 4 eq{[8 12]}{Ddash 16 eq{[32 36]}
 {Ddash 20 eq{[32 12 8 12]}{[]}ifelse}ifelse}ifelse 0 setdash}def
/Dstroke{gsave Dsetlinewidth Dsetdash 1 setlinecap stroke grestore
 currentpoint newpath moveto}def
/Dl{rlineto Dstroke}def
/arcellipse{/diamv exch def /diamh exch def oldmat currentmatrix pop
 currentpoint translate 1 diamv diamh div scale /rad diamh 2 div def
 currentpoint exch rad add exch rad -180 180 arc oldmat setmatrix}def
/Dc{dup arcellipse Dstroke}def
/De{arcellipse Dstroke}def
/Da{/endv exch def /endh exch def /centerv exch def /centerh exch def
 /cradius centerv centerv mul centerh centerh mul add sqrt def
 /eradius endv endv mul endh endh mul add sqrt def
 /endang endv endh atan def
 /startang centerv neg centerh neg atan def
 /sweep startang endang sub dup 0 lt{360 add}if def
 sweep arctoobig gt
 {/midang startang sweep 2 div sub def /midrad cradius eradius add 2 div def
  /midh midang cos midrad mul def /midv midang sin midrad mul def
  midh neg midv neg endh endv centerh centerv midh midv Da
  Da}
 {sweep arctoosmall ge
  {/controldelt 1 sweep 2 div cos sub 3 sweep 2 div sin mul div 4 mul def
   centerv neg controldelt mul centerh controldelt mul
   endv neg controldelt mul centerh add endh add
   endh controldelt mul centerv add endv add
   centerh endh add centerv endv add rcurveto Dstroke}
  {centerh endh add centerv endv add rlineto Dstroke}
  ifelse}
 ifelse}def
/Dpatterns[
[%cf[widthbits]
[8<0000000000000010>]
[8<0411040040114000>]
[8<0204081020408001>]
[8<0000103810000000>]
[8<6699996666999966>]
[8<0000800100001008>]
[8<81c36666c3810000>]
[8<0f0e0c0800000000>]
[8<0000000000000010>]
[8<0411040040114000>]
[8<0204081020408001>]
[8<0000001038100000>]
[8<6699996666999966>]
[8<0000800100001008>]
[8<81c36666c3810000>]
[8<0f0e0c0800000000>]
[8<0042660000246600>]
[8<0000990000990000>]
[8<0804020180402010>]
[8<2418814242811824>]
[8<6699996666999966>]
[8<8000000008000000>]
[8<00001c3e363e1c00>]
[8<0000000000000000>]
[32<00000040000000c00000004000000040000000e0000000000000000000000000>]
[32<00000000000060000000900000002000000040000000f0000000000000000000>]
[32<000000000000000000e0000000100000006000000010000000e0000000000000>]
[32<00000000000000002000000060000000a0000000f00000002000000000000000>]
[32<0000000e0000000000000000000000000000000f000000080000000e00000001>]
[32<0000090000000600000000000000000000000000000007000000080000000e00>]
[32<00010000000200000004000000040000000000000000000000000000000f0000>]
[32<0900000006000000090000000600000000000000000000000000000006000000>]]
[%ug
[8<0000020000000000>]
[8<0000020000002000>]
[8<0004020000002000>]
[8<0004020000402000>]
[8<0004060000402000>]
[8<0004060000406000>]
[8<0006060000406000>]
[8<0006060000606000>]
[8<00060e0000606000>]
[8<00060e000060e000>]
[8<00070e000060e000>]
[8<00070e000070e000>]
[8<00070e020070e000>]
[8<00070e020070e020>]
[8<04070e020070e020>]
[8<04070e024070e020>]
[8<04070e064070e020>]
[8<04070e064070e060>]
[8<06070e064070e060>]
[8<06070e066070e060>]
[8<06070f066070e060>]
[8<06070f066070f060>]
[8<060f0f066070f060>]
[8<060f0f0660f0f060>]
[8<060f0f0760f0f060>]
[8<060f0f0760f0f070>]
[8<0e0f0f0760f0f070>]
[8<0e0f0f07e0f0f070>]
[8<0e0f0f0fe0f0f070>]
[8<0e0f0f0fe0f0f0f0>]
[8<0f0f0f0fe0f0f0f0>]
[8<0f0f0f0ff0f0f0f0>]
[8<1f0f0f0ff0f0f0f0>]
[8<1f0f0f0ff1f0f0f0>]
[8<1f0f0f8ff1f0f0f0>]
[8<1f0f0f8ff1f0f0f8>]
[8<9f0f0f8ff1f0f0f8>]
[8<9f0f0f8ff9f0f0f8>]
[8<9f0f0f9ff9f0f0f8>]
[8<9f0f0f9ff9f0f0f9>]
[8<9f8f0f9ff9f0f0f9>]
[8<9f8f0f9ff9f8f0f9>]
[8<9f8f1f9ff9f8f0f9>]
[8<9f8f1f9ff9f8f1f9>]
[8<bf8f1f9ff9f8f1f9>]
[8<bf8f1f9ffbf8f1f9>]
[8<bf8f1fdffbf8f1f9>]
[8<bf8f1fdffbf8f1fd>]
[8<ff8f1fdffbf8f1fd>]
[8<ff8f1fdffff8f1fd>]
[8<ff8f1ffffff8f1fd>]
[8<ff8f1ffffff8f1ff>]
[8<ff9f1ffffff8f1ff>]
[8<ff9f1ffffff9f1ff>]
[8<ff9f9ffffff9f1ff>]
[8<ff9f9ffffff9f9ff>]
[8<ffbf9ffffff9f9ff>]
[8<ffbf9ffffffbf9ff>]
[8<ffbfdffffffbf9ff>]
[8<ffbfdffffffbfdff>]
[8<ffffdffffffbfdff>]
[8<ffffdffffffffdff>]
[8<fffffffffffffdff>]
[8<ffffffffffffffff>]]
[%mg
[8<8000000000000000>]
[8<0822080080228000>]
[8<0204081020408001>]
[8<40e0400000000000>]
[8<66999966>]
[8<8001000010080000>]
[8<81c36666c3810000>]
[8<f0e0c08000000000>]
[16<07c00f801f003e007c00f800f001e003c007800f001f003e007c00f801f003e0>]
[16<1f000f8007c003e001f000f8007c003e001f800fc007e003f001f8007c003e00>]
[8<c3c300000000c3c3>]
[16<0040008001000200040008001000200040008000000100020004000800100020>]
[16<0040002000100008000400020001800040002000100008000400020001000080>]
[16<1fc03fe07df0f8f8f07de03fc01f800fc01fe03ff07df8f87df03fe01fc00f80>]
[8<80>]
[8<8040201000000000>]
[8<84cc000048cc0000>]
[8<9900009900000000>]
[8<08040201804020100800020180002010>]
[8<2418814242811824>]
[8<66999966>]
[8<8000000008000000>]
[8<70f8d8f870000000>]
[8<0814224180402010>]
[8<aa00440a11a04400>]
[8<018245aa45820100>]
[8<221c224180808041>]
[8<88000000>]
[8<0855800080550800>]
[8<2844004482440044>]
[8<0810204080412214>]
[8<00>]]]def
/Dfill{
 transform /maxy exch def /maxx exch def
 transform /miny exch def /minx exch def
 minx maxx gt{/minx maxx /maxx minx def def}if
 miny maxy gt{/miny maxy /maxy miny def def}if
 Dpatterns Dstipple 1 sub get exch 1 sub get
 aload pop /stip exch def /stipw exch def /stiph 128 def
 /imatrix[stipw 0 0 stiph 0 0]def
 /tmatrix[stipw 0 0 stiph 0 0]def
 /minx minx cvi stiph idiv stiph mul def
 /miny miny cvi stipw idiv stipw mul def
 gsave eoclip 0 setgray
 miny stiph maxy{
  tmatrix exch 5 exch put
  minx stipw maxx{
   tmatrix exch 4 exch put tmatrix setmatrix
   stipw stiph true imatrix {stip} imagemask
  }for
 }for
 grestore
}def
/Dp{Dfill Dstroke}def
/DP{Dfill currentpoint newpath moveto}def
end

/ditstart{$DITroff begin
 /nfonts 60 def			% NFONTS makedev/ditroff dependent!
 /fonts[nfonts{0}repeat]def
 /fontnames[nfonts{()}repeat]def
/docsave save def
}def

% character outcalls
/oc{
 /pswid exch def /cc exch def /name exch def
 /ditwid pswid fontsize mul resolution mul 72000 div def
 /ditsiz fontsize resolution mul 72 div def
 ocprocs name known{ocprocs name get exec}{name cb}ifelse
}def
/fractm [.65 0 0 .6 0 0] def
/fraction{
 /fden exch def /fnum exch def gsave /cf currentfont def
 cf fractm makefont setfont 0 .3 dm 2 copy neg rmoveto
 fnum show rmoveto currentfont cf setfont(\244)show setfont fden show 
 grestore ditwid 0 rmoveto
}def
/oce{grestore ditwid 0 rmoveto}def
/dm{ditsiz mul}def
/ocprocs 50 dict def ocprocs begin
(14){(1)(4)fraction}def
(12){(1)(2)fraction}def
(34){(3)(4)fraction}def
(13){(1)(3)fraction}def
(23){(2)(3)fraction}def
(18){(1)(8)fraction}def
(38){(3)(8)fraction}def
(58){(5)(8)fraction}def
(78){(7)(8)fraction}def
(sr){gsave 0 .06 dm rmoveto(\326)show oce}def
(is){gsave 0 .15 dm rmoveto(\362)show oce}def
(->){gsave 0 .02 dm rmoveto(\256)show oce}def
(<-){gsave 0 .02 dm rmoveto(\254)show oce}def
(==){gsave 0 .05 dm rmoveto(\272)show oce}def
(uc){gsave currentpoint 400 .009 dm mul add translate
     8 -8 scale ucseal oce}def
end

% an attempt at a PostScript FONT to implement ditroff special chars
% this will enable us to 
%	cache the little buggers
%	generate faster, more compact PS out of psdit
%	confuse everyone (including myself)!
50 dict dup begin
/FontType 3 def
/FontName /DIThacks def
/FontMatrix [.001 0 0 .001 0 0] def
/FontBBox [-260 -260 900 900] def% a lie but ...
/Encoding 256 array def
0 1 255{Encoding exch /.notdef put}for
Encoding
 dup 8#040/space put %space
 dup 8#110/rc put %right ceil
 dup 8#111/lt put %left  top curl
 dup 8#112/bv put %bold vert
 dup 8#113/lk put %left  mid curl
 dup 8#114/lb put %left  bot curl
 dup 8#115/rt put %right top curl
 dup 8#116/rk put %right mid curl
 dup 8#117/rb put %right bot curl
 dup 8#120/rf put %right floor
 dup 8#121/lf put %left  floor
 dup 8#122/lc put %left  ceil
 dup 8#140/sq put %square
 dup 8#141/bx put %box
 dup 8#142/ci put %circle
 dup 8#143/br put %box rule
 dup 8#144/rn put %root extender
 dup 8#145/vr put %vertical rule
 dup 8#146/ob put %outline bullet
 dup 8#147/bu put %bullet
 dup 8#150/ru put %rule
 dup 8#151/ul put %underline
 pop
/DITfd 100 dict def
/BuildChar{0 begin
 /cc exch def /fd exch def
 /charname fd /Encoding get cc get def
 /charwid fd /Metrics get charname get def
 /charproc fd /CharProcs get charname get def
 charwid 0 fd /FontBBox get aload pop setcachedevice
 2 setlinejoin 40 setlinewidth
 newpath 0 0 moveto gsave charproc grestore
 end}def
/BuildChar load 0 DITfd put
/CharProcs 50 dict def
CharProcs begin
/space{}def
/.notdef{}def
/ru{500 0 rls}def
/rn{0 840 moveto 500 0 rls}def
/vr{0 800 moveto 0 -770 rls}def
/bv{0 800 moveto 0 -1000 rls}def
/br{0 840 moveto 0 -1000 rls}def
/ul{0 -140 moveto 500 0 rls}def
/ob{200 250 rmoveto currentpoint newpath 200 0 360 arc closepath stroke}def
/bu{200 250 rmoveto currentpoint newpath 200 0 360 arc closepath fill}def
/sq{80 0 rmoveto currentpoint dround newpath moveto
    640 0 rlineto 0 640 rlineto -640 0 rlineto closepath stroke}def
/bx{80 0 rmoveto currentpoint dround newpath moveto
    640 0 rlineto 0 640 rlineto -640 0 rlineto closepath fill}def
/ci{500 360 rmoveto currentpoint newpath 333 0 360 arc
    50 setlinewidth stroke}def

/lt{0 -200 moveto 0 550 rlineto currx 800 2cx s4 add exch s4 a4p stroke}def
/lb{0 800 moveto 0 -550 rlineto currx -200 2cx s4 add exch s4 a4p stroke}def
/rt{0 -200 moveto 0 550 rlineto currx 800 2cx s4 sub exch s4 a4p stroke}def
/rb{0 800 moveto 0 -500 rlineto currx -200 2cx s4 sub exch s4 a4p stroke}def
/lk{0 800 moveto 0 300 -300 300 s4 arcto pop pop 1000 sub
    0 300 4 2 roll s4 a4p 0 -200 lineto stroke}def
/rk{0 800 moveto 0 300 s2 300 s4 arcto pop pop 1000 sub
    0 300 4 2 roll s4 a4p 0 -200 lineto stroke}def
/lf{0 800 moveto 0 -1000 rlineto s4 0 rls}def
/rf{0 800 moveto 0 -1000 rlineto s4 neg 0 rls}def
/lc{0 -200 moveto 0 1000 rlineto s4 0 rls}def
/rc{0 -200 moveto 0 1000 rlineto s4 neg 0 rls}def
end

/Metrics 50 dict def Metrics begin
/.notdef 0 def
/space 500 def
/ru 500 def
/br 0 def
/lt 416 def
/lb 416 def
/rt 416 def
/rb 416 def
/lk 416 def
/rk 416 def
/rc 416 def
/lc 416 def
/rf 416 def
/lf 416 def
/bv 416 def
/ob 350 def
/bu 350 def
/ci 750 def
/bx 750 def
/sq 750 def
/rn 500 def
/ul 500 def
/vr 0 def
end

DITfd begin
/s2 500 def /s4 250 def /s3 333 def
/a4p{arcto pop pop pop pop}def
/2cx{2 copy exch}def
/rls{rlineto stroke}def
/currx{currentpoint pop}def
/dround{transform round exch round exch itransform} def
end
end
/DIThacks exch definefont pop
ditstart
(psc)xT
576 1 1 xr
1(Times-Roman)xf 1 f
2(Times-Italic)xf 2 f
3(Times-Bold)xf 3 f
4(Times-BoldItalic)xf 4 f
5(Helvetica)xf 5 f
6(Helvetica-Bold)xf 6 f
7(Courier)xf 7 f
8(Courier-Bold)xf 8 f
9(Symbol)xf 9 f
10(DIThacks)xf 10 f
10 s
1 f
xi
%%EndProlog

%%Page: 201 1
10 s 10 xH 0 xS 1 f
3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
24 s
1260 768(A)N
1398(n)X
1553(Im)X
1788(p)X
1895(lem)X
2194(en)X
(tation)S
2915(of)X
3123(a)X
3267(L)X
3395(og-)X
1096 960(S)N
1203(tru)X
1459(ctu)X
1715(red)X
2040(F)X
2157(ile)X
2398(S)X
2505(ystem)X
3033(for)X
3326(U)X
3464(N)X
3602(IX)X
2 f
12 s
1753 1152(Margo)N
2038(Seltzer)X
1 f
2324(--)X
2412(Harvard)X
2751(University)X
2 f
1502 1248(Keith)N
1735(Bostic)X
1 f
2000(--)X
2088(University)X
2518(of)X
2622(California,)X
3061(Berkeley)X
2 f
1261 1344(Marshall)N
1637(Kirk)X
1832(McKusick)X
1 f
2241(--)X
2329(University)X
2759(of)X
2863(California,)X
3302(Berkeley)X
2 f
1586 1440(Carl)N
1786(Staelin)X
1 f
2078(--)X
2166(Hewlett-Packard)X
2837(Laboratories)X
3 f
2195 1632(ABSTRACT)N
1 f
10 s
843 1851(Research)N
1162(results)X
1395([ROSE91])X
1757(suggest)X
2021(that)X
2165(a)X
2225(log-structured)X
2698(\256le)X
2823(system)X
3068(\(LFS\))X
3282(offers)X
3493(the)X
3614(potential)X
3917(for)X
843 1941(dramatically)N
1270(improved)X
1603(write)X
1794(performance,)X
2247(faster)X
2452(recovery)X
2760(time,)X
2948(and)X
3090(faster)X
3295(\256le)X
3423(creation)X
3708(and)X
3850(dele-)X
843 2031(tion)N
989(than)X
1149(traditional)X
1500(UNIX)X
1723(\256le)X
1847(systems.)X
2162(This)X
2326(paper)X
2527(presents)X
2812(a)X
2870(redesign)X
3164(and)X
3302(implementation)X
3825(of)X
3913(the)X
843 2121(Sprite)N
1056([ROSE91])X
1416(log-structured)X
1888(\256le)X
2012(system)X
2255(that)X
2396(is)X
2470(more)X
2656(robust)X
2877(and)X
3014(integrated)X
3356(into)X
3501(the)X
3620(vnode)X
3837(inter-)X
843 2211(face)N
1001([KLEI86].)X
1380(Measurements)X
1870(show)X
2061(its)X
2158(performance)X
2587(to)X
2671(be)X
2769(superior)X
3054(to)X
3138(the)X
3258(4BSD)X
3475(Fast)X
3630(File)X
3776(System)X
843 2301(\(FFS\))N
1050(in)X
1133(a)X
1190(variety)X
1434(of)X
1522(benchmarks)X
1931(and)X
2068(not)X
2191(signi\256cantly)X
2606(less)X
2746(than)X
2904(FFS)X
3056(in)X
3138(any)X
3274(test.)X
3445(Unfortunately,)X
3935(an)X
843 2391(enhanced)N
1177(version)X
1443(of)X
1540(FFS)X
1702(\(with)X
1901(read)X
2070(and)X
2216(write)X
2411(clustering\))X
2783([MCVO91])X
3186(provides)X
3491(comparable)X
3895(and)X
843 2481(sometimes)N
1217(superior)X
1512(performance)X
1951(to)X
2045(our)X
2184(LFS.)X
2392(However,)X
2738(LFS)X
2906(can)X
3049(be)X
3156(extended)X
3477(to)X
3570(provide)X
3846(addi-)X
843 2571(tional)N
1047(functionality)X
1478(such)X
1647(as)X
1735(embedded)X
2086(transactions)X
2490(and)X
2627(versioning,)X
3006(not)X
3129(easily)X
3337(implemented)X
3776(in)X
3859(trad-)X
843 2661(itional)N
1067(\256le)X
1189(systems.)X
3 f
555 2841(1.)N
655(Introduction)X
1 f
755 2964(Early)N
971(UNIX)X
1214(\256le)X
1358(systems)X
1653(used)X
1841(a)X
1918(small,)X
2152(\256xed)X
555 3054(block)N
774(size)X
940(and)X
1097(made)X
1312(no)X
1432(attempt)X
1712(to)X
1814(optimize)X
2134(block)X
555 3144(placement)N
912([THOM78].)X
1349(They)X
1541(assigned)X
1844(disk)X
2004(addresses)X
555 3234(to)N
638(new)X
793(blocks)X
1023(as)X
1111(they)X
1270(were)X
1448(created)X
1702(\(preallocation\))X
2196(and)X
555 3324(wrote)N
787(modi\256ed)X
1120(blocks)X
1377(back)X
1577(to)X
1687(their)X
1882(original)X
2179(disk)X
555 3414(addresses)N
893(\(overwrite\).)X
1325(In)X
1422(these)X
1617(\256le)X
1749(systems,)X
2052(the)X
2179(disk)X
555 3504(became)N
825(fragmented)X
1215(over)X
1382(time)X
1548(so)X
1642(that)X
1785(new)X
1942(\256les)X
2098(tended)X
555 3594(to)N
647(be)X
753(allocated)X
1073(randomly)X
1410(across)X
1641(the)X
1769(disk,)X
1952(requiring)X
2276(a)X
555 3684(disk)N
714(seek)X
883(per)X
1012(\256le)X
1140(system)X
1388(read)X
1553(or)X
1646(write)X
1837(even)X
2015(when)X
2214(the)X
555 3774(\256le)N
677(was)X
822(being)X
1020(read)X
1179(sequentially.)X
755 3897(The)N
902(Fast)X
1057(File)X
1203(System)X
1460(\(FFS\))X
1667([MCKU84])X
2062(dramat-)X
555 3987(ically)N
759(increased)X
1088(\256le)X
1215(system)X
1462(performance.)X
1934(It)X
2008(increased)X
555 4077(the)N
685(block)X
895(size,)X
1072(improving)X
1437(bandwidth.)X
1847(It)X
1928(reduced)X
2214(the)X
555 4167(number)N
830(and)X
976(length)X
1206(of)X
1303(seeks)X
1507(by)X
1616(placing)X
1881(related)X
2129(infor-)X
555 4257(mation)N
828(close)X
1044(together)X
1358(on)X
1488(the)X
1636(disk.)X
1859(For)X
2020(example,)X
555 4347(blocks)N
800(within)X
1040(\256les)X
1209(were)X
1401(allocated)X
1726(on)X
1841(the)X
1974(same)X
2174(or)X
2276(a)X
555 4437(nearby)N
821(cylinder.)X
1171(Finally,)X
1463(it)X
1553(incorporated)X
2005(rotational)X
555 4527(disk)N
723(positioning)X
1117(to)X
1214(reduce)X
1463(delays)X
1702(between)X
2004(accessing)X
555 4617(sequential)N
900(blocks.)X
755 4740(The)N
911(factors)X
1161(limiting)X
1444(FFS)X
1607(performance)X
2045(are)X
2174(syn-)X
555 4830(chronous)N
892(\256le)X
1037(creation)X
1338(and)X
1496(deletion)X
1796(and)X
1954(seek)X
2139(times)X
555 4920(between)N
848(I/O)X
979(requests)X
1266(for)X
1384(different)X
1685(\256les.)X
1882(The)X
2031(synchro-)X
555 5010(nous)N
743(I/O)X
887(for)X
1018(\256le)X
1157(creation)X
1452(and)X
1604(deletion)X
1898(provides)X
2210(\256le)X
555 5100(system)N
799(disk)X
954(data)X
1110(structure)X
1413(recoverability)X
1881(after)X
2051(failures.)X
555 5190(However,)N
919(there)X
1128(exist)X
1327(alternative)X
1714(solutions)X
2050(such)X
2245(as)X
555 5280(NVRAM)N
883(hardware)X
1213([MORA90])X
1617(and)X
1762(logging)X
2035(software)X
555 5370([KAZA90].)N
982(In)X
1079(a)X
1145(UNIX)X
1376(environment,)X
1830(where)X
2056(the)X
2183(vast)X
555 5460(majority)N
855(of)X
951(\256les)X
1113(are)X
1241(small)X
1443([OUST85])X
1814([BAKE91],)X
2214(the)X
555 5550(seek)N
722(times)X
919(between)X
1211(I/O)X
1341(requests)X
1627(for)X
1744(different)X
2044(\256les)X
2200(can)X
555 5640(dominate.)N
915(No)X
1034(solutions)X
1343(to)X
1426(this)X
1562(problem)X
1850(currently)X
2161(exist)X
555 5730(in)N
637(the)X
755(context)X
1011(of)X
1098(FFS.)X
2742 2841(The)N
2903(log-structured)X
3389(\256le)X
3527(system,)X
3805(as)X
3908(proposed)X
4237(in)X
2542 2931([OUST89],)N
2944(attempts)X
3254(to)X
3355(address)X
3635(both)X
3816(of)X
3922(these)X
4125(prob-)X
2542 3021(lems.)N
2758(The)X
2908(fundamental)X
3333(idea)X
3491(of)X
3582(LFS)X
3743(is)X
3820(to)X
3906(improve)X
4197(\256le)X
2542 3111(system)N
2786(performance)X
3214(by)X
3315(storing)X
3558(all)X
3659(\256le)X
3782(system)X
4025(data)X
4180(in)X
4263(a)X
2542 3201(single,)N
2773(continuous)X
3144(log.)X
3306(Such)X
3486(a)X
3542(\256le)X
3664(system)X
3906(is)X
3979(optimized)X
2542 3291(for)N
2686(writing,)X
2987(because)X
3291(no)X
3420(seek)X
3612(is)X
3714(required)X
4031(between)X
2542 3381(writes.)N
2802(It)X
2875(is)X
2952(also)X
3105(optimized)X
3449(for)X
3567(reading)X
3831(\256les)X
3987(written)X
4237(in)X
2542 3471(their)N
2727(entirety)X
3010(over)X
3191(a)X
3265(brief)X
3455(period)X
3697(of)X
3801(time)X
3980(\(as)X
4111(is)X
4201(the)X
2542 3561(norm)N
2740(in)X
2831(UNIX)X
3061(systems\),)X
3390(because)X
3674(the)X
3801(\256les)X
3962(are)X
4089(placed)X
2542 3651(contiguously)N
2995(on)X
3115(disk.)X
3328(Finally,)X
3614(it)X
3698(provides)X
4014(temporal)X
2542 3741(locality,)N
2829(in)X
2918(that)X
3065(it)X
3136(is)X
3216(optimized)X
3563(for)X
3684(accessing)X
4019(\256les)X
4179(that)X
2542 3831(were)N
2733(created)X
2999(or)X
3099(modi\256ed)X
3416(at)X
3507(approximately)X
4003(the)X
4134(same)X
2542 3921(time.)N
2742 4044(The)N
2892(write-optimization)X
3513(of)X
3605(LFS)X
3766(has)X
3897(the)X
4019(potential)X
2542 4134(for)N
2690(dramatically)X
3145(improving)X
3532(system)X
3808(throughput,)X
4232(as)X
2542 4224(large)N
2763(main-memory)X
3277(\256le)X
3438(caches)X
3712(effectively)X
4115(cache)X
2542 4314(reads,)N
2781(but)X
2932(do)X
3060(little)X
3254(to)X
3364(improve)X
3679(write)X
3892(performance)X
2542 4404([OUST89].)N
2954(The)X
3108(goal)X
3275(of)X
3371(the)X
3498(Sprite)X
3718(log-structured)X
4197(\256le)X
2542 4494(system)N
2810(\(Sprite-LFS\))X
3265([ROSE91])X
3649(was)X
3820(to)X
3928(design)X
4183(and)X
2542 4584(implement)N
2907(an)X
3006(LFS)X
3166(that)X
3309(would)X
3531(provide)X
3798(acceptable)X
4160(read)X
2542 4674(performance)N
2979(as)X
3076(well)X
3244(as)X
3341(improved)X
3678(write)X
3872(performance.)X
2542 4764(Our)N
2699(goal)X
2869(is)X
2954(to)X
3048(build)X
3244(on)X
3356(the)X
3486(Sprite-LFS)X
3873(work,)X
4090(imple-)X
2542 4854(menting)N
2830(a)X
2891(new)X
3050(version)X
3311(of)X
3403(LFS)X
3565(that)X
3710(provides)X
4011(the)X
4134(same)X
2542 4944(recoverability)N
3038(guarantees)X
3432(as)X
3549(FFS,)X
3750(provides)X
4075(perfor-)X
2542 5034(mance)N
2779(comparable)X
3181(to)X
3269(or)X
3362(better)X
3571(than)X
3735(FFS,)X
3913(and)X
4055(is)X
4134(well-)X
2542 5124(integrated)N
2883(into)X
3027(a)X
3083(production)X
3450(quality)X
3692(UNIX)X
3913(system.)X
2742 5247(This)N
2957(paper)X
3209(describes)X
3580(the)X
3750(design)X
4031(of)X
4170(log-)X
2542 5337(structured)N
2885(\256le)X
3009(systems)X
3284(in)X
3368(general)X
3627(and)X
3765(our)X
3894(implementa-)X
2542 5427(tion)N
2707(in)X
2809(particular,)X
3177(concentrating)X
3654(on)X
3774(those)X
3983(parts)X
4179(that)X
2542 5517(differ)N
2746(from)X
2927(the)X
3050(Sprite-LFS)X
3430(implementation.)X
3997(We)X
4134(com-)X
2542 5607(pare)N
2715(the)X
2847(performance)X
3287(of)X
3387(our)X
3527(implementation)X
4062(of)X
4162(LFS)X
2542 5697(\(BSD-LFS\))N
2935(with)X
3097(FFS)X
3249(using)X
3442(a)X
3498(variety)X
3741(of)X
3828(benchmarks.)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(201)X

202 p
%%Page: 202 2
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
555 762(2.)N
655(Log-Structured)X
1209(File)X
1358(Systems)X
1 f
755 885(There)N
968(are)X
1092(two)X
1237(fundamental)X
1662(differences)X
2044(between)X
555 975(an)N
688(LFS)X
882(and)X
1055(a)X
1147(traditional)X
1532(UNIX)X
1789(\256le)X
1947(system,)X
2245(as)X
555 1065(represented)N
966(by)X
1086(FFS;)X
1280(the)X
1417(on-disk)X
1696(layout)X
1935(of)X
2041(the)X
2178(data)X
555 1155(structures)N
893(and)X
1035(the)X
1159(recovery)X
1467(model.)X
1733(In)X
1826(this)X
1966(section)X
2218(we)X
555 1245(describe)N
854(the)X
983(key)X
1130(structural)X
1464(elements)X
1779(of)X
1876(an)X
1982(LFS,)X
2169(con-)X
555 1335(trasting)N
822(the)X
947(data)X
1108(structures)X
1447(and)X
1590(recovery)X
1899(to)X
1988(FFS.)X
2187(The)X
555 1425(complete)N
892(design)X
1144(and)X
1303(implementation)X
1848(of)X
1957(Sprite-LFS)X
555 1515(can)N
704(be)X
817(found)X
1041(in)X
1140([ROSE92].)X
1555(Table)X
1775(1)X
1852(compares)X
2196(key)X
555 1605(differences)N
949(between)X
1252(FFS)X
1419(and)X
1570(LFS.)X
1782(The)X
1942(reasons)X
2218(for)X
555 1695(these)N
744(differences)X
1126(will)X
1274(be)X
1373(described)X
1704(in)X
1789(detail)X
1990(in)X
2075(the)X
2196(fol-)X
555 1785(lowing)N
797(sections.)X
3 f
555 1971(2.1.)N
715(Disk)X
890(Layout)X
1 f
755 2094(In)N
847(both)X
1014(FFS)X
1171(and)X
1312(LFS,)X
1494(a)X
1555(\256le's)X
1739(physical)X
2030(disk)X
2187(lay-)X
555 2184(out)N
678(is)X
752(described)X
1081(by)X
1182(an)X
1278(index)X
1476(structure)X
1777(\()X
2 f
1804(inode)X
1 f
1982(\))X
2029(that)X
2169(con-)X
555 2274(tains)N
732(the)X
856(disk)X
1015(addresses)X
1349(of)X
1442(some)X
2 f
1637(direct)X
1 f
1824(,)X
2 f
1870(indirect)X
1 f
2119(,)X
2 f
2165(dou-)X
555 2364(bly)N
682(indirect)X
1 f
931(,)X
979(and)X
2 f
1123(triply)X
1324(indirect)X
1601(blocks)X
1 f
1806(.)X
1874(Direct)X
2103(blocks)X
555 2454(contain)N
852(data,)X
1067(while)X
1306(indirect)X
1612(blocks)X
1882(contain)X
2179(disk)X
555 2544(addresses)N
885(of)X
974(direct)X
1179(blocks,)X
1430(doubly)X
1673(indirect)X
1939(blocks)X
2169(con-)X
555 2634(tain)N
728(disk)X
914(addresses)X
1274(of)X
1393(indirect)X
1690(blocks,)X
1971(and)X
2139(triply)X
555 2724(indirect)N
857(blocks)X
1122(contain)X
1414(disk)X
1603(addresses)X
1967(of)X
2090(doubly)X
555 2814(indirect)N
822(blocks.)X
1093(The)X
1239(inodes)X
1469(and)X
1606(single,)X
1838(double)X
2077(and)X
2214(tri-)X
555 2904(ple)N
683(indirect)X
958(blocks)X
1196(are)X
1324(referred)X
1609(to)X
1700(as)X
1796 0.2604(``meta-data'')AX
2250(in)X
555 2994(this)N
690(paper.)X
755 3117(The)N
906(FFS)X
1064(is)X
1143(described)X
1477(by)X
1583(a)X
2 f
1645(superblock)X
1 f
2023(that)X
2169(con-)X
555 3207(tains)N
727(\256le)X
850(system)X
1093(parameters)X
1467(\(block)X
1692(size,)X
1857(fragment)X
2167(size,)X
555 3297(and)N
704(\256le)X
839(system)X
1094(size\))X
1279(and)X
1428(disk)X
1593(parameters)X
1978(\(rotational)X
555 3387(delay,)N
789(number)X
1074(of)X
1181(sectors)X
1444(per)X
1586(track,)X
1806(and)X
1961(number)X
2245(of)X
555 3477(cylinders\).)N
956(The)X
1121(superblock)X
1513(is)X
1605(replicated)X
1961(throughout)X
555 3567(the)N
691(\256le)X
831(system)X
1091(to)X
1191(allow)X
1406(recovery)X
1725(from)X
1918(crashes)X
2192(that)X
555 3657(corrupt)N
813(the)X
937(primary)X
1216(copy)X
1397(of)X
1489(the)X
1612(superblock.)X
2029(The)X
2179(disk)X
555 3747(is)N
636(statically)X
952(partitioned)X
1326(into)X
1477(cylinder)X
1767(groups,)X
2032(typically)X
555 3837(between)N
851(16)X
959(and)X
1103(32)X
1210(cylinders)X
1531(to)X
1620(a)X
1683(group.)X
1937(Each)X
2125(group)X
555 3927(contains)N
850(a)X
914(\256xed)X
1102(number)X
1375(of)X
1470(inodes)X
1706(\(usually)X
1991(one)X
2134(inode)X
555 4017(for)N
676(every)X
882(two)X
1029(kilobytes)X
1349(in)X
1438(the)X
1563(group\))X
1803(and)X
1945(bit)X
2055(maps)X
2250(to)X
555 4107(record)N
785(inodes)X
1018(and)X
1157(data)X
1314(blocks)X
1546(available)X
1859(for)X
1976(allocation.)X
555 4197(The)N
717(inodes)X
963(in)X
1062(a)X
1135(cylinder)X
1435(group)X
1659(reside)X
1888(at)X
1983(\256xed)X
2179(disk)X
555 4287(addresses,)N
922(so)X
1031(that)X
1189(disk)X
1360(addresses)X
1706(may)X
1882(be)X
1996(computed)X
555 4377(from)N
754(inode)X
974(numbers.)X
1332(New)X
1526(blocks)X
1777(are)X
1918(allocated)X
2250(to)X
10 f
1000 4516(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1564 4606(Task)N
2633(FFS)X
3415(LFS)X
10 f
1000 4608(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1000 4624(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1040 4706(Assign)N
1282(disk)X
1435(addresses)X
2364(block)X
2562(creation)X
3154(segment)X
3441(write)X
10 f
1000 4716(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1040 4806(Allocate)N
1332(inodes)X
2364(\256xed)X
2544(locations)X
3154(appended)X
3482(to)X
3564(log)X
10 f
1000 4816(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1040 4906(Maximum)N
1393(number)X
1658(of)X
1745(inodes)X
2364(statically)X
2673(determined)X
3154(grows)X
3370(dynamically)X
10 f
1000 4916(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1040 5006(Map)N
1207(inode)X
1405(numbers)X
1701(to)X
1783(disk)X
1936(addresses)X
2364(static)X
2553(address)X
3154(lookup)X
3396(in)X
3478(inode)X
3676(map)X
10 f
1000 5016(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1040 5106(Maintain)N
1349(free)X
1495(space)X
2364(bit)X
2468(maps)X
3154(cleaner)X
3154 5196(segment)N
3441(usage)X
3644(table)X
10 f
1000 5206(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1040 5296(Make)N
1243(\256le)X
1365(system)X
1607(state)X
1774(consistent)X
2364(fsck)X
3154(roll-forward)X
10 f
1000 5306(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1040 5396(Verify)N
1270(directory)X
1580(structure)X
2364(fsck)X
3154(background)X
3553(checker)X
10 f
1000 5406(i)N
1014(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1000(c)X
5396(c)Y
5316(c)Y
5236(c)Y
5156(c)Y
5076(c)Y
4996(c)Y
4916(c)Y
4836(c)Y
4756(c)Y
4676(c)Y
4596(c)Y
2304 5406(c)N
5396(c)Y
5316(c)Y
5236(c)Y
5156(c)Y
5076(c)Y
4996(c)Y
4916(c)Y
4836(c)Y
4756(c)Y
4676(c)Y
4596(c)Y
3094 5406(c)N
5396(c)Y
5316(c)Y
5236(c)Y
5156(c)Y
5076(c)Y
4996(c)Y
4916(c)Y
4836(c)Y
4756(c)Y
4676(c)Y
4596(c)Y
3854 5406(c)N
5396(c)Y
5316(c)Y
5236(c)Y
5156(c)Y
5076(c)Y
4996(c)Y
4916(c)Y
4836(c)Y
4756(c)Y
4676(c)Y
4596(c)Y
3 f
1252 5619(Table)N
1467(1:)X
1554(Comparison)X
1996(of)X
2083(File)X
2232(System)X
2497(Characteristics)X
3039(of)X
3126(FFS)X
3288(and)X
3436(LFS.)X
1 f
4 Ds
1 Dt
3799 1359 MXY
345 950 Dl
3514 1203 MXY
-890 1106 Dl
2831 1333 MXY
1020 -35 Dl
3004 1091 MXY
751 -147 Dl
3 f
4 s
3730 2630(BLOCK)N
3853(MAP)X
3732 2561(MAGIC)N
3853(NUMBER)X
3732 2492(INODE)N
3844(MAP)X
3732 2358(BLOCK)N
3855(TOTALS)X
3177 2633(NUM)N
3261(FRAGS)X
3378(AVAIL)X
3177 2425(LAST)N
3268(BLOCK)X
3391(POS)X
3177 2356(SUMMARY)N
3355(INFO)X
2695 2630(NUM)N
2779(DATA)X
2877(BLOCKS)X
2693 2563(NUM)N
2777(INODE)X
2889(BLOCKS)X
2695 2497(NUM)N
2779(CYLINDERS)X
2693 2427(CYLINDER)N
2870(NUM)X
2695 2358(MOD)N
2781(TIME)X
-1 Ds
3 Dt
2626 2309 MXY
0 341 Dl
1520 0 Dl
0 -341 Dl
-1520 0 Dl
3624 1425(Block)N
3553 1382(Cylinder)N
3682(Group)X
10 s
3626 1835(...)N
3613 1701(...)N
3909 1751(...)N
3911 1872(...)N
4155 1803(...)N
4153 1682(...)N
4149 1537(...)N
4 s
3849 1600(Data)N
3923(Block)X
4009(1)X
3572 1562(Inode)N
3658(Block)X
3744(N)X
10 s
4153 1384(...)N
4 s
3843 1449(Inode)N
3929(Block)X
4015(1)X
1 Dt
4075 1019 MXY
0 251 Dl
3799 998 MXY
0 294 Dl
3609 1207 MXY
3609 1207 moveto
 3625.54 1185.38 3642.07 1163.77 3663 1147 curveto
 3683.06 1130.93 3707.15 1119.31 3732 1112 curveto
 3753.92 1105.55 3776.44 1102.45 3799 1099 curveto
 3822.62 1095.39 3846.28 1091.4 3870 1091 curveto
 3892.94 1090.62 3915.93 1093.6 3939 1095 curveto
 3961.4 1096.36 3983.87 1096.24 4006 1099 curveto
 4030.15 1102.02 4053.91 1108.47 4077 1117 curveto
 4101.54 1126.06 4125.33 1137.46 4146 1153 curveto
 4158.42 1162.34 4169.71 1173.17 4181 1184 curveto
Dstroke
3695 1266 MXY
3695 1266 moveto
 3707.09 1258.15 3719.18 1250.3 3732 1244 curveto
 3753 1233.67 3775.97 1227.49 3799 1222 curveto
 3821.87 1216.54 3844.81 1211.77 3868 1210 curveto
 3890.18 1208.31 3912.59 1209.37 3935 1210 curveto
 3959.45 1210.68 3983.89 1210.84 4008 1214 curveto
 4030.64 1216.96 4052.99 1222.57 4075 1229 curveto
 4091.12 1233.71 4107.06 1238.85 4123 1244 curveto
Dstroke
4075 1343 MXY
0 540 Dl
3799 1361 MXY
0 540 Dl
3519 1556 MXY
3519 1556 moveto
 3517.03 1577.92 3515.06 1599.83 3519 1620 curveto
 3530.07 1676.59 3587.74 1719.4 3646 1747 curveto
 3730.17 1786.87 3815.59 1795 3901 1795 curveto
 3986.41 1795 4071.83 1786.87 4156 1747 curveto
 4214.26 1719.4 4271.93 1676.59 4283 1620 curveto
 4286.94 1599.83 4284.97 1577.92 4283 1556 curveto
Dstroke
3514 1428 MXY
3514 1428 moveto
 3512.04 1449.91 3510.08 1471.82 3514 1492 curveto
 3525.09 1549.09 3583.24 1592.38 3642 1620 curveto
 3725.84 1659.42 3810.91 1666.95 3896 1667 curveto
 3981.41 1667.05 4066.83 1659.58 4151 1620 curveto
 4209.76 1592.37 4267.91 1549.09 4279 1492 curveto
 4282.92 1471.82 4280.96 1449.91 4279 1428 curveto
Dstroke
1273 MY
3514 1273 moveto
 3512.02 1294.93 3510.05 1316.85 3514 1337 curveto
 3525.14 1393.77 3583.35 1436.44 3642 1464 curveto
 3726.07 1503.51 3811.03 1511.94 3896 1512 curveto
 3981.29 1512.06 4066.6 1503.67 4151 1464 curveto
 4209.65 1436.44 4267.86 1393.77 4279 1337 curveto
 4282.95 1316.85 4280.98 1294.93 4279 1273 curveto
Dstroke
5 Dt
4280 1736 MXY
0 -600 Dl
3514 1732 MXY
0 -600 Dl
1120 MY
3514 1120 moveto
 3512.09 1141.56 3510.18 1163.12 3514 1183 curveto
 3524.97 1240.12 3583.2 1283.39 3642 1311 curveto
 3725.9 1350.4 3810.94 1357.95 3896 1358 curveto
 3981.38 1358.05 4066.77 1350.57 4151 1311 curveto
 4209.8 1283.38 4268.03 1240.12 4279 1183 curveto
 4282.82 1163.12 4280.91 1141.56 4279 1120 curveto
Dstroke
1167 MY
3514 1167 moveto
 3512.09 1145.44 3510.18 1123.87 3514 1104 curveto
 3524.97 1046.9 3583.22 1003.76 3642 976 curveto
 3725.94 936.354 3810.96 928.056 3896 928 curveto
 3981.36 927.944 4066.74 936.192 4151 976 curveto
 4209.79 1003.77 4268.03 1046.9 4279 1104 curveto
 4282.82 1123.87 4280.91 1145.44 4279 1167 curveto
Dstroke
1 Dt
3556 1163 MXY
3556 1163 moveto
 3554.36 1144.81 3552.72 1126.61 3556 1110 curveto
 3565.67 1060.99 3618.13 1025.75 3670 1003 curveto
 3746.14 969.601 3821.02 963.115 3896 963 curveto
 3971.3 962.884 4046.72 969.194 4123 1003 curveto
 4174.5 1025.82 4226.4 1061.18 4236 1110 curveto
 4239.27 1126.63 4237.64 1144.81 4236 1163 curveto
Dstroke
5 Dt
3593 1160 MXY
3593 1160 moveto
 3591.59 1144.22 3590.19 1128.44 3593 1114 curveto
 3601.35 1071.14 3646.85 1040.03 3692 1020 curveto
 3758.5 990.494 3824.25 985 3890 985 curveto
 3955.75 985 4021.5 990.494 4088 1020 curveto
 4133.15 1040.03 4178.65 1071.14 4187 1114 curveto
 4189.81 1128.44 4188.41 1144.22 4187 1160 curveto
Dstroke
1125 MY
3593 1125 moveto
 3591.53 1141.15 3590.05 1157.29 3593 1172 curveto
 3601.52 1214.51 3646.99 1245.03 3692 1265 curveto
 3758.68 1294.58 3824.34 1301 3890 1301 curveto
 3955.66 1301 4021.32 1294.58 4088 1265 curveto
 4133.01 1245.03 4178.48 1214.51 4187 1172 curveto
 4189.95 1157.29 4188.47 1141.15 4187 1125 curveto
Dstroke
1 Dt
3556 1124 MXY
3556 1124 moveto
 3554.36 1142.19 3552.72 1160.39 3556 1177 curveto
 3565.67 1226.01 3618.13 1261.25 3670 1284 curveto
 3746.14 1317.4 3821.02 1323.88 3896 1324 curveto
 3971.3 1324.12 4046.72 1317.81 4123 1284 curveto
 4174.5 1261.18 4226.4 1225.82 4236 1177 curveto
 4239.27 1160.37 4237.64 1142.19 4236 1124 curveto
Dstroke
5 Dt
3514 1672 MXY
3514 1672 moveto
 3512.09 1693.56 3510.18 1715.13 3514 1735 curveto
 3524.97 1792.1 3583.22 1835.24 3642 1863 curveto
 3725.94 1902.65 3810.96 1910.94 3896 1911 curveto
 3981.36 1911.06 4066.74 1902.81 4151 1863 curveto
 4209.79 1835.23 4268.03 1792.1 4279 1735 curveto
 4282.82 1715.13 4280.91 1693.56 4279 1672 curveto
Dstroke
4 Ds
1 Dt
3006 1061 MXY
3 -14 Dl
-5 6 Dl
-9 -1 Dl
11 9 Dl
-65 -182 Dl
2890 1125 MXY
7 -12 Dl
-7 5 Dl
-8 -5 Dl
8 12 Dl
0 -261 Dl
2829 1168 MXY
8 -11 Dl
-8 4 Dl
-7 -4 Dl
7 11 Dl
0 -293 Dl
2702 1065 MXY
11 -8 Dl
-8 1 Dl
-5 -7 Dl
2 14 Dl
84 -195 Dl
-1 Ds
5 Dt
3179 1205 MXY
0 484 Dl
2555 1203 MXY
0 484 Dl
2557 1628 MXY
2557 1628 moveto
 2555.41 1645.8 2553.81 1663.61 2557 1680 curveto
 2566.01 1726.36 2613.27 1761.43 2661 1784 curveto
 2729.36 1816.32 2798.68 1823 2868 1823 curveto
 2937.32 1823 3006.64 1816.32 3075 1784 curveto
 3122.73 1761.43 3169.99 1726.36 3179 1680 curveto
 3182.19 1663.61 3180.59 1645.8 3179 1628 curveto
Dstroke
1 Dt
2789 1203 MXY
2789 1203 moveto
 2788.71 1199.58 2788.43 1196.17 2789 1193 curveto
 2790.78 1183.15 2800.85 1175.73 2811 1171 curveto
 2825.91 1164.06 2841.01 1162.94 2856 1163 curveto
 2870.99 1163.06 2885.89 1164.31 2901 1171 curveto
 2911.53 1175.66 2922.16 1182.96 2924 1193 curveto
 2924.58 1196.15 2924.29 1199.58 2924 1203 curveto
Dstroke
1195 MY
2789 1195 moveto
 2788.65 1198.78 2788.3 1202.56 2789 1206 curveto
 2790.95 1215.52 2800.98 1222.48 2811 1227 curveto
 2826.05 1233.79 2841.08 1235.06 2856 1235 curveto
 2870.92 1234.94 2885.75 1233.54 2901 1227 curveto
 2911.39 1222.55 2921.98 1215.71 2924 1206 curveto
 2924.71 1202.57 2924.36 1198.79 2924 1195 curveto
Dstroke
5 Dt
2754 1191 MXY
2754 1191 moveto
 2753.5 1196.49 2753 1201.99 2754 1207 curveto
 2756.91 1221.63 2772.53 1232.17 2788 1239 curveto
 2810.88 1249.09 2833.45 1251.05 2856 1251 curveto
 2878.23 1250.95 2900.45 1248.94 2923 1239 curveto
 2938.47 1232.18 2954.09 1221.63 2957 1207 curveto
 2958 1201.99 2957.5 1196.49 2957 1191 curveto
Dstroke
1203 MY
2754 1203 moveto
 2753.5 1197.51 2753 1192.01 2754 1187 curveto
 2756.91 1172.37 2772.53 1161.83 2788 1155 curveto
 2810.88 1144.91 2833.45 1142.95 2856 1143 curveto
 2878.23 1143.05 2900.45 1145.06 2923 1155 curveto
 2938.47 1161.82 2954.09 1172.37 2957 1187 curveto
 2958 1192.01 2957.5 1197.51 2957 1203 curveto
Dstroke
2823 MX
2823 1203 moveto
 2822.86 1201.29 2822.71 1199.58 2823 1198 curveto
 2823.89 1193.07 2828.93 1189.36 2834 1187 curveto
 2841.61 1183.45 2849.31 1182.95 2857 1183 curveto
 2864.36 1183.05 2871.71 1183.62 2879 1187 curveto
 2884.07 1189.35 2889.11 1193.07 2890 1198 curveto
 2890.29 1199.58 2890.14 1201.29 2890 1203 curveto
Dstroke
1199 MY
2823 1199 moveto
 2822.86 1200.71 2822.71 1202.42 2823 1204 curveto
 2823.89 1208.93 2828.93 1212.64 2834 1215 curveto
 2841.61 1218.55 2849.31 1219.05 2857 1219 curveto
 2864.36 1218.95 2871.71 1218.38 2879 1215 curveto
 2884.07 1212.65 2889.11 1208.93 2890 1204 curveto
 2890.29 1202.42 2890.14 1200.71 2890 1199 curveto
Dstroke
1 Dt
2720 1190 MXY
2720 1190 moveto
 2719.31 1197.55 2718.61 1205.1 2720 1212 curveto
 2723.92 1231.52 2744.5 1245.82 2765 1255 curveto
 2795.44 1268.63 2825.72 1271 2856 1271 curveto
 2886.28 1271 2916.56 1268.63 2947 1255 curveto
 2967.5 1245.82 2988.08 1231.52 2992 1212 curveto
 2993.39 1205.1 2992.69 1197.55 2992 1190 curveto
Dstroke
1206 MY
2720 1206 moveto
 2719.36 1198.8 2718.72 1191.6 2720 1185 curveto
 2723.79 1165.44 2744.45 1151.17 2765 1142 curveto
 2795.5 1128.38 2825.75 1126 2856 1126 curveto
 2886.25 1126 2916.5 1128.38 2947 1142 curveto
 2967.55 1151.17 2988.21 1165.44 2992 1185 curveto
 2993.28 1191.6 2992.64 1198.8 2992 1206 curveto
Dstroke
5 Dt
2686 1207 MXY
2686 1207 moveto
 2685.16 1197.73 2684.32 1188.47 2686 1180 curveto
 2690.88 1155.37 2717.03 1137.5 2743 1126 curveto
 2781.28 1109.05 2819.14 1105.95 2857 1106 curveto
 2894.53 1106.05 2932.06 1109.2 2970 1126 curveto
 2995.96 1137.49 3022.12 1155.37 3027 1180 curveto
 3028.68 1188.47 3027.84 1197.73 3027 1207 curveto
Dstroke
1187 MY
2686 1187 moveto
 2685.16 1196.27 2684.32 1205.53 2686 1214 curveto
 2690.88 1238.63 2717.03 1256.5 2743 1268 curveto
 2781.28 1284.95 2819.14 1288.05 2857 1288 curveto
 2894.53 1287.95 2932.06 1284.8 2970 1268 curveto
 2995.96 1256.51 3022.12 1238.63 3027 1214 curveto
 3028.68 1205.53 3027.84 1196.27 3027 1187 curveto
Dstroke
1 Dt
2651 1185 MXY
2651 1185 moveto
 2649.96 1196.33 2648.92 1207.66 2651 1218 curveto
 2656.96 1247.69 2688.61 1269.19 2720 1283 curveto
 2766.38 1303.41 2812.2 1307.05 2858 1307 curveto
 2903.48 1306.95 2948.95 1303.26 2995 1283 curveto
 3026.38 1269.19 3058.04 1247.7 3064 1218 curveto
 3066.08 1207.66 3065.04 1196.33 3064 1185 curveto
Dstroke
1210 MY
2651 1210 moveto
 2649.96 1198.67 2648.92 1187.34 2651 1177 curveto
 2656.96 1147.31 2688.61 1125.81 2720 1112 curveto
 2766.38 1091.59 2812.2 1087.95 2858 1088 curveto
 2903.48 1088.05 2948.95 1091.74 2995 1112 curveto
 3026.38 1125.81 3058.04 1147.3 3064 1177 curveto
 3066.08 1187.34 3065.04 1198.67 3064 1210 curveto
Dstroke
5 Dt
2621 1184 MXY
2621 1184 moveto
 2619.82 1197.05 2618.63 1210.09 2621 1222 curveto
 2627.92 1256.81 2665.16 1281.9 2702 1298 curveto
 2756.21 1321.69 2809.55 1325.94 2863 1326 curveto
 2916.45 1326.06 2969.99 1321.95 3024 1298 curveto
 3060.47 1281.83 3097.15 1256.62 3104 1222 curveto
 3106.36 1210.08 3105.18 1197.04 3104 1184 curveto
Dstroke
1212 MY
2621 1212 moveto
 2619.82 1198.95 2618.63 1185.91 2621 1174 curveto
 2627.92 1139.19 2665.16 1114.1 2702 1098 curveto
 2756.21 1074.31 2809.55 1070.06 2863 1070 curveto
 2916.45 1069.94 2969.99 1074.05 3024 1098 curveto
 3060.47 1114.17 3097.15 1139.38 3104 1174 curveto
 3106.36 1185.92 3105.18 1198.96 3104 1212 curveto
Dstroke
1 Dt
2591 1215 MXY
2591 1215 moveto
 2589.67 1200.24 2588.35 1185.49 2591 1172 curveto
 2598.81 1132.29 2641.08 1103.61 2683 1085 curveto
 2745.21 1057.38 2806.61 1051.95 2868 1052 curveto
 2929.07 1052.05 2990.13 1057.54 3052 1085 curveto
 3093.91 1103.6 3136.19 1132.29 3144 1172 curveto
 3146.65 1185.49 3145.33 1200.24 3144 1215 curveto
Dstroke
1182 MY
2591 1182 moveto
 2589.62 1197.11 2588.24 1212.22 2591 1226 curveto
 2598.94 1265.67 2641.13 1294.38 2683 1313 curveto
 2745.14 1340.64 2806.58 1346.05 2868 1346 curveto
 2929.1 1345.95 2990.19 1340.48 3052 1313 curveto
 3093.87 1294.39 3136.06 1265.67 3144 1226 curveto
 3146.76 1212.22 3145.38 1197.11 3144 1182 curveto
Dstroke
5 Dt
2557 1218 MXY
2557 1218 moveto
 2555.39 1200.18 2553.78 1182.37 2557 1166 curveto
 2566.06 1119.93 2613.37 1085.35 2661 1063 curveto
 2729.55 1030.84 2798.77 1024 2868 1024 curveto
 2937.23 1024 3006.45 1030.84 3075 1063 curveto
 3122.63 1085.35 3169.94 1119.93 3179 1166 curveto
 3182.22 1182.37 3180.61 1200.18 3179 1218 curveto
Dstroke
1179 MY
2557 1179 moveto
 2555.41 1196.8 2553.81 1214.61 2557 1231 curveto
 2566.01 1277.36 2613.27 1312.43 2661 1335 curveto
 2729.36 1367.32 2798.68 1374 2868 1374 curveto
 2937.32 1374 3006.64 1367.32 3075 1335 curveto
 3122.73 1312.43 3169.99 1277.36 3179 1231 curveto
 3182.19 1214.61 3180.59 1196.8 3179 1179 curveto
Dstroke
6 s
2692 858(Cylinder)N
2885(Groups)X
1 Dt
2624 2378 MXY
1520 0 Dl
2624 2447 MXY
1520 0 Dl
2624 2516 MXY
1520 0 Dl
2624 2585 MXY
1520 0 Dl
3108 2309 MXY
0 336 Dl
3660 2309 MXY
0 336 Dl
4 s
3730 2425(FREE)N
3823(BLOCK)X
3946(POSITION)X
3177 2494(LAST)N
3268(BLOCK)X
3391(POSITION)X
3177 2563(LAST)N
3268(INODE)X
3380(POSITION)X
3511 1117 MXY
0 622 Dl
3 Dt
-1 Ds
10 s
2541 2794(Figure)N
2789(1:)X
2877(Physical)X
3182(Disk)X
3358(Layout)X
3623(of)X
3711(the)X
3839(Fast)X
4006(File)X
4155(Sys-)X
2541 2884(tem.)N
1 f
8 s
2724(The)X
2840(disk)X
2964(is)X
3024(statically)X
3272(partitioned)X
3565(into)X
3681(cylinder)X
3906(groups,)X
4112(each)X
4244(of)X
2541 2974(which)N
2723(is)X
2792(described)X
3062(by)X
3152(a)X
3206(cylinder)X
3441(group)X
3616(block,)X
3800(analogous)X
4085(to)X
4161(a)X
4215(\256le)X
2541 3064(system)N
2740(superblock.)X
3073(Each)X
3221(cylinder)X
3451(group)X
3621(contains)X
3855(a)X
3904(copy)X
4048(of)X
4121(the)X
4219(su-)X
2541 3154(perblock)N
2781(and)X
2889(allocation)X
3157(information)X
3475(for)X
3565(the)X
3659(inodes)X
3842(and)X
3950(blocks)X
4133(within)X
2541 3244(that)N
2653(group.)X
10 s
10 f
2541 3334 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 f
2541 3610(optimize)N
2853(for)X
2978(sequential)X
3334(\256le)X
3467(access.)X
3744(Ideally,)X
4018(logically)X
2541 3700(sequential)N
2888(blocks)X
3119(of)X
3208(a)X
3266(\256le)X
3390(are)X
3510(allocated)X
3821(so)X
3913(that)X
4054(no)X
4155(seek)X
2541 3790(is)N
2670(required)X
3013(between)X
3356(two)X
3551(consecutive)X
4005(accesses.)X
2541 3880(Because)N
2841(data)X
3007(blocks)X
3248(for)X
3374(a)X
3442(\256le)X
3575(are)X
3705(typically)X
4016(accessed)X
2541 3970(together,)N
2866(the)X
3006(FFS)X
3180(policy)X
3421(routines)X
3720(try)X
3850(to)X
3953(place)X
4164(data)X
2541 4060(blocks)N
2772(for)X
2887(a)X
2944(\256le)X
3067(in)X
3150(the)X
3269(same)X
3455(cylinder)X
3739(group,)X
3967(preferably)X
2541 4150(at)N
2627(rotationally)X
3023(optimal)X
3294(positions)X
3609(in)X
3698(the)X
3823(same)X
4015(cylinder.)X
2541 4240(Figure)N
2770(1)X
2830(depicts)X
3077(the)X
3195(physical)X
3482(layout)X
3702(of)X
3789(FFS.)X
3 f
555 6048(202)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

203 p
%%Page: 203 3
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
12 s
1843 1378(...)N
1 Dt
721 931 MXY
16 6 Dl
-8 -8 Dl
4 -10 Dl
-12 12 Dl
281 -63 Dl
1451 941 MXY
-11 -12 Dl
3 10 Dl
-8 8 Dl
16 -6 Dl
-282 -73 Dl
5 s
937 858(SUPERBLOCKS)N
1013 1000(SEGMENT)N
1224(2)X
5 Dt
961 941 MXY
0 84 Dl
334 0 Dl
0 -84 Dl
-334 0 Dl
627 MX
0 84 Dl
334 0 Dl
0 -84 Dl
-334 0 Dl
1462 MX
0 84 Dl
334 0 Dl
0 -84 Dl
-334 0 Dl
1 Dt
1796 2403 MXY
0 84 Dl
501 0 Dl
0 -84 Dl
-501 0 Dl
2320 MY
0 83 Dl
501 0 Dl
0 -83 Dl
-501 0 Dl
2236 MY
0 84 Dl
501 0 Dl
0 -84 Dl
-501 0 Dl
2153 MY
0 83 Dl
501 0 Dl
0 -83 Dl
-501 0 Dl
2069 MY
0 84 Dl
501 0 Dl
0 -84 Dl
-501 0 Dl
1986 MY
0 83 Dl
501 0 Dl
0 -83 Dl
-501 0 Dl
5 Dt
0 501 Dl
501 0 Dl
0 -501 Dl
-501 0 Dl
12 s
1342 1013(...)N
5 s
1535 1000(SEGMENT)N
1746(I)X
1 Dt
1 Di
1465 941 MXY
 1465 941 lineto
 1521 941 lineto
 1521 1025 lineto
 1465 1025 lineto
 1465 941 lineto
closepath 3 1465 941 1521 1025 Dp
627 MX
 627 941 lineto
 682 941 lineto
 682 1025 lineto
 627 1025 lineto
 627 941 lineto
closepath 3 627 941 682 1025 Dp
4 Ds
1462 2278 MXY
334 209 Dl
1462 2194 MXY
334 -208 Dl
-1 Ds
627 2027 MXY
0 84 Dl
417 0 Dl
0 -84 Dl
-417 0 Dl
1044 MX
0 84 Dl
418 0 Dl
0 -84 Dl
-418 0 Dl
627 2612 MXY
0 84 Dl
835 0 Dl
0 -84 Dl
-835 0 Dl
2529 MY
0 83 Dl
835 0 Dl
0 -83 Dl
-835 0 Dl
2445 MY
0 84 Dl
835 0 Dl
0 -84 Dl
-835 0 Dl
2361 MY
0 84 Dl
835 0 Dl
0 -84 Dl
-835 0 Dl
2278 MY
0 83 Dl
835 0 Dl
0 -83 Dl
-835 0 Dl
2194 MY
0 84 Dl
835 0 Dl
0 -84 Dl
-835 0 Dl
2111 MY
0 83 Dl
835 0 Dl
0 -83 Dl
-835 0 Dl
1944 MY
0 83 Dl
835 0 Dl
0 -83 Dl
-835 0 Dl
1860 MY
0 84 Dl
835 0 Dl
0 -84 Dl
-835 0 Dl
1777 MY
0 83 Dl
835 0 Dl
0 -83 Dl
-835 0 Dl
1693 MY
0 84 Dl
835 0 Dl
0 -84 Dl
-835 0 Dl
5 Dt
0 1003 Dl
835 0 Dl
0 -1003 Dl
-835 0 Dl
710 2671(INODE)N
852(DISK)X
960(ADDRESS)X
1157(1)X
710 2504(INODE)N
852(DISK)X
960(ADDRESS)X
1157(N)X
710 1919(NEXT)N
832(SEGMENT)X
1043(POINTER)X
710 1836(DATA)N
834(CHECKSUM)X
710 1752(SUMMARY)N
934(CHECKSUM)X
1963 941 MXY
0 84 Dl
334 0 Dl
0 -84 Dl
-334 0 Dl
700 1000(SEGMENT)N
911(1)X
12 s
1843 1013(...)N
5 s
2010 1000(SEGMENT)N
2221(N)X
627 1192 MXY
0 334 Dl
1670 0 Dl
0 -334 Dl
-1670 0 Dl
4 Ds
1 Dt
961 1025 MXY
-334 167 Dl
-1 Ds
0 334 Dl
334 0 Dl
0 -334 Dl
-334 0 Dl
961 MX
0 334 Dl
334 0 Dl
0 -334 Dl
-334 0 Dl
1963 MX
0 334 Dl
334 0 Dl
0 -334 Dl
-334 0 Dl
1462 MX
0 334 Dl
334 0 Dl
0 -334 Dl
-334 0 Dl
694 1334(SEGMENT)N
687 1418(SUMMARY)N
12 s
1342 1378(...)N
5 s
2054 1376(DATA)N
2178(N)X
1552(INODES)X
1056(DATA)X
1180(1)X
4 Ds
1295 1025 MXY
1002 167 Dl
717 2086(NUM)N
823(FINFOS)X
1139(NUM)X
1245(INODES)X
717 2170(FLAGS)N
717 2003(CREATE)N
895(TIME)X
717 2253(FINFO)N
851(1)X
12 s
717 2307(.)N
717 2328(.)N
717 2349(.)N
5 s
717 2420(FINFO)N
851(N)X
12 s
717 2558(.)N
717 2579(.)N
717 2600(.)N
627 1526 MXY
0 167 Dl
5 s
1882 2044(NUM)N
1988(BLOCKS)X
1882 2128(VERSION)N
2075(NUMBER)X
1882 2211(INODE)N
2024(NUMBER)X
12 s
1882 2349(.)N
1882 2370(.)N
1882 2391(.)N
961 1526 MXY
501 167 Dl
5 s
562 958(\(a\))N
561 1209(\(b\))N
563 1710(\(c\))N
1730 1961(\(d\))N
1879 2295(LOGICAL)N
2079(BLOCK)X
2234(1)X
1879 2462(LOGICAL)N
2079(BLOCK)X
2234(N)X
3 Dt
-1 Ds
10 s
555 2840(Figure)N
803(2:)X
891(A)X
970(Log-Structured)X
1525(File)X
1675(System.)X
1 f
8 s
1973(A)X
2035(\256le)X
2133(system)X
555 2930(is)N
626(composed)X
913(of)X
3 f
994(segments)X
1 f
1270(as)X
1350(shown)X
1544(in)X
1621(Figure)X
1815(\(a\).)X
1944(Each)X
2098(segment)X
555 3020(consists)N
788(of)X
871(a)X
929(summary)X
1197(block)X
1368(followed)X
1624(by)X
1717(data)X
1852(blocks)X
2048(and)X
2169(inode)X
555 3110(blocks)N
742(\(b\).)X
868(The)X
3 f
987(segment)X
1230(summary)X
1 f
1509(contains)X
1741(checksums)X
2040(to)X
2109(validate)X
555 3200(both)N
701(the)X
811(segment)X
1056(summary)X
1326(and)X
1450(the)X
1559(data)X
1696(blocks,)X
1910(a)X
1969(timestamp,)X
2283(a)X
555 3290(pointer)N
755(to)X
824(the)X
921(next)X
1049(segment,)X
1296(and)X
1406(information)X
1726(that)X
1840(describes)X
2095(each)X
2229(\256le)X
555 3380(and)N
673(inode)X
841(that)X
963(appears)X
1183(in)X
1258(the)X
1361(segment)X
1599(\(c\).)X
1726(Files)X
1876(are)X
1978(described)X
2247(by)X
3 f
555 3470(FINFO)N
1 f
773(structures)X
1040(that)X
1155(identify)X
1373(the)X
1470(inode)X
1631(number)X
1845(and)X
1956(version)X
2162(of)X
2233(the)X
555 3560(\256le)N
653(\(as)X
743(well)X
869(as)X
938(each)X
1070(block)X
1228(of)X
1297(that)X
1409(\256le\))X
1528(located)X
1728(in)X
1794(the)X
1888(segment)X
2117(\(d\).)X
10 s
10 f
555 3650 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 f
755 3926(LFS)N
923(is)X
1007(a)X
1074(hybrid)X
1314(between)X
1613(a)X
1680(sequential)X
2035(database)X
555 4016(log)N
678(and)X
815(FFS.)X
1008(It)X
1078(performs)X
1389(all)X
1490(writes)X
1707(sequentially,)X
2135(like)X
2276(a)X
555 4106(database)N
871(log,)X
1032(but)X
1172(incorporates)X
1607(the)X
1743(FFS)X
1913(index)X
2129(struc-)X
555 4196(tures)N
732(into)X
877(this)X
1012(log)X
1134(to)X
1216(support)X
1476(ef\256cient)X
1759(random)X
2024(retrieval.)X
555 4286(In)N
651(an)X
755(LFS,)X
940(the)X
1066(disk)X
1227(is)X
1308(statically)X
1625(partitioned)X
2000(into)X
2152(\256xed)X
555 4376(size)N
703(segments,)X
1044(typically)X
1347(one-half)X
1638(megabyte.)X
2013(The)X
2161(logi-)X
555 4466(cal)N
680(ordering)X
983(of)X
1081(these)X
1277(segments)X
1606(creates)X
1861(a)X
1928(single,)X
2169(con-)X
555 4556(tinuous)N
810(log.)X
755 4679(An)N
880(LFS)X
1043(is)X
1122(described)X
1456(by)X
1562(a)X
1624(superblock)X
2002(similar)X
2250(to)X
555 4769(the)N
695(one)X
853(used)X
1042(by)X
1164(FFS.)X
1377(When)X
1610(writing,)X
1902(LFS)X
2080(gathers)X
555 4859(many)N
764(dirty)X
946(pages)X
1160(and)X
1307(prepares)X
1610(to)X
1702(write)X
1897(them)X
2087(to)X
2179(disk)X
555 4949(sequentially)N
982(in)X
1084(the)X
1222(next)X
1400(available)X
1730(segment.)X
2077(At)X
2197(this)X
555 5039(time,)N
750(LFS)X
920(sorts)X
1104(the)X
1234(blocks)X
1475(by)X
1587(logical)X
1837(block)X
2047(number,)X
555 5129(assigns)N
824(them)X
1022(disk)X
1193(addresses,)X
1559(and)X
1712(updates)X
1994(the)X
2129(meta-)X
555 5219(data)N
714(to)X
800(re\257ect)X
1025(their)X
1196(addresses.)X
1568(The)X
1717(updated)X
1995(meta-data)X
555 5309(blocks)N
795(are)X
925(gathered)X
1233(with)X
1406(the)X
1534(data)X
1698(blocks,)X
1957(and)X
2103(all)X
2213(are)X
555 5399(written)N
814(to)X
908(a)X
976(segment.)X
1315(As)X
1436(a)X
1504(result,)X
1733(the)X
1862(inodes)X
2102(are)X
2232(no)X
555 5489(longer)N
797(in)X
896(\256xed)X
1093(locations,)X
1439(so,)X
1567(LFS)X
1740(requires)X
2035(an)X
2147(addi-)X
555 5579(tional)N
763(data)X
922(structure,)X
1248(called)X
1465(the)X
2 f
1588(inode)X
1791(map)X
1 f
1954([ROSE90],)X
555 5669(that)N
695(maps)X
884(inode)X
1082(numbers)X
1378(to)X
1460(disk)X
1613(addresses.)X
2741 762(Since)N
2943(LFS)X
3104(writes)X
3324(dirty)X
3499(data)X
3657(blocks)X
3890(into)X
4038(the)X
4160(next)X
2541 852(available)N
2860(segment,)X
3176(modi\256ed)X
3489(blocks)X
3727(are)X
3855(written)X
4110(to)X
4200(the)X
2541 942(disk)N
2715(in)X
2818(different)X
3135(locations)X
3464(than)X
3642(the)X
3780(original)X
4069(blocks.)X
2541 1032(This)N
2726(space)X
2947(reallocation)X
3368(is)X
3463(called)X
3697(a)X
3775 0.2250(``no-overwrite'')AX
2541 1122(policy,)N
2803(and)X
2961(it)X
3047(necessitates)X
3468(a)X
3546(mechanism)X
3953(to)X
4057(reclaim)X
2541 1212(space)N
2761(resulting)X
3082(from)X
3279(deleted)X
3552(or)X
3659(overwritten)X
4069(blocks.)X
2541 1302(The)N
2 f
2719(cleaner)X
1 f
3013(is)X
3119(a)X
3208(garbage)X
3516(collection)X
3885(process)X
4178(that)X
2541 1392(reclaims)N
2840(space)X
3046(from)X
3229(the)X
3353(\256le)X
3481(system)X
3729(by)X
3835(reading)X
4102(a)X
4164(seg-)X
2541 1482(ment,)N
2755(discarding)X
3123(``dead'')X
3416(blocks)X
3658(\(blocks)X
3927(that)X
4080(belong)X
2541 1572(to)N
2626(deleted)X
2881(\256les)X
3037(or)X
3127(that)X
3270(have)X
3445(been)X
3620(superseded)X
3999(by)X
4101(newer)X
2541 1662(blocks\),)N
2833(and)X
2985(appending)X
3355(any)X
3507(``live'')X
3770(blocks.)X
4054(For)X
4200(the)X
2541 1752(cleaner)N
2808(to)X
2904(determine)X
3259(which)X
3489(blocks)X
3732(in)X
3828(a)X
3898(segment)X
4199(are)X
2541 1842(``live,'')N
2810(it)X
2875(must)X
3051(be)X
3148(able)X
3303(to)X
3386(identify)X
3656(each)X
3825(block)X
4024(in)X
4107(a)X
4164(seg-)X
2541 1932(ment.)N
2764(This)X
2929(determination)X
3397(is)X
3473(done)X
3652(by)X
3755(including)X
4080(a)X
4138(sum-)X
2541 2022(mary)N
2737(block)X
2946(in)X
3039(each)X
3218(segment)X
3516(that)X
3667(identi\256es)X
3991(the)X
4120(inode)X
2541 2112(and)N
2689(logical)X
2939(block)X
3149(number)X
3425(of)X
3523(every)X
3733(block)X
3942(in)X
4035(the)X
4164(seg-)X
2541 2202(ment.)N
2784(In)X
2894(addition,)X
3219(the)X
3360(kernel)X
3604(maintains)X
3957(a)X
2 f
4035(segment)X
2541 2292(usage)N
2764(table)X
1 f
2960(that)X
3116(shows)X
3351(the)X
3484(number)X
3764(of)X
3866(``live'')X
4129(bytes)X
2541 2382(and)N
2702(the)X
2845(last)X
3001(modi\256ed)X
3330(time)X
3517(of)X
3629(each)X
3822(segment.)X
4173(The)X
2541 2472(cleaner)N
2796(uses)X
2956(this)X
3093(table)X
3271(to)X
3355(determine)X
3698(which)X
3916(segments)X
4236(to)X
2541 2562(clean)N
2739([ROSE90].)X
3145(Figure)X
3382(2)X
3450(shows)X
3678(the)X
3804(physical)X
4098(layout)X
2541 2652(of)N
2628(the)X
2746(LFS.)X
2741 2775(While)N
2958(FFS)X
3111(\257ushes)X
3354(individual)X
3699(blocks)X
3929(and)X
4065(\256les)X
4218(on)X
2541 2865(demand,)N
2861(the)X
3004(LFS)X
3186(must)X
3386(gather)X
3632(data)X
3811(into)X
3980(segments.)X
2541 2955(Usually,)N
2835(there)X
3021(will)X
3170(not)X
3296(be)X
3396(enough)X
3656(dirty)X
3831(blocks)X
4064(to)X
4150(\256ll)X
4262(a)X
2541 3045(complete)N
2884(segment)X
3200([BAKE92],)X
3620(in)X
3730(which)X
3974(case)X
4161(LFS)X
2541 3135(writes)N
2 f
2763(partial)X
3005(segments)X
1 f
3299(.)X
3364(A)X
3447(physical)X
3739(segment)X
4031(contains)X
2541 3225(one)N
2690(or)X
2790(more)X
2988(partial)X
3226(segments.)X
3597(For)X
3741(the)X
3872(remainder)X
4231(of)X
2541 3315(this)N
2682(paper,)X
2 f
2907(segment)X
1 f
3196(will)X
3346(be)X
3448(used)X
3621(to)X
3709(refer)X
3888(to)X
3975(the)X
4098(physi-)X
2541 3405(cal)N
2667(partitioning)X
3072(of)X
3171(the)X
3301(disk,)X
3485(and)X
2 f
3632(partial)X
3880(segment)X
1 f
4174(will)X
2541 3495(be)N
2639(used)X
2808(to)X
2892(refer)X
3066(to)X
3149(a)X
3206(unit)X
3351(of)X
3439(writing.)X
3731(Small)X
3938(partial)X
4164(seg-)X
2541 3585(ments)N
2759(most)X
2941(commonly)X
3310(result)X
3515(from)X
3698(NFS)X
3871(operations)X
4231(or)X
2 f
2541 3675(fsync)N
1 f
2706(\(2\))X
2852(requests,)X
3186(while)X
3415(writes)X
3662(resulting)X
3993(from)X
4200(the)X
2 f
2541 3765(sync)N
1 f
2684(\(2\))X
2803(system)X
3050(call)X
3191(or)X
3283(system)X
3529(memory)X
3820(shortages)X
4147(typi-)X
2541 3855(cally)N
2728(form)X
2915(larger)X
3134(partials,)X
3421(ideally)X
3669(taking)X
3899(up)X
4009(an)X
4115(entire)X
2541 3945(segment.)N
2877(During)X
3133(a)X
2 f
3198(sync)X
1 f
3341(,)X
3389(the)X
3515(inode)X
3721(map)X
3887(and)X
4031(segment)X
2541 4035(usage)N
2751(table)X
2934(are)X
3060(also)X
3216(written)X
3470(to)X
3559(disk,)X
3739(creating)X
4025(a)X
2 f
4087(check-)X
2541 4125(point)N
1 f
2734(that)X
2883(provides)X
3188(a)X
3253(stable)X
3469(point)X
3662(from)X
3846(which)X
4070(the)X
4196(\256le)X
2541 4215(system)N
2802(can)X
2953(be)X
3068(recovered)X
3425(in)X
3526(case)X
3703(of)X
3808(system)X
4068(failure.)X
2541 4305(Figure)N
2780(3)X
2849(shows)X
3078(the)X
3205(details)X
3443(of)X
3539(allocating)X
3884(three)X
4074(\256les)X
4236(in)X
2541 4395(an)N
2637(LFS.)X
3 f
2541 4581(2.2.)N
2701(File)X
2850(System)X
3115(Recovery)X
1 f
2741 4704(There)N
2962(are)X
3094(two)X
3247(aspects)X
3512(to)X
3606(\256le)X
3740(system)X
3994(recovery:)X
2541 4794(bringing)N
2834(the)X
2954(\256le)X
3077(system)X
3320(to)X
3403(a)X
3460(physically)X
3810(consistent)X
4151(state)X
2541 4884(and)N
2688(verifying)X
3012(the)X
3140(logical)X
3388(structure)X
3699(of)X
3796(the)X
3924(\256le)X
4056(system.)X
2541 4974(When)N
2772(FFS)X
2942(or)X
3047(LFS)X
3222(add)X
3376(a)X
3450(block)X
3666(to)X
3766(a)X
3840(\256le,)X
4000(there)X
4199(are)X
2541 5064(several)N
2808(different)X
3124(pieces)X
3364(of)X
3470(information)X
3887(that)X
4046(may)X
4222(be)X
2541 5154(modi\256ed:)N
2885(the)X
3020(block)X
3235(itself,)X
3452(the)X
3587(inode,)X
3822(the)X
3957(free)X
4120(block)X
2541 5244(map,)N
2727(possibly)X
3021(indirect)X
3294(blocks,)X
3551(and)X
3695(the)X
3821(location)X
4106(of)X
4200(the)X
2541 5334(last)N
2678(allocation.)X
3060(If)X
3140(the)X
3264(system)X
3512(crashes)X
3775(during)X
4010(the)X
4133(addi-)X
2541 5424(tion,)N
2720(the)X
2853(\256le)X
2990(system)X
3247(is)X
3335(likely)X
3552(be)X
3662(left)X
3803(in)X
3899(a)X
3969(physically)X
2541 5514(inconsistent)N
2954(state.)X
3172(Furthermore,)X
3624(there)X
3815(is)X
3898(currently)X
4218(no)X
2541 5604(way)N
2705(for)X
2829(FFS)X
2991(to)X
3083(localize)X
3363(inconsistencies.)X
3917(As)X
4035(a)X
4100(result,)X
2541 5694(FFS)N
2695(must)X
2871(rebuild)X
3119(the)X
3238(entire)X
3442(\256le)X
3565(system)X
3808(state,)X
3996(including)X
2541 5784(cylinder)N
2834(group)X
3051(bit)X
3165(maps)X
3364(and)X
3510(meta-data.)X
3897(At)X
4006(the)X
4133(same)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(203)X

204 p
%%Page: 204 4
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
5 s
2983 2125(Inode)N
3084(map)X
3163(blocks)X
3 f
8 s
2840 1082(...)N
2904(unused)X
3117(blocks)X
3308(...)X
1 Dt
2884 1648 MXY
-14 26 Dl
14 -10 Dl
14 10 Dl
-14 -26 Dl
0 131 Dl
2818 1648 MXY
-14 26 Dl
14 -10 Dl
15 10 Dl
-15 -26 Dl
0 131 Dl
2637 1648 MXY
-33 82 Dl
-1086 0 Dl
2987 1872(SEGMENT)N
5 Dt
2473 1516 MXY
0 132 Dl
1250 0 Dl
0 -132 Dl
-1250 0 Dl
1654 1872(SEGMENT)N
2987 1280(SEGMENT)N
2473 989 MXY
0 132 Dl
1250 0 Dl
0 -132 Dl
-1250 0 Dl
1654 1280(SEGMENT)N
1222 989 MXY
0 132 Dl
1251 0 Dl
0 -132 Dl
-1251 0 Dl
1 f
5 s
2588 2125(Summary)N
2753(Block)X
1 Dt
2473 2043 MXY
 2473 2043 lineto
 2538 2043 lineto
 2538 2174 lineto
 2473 2174 lineto
 2473 2043 lineto
closepath 23 2473 2043 2538 2174 Dp
1222 989 MXY
 1222 989 lineto
 1288 989 lineto
 1288 1121 lineto
 1222 1121 lineto
 1222 989 lineto
closepath 23 1222 989 1288 1121 Dp
1683 2043 MXY
 1683 2043 lineto
 1748 2043 lineto
 1748 2174 lineto
 1683 2174 lineto
 1683 2043 lineto
closepath 3 1683 2043 1748 2174 Dp
2868 MX
 2868 2043 lineto
 2933 2043 lineto
 2933 2174 lineto
 2868 2174 lineto
 2868 2043 lineto
closepath 1 2868 2043 2933 2174 Dp
1288 989 MXY
 1288 989 lineto
 1353 989 lineto
 1353 1121 lineto
 1288 1121 lineto
 1288 989 lineto
closepath 3 1288 989 1353 1121 Dp
1353 MX
 1353 989 lineto
 1419 989 lineto
 1419 1121 lineto
 1353 1121 lineto
 1353 989 lineto
closepath 3 1353 989 1419 1121 Dp
1419 MX
 1419 989 lineto
 1485 989 lineto
 1485 1121 lineto
 1419 1121 lineto
 1419 989 lineto
closepath 21 1419 989 1485 1121 Dp
1485 MX
 1485 989 lineto
 1551 989 lineto
 1551 1121 lineto
 1485 1121 lineto
 1485 989 lineto
closepath 3 1485 989 1551 1121 Dp
1551 MX
 1551 989 lineto
 1617 989 lineto
 1617 1121 lineto
 1551 1121 lineto
 1551 989 lineto
closepath 3 1551 989 1617 1121 Dp
1617 MX
 1617 989 lineto
 1683 989 lineto
 1683 1121 lineto
 1617 1121 lineto
 1617 989 lineto
closepath 3 1617 989 1683 1121 Dp
1452 1121 MXY
33 49 Dl
165 0 Dl
1518 1121 MXY
-14 23 Dl
14 -9 Dl
14 9 Dl
-14 -23 Dl
0 49 Dl
1584 1121 MXY
-15 23 Dl
15 -9 Dl
14 9 Dl
-14 -23 Dl
0 49 Dl
1650 1121 MXY
-15 23 Dl
15 -9 Dl
14 9 Dl
-14 -23 Dl
0 49 Dl
1452 1121 MXY
-33 49 Dl
-98 0 Dl
1386 1121 MXY
-14 23 Dl
14 -9 Dl
15 9 Dl
-15 -23 Dl
0 49 Dl
1321 1121 MXY
-15 23 Dl
15 -9 Dl
14 9 Dl
-14 -23 Dl
0 49 Dl
2538 1516 MXY
0 132 Dl
66 0 Dl
0 -132 Dl
-66 0 Dl
2604 MX
0 132 Dl
66 0 Dl
0 -132 Dl
-66 0 Dl
2670 MX
0 132 Dl
66 0 Dl
0 -132 Dl
-66 0 Dl
2736 MX
0 132 Dl
66 0 Dl
0 -132 Dl
-66 0 Dl
2802 MX
0 132 Dl
66 0 Dl
0 -132 Dl
-66 0 Dl
2868 MX
0 132 Dl
65 0 Dl
0 -132 Dl
-65 0 Dl
1318 907(\256le1)N
1565(\256le2)X
2538 1516 MXY
 2538 1516 lineto
 2604 1516 lineto
 2604 1648 lineto
 2538 1648 lineto
 2538 1516 lineto
closepath 3 2538 1516 2604 1648 Dp
2670 MX
 2670 1516 lineto
 2736 1516 lineto
 2736 1648 lineto
 2670 1648 lineto
 2670 1516 lineto
closepath 3 2670 1516 2736 1648 Dp
2736 MX
 2736 1516 lineto
 2802 1516 lineto
 2802 1648 lineto
 2736 1648 lineto
 2736 1516 lineto
closepath 3 2736 1516 2802 1648 Dp
2604 MX
 2604 1516 lineto
 2670 1516 lineto
 2670 1648 lineto
 2604 1648 lineto
 2604 1516 lineto
closepath 21 2604 1516 2670 1648 Dp
2802 MX
 2802 1516 lineto
 2868 1516 lineto
 2868 1648 lineto
 2802 1648 lineto
 2802 1516 lineto
closepath 3 2802 1516 2868 1648 Dp
2868 MX
 2868 1516 lineto
 2933 1516 lineto
 2933 1648 lineto
 2868 1648 lineto
 2868 1516 lineto
closepath 3 2868 1516 2933 1648 Dp
2933 MX
 2933 1516 lineto
 2999 1516 lineto
 2999 1648 lineto
 2933 1648 lineto
 2933 1516 lineto
closepath 1 2933 1516 2999 1648 Dp
2571 1648 MXY
-14 37 Dl
14 -13 Dl
15 13 Dl
-15 -37 Dl
0 82 Dl
2637 1648 MXY
33 49 Dl
99 0 Dl
1648 MY
-15 22 Dl
15 -8 Dl
14 8 Dl
-14 -22 Dl
0 49 Dl
2703 1648 MXY
-14 22 Dl
14 -8 Dl
14 8 Dl
-14 -22 Dl
0 49 Dl
2637 1500 MXY
15 -23 Dl
-15 8 Dl
-14 -8 Dl
14 39 Dl
0 -49 Dl
2898 1434(\256le1)N
2871 1368(more)N
2963(of)X
2536 1467(\256le2)N
2512 1417(block)N
2611(2)X
2701 1434(\256le3)N
1781 2125(Data)N
1867(Block)X
2078 2043 MXY
 2078 2043 lineto
 2143 2043 lineto
 2143 2174 lineto
 2078 2174 lineto
 2078 2043 lineto
closepath 21 2078 2043 2143 2174 Dp
1128 1072(\(a\))N
1126 1599(\(b\))N
5 Dt
2473 989 MXY
0 132 Dl
2176 2125(Inodes)N
1 Dt
1683 989 MXY
 1683 989 lineto
 1748 989 lineto
 1748 1121 lineto
 1683 1121 lineto
 1683 989 lineto
closepath 23 1683 989 1748 1121 Dp
3 f
1256 858(PARTIAL)N
1447(SEGMENT)X
1882 874(PARTIAL)N
2073(SEGMENT)X
1222 1187 MXY
0 66 Dl
444 0 Dl
1962 MX
511 0 Dl
0 -66 Dl
1650 858 MXY
33 0 Dl
0 66 Dl
1255 858 MXY
-33 0 Dl
0 66 Dl
2275 858 MXY
198 0 Dl
0 49 Dl
1864 858 MXY
-181 0 Dl
5 Dt
1222 1516 MXY
0 132 Dl
1251 0 Dl
0 -132 Dl
-1251 0 Dl
1 Dt
 1222 1516 lineto
 1288 1516 lineto
 1288 1648 lineto
 1222 1648 lineto
 1222 1516 lineto
closepath 23 1222 1516 1288 1648 Dp
1288 MX
 1288 1516 lineto
 1353 1516 lineto
 1353 1648 lineto
 1288 1648 lineto
 1288 1516 lineto
closepath 3 1288 1516 1353 1648 Dp
1353 MX
 1353 1516 lineto
 1419 1516 lineto
 1419 1648 lineto
 1353 1648 lineto
 1353 1516 lineto
closepath 3 1353 1516 1419 1648 Dp
1419 MX
 1419 1516 lineto
 1485 1516 lineto
 1485 1648 lineto
 1419 1648 lineto
 1419 1516 lineto
closepath 21 1419 1516 1485 1648 Dp
1485 MX
 1485 1516 lineto
 1551 1516 lineto
 1551 1648 lineto
 1485 1648 lineto
 1485 1516 lineto
closepath 3 1485 1516 1551 1648 Dp
1551 MX
 1551 1516 lineto
 1617 1516 lineto
 1617 1648 lineto
 1551 1648 lineto
 1551 1516 lineto
closepath 3 1551 1516 1617 1648 Dp
1617 MX
 1617 1516 lineto
 1683 1516 lineto
 1683 1648 lineto
 1617 1648 lineto
 1617 1516 lineto
closepath 3 1617 1516 1683 1648 Dp
1452 1648 MXY
33 49 Dl
165 0 Dl
1518 1648 MXY
-14 37 Dl
14 -13 Dl
14 13 Dl
-14 -37 Dl
0 82 Dl
1584 1648 MXY
-15 22 Dl
15 -8 Dl
14 8 Dl
-14 -22 Dl
0 49 Dl
1650 1648 MXY
-15 37 Dl
15 -13 Dl
14 13 Dl
-14 -37 Dl
0 82 Dl
1452 1648 MXY
-33 49 Dl
-98 0 Dl
1386 1648 MXY
-14 57 Dl
14 -21 Dl
15 21 Dl
-15 -57 Dl
0 125 Dl
1321 1648 MXY
-15 57 Dl
15 -21 Dl
14 21 Dl
-14 -57 Dl
0 125 Dl
1 f
1318 1434(\256le1)N
1565(\256le2)X
5 Dt
2473 1516 MXY
0 132 Dl
1 Dt
1683 1516 MXY
 1683 1516 lineto
 1748 1516 lineto
 1748 1648 lineto
 1683 1648 lineto
 1683 1516 lineto
closepath 23 1683 1516 1748 1648 Dp
3 f
1256 1384(PARTIAL)N
1447(SEGMENT)X
1882 1401(PARTIAL)N
2073(SEGMENT)X
1650 1384 MXY
33 0 Dl
0 66 Dl
1255 1384 MXY
-33 0 Dl
0 66 Dl
2275 1384 MXY
198 0 Dl
0 50 Dl
1864 1384 MXY
-181 0 Dl
2473 1516 MXY
 2473 1516 lineto
 2538 1516 lineto
 2538 1648 lineto
 2473 1648 lineto
 2473 1516 lineto
closepath 23 2473 1516 2538 1648 Dp
2637 1648 MXY
0 131 Dl
1321 MX
1563 0 Dl
2966 1516 MXY
-33 -49 Dl
-296 0 Dl
2473 1253 MXY
543 0 Dl
3279 MX
444 0 Dl
0 -66 Dl
8 s
1807 1609(...)N
1871(another)X
2100(partial)X
2301(...)X
3107(...)X
3171(another)X
3400(partial)X
3601(...)X
1807 1082(...)N
1871(another)X
2100(partial)X
2301(...)X
3 Dt
-1 Ds
10 s
555 2318(Figure)N
805(3:)X
895(File)X
1047(Allocation)X
1421(in)X
1510(a)X
1573(Log-Structured)X
2130(File)X
2282(System.)X
1 f
8 s
2582(In)X
2654(\256gure)X
2822(\(a\),)X
2927(two)X
3042(\256les)X
3168(have)X
3307(been)X
3446(written,)X
3662(\256le1)X
3795(and)X
3905(\256le2.)X
4069(Each)X
4214(has)X
555 2408(an)N
634(index)X
795(structure)X
1037(in)X
1106(the)X
1203(meta-data)X
1473(block)X
1634(that)X
1749(is)X
1811(allocated)X
2060(after)X
2195(it)X
2250(on)X
2332(disk.)X
2489(In)X
2560(\256gure)X
2727(\(b\),)X
2835(the)X
2931(middle)X
3127(block)X
3287(of)X
3358(\256le2)X
3490(has)X
3593(been)X
3731(modi\256ed.)X
4009(A)X
4073(new)X
4197(ver-)X
555 2498(sion)N
681(of)X
753(it)X
808(is)X
870(added)X
1041(to)X
1110(the)X
1207(log,)X
1324(as)X
1396(well)X
1525(as)X
1597(a)X
1644(new)X
1769(version)X
1975(of)X
2046(its)X
2125(meta-data.)X
2426(Then)X
2575(\256le3)X
2707(is)X
2768(created,)X
2985(causing)X
3198(its)X
3277(blocks)X
3462(and)X
3572(meta-data)X
3841(to)X
3909(be)X
3987(appended)X
4249(to)X
555 2588(the)N
651(log.)X
783(Next,)X
941(\256le1)X
1073(has)X
1176(two)X
1290(more)X
1439(blocks)X
1624(appended)X
1886(to)X
1954(it,)X
2024(causing)X
2237(the)X
2333(blocks)X
2518(and)X
2628(a)X
2674(new)X
2798(version)X
3004(of)X
3075(\256le1's)X
3253(meta-data)X
3522(to)X
3590(be)X
3667(appended)X
3928(to)X
3995(the)X
4090(log.)X
4221(On)X
555 2678(checkpoint,)N
867(the)X
2 f
961(inode)X
1119(map)X
1 f
1245(containing)X
1531(pointers)X
1753(to)X
1819(the)X
1913(meta-data)X
2180(blocks,)X
2379(is)X
2438(written.)X
10 s
10 f
555 2768(h)N
579(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)X
1 f
555 3044(time,)N
740(FFS)X
895(veri\256es)X
1154(the)X
1275(directory)X
1588(structure)X
1892(and)X
2031(all)X
2134(block)X
555 3134(pointers)N
843(within)X
1077(the)X
1204(\256le)X
1335(system.)X
1626(Traditionally,)X
2 f
2093(fsck)X
1 f
2218(\(8\))X
555 3224(is)N
628(the)X
746(agent)X
940(that)X
1080(performs)X
1390(both)X
1552(of)X
1639(these)X
1824(functions.)X
755 3347(In)N
843(contrast)X
1118(to)X
1201(FFS,)X
1374(LFS)X
1531(writes)X
1747(only)X
1909(to)X
1991(the)X
2109(end)X
2245(of)X
555 3437(the)N
683(log)X
815(and)X
961(is)X
1043(able)X
1206(to)X
1297(locate)X
1518(potential)X
1827(inconsistencies)X
555 3527(and)N
715(recover)X
1001(to)X
1107(a)X
1187(consistent)X
1551(physical)X
1862(state)X
2052(quickly.)X
555 3617(This)N
726(part)X
880(of)X
976(recovery)X
1287(in)X
1377(LFS)X
1542(is)X
1623(more)X
1816(similar)X
2066(to)X
2156(stan-)X
555 3707(dard)N
740(database)X
1059(recovery)X
1382([HAER83])X
1775(than)X
1954(to)X
2 f
2057(fsck)X
1 f
2182(.)X
2263(It)X
555 3797(consists)N
845(of)X
949(two)X
1106(parts:)X
1320(initializing)X
1702(all)X
1818(the)X
1952(\256le)X
2090(system)X
555 3887(structures)N
901(from)X
1091(the)X
1222(most)X
1410(recent)X
1640(checkpoint)X
2025(and)X
2174(then)X
555 3977(``rolling)N
863(forward'')X
1213(to)X
1315(incorporate)X
1721(any)X
1877(modi\256cations)X
10 f
1001 4116(i)N
1012(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1041 4206(Phase)N
1248(I)X
1453(Traverse)X
1755(inodes)X
1453 4296(Validate)N
1745(all)X
1845(block)X
2043(pointers.)X
1453 4386(Record)N
1705(inode)X
1903(state)X
2070(\(allocated)X
2407(or)X
2494(unallocated\))X
2911(and)X
3047(\256le)X
3169(type)X
3327(for)X
3441(each)X
3609(inode.)X
1453 4476(Record)N
1705(inode)X
1903(numbers)X
2199(and)X
2335(block)X
2533(addresses)X
2861(of)X
2948(all)X
3048(directories.)X
10 f
1001 4486(i)N
1012(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1041 4576(Phase)N
1248(II)X
1453(Sort)X
1606(directories)X
1965(by)X
2065(disk)X
2218(address)X
2479(order.)X
1453 4666(Traverse)N
1755(directories)X
2114(in)X
2196(disk)X
2349(address)X
2610(order.)X
1453 4756(Validate)N
1745(``.''.)X
1453 4846(Record)N
1705(``..''.)X
1453 4936(Validate)N
1745(directories')X
2131(contents,)X
2438(type,)X
2616(and)X
2752(link)X
2896(counts.)X
1453 5026(Recursively)N
1856(verify)X
2068(``..''.)X
10 f
1001 5036(i)N
1012(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1041 5126(Phase)N
1248(III)X
1453(Attach)X
1687(any)X
1823(unresolved)X
2195(``..'')X
2363(trees)X
2535(to)X
2617(lost+found.)X
1453 5216(Mark)N
1647(all)X
1747(inodes)X
1976(in)X
2058(those)X
2247(trees)X
2419(as)X
2506(``found''.)X
10 f
1001 5226(i)N
1012(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1041 5316(Phase)N
1248(IV)X
1453(Put)X
1579(any)X
1715(inodes)X
1944(that)X
2084(are)X
2203(not)X
2325(``found'')X
2640(in)X
2722(lost+found.)X
1453 5406(Verify)N
1683(link)X
1827(counts)X
2056(for)X
2170(every)X
2369(\256le.)X
10 f
1001 5416(i)N
1012(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1041 5506(Phase)N
1248(V)X
1453(Update)X
1705(bit)X
1809(maps)X
1998(in)X
2080(cylinder)X
2363(groups.)X
10 f
1001 5516(i)N
1012(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1001(c)X
5476(c)Y
5396(c)Y
5316(c)Y
5236(c)Y
5156(c)Y
5076(c)Y
4996(c)Y
4916(c)Y
4836(c)Y
4756(c)Y
4676(c)Y
4596(c)Y
4516(c)Y
4436(c)Y
4356(c)Y
4276(c)Y
4196(c)Y
1393 5516(c)N
5476(c)Y
5396(c)Y
5316(c)Y
5236(c)Y
5156(c)Y
5076(c)Y
4996(c)Y
4916(c)Y
4836(c)Y
4756(c)Y
4676(c)Y
4596(c)Y
4516(c)Y
4436(c)Y
4356(c)Y
4276(c)Y
4196(c)Y
3852 5516(c)N
5476(c)Y
5396(c)Y
5316(c)Y
5236(c)Y
5156(c)Y
5076(c)Y
4996(c)Y
4916(c)Y
4836(c)Y
4756(c)Y
4676(c)Y
4596(c)Y
4516(c)Y
4436(c)Y
4356(c)Y
4276(c)Y
4196(c)Y
3 f
1951 5639(Table)N
2166(2:)X
2253(Five)X
2420(Phases)X
2671(of)X
2 f
2758(fsck)X
3 f
2883(.)X
1 f
2541 3044(that)N
2699(occurred)X
3018(subsequently.)X
3513(The)X
3675(roll)X
3823(forward)X
4115(phase)X
2541 3134(consists)N
2821(of)X
2914(reading)X
3181(each)X
3355(segment)X
3648(after)X
3822(the)X
3946(checkpoint)X
2541 3224(in)N
2643(time)X
2825(order)X
3035(and)X
3191(updating)X
3511(the)X
3648(\256le)X
3789(system)X
4050(state)X
4236(to)X
2541 3314(re\257ect)N
2766(the)X
2888(contents)X
3179(of)X
3270(the)X
3392(segment.)X
3722(The)X
3870(next)X
4031(segment)X
2541 3404(pointers)N
2841(in)X
2945(the)X
3085(segment)X
3394(summary)X
3734(facilitate)X
4057(reading)X
2541 3494(from)N
2735(the)X
2871(last)X
3020(checkpoint)X
3410(to)X
3510(the)X
3646(end)X
3800(of)X
3905(the)X
4041(log,)X
4200(the)X
2541 3584(checksums)N
2930(are)X
3066(used)X
3249(to)X
3347(identify)X
3632(valid)X
3828(segments,)X
4182(and)X
2541 3674(the)N
2664(timestamps)X
3053(are)X
3177(used)X
3349(to)X
3436(distinguish)X
3811(the)X
3934(partial)X
4164(seg-)X
2541 3764(ments)N
2765(written)X
3025(after)X
3206(the)X
3337(checkpoint)X
3722(and)X
3870(those)X
4071(written)X
2541 3854(before)N
2769(which)X
2987(have)X
3161(been)X
3335(reclaimed.)X
3714(The)X
3860(\256le)X
3983(and)X
4120(block)X
2541 3944(numbers)N
2849(in)X
2943(the)X
3073(FINFO)X
3336(structures)X
3680(are)X
3811(used)X
3990(to)X
4084(update)X
3 f
555 6048(204)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

205 p
%%Page: 205 5
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
555 762(the)N
679(inode)X
883(map,)X
1067(segment)X
1360(usage)X
1569(table,)X
1771(and)X
1913(inodes)X
2147(mak-)X
555 852(ing)N
681(the)X
803(blocks)X
1036(in)X
1122(the)X
1244(partial)X
1473(segment)X
1764(extant.)X
2024(As)X
2137(is)X
2214(the)X
555 942(case)N
724(for)X
848(database)X
1155(recovery,)X
1487(the)X
1614(recovery)X
1925(time)X
2096(is)X
2178(pro-)X
555 1032(portional)N
881(to)X
980(the)X
1115(interval)X
1397(between)X
1701(\256le)X
1839(system)X
2097(check-)X
555 1122(points.)N
755 1245(While)N
973(standard)X
1267(LFS)X
1426(recovery)X
1730(quickly)X
1992(brings)X
2214(the)X
555 1335(\256le)N
683(system)X
930(to)X
1017(a)X
1078(physically)X
1432(consistent)X
1777(state,)X
1969(it)X
2038(does)X
2210(not)X
555 1425(provide)N
822(the)X
941(same)X
1127(guarantees)X
1492(made)X
1687(by)X
2 f
1788(fsck)X
1 f
1913(.)X
1974(When)X
2 f
2187(fsck)X
1 f
555 1515(completes,)N
931(not)X
1064(only)X
1237(is)X
1321(the)X
1450(\256le)X
1582(system)X
1834(in)X
1926(a)X
1992(consistent)X
555 1605(state,)N
753(but)X
886(the)X
1015(directory)X
1336(structure)X
1648(has)X
1786(been)X
1969(veri\256ed)X
2245(as)X
555 1695(well.)N
756(The)X
904(\256ve)X
1047(passes)X
1274(of)X
2 f
1363(fsck)X
1 f
1510(are)X
1631(summarized)X
2045(in)X
2129(Table)X
555 1785(2.)N
659(For)X
793(LFS)X
953(to)X
1038(provide)X
1306(the)X
1427(same)X
1615(level)X
1794(of)X
1884(robustness)X
2245(as)X
555 1875(FFS,)N
756(LFS)X
942(must)X
1146(make)X
1369(many)X
1596(of)X
1712(the)X
1859(same)X
2073(checks.)X
555 1965(While)N
775(LFS)X
936(has)X
1067(no)X
1171(bit)X
1279(maps)X
1471(to)X
1556(rebuild,)X
1826(the)X
1947(veri\256cation)X
555 2055(of)N
649(block)X
854(pointers)X
1138(and)X
1280(directory)X
1596(structure)X
1903(and)X
2045(contents)X
555 2145(is)N
629(crucial)X
869(for)X
984(the)X
1103(system)X
1346(to)X
1428(recover)X
1690(from)X
1866(media)X
2082(failure.)X
555 2235(This)N
721(recovery)X
1027(will)X
1175(be)X
1275(discussed)X
1606(in)X
1692(more)X
1881(detail)X
2083(in)X
2169(Sec-)X
555 2325(tion)N
699(3.4.)X
3 f
555 2511(3.)N
655(Engineering)X
1092(LFS)X
1 f
755 2634(While)N
992(the)X
1131(Sprite-LFS)X
1527(implementation)X
2070(was)X
2236(an)X
555 2724(excellent)N
872(proof)X
1073(of)X
1167(concept,)X
1464(it)X
1535(had)X
1678(several)X
1933(de\256ciencies)X
555 2814(that)N
702(made)X
903(it)X
974(unsuitable)X
1330(for)X
1451(a)X
1514(production)X
1887(environment.)X
555 2904(Our)N
706(goal)X
870(was)X
1021(to)X
1109(engineer)X
1412(a)X
1474(version)X
1735(of)X
1827(LFS)X
1989(that)X
2134(could)X
555 2994(be)N
659(used)X
834(as)X
929(a)X
992(replacement)X
1412(for)X
1533(FFS.)X
1732(Some)X
1941(of)X
2035(our)X
2169(con-)X
555 3084(cerns)N
745(were)X
922(as)X
1009(follows:)X
635 3207(1.)N
755(Sprite-LFS)X
1170(consumes)X
1546(excessive)X
1914(amounts)X
2245(of)X
755 3297(memory.)N
635 3420(2.)N
755(Write)X
977(requests)X
1278(are)X
1415(successful)X
1783(even)X
1973(if)X
2060(there)X
2259(is)X
755 3510(insuf\256cient)N
1135(disk)X
1288(space.)X
635 3633(3.)N
755(Recovery)X
1085(does)X
1254(nothing)X
1520(to)X
1604(verify)X
1818(the)X
1938(consistency)X
755 3723(of)N
842(the)X
960(\256le)X
1082(system)X
1324(directory)X
1634(structure.)X
635 3846(4.)N
755(Segment)X
1055(validation)X
1395(is)X
1468(hardware)X
1788(dependent.)X
635 3969(5.)N
755(All)X
879(\256le)X
1002(systems)X
1276(use)X
1404(a)X
1461(single)X
1673(cleaner)X
1927(and)X
2064(a)X
2121(single)X
755 4059(cleaning)N
1047(policy.)X
635 4182(6.)N
755(There)X
976(are)X
1108(no)X
1221(performance)X
1660(numbers)X
1968(that)X
2120(meas-)X
755 4272(ure)N
878(the)X
996(cleaner)X
1249(overhead.)X
755 4395(The)N
914(earlier)X
1154(description)X
1544(of)X
1645(LFS)X
1816(focused)X
2100(on)X
2214(the)X
555 4485(overall)N
819(strategy)X
1114(of)X
1222(log-structured)X
1712(\256le)X
1854(systems.)X
2187(The)X
555 4575(rest)N
704(of)X
804(Section)X
1077(3)X
1150(discusses)X
1481(how)X
1652(BSD-LFS)X
2004(addresses)X
555 4665(the)N
718(\256rst)X
907(\256ve)X
1092(problems)X
1455(listed)X
1692(above.)X
1968(Section)X
2272(4)X
555 4755(addresses)N
934(the)X
1102(implementation)X
1674(issues)X
1935(speci\256c)X
2250(to)X
555 4845(integration)N
958(in)X
1076(a)X
1168(BSD)X
1378(framework,)X
1806(and)X
1977(Section)X
2272(5)X
555 4935(presents)N
845(the)X
970(performance)X
1404(analysis.)X
1729(In)X
1822(most)X
2003(ways,)X
2214(the)X
555 5025(logical)N
809(framework)X
1197(of)X
1299(Sprite-LFS)X
1689(is)X
1777(unchanged.)X
2200(We)X
555 5115(have)N
738(kept)X
907(the)X
1035(segmented)X
1408(log)X
1540(structure)X
1851(and)X
1997(the)X
2125(major)X
555 5205(support)N
821(structures)X
1159(associated)X
1515(with)X
1683(the)X
1806(log,)X
1953(namely)X
2214(the)X
555 5295(inode)N
765(map,)X
955(segment)X
1254(usage)X
1469(table,)X
1677(and)X
1825(cleaner.)X
2129(How-)X
555 5385(ever,)N
742(to)X
832(address)X
1101(the)X
1227(problems)X
1553(described)X
1888(above)X
2107(and)X
2250(to)X
555 5475(integrate)N
876(LFS)X
1053(into)X
1217(a)X
1293(BSD)X
1488(system,)X
1769(we)X
1902(have)X
2093(altered)X
555 5565(nearly)N
778(all)X
880(of)X
969(the)X
1089(details)X
1320(of)X
1409(implementation,)X
1953(including)X
2276(a)X
555 5655(few)N
705(fundamental)X
1135(design)X
1372(decisions.)X
1738(Most)X
1930(notably,)X
2218(we)X
555 5745(have)N
728(moved)X
967(the)X
1086(cleaner)X
1339(into)X
1483(user)X
1637(space,)X
1856(eliminated)X
2214(the)X
2541 762(directory)N
2852(operation)X
3176(log,)X
3318(and)X
3454(altered)X
3693(the)X
3811(segment)X
4098(layout)X
2541 852(on)N
2641(disk.)X
3 f
2541 1038(3.1.)N
2701(Memory)X
3016(Consumption)X
1 f
2741 1161(Sprite-LFS)N
3124(assumes)X
3419(that)X
3566(the)X
3691(system)X
3940(has)X
4074(a)X
4137(large)X
2541 1251(physical)N
2829(memory)X
3117(and)X
3254(ties)X
3386(down)X
3585(substantial)X
3948(portions)X
4231(of)X
2541 1341(it.)N
2645(The)X
2790(following)X
3121(storage)X
3373(is)X
3446(reserved:)X
3 f
2541 1554(Two)N
2712(64K)X
2874(or)X
2970(128K)X
3172(staging)X
3436(buffers)X
1 f
2741 1644(Since)N
2945(not)X
3073(all)X
3179(devices)X
3446(support)X
3712(scatter/gather)X
4171(I/O,)X
2741 1734(data)N
2902(is)X
2982(written)X
3236(in)X
3325(buffers)X
3580(large)X
3768(enough)X
4031(to)X
4120(allow)X
2741 1824(the)N
2884(maximum)X
3253(transfer)X
3544(size)X
3714(supported)X
4075(by)X
4200(the)X
2741 1914(disk)N
2907(controller,)X
3272(typically)X
3585(64K)X
3756(or)X
3856(128K.)X
4106(These)X
2741 2004(buffers)N
2992(are)X
3114(allocated)X
3426(per)X
3551(\256le)X
3675(system)X
3919(from)X
4097(kernel)X
2741 2094(memory.)N
3 f
2541 2217(One)N
2703(cleaning)X
3007(segment)X
1 f
2741 2307(One)N
2897(segment's)X
3244(worth)X
3453(of)X
3542(buffer)X
3760(cache)X
3965(blocks)X
4195(per)X
2741 2397(\256le)N
2863(system)X
3105(are)X
3224(reserved)X
3517(for)X
3631(cleaning.)X
3 f
2541 2520(Two)N
2712(read-only)X
3061(segments)X
1 f
2741 2610(Two)N
2929(segments')X
3294(worth)X
3521(of)X
3628(buffer)X
3865(cache)X
4089(blocks)X
2741 2700(per)N
2886(\256le)X
3030(system)X
3294(are)X
3435(marked)X
3717(read-only)X
4066(so)X
4178(that)X
2741 2790(they)N
2914(may)X
3087(be)X
3198(reclaimed)X
3550(by)X
3665(Sprite-LFS)X
4054(without)X
2741 2880(requiring)N
3055(an)X
3151(I/O.)X
3 f
2541 3003(Buffers)N
2815(reserved)X
3130(for)X
3253(the)X
3380(cleaner)X
1 f
2741 3093(Each)N
2929(\256le)X
3058(system)X
3307(also)X
3463(reserves)X
3754(some)X
3950(buffers)X
4204(for)X
2741 3183(the)N
2866(cleaner.)X
3165(The)X
3316(number)X
3587(of)X
3680(buffers)X
3934(is)X
4013(speci\256ed)X
2741 3273(in)N
2835(the)X
2965(superblock)X
3349(and)X
3497(is)X
3582(set)X
3703(during)X
3943(\256le)X
4076(system)X
2741 3363(creation.)N
3076(It)X
3161(speci\256es)X
3473(the)X
3606(minimum)X
3951(number)X
4231(of)X
2741 3453(clean)N
2940(buffers)X
3197(that)X
3346(must)X
3530(be)X
3635(present)X
3896(in)X
3987(the)X
4114(cache)X
2741 3543(at)N
2828(any)X
2973(point)X
3166(in)X
3257(time.)X
3467(On)X
3593(the)X
3719(Sprite)X
3938(cluster,)X
4200(the)X
2741 3633(amount)N
3019(of)X
3124(buffer)X
3359(space)X
3575(reserved)X
3885(for)X
4016(10)X
4133(com-)X
2741 3723(monly)N
2965(used)X
3132(\256le)X
3254(systems)X
3527(was)X
3672(37)X
3772(megabytes.)X
3 f
2541 3846(One)N
2703(segment)X
1 f
2741 3936(This)N
2920(segment)X
3223(\(typically)X
3566(one-half)X
3870(megabyte\))X
4245(is)X
2741 4026(allocated)N
3069(from)X
3263(kernel)X
3502(memory)X
3807(for)X
3939(use)X
4083(by)X
4200(the)X
2741 4116(cleaner.)N
3038(Since)X
3239(this)X
3377(one)X
3516(segment)X
3806(is)X
3882(allocated)X
4195(per)X
2741 4206(system,)N
3008(only)X
3175(one)X
3315(\256le)X
3441(system)X
3687(per)X
3814(system)X
4060(may)X
4222(be)X
2741 4296(cleaned)N
3007(at)X
3085(a)X
3141(time.)X
2741 4419(The)N
2904(reserved)X
3215(memory)X
3519(described)X
3864(above)X
4093(makes)X
2541 4509(Sprite-LFS)N
2926(a)X
2992(very)X
3165(``bad)X
3364(neighbor'')X
3732(as)X
3828(kernel)X
4058(subsys-)X
2541 4599(tems)N
2720(compete)X
3019(for)X
3140(memory.)X
3474(While)X
3697(memory)X
3991(continues)X
2541 4689(to)N
2635(become)X
2916(cheaper,)X
3218(a)X
3285(typical)X
3534(laptop)X
3765(system)X
4018(has)X
4156(only)X
2541 4779(three)N
2731(to)X
2822(eight)X
3011(megabytes)X
3383(of)X
3479(memory,)X
3795(and)X
3940(might)X
4155(very)X
2541 4869(reasonably)N
2909(expect)X
3139(to)X
3221(have)X
3393(three)X
3574(or)X
3661(more)X
3846(\256le)X
3968(systems.)X
2741 4992(BSD-LFS)N
3113(greatly)X
3388(reduces)X
3686(the)X
3836(memory)X
4155(con-)X
2541 5082(sumption)N
2892(of)X
3013(LFS.)X
3244(First,)X
3464(BSD-LFS)X
3836(does)X
4036(not)X
4191(use)X
2541 5172(separate)N
2846(buffers)X
3115(for)X
3250(writing)X
3522(large)X
3724(transfers)X
4042(to)X
4145(disk,)X
2541 5262(instead)N
2804(it)X
2883(uses)X
3056(the)X
3189(regular)X
3452(buffer)X
3684(cache)X
3903(blocks.)X
4187(For)X
2541 5352(disk)N
2698(controllers)X
3065(that)X
3209(do)X
3313(not)X
3438(coalesce)X
3734(contiguous)X
4108(reads,)X
2541 5442(we)N
2658(use)X
2788(64K)X
2949(staging)X
3202(buffers)X
3452(\(brie\257y)X
3710(allocated)X
4022(from)X
4200(the)X
2541 5532(regular)N
2792(kernel)X
3016(memory)X
3306(pool\))X
3498(to)X
3583(do)X
3686(transfers.)X
4026(The)X
4173(size)X
2541 5622(of)N
2640(the)X
2770(staging)X
3033(buffer)X
3262(was)X
3419(set)X
3539(to)X
3632(the)X
3761(minimum)X
4102(of)X
4200(the)X
2541 5712(maximum)N
2890(transfer)X
3161(sizes)X
3342(for)X
3460(currently)X
3774(supported)X
4114(disks.)X
2541 5802(However,)N
2878(simulation)X
3237(results)X
3468(in)X
3552([CAR92])X
3872(show)X
4063(that)X
4204(for)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(205)X

206 p
%%Page: 206 6
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
555 762(current)N
834(disks,)X
1069(the)X
1217(write)X
1432(size)X
1607(minimizing)X
2025(the)X
2173(read)X
555 852(response)N
859(time)X
1023(is)X
1098(typically)X
1400(about)X
1600(two)X
1742(tracks;)X
1978(two)X
2120(tracks)X
555 942(is)N
628(close)X
813(to)X
895(64)X
995(kilobytes)X
1308(for)X
1422(the)X
1540(disks)X
1724(on)X
1824(our)X
1951(systems.)X
755 1065(Secondly,)N
1150(rather)X
1415(than)X
1629(reserving)X
2004(read-only)X
555 1155(buffers,)N
834(we)X
959(initiate)X
1212(segment)X
1509(writes)X
1735(when)X
1939(the)X
2067(number)X
555 1245(of)N
648(dirty)X
825(buffers)X
1079(crosses)X
1337(a)X
1399(threshold.)X
1763(That)X
1936(threshold)X
2259(is)X
555 1335(currently)N
871(measured)X
1205(in)X
1293(available)X
1609(buffer)X
1832(headers,)X
2123(not)X
2250(in)X
555 1425(physical)N
844(memory,)X
1153(although)X
1455(systems)X
1730(with)X
1894(an)X
1991(integrated)X
555 1515(buffer)N
788(cache)X
1008(and)X
1160(virtual)X
1404(memory)X
1706(will)X
1865(have)X
2052(simpler,)X
555 1605(more)N
740(straight-forward)X
1282(mechanisms.)X
755 1728(Finally,)N
1040(the)X
1177(cleaner)X
1449(is)X
1541(implemented)X
1998(as)X
2104(a)X
2178(user)X
555 1818(space)N
768(process.)X
1082(This)X
1257(approach)X
1585(means)X
1823(that)X
1976(it)X
2053(requires)X
555 1908(no)N
664(dedicated)X
1001(memory,)X
1317(competing)X
1684(for)X
1807(virtual)X
2045(memory)X
555 1998(space)N
754(with)X
916(the)X
1034(other)X
1219(processes.)X
3 f
555 2184(3.2.)N
715(Block)X
930(Accounting)X
1 f
755 2307(Sprite-LFS)N
1139(maintains)X
1479(a)X
1544(count)X
1751(of)X
1846(the)X
1972(number)X
2245(of)X
555 2397(disk)N
716(blocks)X
953(available)X
1270(for)X
1391(writing,)X
1669(i.e.)X
1794(the)X
1919(real)X
2067(number)X
555 2487(of)N
656(disk)X
822(blocks)X
1064(that)X
1217(do)X
1330(not)X
1465(contain)X
1734(useful)X
1963(data.)X
2170(This)X
555 2577(count)N
755(is)X
830(decremented)X
1263(when)X
1459(blocks)X
1690(are)X
1810(actually)X
2085(written)X
555 2667(to)N
640(disk.)X
835(This)X
999(approach)X
1316(implies)X
1573(that)X
1715(blocks)X
1946(can)X
2080(be)X
2178(suc-)X
555 2757(cessfully)N
867(written)X
1121(to)X
1210(the)X
1335(cache)X
1546(but)X
1674(fail)X
1807(to)X
1895(be)X
1997(written)X
2250(to)X
555 2847(disk)N
726(if)X
813(the)X
949(disk)X
1120(becomes)X
1439(full)X
1588(before)X
1832(the)X
1967(blocks)X
2213(are)X
555 2937(actually)N
834(written.)X
1126(Even)X
1315(if)X
1388(the)X
1510(disk)X
1667(is)X
1744(not)X
1870(full,)X
2025(all)X
2129(avail-)X
555 3027(able)N
730(blocks)X
980(may)X
1158(reside)X
1390(in)X
1492(uncleaned)X
1858(segments)X
2196(and)X
555 3117(new)N
725(data)X
895(cannot)X
1144(be)X
1255(written.)X
1557(To)X
1681(prevent)X
1957(the)X
2090(system)X
555 3207(from)N
738(deadlocking)X
1157(or)X
1251(losing)X
1473(data)X
1634(in)X
1723(these)X
1914(cases,)X
2130(BSD-)X
555 3297(LFS)N
712(uses)X
870(two)X
1010(forms)X
1217(of)X
1304(accounting.)X
755 3420(The)N
908(\256rst)X
1060(form)X
1243(of)X
1337(block)X
1542(accounting)X
1921(is)X
2001(similar)X
2250(to)X
555 3510(that)N
699(maintained)X
1079(by)X
1182(Sprite-LFS.)X
1600(BSD-LFS)X
1942(maintains)X
2276(a)X
555 3600(count)N
756(of)X
846(the)X
966(number)X
1233(of)X
1322(disk)X
1477(blocks)X
1708(that)X
1850(do)X
1952(not)X
2076(contain)X
555 3690(useful)N
778(data.)X
979(It)X
1055(is)X
1135(decremented)X
1573(whenever)X
1912(a)X
1974(new)X
2134(block)X
555 3780(is)N
642(created)X
909(in)X
1005(the)X
1137(cache.)X
1395(Since)X
1607(many)X
1819(\256les)X
1986(die)X
2118(in)X
2214(the)X
555 3870(cache)N
771([BAKE91],)X
1175(this)X
1322(number)X
1599(is)X
1683(incremented)X
2111(when-)X
555 3960(ever)N
720(blocks)X
955(are)X
1079(deleted,)X
1356(even)X
1533(if)X
1607(they)X
1770(were)X
1952(never)X
2156(writ-)X
555 4050(ten)N
673(to)X
755(disk.)X
755 4173(The)N
912(second)X
1167(form)X
1355(of)X
1454(accounting)X
1838(keeps)X
2053(track)X
2245(of)X
555 4263(how)N
734(much)X
953(space)X
1173(is)X
1267(currently)X
1597(available)X
1927(for)X
2061(writing.)X
555 4353(This)N
723(space)X
927(is)X
1005(allocated)X
1320(as)X
1412(soon)X
1588(as)X
1680(a)X
1741(dirty)X
1917(block)X
2120(enters)X
555 4443(the)N
696(cache,)X
943(but)X
1087(is)X
1182(not)X
1326(reclaimed)X
1685(until)X
1873(segments)X
2213(are)X
555 4533(cleaned.)N
866(This)X
1033(count)X
1236(is)X
1314(used)X
1486(to)X
1573(initiate)X
1820(cleaning.)X
2157(If)X
2236(an)X
555 4623(application)N
956(attempts)X
1271(to)X
1377(write)X
1586(data,)X
1784(but)X
1930(there)X
2135(is)X
2232(no)X
555 4713(space)N
772(currently)X
1100(available)X
1428(for)X
1560(writing,)X
1849(the)X
1985(write)X
2188(will)X
555 4803(sleep)N
760(until)X
946(space)X
1165(is)X
1258(available.)X
1628(These)X
1860(two)X
2019(forms)X
2245(of)X
555 4893(accounting)N
957(guarantee)X
1320(that)X
1490(if)X
1589(the)X
1737(operating)X
2090(system)X
555 4983(accepts)N
817(a)X
878(write)X
1068(request)X
1325(from)X
1506(the)X
1628(user,)X
1806(barring)X
2062(a)X
2122(crash,)X
555 5073(it)N
619(will)X
763(perform)X
1042(the)X
1160(write.)X
755 5196(Accounting)N
1153(for)X
1271(the)X
1393(actual)X
1609(disk)X
1766(space)X
1968(required)X
2259(is)X
555 5286(dif\256cult)N
857(because)X
1160(inodes)X
1417(are)X
1564(not)X
1714(written)X
1989(into)X
2161(dirty)X
555 5376(buffers)N
815(and)X
963(segment)X
1261(summaries)X
1639(are)X
1769(not)X
1902(created)X
2166(until)X
555 5466(segments)N
874(are)X
994(written.)X
1282(Every)X
1495(time)X
1658(an)X
1755(inode)X
1954(is)X
2028(modi\256ed)X
555 5556(in)N
645(the)X
771(inode)X
977(cache,)X
1209(a)X
1273(count)X
1479(of)X
1574(inodes)X
1811(to)X
1901(be)X
2005(written)X
2259(is)X
555 5646(incremented.)N
1018(When)X
1236(blocks)X
1471(are)X
1596(dirtied,)X
1851(the)X
1975(number)X
2245(of)X
555 5736(available)N
884(disk)X
1056(blocks)X
1304(is)X
1396(decremented.)X
1886(To)X
2014(decide)X
2263(if)X
2541 762(there)N
2727(is)X
2805(enough)X
3066(disk)X
3224(space)X
3428(to)X
3515(allow)X
3718(another)X
3984(write)X
4174(into)X
2541 852(the)N
2672(cache,)X
2908(the)X
3038(number)X
3315(of)X
3414(segment)X
3713(summaries)X
4092(neces-)X
2541 942(sary)N
2702(to)X
2791(write)X
2982(what)X
3164(is)X
3243(in)X
3331(the)X
3455(cache)X
3665(is)X
3744(computed,)X
4106(added)X
2541 1032(to)N
2632(the)X
2759(number)X
3033(of)X
3129(inode)X
3336(blocks)X
3574(necessary)X
3916(to)X
4007(write)X
4200(the)X
2541 1122(dirty)N
2732(inodes)X
2981(and)X
3137(compared)X
3494(to)X
3596(the)X
3734(amount)X
4013(of)X
4119(space)X
2541 1212(available)N
2862(on)X
2973(the)X
3102(disk.)X
3306(To)X
3426(create)X
3650(more)X
3845(available)X
4165(disk)X
2541 1302(space,)N
2773(either)X
2989(the)X
3120(cleaner)X
3386(must)X
3574(run)X
3713(or)X
3812(dirty)X
3995(blocks)X
4236(in)X
2541 1392(the)N
2659(cache)X
2863(must)X
3038(be)X
3134(deleted.)X
3 f
2541 1578(3.3.)N
2701(Segment)X
3015(Structure)X
3365(and)X
3513(Validation)X
1 f
2741 1701(Sprite-LFS)N
3130(places)X
3365(segment)X
3666(summary)X
3998(blocks)X
4240(at)X
2541 1791(the)N
2666(end)X
2809(of)X
2903(segments)X
3228(trusting)X
3499(that)X
3645(if)X
3720(the)X
3844(write)X
4035(contain-)X
2541 1881(ing)N
2687(the)X
2829(segment)X
3139(summary)X
3480(is)X
3576(issued)X
3819(after)X
4010(all)X
4133(other)X
2541 1971(writes)N
2770(in)X
2865(a)X
2934(partial)X
3172(segment,)X
3491(the)X
3621(presence)X
3935(of)X
4034(the)X
4164(seg-)X
2541 2061(ment)N
2745(summary)X
3087(validates)X
3416(the)X
3558(partial)X
3806(segment.)X
4156(This)X
2541 2151(approach)N
2857(requires)X
3137(two)X
3278(assumptions:)X
3715(the)X
3833(disk)X
3986(controller)X
2541 2241(will)N
2691(not)X
2819(reorder)X
3078(the)X
3202(write)X
3392(requests)X
3680(and)X
3821(the)X
3944(disk)X
4102(writes)X
2541 2331(the)N
2666(contents)X
2960(of)X
3053(a)X
3115(buffer)X
3338(in)X
3426(the)X
3550(order)X
3746(presented.)X
4120(Since)X
2541 2421(controllers)N
2915(often)X
3111(reorder)X
3374(writes)X
3600(and)X
3746(reduce)X
3991(rotational)X
2541 2511(latency)N
2813(by)X
2933(beginning)X
3293(track)X
3494(writes)X
3729(anywhere)X
4081(on)X
4200(the)X
2541 2601(track,)N
2762(we)X
2896(felt)X
3043(that)X
3203(BSD-LFS)X
3562(could)X
3779(not)X
3920(make)X
4133(these)X
2541 2691(assumptions.)N
3005(We)X
3146(build)X
3339(segments)X
3666(from)X
3851(front)X
4036(to)X
4126(back,)X
2541 2781(placing)N
2798(the)X
2917(segment)X
3205(summary)X
3524(at)X
3603(the)X
3722(beginning)X
4063(of)X
4150(each)X
2541 2871(segment)N
2833(as)X
2925(shown)X
3159(in)X
3246(Figure)X
3480(4.)X
3585(We)X
3722(compute)X
4023(a)X
4083(check-)X
2541 2961(sum)N
2697(across)X
2921(four)X
3078(bytes)X
3270(of)X
3360(each)X
3531(block)X
3732(in)X
3817(the)X
3937(partial)X
4164(seg-)X
2541 3051(ment,)N
2745(store)X
2925(it)X
2992(in)X
3077(the)X
3198(segment)X
3488(summary,)X
3829(and)X
3968(use)X
4098(this)X
4236(to)X
2541 3141(verify)N
2764(that)X
2915(a)X
2982(partial)X
3218(segment)X
3516(is)X
3600(valid.)X
3831(This)X
4003(approach)X
2541 3231(avoids)N
2797(write-ordering)X
3308(constraints)X
3702(and)X
3864(allows)X
4119(us)X
4236(to)X
2541 3321(write)N
2729(multiple)X
3018(partial)X
3246(segments)X
3567(without)X
3834(an)X
3933(intervening)X
2541 3411(seek)N
2705(or)X
2793(rotation.)X
3103(We)X
3236(do)X
3337(not)X
3460(yet)X
3579(have)X
3752(reason)X
3983(to)X
4066(believe)X
2541 3501(that)N
2701(our)X
2847(checksum)X
3207(is)X
3299(insuf\256cient,)X
3718(however,)X
4054(if)X
4142(it)X
4225(is,)X
2 f
2541 3591(patch)N
2741(tables)X
1 f
2954(can)X
3088(be)X
3186(used)X
3355(to)X
3438(guarantee)X
3772(that)X
3913(any)X
4050(missing)X
10 f
2541 3777 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 Dt
3515 4845 MXY
-11 16 Dl
11 -6 Dl
10 6 Dl
-10 -16 Dl
0 60 Dl
3143 4845 MXY
7 18 Dl
1 -12 Dl
11 -5 Dl
-19 -1 Dl
84 60 Dl
3 f
9 s
3015 4978(Segment)N
3297(Summary)X
3619(Blocks)X
5 Dt
2699 4053 MXY
0 192 Dl
672 0 Dl
0 -192 Dl
-672 0 Dl
3467 MX
0 192 Dl
672 0 Dl
0 -192 Dl
-672 0 Dl
2699 3957(Sprite)N
2905(Segment)X
3187(Structure)X
1 Dt
3275 4053 MXY
 3275 4053 lineto
 3371 4053 lineto
 3371 4245 lineto
 3275 4245 lineto
 3275 4053 lineto
closepath 19 3275 4053 3371 4245 Dp
2891 MX
 2891 4053 lineto
 2987 4053 lineto
 2987 4245 lineto
 2891 4245 lineto
 2891 4053 lineto
closepath 19 2891 4053 2987 4245 Dp
2939 4245 MXY
-11 16 Dl
11 -6 Dl
10 6 Dl
-10 -16 Dl
0 48 Dl
384 0 Dl
0 -48 Dl
3563 4053 MXY
 3563 4053 lineto
 3659 4053 lineto
 3659 4245 lineto
 3563 4245 lineto
 3563 4053 lineto
closepath 19 3563 4053 3659 4245 Dp
4043 MX
 4043 4053 lineto
 4139 4053 lineto
 4139 4245 lineto
 4043 4245 lineto
 4043 4053 lineto
closepath 19 4043 4053 4139 4245 Dp
3611 4245 MXY
-11 16 Dl
11 -6 Dl
10 6 Dl
-10 -16 Dl
0 48 Dl
480 0 Dl
0 -48 Dl
3 Dt
3515 4053 MXY
10 -17 Dl
-10 6 Dl
-11 -6 Dl
11 17 Dl
0 -48 Dl
2939 4053 MXY
0 -48 Dl
576 0 Dl
3323 MX
0 48 Dl
1 f
6 s
3563 4025(next)N
3657(segment)X
3828(pointer)X
3189 4361(next)N
3283(summary)X
3473(block)X
3591(pointers)X
3 f
9 s
3113 4179(1)N
2777(2)X
3833(3)X
3497(4)X
2699 4533(BSD)N
2857(Segment)X
3139(Structure)X
5 Dt
2699 4629 MXY
0 192 Dl
672 0 Dl
0 -192 Dl
-672 0 Dl
3467 MX
0 192 Dl
672 0 Dl
0 -192 Dl
-672 0 Dl
1 Dt
2699 MX
 2699 4629 lineto
 2795 4629 lineto
 2795 4821 lineto
 2699 4821 lineto
 2699 4629 lineto
closepath 19 2699 4629 2795 4821 Dp
3083 MX
 3083 4629 lineto
 3179 4629 lineto
 3179 4821 lineto
 3083 4821 lineto
 3083 4629 lineto
closepath 19 3083 4629 3179 4821 Dp
3467 MX
 3467 4629 lineto
 3563 4629 lineto
 3563 4821 lineto
 3467 4821 lineto
 3467 4629 lineto
closepath 19 3467 4629 3563 4821 Dp
3947 MX
 3947 4629 lineto
 4043 4629 lineto
 4043 4821 lineto
 3947 4821 lineto
 3947 4629 lineto
closepath 19 3947 4629 4043 4821 Dp
3 Dt
3515 MX
10 -17 Dl
-10 6 Dl
-11 -6 Dl
11 17 Dl
0 -48 Dl
2747 4629 MXY
0 -48 Dl
768 0 Dl
3131 MX
0 48 Dl
1 f
6 s
3563 4601(next)N
3657(segment)X
3828(pointer)X
3 f
9 s
2921 4755(1)N
3257(2)X
3737(3)X
4073(4)X
1 Dt
3995 4833 MXY
-19 -7 Dl
8 9 Dl
-3 11 Dl
14 -13 Dl
-336 72 Dl
2759 4833 MXY
14 13 Dl
-4 -12 Dl
8 -9 Dl
-18 8 Dl
396 72 Dl
3 Dt
-1 Ds
10 s
2541 5097(Figure)N
2804(4:)X
2907(Partial)X
3179(Segment)X
3509(Structure)X
3875(Comparison)X
2541 5187(Between)N
2871(Sprite-LFS)X
3292(and)X
3459(BSD-LFS.)X
1 f
8 s
3858(The)X
3992(numbers)X
4247(in)X
2541 5277(each)N
2678(partial)X
2862(show)X
3018(the)X
3117(order)X
3271(in)X
3341(which)X
3517(the)X
3615(partial)X
3798(segments)X
4056(are)X
4153(creat-)X
2541 5367(ed.)N
2664(Sprite-LFS)X
2979(builds)X
3166(segments)X
3434(back)X
3584(to)X
3664(front,)X
3834(chaining)X
4084(segment)X
2541 5457(summaries.)N
2868(BSD-LFS)X
3143(builds)X
3318(segments)X
3574(front)X
3716(to)X
3784(back.)X
3954(After)X
4106(reading)X
2541 5547(a)N
2595(segment)X
2834(summary)X
3098(block,)X
3281(the)X
3384(location)X
3615(of)X
3693(the)X
3796(next)X
3931(segment)X
4169(sum-)X
2541 5637(mary)N
2688(block)X
2846(can)X
2950(be)X
3026(easily)X
3191(computed.)X
3 f
10 s
555 6048(206)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

207 p
%%Page: 207 7
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
555 762(sector)N
795(can)X
955(be)X
1078(detected)X
1393(during)X
1649(roll-forward,)X
2109(at)X
2214(the)X
555 852(expense)N
840(of)X
933(a)X
995(bit)X
1105(per)X
1234(disk)X
1393(sector)X
1611(stored)X
1833(in)X
1921(the)X
2045(segment)X
555 942(usage)N
758(table)X
934(and)X
1070(segment)X
1357(summary)X
1675(blocks.)X
3 f
555 1128(3.4.)N
715(File)X
864(System)X
1129(Veri\256cation)X
1 f
755 1251(Fast)N
920(recovery)X
1234(from)X
1422(system)X
1676(failure)X
1918(is)X
2002(desirable,)X
555 1341(but)N
684(reliable)X
952(recovery)X
1260(from)X
1442(media)X
1664(failure)X
1900(is)X
1979(necessary.)X
555 1431(Consequently,)N
1068(the)X
1219(BSD-LFS)X
1590(system)X
1864(provides)X
2192(two)X
555 1521(recovery)N
882(strategies.)X
1250(The)X
1419(\256rst)X
1587(quickly)X
1871(rolls)X
2057(forward)X
555 1611(from)N
765(the)X
917(last)X
1082(checkpoint,)X
1507(examining)X
1898(data)X
2085(written)X
555 1701(between)N
872(the)X
1019(last)X
1179(checkpoint)X
1579(and)X
1743(the)X
1889(failure.)X
2187(The)X
555 1791(second)N
807(does)X
983(a)X
1048(complete)X
1371(consistency)X
1773(check)X
1989(of)X
2084(the)X
2210(\256le)X
555 1881(system)N
812(to)X
909(recover)X
1186(lost)X
1336(or)X
1438(corrupted)X
1780(data,)X
1968(due)X
2118(to)X
2214(the)X
555 1971(corruption)N
916(of)X
1010(bits)X
1152(on)X
1259(the)X
1384(disk)X
1544(or)X
1638(errant)X
1853(software)X
2156(writ-)X
555 2061(ing)N
685(bad)X
829(data)X
991(to)X
1081(the)X
1207(disk.)X
1408(This)X
1578(check)X
1794(is)X
1875(similar)X
2125(to)X
2214(the)X
555 2151(functionality)N
1014(of)X
2 f
1131(fsck)X
1 f
1256(,)X
1326(the)X
1474(\256le)X
1625(system)X
1896(checker)X
2196(and)X
555 2241(recovery)N
866(agent)X
1069(for)X
1192(FFS,)X
1373(and)X
1518(like)X
2 f
1667(fsck)X
1 f
1792(,)X
1841(it)X
1913(takes)X
2106(a)X
2170(long)X
555 2331(time)N
717(to)X
799(run.)X
755 2454(As)N
865(UNIX)X
1087(systems)X
1361(spend)X
1569(a)X
1626(large)X
1808(fraction)X
2078(of)X
2165(their)X
555 2544(time,)N
740(while)X
941(rebooting,)X
1291(in)X
1376(\256le)X
1501(system)X
1746(checks,)X
2008(the)X
2129(speed)X
555 2634(at)N
636(which)X
855(LFS)X
1015(is)X
1091(able)X
1248(to)X
1333(recover)X
1598(its)X
1695(\256le)X
1819(systems)X
2094(is)X
2169(con-)X
555 2724(sidered)N
810(one)X
949(of)X
1039(its)X
1137(major)X
1347(advantages.)X
1767(However,)X
2105(FFS)X
2259(is)X
555 2814(an)N
652(extremely)X
994(robust)X
1215(\256le)X
1338(system.)X
1620(In)X
1707(the)X
1825(standard)X
2117(4BSD)X
555 2904(implementation,)N
1109(it)X
1185(is)X
1270(possible)X
1564(to)X
1657(clear)X
1845(the)X
1974(root)X
2134(inode)X
555 2994(and)N
694(recover)X
959(the)X
1080(\256le)X
1205(system)X
1450(automatically)X
1909(with)X
2 f
2073(fsck)X
1 f
2198(\(8\).)X
555 3084(This)N
722(level)X
902(of)X
993(robustness)X
1355(is)X
1432(necessary)X
1769(before)X
1999(users)X
2188(will)X
555 3174(accept)N
811(LFS)X
998(as)X
1115(a)X
1200(\256le)X
1351(system)X
1622(in)X
1733(traditional)X
2111(UNIX)X
555 3264(environments.)N
755 3387(In)N
855(terms)X
1066(of)X
1166(recovery,)X
1501(the)X
1632(advantage)X
1991(of)X
2090(LFS)X
2259(is)X
555 3477(that)N
712(writes)X
944(are)X
1079(localized,)X
1425(so)X
1532(the)X
1666(\256le)X
1804(system)X
2062(may)X
2236(be)X
555 3567(recovered)N
894(to)X
977(a)X
1033(physically)X
1382(consistent)X
1722(state)X
1889(very)X
2052(quickly.)X
555 3657(The)N
702(BSD-LFS)X
1043(implementation)X
1567(permits)X
1829(LFS)X
1987(to)X
2070(recover)X
555 3747(quickly,)N
842(and)X
985(applications)X
1398(can)X
1536(start)X
1700(running)X
1975(as)X
2068(soon)X
2245(as)X
555 3837(the)N
679(roll-forward)X
1097(has)X
1229(been)X
1406(completed,)X
1785(while)X
1988(basic)X
2178(san-)X
555 3927(ity)N
674(checking)X
999(of)X
1101(the)X
1234(\256le)X
1371(system)X
1628(is)X
1715(done)X
1905(in)X
2001(the)X
2133(back-)X
555 4017(ground.)N
844(There)X
1054(is)X
1129(the)X
1249(obvious)X
1524(problem)X
1813(of)X
1902(what)X
2079(to)X
2162(do)X
2263(if)X
555 4107(the)N
680(sanity)X
898(check)X
1113(fails.)X
1318(It)X
1394(is)X
1473(expected)X
1785(that)X
1931(the)X
2055(\256le)X
2183(sys-)X
555 4197(tem)N
706(will)X
861(be)X
968(forcibly)X
1253(made)X
1458(read-only,)X
1817(\256xed,)X
2028(and)X
2174(then)X
555 4287(once)N
730(again)X
927(write)X
1114(enabled.)X
1426(These)X
1640(events)X
1867(should)X
2102(have)X
2276(a)X
555 4377(limited)N
811(effect)X
1025(on)X
1135(users)X
1330(as)X
1427(it)X
1501(is)X
1583(unlikely)X
1874(to)X
1965(ever)X
2133(occur)X
555 4467(and)N
693(is)X
768(even)X
942(more)X
1129(unlikely)X
1413(to)X
1497(discover)X
1791(an)X
1889(error)X
2068(in)X
2152(a)X
2210(\256le)X
555 4557(currently)N
868(being)X
1069(written)X
1319(by)X
1422(a)X
1481(user,)X
1658(since)X
1845(the)X
1965(opening)X
2245(of)X
555 4647(the)N
680(\256le)X
809(would)X
1036(most)X
1218(likely)X
1427(have)X
1606(already)X
1870(caused)X
2116(a)X
2178(pro-)X
555 4737(cess)N
714(or)X
806(system)X
1052(failure.)X
1326(Of)X
1435(course,)X
1689(the)X
1811(root)X
1964(\256le)X
2090(system)X
555 4827(must)N
770(always)X
1053(be)X
1188(completely)X
1603(checked)X
1926(after)X
2133(every)X
555 4917(reboot,)N
800(in)X
882(case)X
1041(a)X
1097(system)X
1339(failure)X
1569(corrupted)X
1897(it.)X
3 f
555 5103(3.5.)N
715(The)X
868(Cleaner)X
1 f
755 5226(In)N
855(Sprite-LFS)X
1243(the)X
1374(cleaner)X
1640(is)X
1725(part)X
1882(of)X
1981(the)X
2111(kernel)X
555 5316(and)N
706(implements)X
1114(a)X
1185(single)X
1411(cleaning)X
1717(policy.)X
1991(There)X
2213(are)X
555 5406(three)N
750(problems)X
1082(with)X
1258(this,)X
1427(in)X
1523(addition)X
1819(to)X
1914(the)X
2045(memory)X
555 5496(issues)N
772(discussed)X
1105(in)X
1193(Section)X
1459(3.1.)X
1625(First,)X
1817(there)X
2003(is)X
2081(no)X
2186(rea-)X
555 5586(son)N
704(to)X
804(believe)X
1073(that)X
1230(a)X
1303(single)X
1531(cleaning)X
1840(algorithm)X
2188(will)X
555 5676(work)N
744(well)X
906(on)X
1010(all)X
1114(workloads.)X
1512(In)X
1603(fact,)X
1768(measurements)X
2250(in)X
555 5766([SELT93b])N
961(show)X
1171(that)X
1332(coalescing)X
1711(randomly)X
2058(updated)X
2541 762(\256les)N
2732(would)X
2989(improve)X
3313(sequential)X
3695(read)X
3891(performance)X
2541 852(dramatically.)N
3016(Second,)X
3306(placing)X
3576(the)X
3708(cleaner)X
3975(in)X
4070(kernel-)X
2541 942(space)N
2754(makes)X
2993(it)X
3071(dif\256cult)X
3357(to)X
3452(experiment)X
3846(with)X
4021(alternate)X
2541 1032(cleaning)N
2840(policies.)X
3156(Third,)X
3381(implementing)X
3852(the)X
3977(cleaner)X
4236(in)X
2541 1122(the)N
2668(kernel)X
2898(forces)X
3124(the)X
3251(kernel)X
3480(to)X
3570(make)X
3772(policy)X
4000(decisions)X
2541 1212(\(the)N
2694(cleaning)X
2994(algorithm\))X
3360(rather)X
3576(than)X
3742(simply)X
3987(providing)X
2541 1302(a)N
2613(mechanism.)X
3054(To)X
3179(handle)X
3429(these)X
3630(problems,)X
3983(the)X
4116(BSD-)X
2541 1392(LFS)N
2698(cleaner)X
2951(is)X
3024(implemented)X
3462(as)X
3549(a)X
3605(user)X
3759(process.)X
2741 1515(The)N
2902(BSD-LFS)X
3257(cleaner)X
3525(communicates)X
4023(with)X
4200(the)X
2541 1605(kernel)N
2769(via)X
2894(system)X
3143(calls)X
3316(and)X
3458(the)X
3582(read-only)X
2 f
3916(i\256le)X
1 f
(.)S
4102(Those)X
2541 1695(functions)N
2870(that)X
3021(are)X
3151(already)X
3419(handled)X
3704(in)X
3796(the)X
3924(kernel)X
4155(\(e.g.)X
2541 1785(translating)N
2900(logical)X
3139(block)X
3338(numbers)X
3635(to)X
3718(disk)X
3872(addresses)X
4200(via)X
2 f
2541 1875(bmap)N
1 f
2719(\))X
2776(are)X
2905(made)X
3109(accessible)X
3465(to)X
3557(the)X
3685(cleaner)X
3948(via)X
4076(system)X
2541 1965(calls.)N
2757(If)X
2840(necessary)X
3182(functionality)X
3620(did)X
3751(not)X
3882(already)X
4147(exist)X
2541 2055(in)N
2630(the)X
2755(kernel)X
2983(\(e.g.)X
3173(reading)X
3441(and)X
3583(parsing)X
3845(segment)X
4138(sum-)X
2541 2145(mary)N
2726(blocks\),)X
3002(it)X
3066(was)X
3211(relegated)X
3526(to)X
3608(user)X
3762(space.)X
2741 2268(There)N
2971(may)X
3151(be)X
3268(multiple)X
3575(cleaners,)X
3900(each)X
4089(imple-)X
2541 2358(menting)N
2831(a)X
2895(different)X
3199(cleaning)X
3498(policy,)X
3745(running)X
4021(in)X
4110(paral-)X
2541 2448(lel)N
2642(on)X
2742(a)X
2798(single)X
3009(\256le)X
3131(system.)X
3413(Regardless)X
3785(of)X
3872(the)X
3990(particular)X
2541 2538(policy,)N
2781(the)X
2899(basic)X
3084(cleaning)X
3376(algorithm)X
3707(works)X
3923(as)X
4010(follows:)X
2701 2661(1.)N
2781(Read)X
2966(one)X
3102(or)X
3189(more)X
3374(target)X
3577(segments.)X
2701 2751(2.)N
2781(Decide)X
3029(which)X
3245(blocks)X
3474(are)X
3593(still)X
3732(alive.)X
2701 2841(3.)N
2781(Write)X
2984(live)X
3124(blocks)X
3353(back)X
3525(to)X
3607(the)X
3725(\256le)X
3847(system.)X
2701 2931(4.)N
2781(Mark)X
2975(the)X
3093(segment)X
3380(clean.)X
2541 3054(The)N
2 f
2702(i\256le)X
1 f
2858(and)X
3010(four)X
3180(new)X
3350(system)X
3607(calls,)X
3809(summarized)X
4236(in)X
2541 3144(Table)N
2750(3,)X
2836(provide)X
3107(the)X
3231(cleaner)X
3490(with)X
3658(enough)X
3920(information)X
2541 3234(to)N
2641(implement)X
3021(this)X
3173(algorithm.)X
3561(The)X
3723(cleaner)X
3993(reads)X
4200(the)X
2 f
2541 3324(i\256le)N
1 f
2681(to)X
2763(\256nd)X
2907(out)X
3029(the)X
3147(status)X
3349(of)X
3436(segments)X
3754(in)X
3836(the)X
3954(\256le)X
4076(system)X
2541 3414(and)N
2687(selects)X
2931(segments)X
3259(to)X
3351(clean)X
3551(based)X
3764(on)X
3873(this)X
4017(informa-)X
2541 3504(tion.)N
2726(Once)X
2917(a)X
2974(segment)X
3262(is)X
3336(selected,)X
3636(the)X
3755(cleaner)X
4009(reads)X
4200(the)X
2541 3594(segment)N
2834(from)X
3016(the)X
3140(raw)X
3287(partition)X
3584(and)X
3726(uses)X
3890(the)X
4014(\256rst)X
4164(seg-)X
2541 3684(ment)N
2732(summary)X
3061(to)X
3153(\256nd)X
3307(out)X
3439(what)X
3625(blocks)X
3864(reside)X
4086(in)X
4178(that)X
2541 3774(partial)N
2840(segment.)X
3241(It)X
3384(constructs)X
3803(an)X
3972(array)X
4231(of)X
2541 3864(BLOCK_INFO)N
3082(structures)X
3437(\(shown)X
3716(in)X
3821(Figure)X
4073(5\))X
4182(and)X
2541 3954(continues)N
2904(scanning)X
3245(partial)X
3505(segments,)X
3878(adding)X
4151(their)X
2541 4044(blocks)N
2771(to)X
2854(the)X
2973(array.)X
3199(When)X
3411(the)X
3529(entire)X
3732(segment)X
4019(has)X
4146(been)X
2541 4134(read,)N
2748(and)X
2912(all)X
3040(the)X
3186(BLOCK_INFOs)X
3763(constructed,)X
4200(the)X
2541 4224(cleaner)N
2797(calls)X
2 f
2967(lfs_bmapv)X
1 f
3318(which)X
3536(returns)X
3781(the)X
3901(current)X
4151(phy-)X
2541 4314(sical)N
2710(disk)X
2865(address)X
3128(for)X
3243(each)X
3412(BLOCK_INFO.)X
3971(If)X
4046(the)X
4165(disk)X
2541 4404(address)N
2807(is)X
2885(the)X
3008(same)X
3198(as)X
3290(the)X
3413(location)X
3696(of)X
3788(the)X
3911(block)X
4114(in)X
4200(the)X
2541 4494(segment)N
2838(being)X
3046(examined)X
3388(by)X
3498(the)X
3626(cleaner,)X
3909(the)X
4037(block)X
4245(is)X
2541 4584(``live''.)N
2836(Live)X
3010(blocks)X
3246(must)X
3428(to)X
3517(be)X
3619(written)X
3872(back)X
4050(into)X
4200(the)X
2541 4674(\256le)N
2678(system)X
2935(without)X
3214(changing)X
3543(their)X
3725(access)X
3966(or)X
4067(modify)X
2541 4764(times,)N
2756(so)X
2849(the)X
2969(cleaner)X
3224(issues)X
3437(an)X
2 f
3534(lfs_markv)X
1 f
3871(call,)X
4028(which)X
4245(is)X
2541 4854(a)N
2611(special)X
2868(write)X
3067(causing)X
3346(these)X
3544(blocks)X
3786(to)X
3881(be)X
3990(appended)X
2541 4944(into)N
2685(the)X
2803(log)X
2925(without)X
3189(updating)X
3489(the)X
3607(inode)X
3805(times.)X
2741 5067(Before)N
2991(rewriting)X
3316(the)X
3444(blocks,)X
3703(the)X
3831(kernel)X
4062(veri\256es)X
2541 5157(that)N
2685(none)X
2865(of)X
2956(the)X
3078(blocks)X
3311(have)X
3487(``died'')X
3756(since)X
3944(the)X
4065(cleaner)X
2541 5247(called)N
2 f
2801(lfs_bmapv)X
1 f
3130(.)X
3238(Once)X
2 f
3476(lfs_markv)X
1 f
3860(begins,)X
4156(only)X
2541 5337(cleaned)N
2809(blocks)X
3040(are)X
3160(written)X
3408(into)X
3553(the)X
3672(log,)X
3815(until)X
2 f
3982(lfs_markv)X
1 f
2541 5427(completes.)N
2957(Therefore,)X
3346(if)X
3446(cleaned)X
3743(blocks)X
4002(die)X
4150(after)X
2 f
2541 5517(lfs_markv)N
1 f
2882(veri\256es)X
3142(that)X
3286(they)X
3448(are)X
3571(alive,)X
3771(partial)X
4000(segments)X
2541 5607(written)N
2788(after)X
2956(the)X
2 f
3074(lfs_markv)X
1 f
3410(partial)X
3635(segments)X
3953(will)X
4097(re\257ect)X
2541 5697(that)N
2697(the)X
2831(blocks)X
3076(have)X
3264(died.)X
3477(When)X
2 f
3704(lfs_markv)X
1 f
4055(returns,)X
2541 5787(the)N
2681(cleaner)X
2956(calls)X
2 f
3145(lfs_segclean)X
1 f
3583(to)X
3686(mark)X
3892(the)X
4031(segment)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(207)X

208 p
%%Page: 208 8
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
10 f
634 811(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
1 f
674 901(lfs_bmapv)N
1191(Take)X
1440(an)X
1604(array)X
1858(of)X
2013(inode)X
1191 991(number/logical)N
1722(block)X
1946(number)X
1191 1081(pairs)N
1388(and)X
1545(return)X
1777(the)X
1915(disk)X
2088(ad-)X
1191 1171(dress)N
1386(for)X
1510(each)X
1688(block.)X
1935(Used)X
2129(to)X
1191 1261(determine)N
1550(if)X
1637(blocks)X
1884(in)X
1984(a)X
2057(seg-)X
1191 1351(ment)N
1371(are)X
1490(``live''.)X
10 f
634 1361(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
1 f
674 1451(lfs_markv)N
1191(Take)X
1440(an)X
1604(array)X
1858(of)X
2013(inode)X
1191 1541(number/logical)N
1722(block)X
1946(number)X
1191 1631(pairs)N
1370(and)X
1509(append)X
1764(them)X
1947(into)X
2093(the)X
1191 1721(log.)N
1354(This)X
1516(operation)X
1839(is)X
1912(a)X
1968(special)X
1191 1811(purpose)N
1467(write)X
1654(call)X
1791(that)X
1932(rewrites)X
1191 1901(the)N
1320(blocks)X
1560(and)X
1707(inodes)X
1947(without)X
1191 1991(updating)N
1500(the)X
1626(inode's)X
1890(access)X
2124(or)X
1191 2081(modi\256cation)N
1615(times.)X
10 f
634 2091(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
1 f
674 2181(lfs_segwait)N
1191(Causes)X
1440(the)X
1560(cleaner)X
1815(to)X
1898(sleep)X
2084(un-)X
1191 2271(til)N
1283(a)X
1345(given)X
1549(timeout)X
1818(has)X
1950(elapsed)X
1191 2361(or)N
1315(until)X
1518(another)X
1815(segment)X
2138(is)X
1191 2451(written.)N
1480(This)X
1644(operation)X
1969(is)X
2044(used)X
1191 2541(to)N
1293(let)X
1413(the)X
1551(cleaner)X
1823(pause)X
2045(until)X
1191 2631(there)N
1393(may)X
1572(be)X
1688(more)X
1893(segments)X
1191 2721(available)N
1501(for)X
1615(cleaning.)X
10 f
634 2731(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
1 f
674 2821(lfs_segclean)N
1191(Mark)X
1401(a)X
1473(segment)X
1776(clean.)X
2021(After)X
1191 2911(the)N
1337(cleaner)X
1618(has)X
1773(rewritten)X
2111(all)X
1191 3001(the)N
1317(``live'')X
1573(blocks)X
1810(from)X
1994(a)X
2057(seg-)X
1191 3091(ment,)N
1412(the)X
1550(segment)X
1857(is)X
1950(marked)X
1191 3181(clean)N
1381(for)X
1495(reuse.)X
10 f
634 3191(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
634(c)X
3131(c)Y
3051(c)Y
2971(c)Y
2891(c)Y
2811(c)Y
2731(c)Y
2651(c)Y
2571(c)Y
2491(c)Y
2411(c)Y
2331(c)Y
2251(c)Y
2171(c)Y
2091(c)Y
2011(c)Y
1931(c)Y
1851(c)Y
1771(c)Y
1691(c)Y
1611(c)Y
1531(c)Y
1451(c)Y
1371(c)Y
1291(c)Y
1211(c)Y
1131(c)Y
1051(c)Y
971(c)Y
891(c)Y
2231 3191(c)N
3131(c)Y
3051(c)Y
2971(c)Y
2891(c)Y
2811(c)Y
2731(c)Y
2651(c)Y
2571(c)Y
2491(c)Y
2411(c)Y
2331(c)Y
2251(c)Y
2171(c)Y
2091(c)Y
2011(c)Y
1931(c)Y
1851(c)Y
1771(c)Y
1691(c)Y
1611(c)Y
1531(c)Y
1451(c)Y
1371(c)Y
1291(c)Y
1211(c)Y
1131(c)Y
1051(c)Y
971(c)Y
891(c)Y
3 f
555 3314(Table)N
815(3:)X
947(The)X
1145(System)X
1454(Call)X
1660(Interface)X
2037(for)X
2204(the)X
555 3404(Cleaner.)N
1 f
10 f
555 3494 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 f
555 3770(clean.)N
795(Finally,)X
1071(when)X
1275(the)X
1403(cleaner)X
1665(has)X
1801(cleaned)X
2076(enough)X
555 3860(segments,)N
933(it)X
1037(calls)X
2 f
1244(lfs_segwait)X
1 f
1603(,)X
1683(sleeping)X
2009(until)X
2214(the)X
555 3950(speci\256ed)N
867(timeout)X
1138(elapses)X
1397(or)X
1491(a)X
1553(new)X
1713(segment)X
2006(is)X
2085(written)X
555 4040(into)N
699(an)X
795(LFS.)X
755 4163(Since)N
969(the)X
1102(cleaner)X
1370(is)X
1458(responsible)X
1858(for)X
1987(producing)X
555 4253(free)N
718(space,)X
954(the)X
1089(blocks)X
1334(it)X
1414(writes)X
1646(must)X
1837(get)X
1971 0.4028(preference)AX
555 4343(over)N
725(other)X
916(dirty)X
1093(blocks)X
1328(to)X
1416(be)X
1518(written)X
1771(to)X
1859(avoid)X
2063(running)X
555 4433(out)N
680(of)X
770(free)X
918(space.)X
1159(There)X
1369(are)X
1490(degenerative)X
1923(cases)X
2115(where)X
555 4523(cleaning)N
854(a)X
917(segment)X
1211(can)X
1350(actually)X
1631(consume)X
1942(more)X
2133(space)X
555 4613(than)N
727(it)X
805(frees)X
996([SELT93a].)X
1430(To)X
1552(ensure)X
1795(that)X
1948(the)X
2079(cleaner)X
555 4703(can)N
710(always)X
976(run)X
1126(and)X
1285(eventually)X
1662(generate)X
1978(more)X
2186(free)X
555 4793(space,)N
782(normal)X
1037(writing)X
1296(is)X
1377(suspended)X
1739(when)X
1941(the)X
2067(number)X
555 4883(of)N
642(clean)X
832(segments)X
1150(drops)X
1348(to)X
1430(two.)X
755 5006(The)N
923(cleaning)X
1238(simulation)X
1618(results)X
1870(in)X
1974([ROSE91])X
555 5096(show)N
751(that)X
898(selection)X
1210(of)X
1304(segments)X
1629(to)X
1717(clean)X
1913(is)X
1992(an)X
2094(impor-)X
555 5186(tant)N
714(design)X
962(parameter)X
1323(in)X
1424(minimizing)X
1831(cleaning)X
2142(over-)X
555 5276(head,)N
767(and)X
923(that)X
1083(the)X
1221(cost-bene\256t)X
1635(policy)X
1875(de\256ned)X
2151(there)X
555 5366(does)N
751(extremely)X
1121(well)X
1308(for)X
1451(the)X
1598(simulated)X
1958(workloads.)X
555 5456(Brie\257y,)N
825(each)X
1001(segment)X
1295(is)X
1375(assigned)X
1678(a)X
1741(cleaning)X
2 f
2040(cost)X
1 f
2196(and)X
2 f
555 5546(bene\256t)N
1 f
769(.)X
829(The)X
2 f
974(cost)X
1 f
1123(to)X
1205(clean)X
1395(a)X
1451(segment)X
1738(is)X
1811(equal)X
2005(to:)X
1209 5684(1)N
2 f
9 f
1269(+)X
2 f
1333(utilization)X
1 f
1 Dt
2843 858 MXY
0 115 Dl
1152 0 Dl
0 -115 Dl
-1152 0 Dl
973 MY
0 115 Dl
1152 0 Dl
0 -115 Dl
-1152 0 Dl
1088 MY
0 116 Dl
1152 0 Dl
0 -116 Dl
-1152 0 Dl
1204 MY
0 115 Dl
1152 0 Dl
0 -115 Dl
-1152 0 Dl
1319 MY
0 115 Dl
1152 0 Dl
0 -115 Dl
-1152 0 Dl
3 f
7 s
2958 939(INODE)N
3155(NUMBER)X
2958 1054(LOGICAL)N
3236(BLOCK)X
3452(NUMBER)X
2958 1169(CURRENT)N
3246(DISK)X
3397(ADDRESS)X
2958 1284(SEGMENT)N
3251(CREATION)X
3565(TIME)X
2958 1399(BUFFER)N
3194(POINTER)X
5 Dt
2843 858 MXY
0 576 Dl
1152 0 Dl
0 -576 Dl
-1152 0 Dl
3 Dt
-1 Ds
10 s
2541 1578(Figure)N
2811(5:)X
2921(BLOCK_INFO)X
3492(Structure)X
3865(used)X
4063(by)X
4190(the)X
2541 1668(Cleaner.)N
1 f
8 s
2868(The)X
2986(cleaner)X
3188(calculates)X
3458(the)X
3555(current)X
3754(disk)X
3880(address)X
4089(for)X
4181(each)X
2541 1758(block)N
2709(from)X
2859(the)X
2963(disk)X
3096(address)X
3313(of)X
3392(the)X
3496(segment.)X
3767(The)X
3892(kernel)X
4077(speci\256es)X
2541 1848(which)N
2713(have)X
2849(been)X
2985(superceded)X
3287(by)X
3367(more)X
3514(recent)X
3685(versions.)X
10 s
10 f
2541 1938 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 f
2541 2214(where)N
2766(utilization)X
3118(is)X
3199(the)X
3324(fraction)X
3601(of)X
3695(``live'')X
3950(data)X
4111(in)X
4200(the)X
2541 2304(segment.)N
2868(The)X
2 f
3013(bene\256t)X
1 f
3247(of)X
3334(cleaning)X
3626(a)X
3682(segment)X
3969(is:)X
2 f
2795 2442(free)N
1 f
2 f
2947(bytes)X
1 f
2 f
3139(generated)X
1 f
2 f
3487(*)X
1 f
2 f
3554(age)X
1 f
2 f
3697(of)X
1 f
2 f
3786(segment)X
1 f
2541 2580(where)N
2 f
2772(free)X
1 f
2 f
2924(bytes)X
1 f
2 f
3116(generated)X
1 f
3464(is)X
3544(the)X
3669(fraction)X
3945(of)X
4038(``dead'')X
2541 2670(blocks)N
2851(in)X
3014(the)X
3213(segment)X
3581(\(1)X
2 f
9 f
3668(-)X
1 f
2 f
3732(utilization)X
1 f
4055(\))X
4182(and)X
2 f
2541 2760(age)N
1 f
2 f
2684(of)X
1 f
2 f
2773(segment)X
1 f
3087(is)X
3191(the)X
3340(time)X
3533(since)X
3748(the)X
3896(most)X
4101(recent)X
2541 2850(modi\256cation)N
2973(to)X
3063(any)X
3206(block)X
3411(in)X
3500(that)X
3647(segment.)X
3981(When)X
4200(the)X
2541 2940(\256le)N
2669(system)X
2917(needs)X
3126(to)X
3213(reclaim)X
3479(space,)X
3703(the)X
3826(cleaner)X
4084(selects)X
2541 3030(the)N
2665(segment)X
2958(with)X
3126(the)X
3250(largest)X
3490(bene\256t)X
3733(to)X
3820(cost)X
3974(ratio.)X
4186(We)X
2541 3120(retained)N
2820(this)X
2955(policy)X
3175(as)X
3262(the)X
3380(default)X
3623(cleaning)X
3915(algorithm.)X
2741 3243(Currently)N
3090(the)X
3230(cost-bene\256t)X
3646(cleaner)X
3921(is)X
4016(the)X
4156(only)X
2541 3333(cleaner)N
2795(we)X
2910(have)X
3083(implemented,)X
3542(but)X
3665(two)X
3806(additional)X
4147(poli-)X
2541 3423(cies)N
2690(are)X
2813(under)X
3020(consideration.)X
3516(The)X
3664(\256rst)X
3811(would)X
4034(run)X
4164(dur-)X
2541 3513(ing)N
2666(idle)X
2809(periods)X
3068(and)X
3207(select)X
3413(segments)X
3734(to)X
3819(clean)X
4012(based)X
4218(on)X
2541 3603(coalescing)N
2925(and)X
3085(clustering)X
3445(\256les.)X
3662(The)X
3831(second)X
4098(would)X
2541 3693(\257ush)N
2728(blocks)X
2969(in)X
3063(the)X
3193(cache)X
3409(to)X
3502(disk)X
3666(during)X
3906(normal)X
4164(pro-)X
2541 3783(cessing)N
2828(even)X
3031(if)X
3131(they)X
3320(were)X
3528(not)X
3681(dirty,)X
3903(if)X
4003(it)X
4098(would)X
2541 3873(improve)N
2841(the)X
2972(locality)X
3245(for)X
3372(a)X
3441(given)X
3651(\256le.)X
3825(These)X
4049(policies)X
2541 3963(will)N
2685(be)X
2781(analyzed)X
3087(in)X
3169(future)X
3381(work.)X
3 f
2541 4149(4.)N
2641(Implementing)X
3141(LFS)X
3307(in)X
3393(a)X
3453(BSD)X
3628(System)X
1 f
2741 4272(While)N
2968(the)X
3097(last)X
3239(section)X
3497(focused)X
3778(on)X
3889(those)X
4089(design)X
2541 4362(issues)N
2789(that)X
2966(addressed)X
3340(problems)X
3694(in)X
3812(the)X
3966(design)X
4231(of)X
2541 4452(Sprite-LFS,)N
2966(this)X
3131(section)X
3408(presents)X
3720(additional)X
4089(design)X
2541 4542(issues)N
2772(either)X
2995(inherent)X
3298(to)X
3400(LFS)X
3577(or)X
3684(resulting)X
4004(from)X
4200(the)X
2541 4632(integration)N
2908(of)X
2995(an)X
3091(LFS)X
3248(into)X
3392(4BSD.)X
3 f
2541 4818(4.1.)N
2701(Integration)X
3108(with)X
3279(FFS)X
1 f
2741 4941(The)N
2900(on-disk)X
3174(data)X
3341(structures)X
3686(used)X
3866(by)X
3979(BSD-LFS)X
2541 5031(are)N
2677(nearly)X
2915(identical)X
3228(to)X
3327(the)X
3462(ones)X
3646(used)X
3830(by)X
3947(FFS.)X
4156(This)X
2541 5121(decision)N
2831(was)X
2979(made)X
3176(for)X
3293(two)X
3436(reasons.)X
3740(The)X
3888(\256rst)X
4035(one)X
4173(was)X
2541 5211(that)N
2704(many)X
2925(applications)X
3355(have)X
3550(been)X
3745(written)X
4015(over)X
4200(the)X
2541 5301(years)N
2732(to)X
2815(interpret)X
3108(and)X
3245(analyze)X
3511(raw)X
3652(FFS)X
3804(structures.)X
4176(It)X
4245(is)X
2541 5391(desirable)N
2854(that)X
2996(these)X
3183(tools)X
3360(could)X
3560(continue)X
3858(to)X
3942(function)X
4231(as)X
2541 5481(before,)N
2789(with)X
2953(minor)X
3166(modi\256cations)X
3623(to)X
3707(read)X
3867(the)X
3986(structures)X
2541 5571(from)N
2722(a)X
2782(new)X
2940(location.)X
3262(The)X
3411(second)X
3658(and)X
3798(more)X
3987(important)X
2541 5661(reason)N
2774(was)X
2922(that)X
3065(it)X
3132(was)X
3280(easy)X
3446(and)X
3585(increased)X
3911(the)X
4031(maintai-)X
2541 5751(nability)N
2815(of)X
2911(the)X
3038(system.)X
3329(A)X
3416(basic)X
3610(LFS)X
3776(implementation,)X
3 f
555 6048(208)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

209 p
%%Page: 209 9
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
555 762(without)N
855(cleaner)X
1144(or)X
1267(reconstruction)X
1782(tools,)X
2013(but)X
2170(with)X
2 f
555 852(dumpfs)N
1 f
786(\(1\))X
902(and)X
2 f
1040(newfs)X
1 f
1222(\(1\))X
1338(tools,)X
1535(was)X
1682(reading)X
1944(and)X
2081(writing)X
555 942(from/to)N
837(the)X
977(buffer)X
1216(cache)X
1442(in)X
1546(under)X
1771(two)X
1933(weeks,)X
2196(and)X
555 1032(reading)N
818(and)X
956(writing)X
1209(from/to)X
1471(the)X
1590(disk)X
1744(in)X
1827(under)X
2031(a)X
2088(month.)X
555 1122(This)N
735(implementation)X
1275(was)X
1438(done)X
1632(by)X
1750(copying)X
2045(the)X
2180(FFS)X
555 1212(source)N
795(code)X
977(and)X
1123(replacing)X
1452(about)X
1660(40%)X
1837(of)X
1934(it)X
2007(with)X
2178(new)X
555 1302(code.)N
777(The)X
932(FFS)X
1093(and)X
1238(LFS)X
1404(implementations)X
1966(have)X
2147(since)X
555 1392(been)N
727(merged)X
988(to)X
1070(share)X
1260(common)X
1560(code.)X
755 1515(In)N
882(BSD)X
1096(and)X
1271(similar)X
1552(systems)X
1864(\(e.g.)X
2066(SunOS,)X
555 1605(OSF/1\),)N
840(a)X
906(\256le)X
1037(system)X
1288(is)X
1370(de\256ned)X
1635(by)X
1744(two)X
1893(sets)X
2042(of)X
2138(inter-)X
555 1695(face)N
730(functions,)X
2 f
1088(vfs)X
1 f
1217(operations)X
1591(and)X
2 f
1747(vnode)X
1 f
1978(operations)X
555 1785([KLEI86].)N
2 f
953(Vfs)X
1 f
1096(operations)X
1470(affect)X
1694(entire)X
1917(\256le)X
2059(systems)X
555 1875(\(e.g.)N
739(mount,)X
1003(unmount,)X
1347(etc.\))X
1528(while)X
2 f
1746(vnode)X
1 f
1978(operations)X
555 1965(affect)N
759(\256les)X
912(\(open,)X
1135(close,)X
1340(read,)X
1519(write,)X
1724(etc.\).)X
755 2088(File)N
909(systems)X
1192(could)X
1400(share)X
1600(code)X
1781(at)X
1868(the)X
1995(level)X
2180(of)X
2276(a)X
555 2178(vfs)N
679(or)X
772(vnode)X
994(subroutine)X
1358(call,)X
1520(but)X
1648(they)X
1812(could)X
2015(not)X
2142(share)X
555 2268(the)N
679(UNIX)X
906(naming)X
1172(while)X
1375(implementing)X
1844(their)X
2016(own)X
2179(disk)X
555 2358(storage)N
827(algorithms.)X
1248(To)X
1376(allow)X
1593(sharing)X
1868(of)X
1974(the)X
2111(UNIX)X
555 2448(naming,)N
842(the)X
966(code)X
1144(common)X
1450(to)X
1538(both)X
1706(the)X
1830(FFS)X
1988(and)X
2130(BSD-)X
555 2538(LFS)N
727(was)X
887(extracted)X
1217(from)X
1408(the)X
1541(FFS)X
1708(code)X
1894(and)X
2044(put)X
2180(in)X
2276(a)X
555 2628(new,)N
748(generic)X
1024(\256le)X
1164(system)X
1424(module)X
1702(\(UFS\).)X
1980(This)X
2160(code)X
555 2718(contains)N
852(all)X
962(the)X
1090(directory)X
1410(traversal)X
1716(operations,)X
2099(almost)X
555 2808(all)N
667(vnode)X
895(operations,)X
1281(the)X
1411(inode)X
1621(hash)X
1800(table)X
1987(manipula-)X
555 2898(tion,)N
728(quotas,)X
986(and)X
1131(locking.)X
1440(The)X
1594(common)X
1903(code)X
2084(is)X
2165(used)X
555 2988(not)N
678(only)X
840(by)X
940(the)X
1058(FFS)X
1210(and)X
1346(BSD-LFS,)X
1705(but)X
1827(by)X
1927(the)X
2045(memory)X
555 3078(\256le)N
690(system)X
945([MCKU90])X
1352(as)X
1451(well.)X
1661(The)X
1818(FFS)X
1982(and)X
2130(BSD-)X
555 3168(LFS)N
713(implementations)X
1267(remain)X
1511(responsible)X
1897(for)X
2012(disk)X
2165(allo-)X
555 3258(cation)N
771(and)X
907(actual)X
1119(I/O.)X
755 3381(In)N
857(moving)X
1136(code)X
1322(from)X
1512(the)X
1644(FFS)X
1810(implementation)X
555 3471(into)N
717(the)X
853(generic)X
1128(UFS)X
1312(area,)X
1504(it)X
1585(was)X
1747(necessary)X
2097(to)X
2196(add)X
555 3561(seven)N
763(new)X
2 f
922(vnode)X
1 f
1139(and)X
2 f
1280(vfs)X
1 f
1393(operations.)X
1791(Table)X
1998(4)X
2062(lists)X
2214(the)X
555 3651(operations)N
911(that)X
1053(were)X
1231(added)X
1444(to)X
1527(facilitate)X
1829(this)X
1965(integration)X
555 3741(and)N
706(explains)X
1008(why)X
1180(they)X
1352(are)X
1485(different)X
1796(for)X
1924(the)X
2056(two)X
2210(\256le)X
555 3831(systems.)N
3 f
555 4017(4.1.1.)N
775(Block)X
990(Sizes)X
1 f
755 4140(One)N
934(FFS)X
1111(feature)X
1380(that)X
1545(is)X
1642(not)X
1788(implemented)X
2250(in)X
555 4230(BSD-LFS)N
902(is)X
983(fragments.)X
1372(The)X
1524(original)X
1800(reason)X
2037(FFS)X
2196(had)X
555 4320(fragments)N
909(was)X
1067(that,)X
1240(given)X
1451(a)X
1519(large)X
1712(block)X
1922(size)X
2079(\(neces-)X
555 4410(sary)N
733(to)X
839(obtain)X
1083(contiguous)X
1478(reads)X
1692(and)X
1852(writes)X
2091(and)X
2250(to)X
555 4500(lower)N
780(the)X
920(data)X
1096(to)X
1200(meta-data)X
1558(ratio\),)X
1793(fragments)X
2155(were)X
555 4590(required)N
846(to)X
931(minimize)X
1256(internal)X
1523(fragmentation)X
1995(\(allocated)X
555 4680(space)N
756(that)X
897(does)X
1065(not)X
1188(contain)X
1445(useful)X
1662(data\).)X
1884(LFS)X
2042(does)X
2210(not)X
555 4770(require)N
821(large)X
1019(blocks)X
1265(to)X
1364(obtain)X
1601(contiguous)X
1989(reads)X
2196(and)X
555 4860(writes)N
793(as)X
902(it)X
988(sorts)X
1181(blocks)X
1431(in)X
1534(a)X
1611(\256le)X
1754(by)X
1875(logical)X
2134(block)X
555 4950(number,)N
846(writing)X
1103(them)X
1288(sequentially.)X
1740(Still,)X
1917(large)X
2103(blocks)X
555 5040(are)N
683(desirable)X
1002(to)X
1093(keep)X
1274(the)X
1400(meta-data)X
1745(to)X
1835(data)X
1997(ratio)X
2172(low.)X
555 5130(Unfortunately,)N
1055(large)X
1246(blocks)X
1485(can)X
1627(lead)X
1790(to)X
1881(wasted)X
2133(space)X
555 5220(if)N
630(many)X
834(small)X
1032(\256les)X
1190(are)X
1314(present.)X
1611(Since)X
1814(managing)X
2155(frag-)X
555 5310(ments)N
770(complicates)X
1177(the)X
1299(\256le)X
1425(system,)X
1690(we)X
1807(decided)X
2080(to)X
2165(allo-)X
555 5400(cate)N
728(progressively)X
1202(larger)X
1432(blocks)X
1683(instead)X
1952(of)X
2061(using)X
2276(a)X
555 5490(block/fragment)N
1088(combination.)X
1551(This)X
1736(improvement)X
2205(has)X
555 5580(not)N
694(yet)X
829(been)X
1018(implemented)X
1473(but)X
1612(is)X
1701(similar)X
1959(to)X
2057(the)X
2191(res-)X
555 5670(tricted)N
780(buddy)X
1000(simulated)X
1331(in)X
1413([SELT91].)X
10 f
2589 811(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
3125 991(Vnode)N
3359(Operations)X
10 f
2589 1083(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
2589 1099(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2629 1181(blkatoff)N
3008(Read)X
3210(the)X
3345(block)X
3560(at)X
3655(the)X
3790(given)X
4005(offset,)X
3008 1271(from)N
3185(a)X
3242(\256le.)X
3405(The)X
3551(two)X
3692(\256le)X
3814(systems)X
4087(cal-)X
3008 1361(culate)N
3234(block)X
3445(sizes)X
3634(and)X
3783(block)X
3994(offsets)X
3008 1451(differently,)N
3407(because)X
3702(BSD-LFS)X
4061(does)X
3008 1541(not)N
3130(implement)X
3492(fragments.)X
10 f
2589 1551(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2629 1641(valloc)N
3008(Allocate)X
3331(a)X
3418(new)X
3603(inode.)X
3871(FFS)X
4053(must)X
3008 1731(consult)N
3269(and)X
3415(update)X
3659(bit)X
3772(maps)X
3970(to)X
4061(allo-)X
3008 1821(cate)N
3161(inodes)X
3393(while)X
3594(BSD-LFS)X
3936(removes)X
3008 1911(the)N
3139(inode)X
3350(from)X
3539(the)X
3669(head)X
3853(of)X
3952(the)X
4082(free)X
3008 2001(inode)N
3206(list)X
3323(in)X
3405(the)X
2 f
3523(i\256le)X
1 f
(.)S
10 f
2589 2011(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2629 2101(vfree)N
3008(Free)X
3181(an)X
3287(inode.)X
3535(FFS)X
3697(must)X
3881(update)X
4124(bit)X
3008 2191(maps)N
3234(while)X
3469(BSD-LFS)X
3845(inserts)X
4110(the)X
3008 2281(inode)N
3206(onto)X
3368(a)X
3424(free)X
3570(list.)X
10 f
2589 2291(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2629 2381(truncate)N
3008(Truncate)X
3318(a)X
3378(\256le)X
3504(from)X
3683(the)X
3804(given)X
4005(offset.)X
3008 2471(FFS)N
3185(marks)X
3426(bit)X
3555(maps)X
3769(to)X
3875(show)X
4088(that)X
3008 2561(blocks)N
3257(are)X
3396(no)X
3516(longer)X
3761(in)X
3863(use,)X
4030(while)X
3008 2651(BSD-LFS)N
3349(updates)X
3616(the)X
3736(segment)X
4025(usage)X
3008 2741(table.)N
10 f
2589 2751(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2629 2841(update)N
3008(Update)X
3274(the)X
3406(inode)X
3617(for)X
3744(the)X
3875(given)X
4086(\256le.)X
3008 2931(FFS)N
3185(pushes)X
3448(individual)X
3817(inodes)X
4070(syn-)X
3008 3021(chronously,)N
3428(while)X
3650(BSD-LFS)X
4012(writes)X
3008 3111(them)N
3188(in)X
3270(a)X
3326(partial)X
3551(segment.)X
10 f
2589 3121(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2629 3211(bwrite)N
3008(Write)X
3221(a)X
3287(block)X
3495(into)X
3649(the)X
3777(buffer)X
4004(cache.)X
3008 3301(FFS)N
3176(does)X
3359(synchronous)X
3799(writes)X
4030(while)X
3008 3391(BSD-LFS)N
3350(puts)X
3506(blocks)X
3738(on)X
3841(a)X
3900(queue)X
4114(for)X
3008 3481(writing)N
3259(in)X
3341(the)X
3459(next)X
3617(segment.)X
10 f
2589 3483(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
2589 3499(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
3174 3671(Vfs)N
3310(Operations)X
10 f
2589 3763(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
2589 3779(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2629 3861(vget)N
3008(Get)X
3148(a)X
3208(vnode.)X
3468(FFS)X
3624(computes)X
3954(the)X
4075(disk)X
3008 3951(address)N
3273(of)X
3364(the)X
3486(inode)X
3688(while)X
3889(BSD-LFS)X
3008 4041(looks)N
3201(it)X
3265(up)X
3365(in)X
3447(the)X
2 f
3565(i\256le)X
1 f
(.)S
10 f
2589 4051(i)N
2608(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
2589(c)X
4011(c)Y
3931(c)Y
3851(c)Y
3771(c)Y
3691(c)Y
3611(c)Y
3531(c)Y
3451(c)Y
3371(c)Y
3291(c)Y
3211(c)Y
3131(c)Y
3051(c)Y
2971(c)Y
2891(c)Y
2811(c)Y
2731(c)Y
2651(c)Y
2571(c)Y
2491(c)Y
2411(c)Y
2331(c)Y
2251(c)Y
2171(c)Y
2091(c)Y
2011(c)Y
1931(c)Y
1851(c)Y
1771(c)Y
1691(c)Y
1611(c)Y
1531(c)Y
1451(c)Y
1371(c)Y
1291(c)Y
1211(c)Y
1131(c)Y
1051(c)Y
971(c)Y
891(c)Y
4248 4051(c)N
4011(c)Y
3931(c)Y
3851(c)Y
3771(c)Y
3691(c)Y
3611(c)Y
3531(c)Y
3451(c)Y
3371(c)Y
3291(c)Y
3211(c)Y
3131(c)Y
3051(c)Y
2971(c)Y
2891(c)Y
2811(c)Y
2731(c)Y
2651(c)Y
2571(c)Y
2491(c)Y
2411(c)Y
2331(c)Y
2251(c)Y
2171(c)Y
2091(c)Y
2011(c)Y
1931(c)Y
1851(c)Y
1771(c)Y
1691(c)Y
1611(c)Y
1531(c)Y
1451(c)Y
1371(c)Y
1291(c)Y
1211(c)Y
1131(c)Y
1051(c)Y
971(c)Y
891(c)Y
3 f
2541 4174(Table)N
2762(4:)X
2855(New)X
3033(Vnode)X
3281(and)X
3435(Vfs)X
3577(Operations.)X
1 f
8 s
4017(These)X
4191(rou-)X
2541 4264(tines)N
2684(allowed)X
2908(us)X
2987(to)X
3059(share)X
3215(60%)X
3353(of)X
3427(the)X
3526(original)X
3746(FFS)X
3875(code)X
4016(with)X
4151(BSD-)X
2541 4354(LFS.)N
10 s
10 f
2541 4444 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
3 f
2541 4720(4.1.2.)N
2761(The)X
2914(Buffer)X
3157(Cache)X
1 f
2741 4843(Prior)N
2925(to)X
3011(the)X
3133(integration)X
3504(of)X
3594(BSD-LFS)X
3936(into)X
4083(4BSD,)X
2541 4933(the)N
2688(buffer)X
2934(cache)X
3166(had)X
3330(been)X
3530(considered)X
3926(\256le)X
4076(system)X
2541 5023(independent)N
2973(code.)X
3205(However,)X
3559(the)X
3696(buffer)X
3932(cache)X
4155(con-)X
2541 5113(tains)N
2735(assumptions)X
3173(about)X
3394(how)X
3574(and)X
3732(when)X
3948(blocks)X
4199(are)X
2541 5203(written)N
2801(to)X
2896(disk.)X
3102(First,)X
3301(it)X
3378(assumes)X
3677(that)X
3829(a)X
3897(single)X
4120(block)X
2541 5293(can)N
2694(be)X
2811(\257ushed)X
3083(to)X
3186(disk,)X
3380(at)X
3479(any)X
3636(time,)X
3839(to)X
3942(reclaim)X
4223(its)X
2541 5383(memory.)N
2878(There)X
3096(are)X
3225(two)X
3375(problems)X
3703(with)X
3875(this:)X
4041(\257ushing)X
2541 5473(blocks)N
2772(a)X
2830(single)X
3043(block)X
3243(at)X
3323(a)X
3381(time)X
3545(would)X
3766(destroy)X
4023(any)X
4160(pos-)X
2541 5563(sible)N
2720(performance)X
3155(advantage)X
3508(of)X
3602(LFS,)X
3786(and,)X
3949(because)X
4231(of)X
2541 5653(the)N
2668(modi\256ed)X
2981(meta-data)X
3327(and)X
3472(partial)X
3705(segment)X
4000(summary)X
2541 5743(blocks,)N
2798(LFS)X
2963(may)X
3128(require)X
3383(additional)X
3730(memory)X
4024(to)X
4113(write.)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(209)X

210 p
%%Page: 210 10
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
555 762(Therefore,)N
931(BSD-LFS)X
1288(needs)X
1509(to)X
1609(guarantee)X
1960(that)X
2118(it)X
2200(can)X
555 852(obtain)N
779(any)X
919(additional)X
1263(buffers)X
1515(it)X
1583(needs)X
1790(when)X
1988(it)X
2056(writes)X
2276(a)X
555 942(segment.)N
891(To)X
1009(prevent)X
1279(the)X
1406(buffer)X
1632(cache)X
1845(from)X
2030(trying)X
2250(to)X
555 1032(\257ush)N
736(a)X
798(single)X
1015(BSD-LFS)X
1360(page,)X
1558(BSD-LFS)X
1903(puts)X
2061(its)X
2161(dirty)X
555 1122(buffers)N
824(on)X
945(the)X
1084(kernel)X
1326(LOCKED)X
1691(queue,)X
1943(so)X
2054(that)X
2214(the)X
555 1212(buffer)N
793(cache)X
1018(cannot)X
1273(reclaim)X
1555(them.)X
1795(The)X
1960(number)X
2245(of)X
555 1302(buffers)N
812(on)X
921(the)X
1048(locked)X
1291(queue)X
1511(is)X
1592(compared)X
1937(against)X
2192(two)X
555 1392(variables,)N
905(the)X
2 f
1043(start)X
1229(write)X
1433(threshold)X
1 f
1775(and)X
2 f
1930(stop)X
2102(access)X
555 1482(threshold)N
1 f
857(,)X
906(to)X
997(prevent)X
1266(BSD-LFS)X
1613(from)X
1797(using)X
1998(up)X
2106(all)X
2214(the)X
555 1572(available)N
882(buffers.)X
1187(This)X
1366(problem)X
1670(can)X
1819(be)X
1932(much)X
2147(more)X
555 1662(reasonably)N
928(handled)X
1207(by)X
1312(systems)X
1590(with)X
1757(better)X
1965(integration)X
555 1752(of)N
642(the)X
760(buffer)X
977(cache)X
1181(and)X
1317(virtual)X
1546(memory.)X
755 1875(Second,)N
1045(BSD)X
1233(maintains)X
1577(a)X
1646(logical)X
1897(block)X
2108(cache,)X
555 1965(hashed)N
809(by)X
920(vnode)X
1146(and)X
1292(logical)X
1540(block)X
1748(number.)X
2063(In)X
2160(FFS,)X
555 2055(since)N
779(indirect)X
1083(blocks)X
1350(do)X
1488(not)X
1648(have)X
1858(logical)X
2134(block)X
555 2145(numbers,)N
879(they)X
1045(are)X
1172(hashed)X
1423(by)X
1531(the)X
1657(vnode)X
1881(of)X
1976(the)X
2102(device)X
555 2235(\(the)N
704(\256le)X
829(that)X
972(represents)X
1321(the)X
1442(disk)X
1598(partition\))X
1919(and)X
2058(the)X
2179(disk)X
555 2325(block)N
790(number.)X
1132(Since)X
1367(LFS)X
1561(does)X
1765(not)X
1923(assign)X
2179(disk)X
555 2415(addresses)N
907(until)X
1097(blocks)X
1350(are)X
1493(written)X
1764(to)X
1870(disk,)X
2067(indirect)X
555 2505(blocks)N
790(have)X
968(no)X
1074(valid)X
1260(addresses)X
1594(on)X
1700(which)X
1922(to)X
2010(hash.)X
2223(To)X
555 2595(solve)N
745(this)X
881(problem,)X
1189(the)X
1308(block)X
1507(name)X
1702(space)X
1902(had)X
2038(to)X
2120(incor-)X
555 2685(porate)N
796(meta-data)X
1153(block)X
1371(numbering.)X
1798(This)X
1980(naming)X
2259(is)X
555 2775(done)N
748(by)X
865(making)X
1142(block)X
1357(addresses)X
1701(be)X
1813(signed)X
2058(integers)X
555 2865(with)N
743(negative)X
1060(numbers)X
1381(referencing)X
1793(indirect)X
2083(blocks,)X
555 2955(while)N
793(zero)X
992(and)X
1168(positive)X
1481(numbers)X
1817 0.4531(reference)AX
2178(data)X
555 3045(blocks.)N
826(Figure)X
1057(6)X
1119(shows)X
1341(how)X
1501(the)X
1621(blocks)X
1851(are)X
1971(numbered.)X
555 3135(Singly)N
788(indirect)X
1058(blocks)X
1292(take)X
1451(on)X
1556(the)X
1679(negative)X
1975(of)X
2066(the)X
2188(\256rst)X
555 3225(data)N
729(block)X
947(to)X
1049(which)X
1285(they)X
1462(point.)X
1705(Doubly)X
1984(and)X
2139(triply)X
555 3315(indirect)N
821(blocks)X
1051(take)X
1206(the)X
1325(next)X
1484(lower)X
1688(negative)X
1980(number)X
2245(of)X
555 3405(the)N
698(singly)X
938(or)X
1050(doubly)X
1317(indirect)X
1606(block)X
1828(to)X
1934(which)X
2174(they)X
555 3495(point.)N
789(This)X
961(approach)X
1286(makes)X
1521(it)X
1595(simple)X
1838(to)X
1930(traverse)X
2214(the)X
555 3585(indirect)N
839(block)X
1056(chains)X
1300(in)X
1401(either)X
1622(direction,)X
1965(facilitating)X
555 3675(reading)N
834(a)X
908(block)X
1124(or)X
1229(creating)X
1526(indirect)X
1808(blocks.)X
2094(Sprite-)X
555 3765(LFS)N
725(partitions)X
1060(the)X
1191(``block)X
1456(name)X
1663(space'')X
1928(in)X
2022(a)X
2090(similar)X
555 3855(fashion.)N
862(Although)X
1195(it)X
1270(is)X
1353(not)X
1485(possible)X
1777(for)X
1901(BSD-LFS)X
2250(to)X
555 3945(use)N
688(FFS)X
846(meta-data)X
1189(numbering,)X
1581(the)X
1704(reverse)X
1962(is)X
2040(not)X
2167(true.)X
555 4035(In)N
643(4.4BSD,)X
939(FFS)X
1092(uses)X
1251(the)X
1370(BSD-LFS)X
1710(numbering)X
2078(and)X
2214(the)X
2 f
555 4125(bmap)N
1 f
753(code)X
925(has)X
1052(been)X
1224(moved)X
1462(into)X
1606(the)X
1724(UFS)X
1890(area.)X
3 f
555 4311(4.2.)N
715(The)X
868(IFILE)X
1 f
755 4434(Sprite-LFS)N
1141(maintained)X
1528(the)X
1656(inode)X
1864(map)X
2032(and)X
2178(seg-)X
555 4524(ment)N
747(usage)X
961(table)X
1148(as)X
1246(kernel)X
1478(data)X
1643(structures)X
1986(which)X
2213(are)X
555 4614(written)N
813(to)X
905(disk)X
1068(at)X
1156(\256le)X
1288(system)X
1540(checkpoints.)X
1993(BSD-LFS)X
555 4704(places)N
779(both)X
944(of)X
1033(these)X
1220(data)X
1376(structures)X
1710(in)X
1794(a)X
1852(read-only)X
2182(reg-)X
555 4794(ular)N
721(\256le,)X
884(visible)X
1138(in)X
1240(the)X
1378(\256le)X
1520(system,)X
1802(called)X
2034(the)X
2 f
2172(i\256le)X
1 f
(.)S
555 4884(There)N
783(are)X
921(three)X
1121(advantages)X
1517(to)X
1618(this)X
1772(approach.)X
2146(First,)X
555 4974(while)N
759(Sprite-LFS)X
1140(and)X
1282(FFS)X
1440(limit)X
1616(the)X
1740(number)X
2011(of)X
2103(inodes)X
555 5064(in)N
659(a)X
737(\256le)X
881(system,)X
1165(BSD-LFS)X
1525(has)X
1673(no)X
1794(such)X
1982(limitation,)X
555 5154(growing)N
863(the)X
2 f
1002(i\256le)X
1 f
1163(via)X
1302(the)X
1441(standard)X
1754(\256le)X
1896(mechanisms.)X
555 5244(Second,)N
841(it)X
915(can)X
1057(be)X
1163(treated)X
1412(identically)X
1780(to)X
1872(other)X
2067(\256les,)X
2250(in)X
555 5334(most)N
744(cases,)X
968(minimizing)X
1370(the)X
1502(special)X
1759(case)X
1932(code)X
2118(in)X
2214(the)X
555 5424(operating)N
889(system.)X
1182(Finally,)X
1459(as)X
1557(is)X
1641(discussed)X
1979(in)X
2072(Section)X
555 5514(3.5,)N
702(we)X
823(intended)X
1126(to)X
1215(move)X
1420(the)X
1544(cleaner)X
1803(into)X
1953(user)X
2113(space,)X
555 5604(and)N
696(the)X
2 f
819(i\256le)X
1 f
963(is)X
1040(a)X
1100(convenient)X
1476(mechanism)X
1865(for)X
1983(communi-)X
555 5694(cation)N
780(between)X
1077(the)X
1204(operating)X
1536(system)X
1787(and)X
1932(the)X
2059(cleaner.)X
555 5784(A)N
633(detailed)X
907(view)X
1083(of)X
1170(the)X
2 f
1288(i\256le)X
1 f
1428(is)X
1501(shown)X
1730(in)X
1812(Figure)X
2041(7.)X
1 Dt
2657 2179 MXY
0 101 Dl
304 0 Dl
0 -101 Dl
-304 0 Dl
3266 2382 MXY
0 102 Dl
305 0 Dl
0 -102 Dl
-305 0 Dl
1975 MY
0 102 Dl
305 0 Dl
0 -102 Dl
-305 0 Dl
1569 MY
0 102 Dl
305 0 Dl
0 -102 Dl
-305 0 Dl
3 f
9 s
2724 2260(-1037)N
3876 1061 MXY
0 101 Dl
305 0 Dl
0 -101 Dl
-305 0 Dl
1264 MY
0 102 Dl
305 0 Dl
0 -102 Dl
-305 0 Dl
14 s
4014 1188(.)N
4014 1213(.)N
4014 1239(.)N
3876 1467 MXY
0 102 Dl
305 0 Dl
0 -102 Dl
-305 0 Dl
1671 MY
0 101 Dl
305 0 Dl
0 -101 Dl
-305 0 Dl
4014 1594(.)N
4014 1620(.)N
4014 1645(.)N
4014 2052(.)N
4014 2026(.)N
4014 2001(.)N
3876 2077 MXY
0 102 Dl
305 0 Dl
0 -102 Dl
-305 0 Dl
1874 MY
0 101 Dl
305 0 Dl
0 -101 Dl
-305 0 Dl
2280 MY
0 102 Dl
305 0 Dl
0 -102 Dl
-305 0 Dl
2484 MY
0 101 Dl
302 0 Dl
0 -101 Dl
-302 0 Dl
9 s
4010 1141(0)N
3992 1345(11)N
3992 1548(12)N
3956 1751(1035)N
3370 1650(-12)N
14 s
4014 2407(.)N
4014 2433(.)N
4014 2458(.)N
3863 1518 MXY
-19 -8 Dl
8 10 Dl
-4 12 Dl
15 -14 Dl
-292 51 Dl
3863 1721 MXY
-15 -14 Dl
4 12 Dl
-8 10 Dl
19 -8 Dl
-292 -50 Dl
3404 2103(.)N
3404 2128(.)N
3404 2153(.)N
3404 2255(.)N
3404 2230(.)N
3404 2204(.)N
3404 2306(.)N
3404 2331(.)N
3404 2357(.)N
9 s
3956 1955(1036)N
3956 2158(2059)N
3902 2361(1048588)N
3902 2565(1049612)N
3334 2056(-1036)N
3280 2463(-1048588)N
3863 1925 MXY
-19 -8 Dl
8 10 Dl
-4 12 Dl
15 -14 Dl
-292 50 Dl
3863 2331 MXY
-19 -8 Dl
8 10 Dl
-4 12 Dl
15 -14 Dl
-292 51 Dl
3863 2128 MXY
-15 -14 Dl
4 12 Dl
-8 10 Dl
19 -8 Dl
-292 -51 Dl
3863 2535 MXY
-15 -14 Dl
4 12 Dl
-8 9 Dl
19 -7 Dl
-292 -51 Dl
3253 2026 MXY
-21 -2 Dl
11 7 Dl
0 13 Dl
10 -18 Dl
-292 153 Dl
3253 2433 MXY
-10 -18 Dl
0 13 Dl
-11 7 Dl
21 -2 Dl
-292 -153 Dl
3183 1366(Indirect)N
3449(Blocks)X
2657 1925(Double)N
2895(Indirect)X
3161(Blocks)X
3843 858(Data)N
4009(Blocks)X
3 Dt
-1 Ds
10 s
2541 2729(Figure)N
2809(6:)X
2917(Block-numbering)X
3556(in)X
3662(BSD-LFS.)X
1 f
8 s
4062(In)X
4151(BSD-)X
2541 2819(LFS,)N
2698(data)X
2834(blocks)X
3031(are)X
3138(assigned)X
3388(positive)X
3621(block)X
3792(numbers)X
4041(beginning)X
2541 2909(with)N
2677(0.)X
2763(Indirect)X
2983(blocks)X
3172(are)X
3271(numbered)X
3548(with)X
3684(the)X
3784(negative)X
4022(of)X
4097(the)X
4197(\256rst)X
2541 2999(data)N
2670(block)X
2835(that)X
2954(they)X
3087(address.)X
3333(Double)X
3543(and)X
3657(triple)X
3814(indirect)X
4031(blocks)X
4220(are)X
2541 3089(numbered)N
2826(with)X
2970(one)X
3092(less)X
3218(than)X
3357(the)X
3464(\256rst)X
3593(indirect)X
3817(or)X
3899(double)X
4102(indirect)X
2541 3179(block)N
2699(that)X
2811(they)X
2937(address.)X
10 f
2541 3269 -0.0741(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
10 s
4 Ds
1 Dt
3297 4263 MXY
319 79 Dl
3297 4183 MXY
319 -80 Dl
3297 3943 MXY
319 80 Dl
3297 3864 MXY
319 -80 Dl
-1 Ds
4263 MY
638 0 Dl
3616 4183 MXY
638 0 Dl
3616 3943 MXY
638 0 Dl
3616 3864 MXY
638 0 Dl
3616 3624 MXY
638 0 Dl
3 f
5 s
3696 4319(FREE)N
3813(LIST)X
3915(POINTER)X
3696 4240(DISK)N
3804(ADDRESS)X
3696 4160(VERSION)N
3889(NUMBER)X
3 Dt
3616 4103 MXY
0 239 Dl
638 0 Dl
0 -239 Dl
-638 0 Dl
3696 4000(FLAGS)N
3696 3921(LAST)N
3811(MOD)X
3919(TIME)X
3696 3841(NUM)N
3802(LIVE)X
3911(BYTES)X
3616 3784 MXY
0 239 Dl
638 0 Dl
0 -239 Dl
-638 0 Dl
4 Ds
1 Dt
3307 MX
309 -80 Dl
3297 MX
319 -159 Dl
3696 3681(NUM)N
3802(DIRTY)X
3942(SEGMENTS)X
3696 3601(NUM)N
3802(CLEAN)X
3953(SEGMENTS)X
-1 Ds
3 Dt
3616 3545 MXY
0 159 Dl
638 0 Dl
0 -159 Dl
-638 0 Dl
4 Ds
1 Dt
2659 4163 MXY
159 100 Dl
2659 4123 MXY
159 -100 Dl
2543 4160(INODE)N
2685(MAP)X
2591 3980(TABLE)N
2590 3921(USAGE)N
2559 3861(SEGMENT)N
-1 Ds
2818 4183 MXY
479 0 Dl
2818 4103 MXY
479 0 Dl
2818 3943 MXY
479 0 Dl
2818 3864 MXY
479 0 Dl
5 Dt
2818 3784 MXY
479 0 Dl
2818 4023 MXY
479 0 Dl
2818 3704 MXY
0 559 Dl
479 0 Dl
0 -559 Dl
-479 0 Dl
2898 4240(IFILE)N
3018(N)X
11 s
2898 4160(...)N
5 s
2898 4080(IFILE)N
3018(1)X
2898 4000(SEGUSE)N
3066(N)X
11 s
2898 3921(...)N
5 s
2898 3841(SEGUSE)N
3066(1)X
2898 3761(CLEANER)N
3105(INFO)X
1 f
7 s
2989 3674(IFILE)N
4 Ds
1 Dt
2659 3824 MXY
159 -40 Dl
2659 3983 MXY
159 40 Dl
3 Dt
-1 Ds
3 f
10 s
2541 4486(Figure)N
2792(7:)X
2882(Detail)X
3110(Description)X
3529(of)X
3619(the)X
3749(IFILE.)X
1 f
8 s
4021(The)X
2 f
4139(i\256le)X
1 f
4254(is)X
2541 4576(maintained)N
2844(as)X
2916(a)X
2963(regular)X
3162(\256le)X
3263(with)X
3396(read-only)X
3659(permission.)X
3991(It)X
4049(facilitates)X
2541 4666(communication)N
2955(between)X
3183(the)X
3277(\256le)X
3375(system)X
3569(and)X
3677(the)X
3771(cleaner.)X
10 s
10 f
2541 4756 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 f
2741 5032(Both)N
2936(Sprite-LFS)X
3331(and)X
3487(BSD-LFS)X
3846(maintain)X
4165(disk)X
2541 5122(addresses)N
2893(and)X
3053(inode)X
3275(version)X
3555(numbers)X
3874(in)X
3979(the)X
4120(inode)X
2541 5212(map.)N
2742(The)X
2890(version)X
3149(numbers)X
3448(allow)X
3649(the)X
3770(cleaner)X
4026(to)X
4111(easily)X
2541 5302(identify)N
2819(groups)X
3066(of)X
3162(blocks)X
3399(belonging)X
3747(to)X
3837(\256les)X
3998(that)X
4146(have)X
2541 5392(been)N
2722(truncated)X
3050(or)X
3146(deleted.)X
3447(Sprite-LFS)X
3831(also)X
3989(keeps)X
4200(the)X
2541 5482(last)N
2692(access)X
2938(time)X
3120(in)X
3222(the)X
3360(inode)X
3578(map)X
3756(to)X
3858(minimize)X
4200(the)X
2541 5572(number)N
2815(of)X
2911(blocks)X
3149(that)X
3298(need)X
3479(to)X
3570(be)X
3675(written)X
3930(when)X
4132(a)X
4196(\256le)X
2541 5662(system)N
2809(is)X
2908(being)X
3132(used)X
3325(only)X
3512(for)X
3651(reading.)X
3977(Since)X
4200(the)X
2541 5752(access)N
2774(time)X
2943(is)X
3023(eight)X
3210(bytes)X
3405(in)X
3493(4.4BSD)X
3774(and)X
3916(maintaining)X
3 f
555 6048(210)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

211 p
%%Page: 211 11
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
555 762(it)N
630(in)X
723(the)X
852(inode)X
1060(map)X
1228(would)X
1458(cause)X
1667(the)X
2 f
1795(i\256le)X
1 f
1945(to)X
2037(grow)X
2232(by)X
555 852(67%,)N
742(BSD-LFS)X
1081(keeps)X
1284(the)X
1402(access)X
1628(time)X
1790(in)X
1872(the)X
1990(inode.)X
755 975(Sprite-LFS)N
1152(clusters)X
1439(inodes)X
1690(in)X
1794(the)X
1934(inode)X
2154(map,)X
555 1065(and)N
704(allocates)X
1017(new)X
1183(inodes)X
1424(by)X
1536(picking)X
1808(a)X
1876(starting)X
2148(point)X
555 1155(and)N
697(scanning)X
1008(forward)X
1289(sequentially)X
1702(until)X
1874(it)X
1944(\256nds)X
2125(a)X
2186(free)X
555 1245(inode.)N
795(To)X
906(create)X
1121(a)X
1179(new)X
1335(\256le,)X
1479(the)X
1598(inode)X
1797(map)X
1956(is)X
2030(searched)X
555 1335(from)N
738(the)X
863(inode)X
1068(entry)X
1259(of)X
1352(the)X
1476(containing)X
1840(directory.)X
2196(If)X
2276(a)X
555 1425(directory)N
901(is)X
1010(being)X
1244(created,)X
1553(a)X
1645(random)X
1946(location)X
2259(is)X
555 1515(chosen.)N
859(When)X
1092(a)X
1169(directory)X
1499(contains)X
1806(many)X
2024(\256les)X
2197(this)X
555 1605(scan)N
723(is)X
801(costly.)X
1057(On)X
1180(six)X
1298(Sprite)X
1514(\256le)X
1641(systems,)X
1939(the)X
2061(average)X
555 1695(number)N
829(of)X
924(entries)X
1166(searched)X
1476(per)X
1607(directory)X
1925(or)X
2020(\256le)X
2150(crea-)X
555 1785(tion)N
702(ranged)X
944(from)X
1123(26)X
1226(to)X
1311(192,)X
1474(with)X
1638(an)X
1736(average)X
2009(across)X
2232(all)X
555 1875(the)N
674(\256le)X
797(systems)X
1071(of)X
1159(94)X
1260(entries)X
1494(per)X
1617(allocation.)X
1993(BSD-LFS)X
555 1965(avoids)N
788(this)X
926(scan)X
1092(by)X
1195(maintaining)X
1600(a)X
1659(free)X
1808(list)X
1928(of)X
2018(inodes)X
2250(in)X
555 2055(the)N
673(inode)X
871(map.)X
755 2178(The)N
902(segment)X
1191(usage)X
1395(table)X
1572(contains)X
1860(the)X
1979(number)X
2245(of)X
555 2268(live)N
696(bytes)X
886(in)X
969(and)X
1105(the)X
1223(last)X
1354(modi\256ed)X
1658(time)X
1820(of)X
1907(the)X
2025(segment,)X
555 2358(and)N
692(is)X
766(largely)X
1010(unchanged)X
1379(from)X
1556(Sprite-LFS.)X
1972(In)X
2060(order)X
2250(to)X
555 2448(support)N
833(multiple)X
1136(and)X
1289(user)X
1460(mode)X
1675(cleaning)X
1984(processes,)X
555 2538(we)N
683(have)X
869(added)X
1094(a)X
1163(set)X
1285(of)X
1385(\257ags)X
1569(indicating)X
1922(whether)X
2214(the)X
555 2628(segment)N
855(is)X
941(clean,)X
1164(contains)X
1464(a)X
1533(superblock,)X
1937(is)X
2022(currently)X
555 2718(being)N
753(written)X
1000(to,)X
1102(or)X
1189(is)X
1262(eligible)X
1522(for)X
1636(cleaning.)X
3 f
555 2904(4.3.)N
715(Directory)X
1066(Operations)X
1 f
755 3043(Directory)N
1083(operations)X
7 s
1417 3011(1)N
10 s
1465 3043(pose)N
1632(a)X
1688(special)X
1931(problem)X
2218(for)X
555 3133(LFS.)N
766(Since)X
978(the)X
1110(basic)X
1309(premise)X
1597(of)X
1697(LFS)X
1867(is)X
1953(that)X
2106(opera-)X
555 3223(tions)N
734(can)X
870(be)X
970(postponed)X
1323(and)X
1462(coalesced)X
1798(to)X
1883(provide)X
2151(large)X
555 3313(I/Os,)N
738(it)X
807(is)X
884(counterproductive)X
1492(to)X
1578(retain)X
1785(the)X
1907(synchronous)X
555 3403(behavior)N
860(of)X
951(directory)X
1265(operations.)X
1663(At)X
1767(the)X
1889(same)X
2078(time,)X
2263(if)X
555 3493(a)N
613(\256le)X
737(is)X
812(created,)X
1087(\256lled)X
1273(with)X
1437(data)X
1592(and)X
2 f
1729(fsync)X
1 f
1894(ed,)X
2011(then)X
2170(both)X
555 3583(the)N
678(\256le's)X
863(data)X
1022(and)X
1163(the)X
1286(directory)X
1601(entry)X
1791(for)X
1909(the)X
2031(\256le)X
2157(must)X
555 3673(be)N
677(on)X
803(disk.)X
1022(Additionally,)X
1492(the)X
1636(UNIX)X
1883(semantics)X
2245(of)X
555 3763(directory)N
877(operations)X
1243(are)X
1374(de\256ned)X
1642(to)X
1736(preserve)X
2040(ordering)X
555 3853(\(i.e.)N
712(if)X
792(the)X
921(creation)X
1211(of)X
1309(\256le)X
2 f
1442(a)X
1 f
1513(precedes)X
1826(the)X
1955(creation)X
2245(of)X
555 3943(\256le)N
2 f
678(b)X
1 f
(,)S
759(then)X
918(any)X
1055(post-recovery)X
1518(state)X
1685(of)X
1772(a)X
1828(\256le)X
1950(system)X
2192(that)X
555 4033(includes)N
855(\256le)X
2 f
989(b)X
1 f
1061(must)X
1248(include)X
1516(\256le)X
2 f
1650(a)X
1 f
(\).)S
1789(We)X
1933(believe)X
2197(this)X
555 4123(semantic)N
869(is)X
951(used)X
1127(in)X
1217(UNIX)X
1446(systems)X
1727(to)X
1817(provide)X
2090(mutual)X
555 4229(exclusion)N
882(and)X
1018(other)X
1203(locking)X
1463(protocols)X
7 s
1761 4197(2)N
10 s
4229(.)Y
755 4352(Sprite-LFS)N
1145(preserves)X
1483(the)X
1615(ordering)X
1921(of)X
2022(directory)X
555 4442(operations)N
928(by)X
1047(maintaining)X
1467(a)X
1541(directory)X
1869(operation)X
2210(log)X
555 4532(inside)N
800(the)X
952(\256le)X
1108(system)X
1384(log.)X
1580(Before)X
1853(any)X
2022(directory)X
555 4622(updates)N
828(are)X
955(written)X
1210(to)X
1300(disk,)X
1481(a)X
1545(log)X
1674(entry)X
1866(that)X
2013(describes)X
555 4712(the)N
674(directory)X
984(operation)X
1307(is)X
1380(written.)X
1667(The)X
1812(log)X
1934(information)X
555 4802(always)N
800(appears)X
1068(in)X
1152(an)X
1250(earlier)X
1477(segment,)X
1785(or)X
1873(the)X
1992(same)X
2178(seg-)X
555 4892(ment,)N
776(as)X
884(the)X
1023(actual)X
1255(directory)X
1585(updates.)X
1910(At)X
2030(recovery)X
555 4982(time,)N
741(this)X
880(log)X
1006(is)X
1082(read)X
1244(and)X
1383(any)X
1522(directory)X
1835(operations)X
2192(that)X
555 5072(were)N
749(not)X
888(fully)X
1075(completed)X
1445(are)X
1580(rolled)X
1803(forward.)X
2134(Since)X
8 s
10 f
555 5144(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)N
5 s
1 f
727 5222(1)N
8 s
772 5247(Directory)N
1041(operations)X
1332(include)X
1545(those)X
1704(system)X
1906(calls)X
2047(that)X
2167(affect)X
555 5319(more)N
710(than)X
844(one)X
960(inode)X
1126(\(typically)X
1394(a)X
1445(directory)X
1698(and)X
1813(a)X
1864(\256le\))X
1990(and)X
2105(include:)X
555 5391(create,)N
738(link,)X
870(mkdir,)X
1055(mknod,)X
1265(remove,)X
1488(rename,)X
1707(rmdir,)X
1881(and)X
1989(symlink.)X
5 s
727 5469(2)N
8 s
767 5494(We)N
875(have)X
1014(been)X
1153(unable)X
1342(to)X
1411(\256nd)X
1530(a)X
1577(real)X
1691(example)X
1926(of)X
1998(the)X
2095(ordering)X
555 5566(of)N
626(directory)X
874(operations)X
1158(being)X
1317(used)X
1451(for)X
1542(this)X
1652(purpose)X
1871(and)X
1980(are)X
2074(consider-)X
555 5638(ing)N
655(removing)X
918(it)X
972(as)X
1043(unnecessary)X
1372(complexity.)X
1709(If)X
1768(you)X
1881(have)X
2018(an)X
2095(example)X
555 5710(where)N
728(ordering)X
962(must)X
1105(be)X
1183(preserved)X
1448(across)X
1624(system)X
1819(failure,)X
2018(please)X
2194(send)X
555 5782(us)N
628(email)X
786(at)X
848 -0.1458(margo@das.harvard.edu!)AX
10 s
2541 762(this)N
2706(approach)X
3051(requires)X
3360(an)X
3486(additional,)X
3875(on-disk)X
4164(data)X
2541 852(structure,)N
2864(and)X
3002(since)X
3189(LFS)X
3348(is)X
3423(itself)X
3605(a)X
3663(log,)X
3806(we)X
3921(chose)X
4125(a)X
4182(dif-)X
2541 942(ferent)N
2749(solution,)X
3046(namely)X
2 f
3302(segment)X
3585(batching)X
1 f
(.)S
2741 1065(Since)N
2996(directory)X
3362(operations)X
3772(affect)X
4032(multiple)X
2541 1155(inodes,)N
2803(we)X
2930(need)X
3115(to)X
3210(guarantee)X
3556(that)X
3709(either)X
3925(both)X
4100(of)X
4200(the)X
2541 1245(inodes)N
2782(and)X
2930(associated)X
3292(changes)X
3583(get)X
3713(written)X
3972(to)X
4066(disk)X
4231(or)X
2541 1335(neither)N
2799(does.)X
3021(BSD-LFS)X
3374(has)X
3515(a)X
3585(unit)X
3743(of)X
3844(atomicity,)X
4200(the)X
2541 1425(partial)N
2768(segment,)X
3077(but)X
3201(it)X
3267(does)X
3436(not)X
3560(have)X
3734(a)X
3792(mechanism)X
4178(that)X
2541 1515(guarantees)N
2912(that)X
3059(all)X
3166(inodes)X
3401(involved)X
3707(in)X
3795(the)X
3919(same)X
4110(direc-)X
2541 1605(tory)N
2707(operation)X
3047(will)X
3208(\256t)X
3311(into)X
3471(a)X
3543(single)X
3770(partial)X
4011(segment.)X
2541 1695(Therefore,)N
2921(we)X
3057(introduced)X
3442(a)X
3520(mechanism)X
3927(that)X
4089(allows)X
2541 1785(operations)N
2903(to)X
2993(span)X
3168(partial)X
3401(segments.)X
3767(At)X
3875(recovery,)X
4204(we)X
2541 1875(never)N
2768(roll)X
2927(forward)X
3230(a)X
3314(partial)X
3567(segment)X
3881(if)X
3977(it)X
4068(has)X
4222(an)X
2541 1965(un\256nished)N
2899(directory)X
3213(operation)X
3540(and)X
3680(the)X
3802(partial)X
4031(segment)X
2541 2055(that)N
2686(completes)X
3036(the)X
3159(directory)X
3474(operation)X
3802(did)X
3929(not)X
4056(make)X
4254(it)X
2541 2145(to)N
2623(disk.)X
2741 2268(The)N
2922(requirements)X
3397(for)X
3546(segment)X
3868(batching)X
4199(are)X
2541 2358(de\256ned)N
2797(as)X
2884(follows:)X
2581 2481(1.)N
2741(If)X
2816(any)X
2953(directory)X
3263(operation)X
3586(has)X
3713(occurred)X
4015(since)X
4200(the)X
2741 2571(last)N
2903(segment)X
3221(was)X
3397(written,)X
3695(the)X
3843(next)X
4031(segment)X
2741 2661(write)N
2934(will)X
3086(append)X
3346(all)X
3454(dirty)X
3633(blocks)X
3870(from)X
4053(the)X
2 f
4178(i\256le)X
1 f
2741 2751(\(that)N
2917(is,)X
3019(it)X
3092(will)X
3245(be)X
3350(a)X
3414(checkpoint,)X
3814(except)X
4052(that)X
4200(the)X
2741 2841(superblock)N
3113(need)X
3285(not)X
3407(be)X
3503(updated\).)X
2581 2964(2.)N
2741(During)X
2995(recovery,)X
3324(any)X
3467(writes)X
3689(that)X
3835(were)X
4018(part)X
4169(of)X
4262(a)X
2741 3054(directory)N
3057(operation)X
3386(write)X
3577(will)X
3727(be)X
3828(ignored)X
4098(unless)X
2741 3144(the)N
2869(entire)X
3082(write)X
3277(completed.)X
3681(A)X
3769(completed)X
4133(write)X
2741 3234(can)N
2886(be)X
2995(identi\256ed)X
3330(if)X
3412(all)X
3525(dirty)X
3708(blocks)X
3949(of)X
4048(the)X
2 f
4178(i\256le)X
1 f
2741 3324(and)N
2877(its)X
2972(inode)X
3170(were)X
3347(successfully)X
3759(written)X
4006(to)X
4088(disk.)X
2741 3537(This)N
2906(de\256nition)X
3234(is)X
3309(essentially)X
3669(a)X
3727(transaction)X
4101(where)X
2541 3627(the)N
2677(writing)X
2946(of)X
3051(the)X
2 f
3187(i\256le)X
1 f
3345(inode)X
3560(to)X
3659(disk)X
3829(is)X
3919(the)X
4054(commit)X
2541 3717(operation.)N
2907(In)X
2997(this)X
3135(way,)X
3312(there)X
3496(is)X
3572(a)X
3630(coherent)X
3929(snapshot)X
4231(of)X
2541 3807(the)N
2684(\256le)X
2831(system)X
3098(at)X
3201(some)X
3415(point)X
3624(after)X
3816(each)X
4008(directory)X
2541 3897(operation.)N
2909(The)X
3059(penalty)X
3320(is)X
3397(that)X
3541(checkpoints)X
3948(are)X
4071(written)X
2541 3987(more)N
2736(frequently)X
3096(in)X
3187(contrast)X
3470(to)X
3561(Sprite-LFS's)X
4003(approach)X
2541 4077(that)N
2681(wrote)X
2884(additional)X
3224(logging)X
3488(information)X
3886(to)X
3968(disk.)X
2741 4200(The)N
2920(BSD-LFS)X
3293(implementation)X
3848(requires)X
4160(syn-)X
2541 4290(chronizing)N
2916(directory)X
3237(operations)X
3602(and)X
3749(segment)X
4047(writing.)X
2541 4380(Each)N
2748(time)X
2936(a)X
3018(directory)X
3354(operation)X
3702(is)X
3800(performed,)X
4200(the)X
2541 4470(affected)N
2822(vnodes)X
3069(are)X
3188(marked.)X
3489(When)X
3701(the)X
3819(segment)X
4106(writer)X
2541 4560(builds)N
2762(a)X
2824(segment,)X
3137(it)X
3207(collects)X
3477(vnodes)X
3729(in)X
3816(two)X
3961(passes.)X
4231(In)X
2541 4650(the)N
2667(\256rst)X
2819(pass,)X
3005(all)X
3112(unmarked)X
3460(vnodes)X
3714(\(those)X
3937(not)X
4066(partici-)X
2541 4740(pating)N
2768(in)X
2857(directory)X
3174(operations\))X
3561(are)X
3686(collected,)X
4022(and)X
4164(dur-)X
2541 4830(ing)N
2670(the)X
2795(second)X
3045(pass)X
3210(those)X
3406(vnodes)X
3660(that)X
3807(are)X
3932(marked)X
4199(are)X
2541 4920(collected.)N
2898(If)X
2979(any)X
3122(vnodes)X
3376(are)X
3502(found)X
3716(during)X
3951(the)X
4075(second)X
2541 5010(pass,)N
2739(this)X
2894(means)X
3138(that)X
3297(there)X
3497(are)X
3635(directory)X
3964(operations)X
2541 5100(present)N
2813(in)X
2915(the)X
3053(current)X
3321(segment,)X
3647(and)X
3802(the)X
3939(segment)X
4245(is)X
2541 5190(marked,)N
2826(identifying)X
3201(it)X
3269(as)X
3359(containing)X
3720(a)X
3779(directory)X
4092(opera-)X
2541 5280(tion.)N
2730(To)X
2844(prevent)X
3110(directory)X
3425(operations)X
3784(from)X
3965(being)X
4168(par-)X
2541 5370(tially)N
2733(re\257ected)X
3038(in)X
3128(a)X
3192(segment,)X
3507(no)X
3614(new)X
3775(directory)X
4092(opera-)X
2541 5460(tions)N
2732(are)X
2867(begun)X
3099(while)X
3313(the)X
3446(segment)X
3748(writer)X
3975(is)X
4063(in)X
4160(pass)X
2541 5550(two,)N
2718(and)X
2871(the)X
3006(segment)X
3310(writer)X
3539(cannot)X
3790(begin)X
4004(pass)X
4178(two)X
2541 5640(while)N
2739(any)X
2875(directory)X
3185(operation)X
3508(is)X
3581(in)X
3663(progress.)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(211)X

212 p
%%Page: 212 12
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
755 762(When)N
973(recovery)X
1281(is)X
1360(run,)X
1513(the)X
1637(\256le)X
1765(system)X
2012(can)X
2149(be)X
2250(in)X
555 852(one)N
706(of)X
807(three)X
1002(possible)X
1298(states)X
1510(with)X
1686(regard)X
1926(to)X
2022(directory)X
555 942(operations:)N
595 1155(1.)N
755(The)X
915(system)X
1172(shut)X
1340(down)X
1553(cleanly)X
1819(so)X
1924(that)X
2078(the)X
2210(\256le)X
755 1245(system)N
997(may)X
1155(be)X
1251(mounted)X
1551(as)X
1638(is.)X
595 1368(2.)N
755(There)X
992(are)X
1140(valid)X
1349(segments)X
1696(following)X
2055(the)X
2201(last)X
755 1458(checkpoint)N
1146(and)X
1301(the)X
1438(last)X
1587(one)X
1741(was)X
1904(a)X
1978(completed)X
755 1548(directory-operation)N
1404(write.)X
1637(Therefore,)X
2003(all)X
2111(that)X
2259(is)X
755 1638(required)N
1079(before)X
1341(mounting)X
1703(is)X
1812(to)X
1930(rewrite)X
2214(the)X
755 1728(superblock)N
1153(to)X
1261(re\257ect)X
1508(the)X
1651(address)X
1937(of)X
2049(the)X
2 f
2192(i\256le)X
1 f
755 1818(inode)N
953(and)X
1089(the)X
1207(current)X
1455(end)X
1591(of)X
1678(the)X
1796(log.)X
595 1941(3.)N
755(There)X
992(are)X
1140(valid)X
1349(segments)X
1696(following)X
2055(the)X
2201(last)X
755 2031(checkpoint)N
1139(or)X
1238(directory)X
1560(operation)X
1894(write.)X
2130(As)X
2250(in)X
755 2121(the)N
873(previous)X
1169(case,)X
1348(the)X
1466(system)X
1708(recovers)X
2001(to)X
2083(the)X
2201(last)X
755 2211(completed)N
1132(directory)X
1464(operation)X
1809(write)X
2016(and)X
2174(then)X
755 2301(rolls)N
926(forward)X
1210(the)X
1337(segments)X
1664(from)X
1849(there)X
2039(to)X
2129(either)X
755 2391(the)N
876(end)X
1015(of)X
1104(the)X
1224(log)X
1348(or)X
1437(the)X
1557(\256rst)X
1703(segment)X
1992(beginning)X
755 2481(a)N
842(directory)X
1183(operation)X
1537(that)X
1707(is)X
1810(never)X
2039(\256nished.)X
755 2571(Then)N
952(the)X
1081(recovery)X
1394(process)X
1666(writes)X
1893(a)X
1960(checkpoint)X
755 2661(and)N
891(updates)X
1156(the)X
1274(superblock.)X
755 2784(While)N
976(rolling)X
1214(forward,)X
1514(two)X
1659(\257ags)X
1834(are)X
1957(used)X
2128(in)X
2214(the)X
555 2874(segment)N
890(summaries:)X
1327(SS_DIROP)X
1763(and)X
1946(SS_CONT.)X
555 2964(SS_DIROP)N
996(speci\256es)X
1345(that)X
1538(a)X
1647(directory)X
2009(operation)X
555 3054(appears)N
838(in)X
936(the)X
1070(partial)X
1311(segment.)X
1654(SS_CONT)X
2036(speci\256es)X
555 3144(that)N
699(the)X
821(directory)X
1134(operation)X
1460(spans)X
1661(multiple)X
1950(partial)X
2178(seg-)X
555 3234(ments.)N
826(If)X
920(the)X
1058(recovery)X
1380(agent)X
1594(\256nds)X
1789(a)X
1864(segment)X
2170(with)X
555 3324(both)N
719(SS_DIROP)X
1108(and)X
1245(SS_CONT)X
1612(set,)X
1742(it)X
1807(ignores)X
2064(all)X
2165(such)X
555 3414(partial)N
793(segments)X
1124(until)X
1302(it)X
1378(\256nds)X
1565(a)X
1633(later)X
1808(partial)X
2045(segment)X
555 3504(with)N
721(SS_DIROP)X
1113(set)X
1226(and)X
1366(SS_CONT)X
1735(unset)X
1927(\(i.e.)X
2075(the)X
2196(end)X
555 3594(of)N
658(the)X
791(directory)X
1116(operation)X
1454(write\).)X
1721(If)X
1810(no)X
1925(such)X
2107(partial)X
555 3684(segment)N
847(is)X
925(ever)X
1089(found,)X
1321(then)X
1484(all)X
1589(the)X
1712(segments)X
2034(from)X
2214(the)X
555 3774(initial)N
762(directory)X
1073(operation)X
1397(on)X
1497(are)X
1616(discarded.)X
1984(Since)X
2182(par-)X
555 3864(tial)N
686(segments)X
1012(are)X
1139(small)X
1340([BAKE92])X
1720(this)X
1863(should)X
2104(rarely,)X
555 3954(if)N
624(ever,)X
803(happen.)X
3 f
555 4140(4.4.)N
715(Synchronization)X
1 f
755 4263(To)N
866(maintain)X
1168(the)X
1288(delicate)X
1559(balance)X
1826(between)X
2115(buffer)X
555 4353(management,)N
1019(free)X
1179(space)X
1392(accounting)X
1778(and)X
1928(the)X
2059(cleaner,)X
555 4443(synchronization)N
1100(between)X
1401(the)X
1532(components)X
1952(of)X
2052(the)X
2183(sys-)X
555 4533(tem)N
700(must)X
879(be)X
979(carefully)X
1289(managed.)X
1643(Figure)X
1876(8)X
1940(shows)X
2164(each)X
555 4623(of)N
659(the)X
794(synchronization)X
1343(relationships.)X
1829(The)X
1990(cleaner)X
2259(is)X
555 4713(given)N
758 0.3750(precedence)AX
1146(over)X
1314(all)X
1419(other)X
1608(processing)X
1975(in)X
2061(the)X
2183(sys-)X
555 4803(tem)N
705(to)X
797(guarantee)X
1140(that)X
1290(clean)X
1489(segments)X
1816(are)X
1944(available)X
2263(if)X
555 4893(the)N
674(\256le)X
797(system)X
1040(has)X
1168(space.)X
1408(It)X
1478(has)X
1606(its)X
1701(own)X
1859(event)X
2053(variable)X
555 4983(on)N
656(which)X
873(it)X
938(waits)X
1127(for)X
1241(new)X
1395(work)X
1580(\()X
2 f
1607(lfs_allclean_wakeup)X
1 f
2265(\).)X
555 5073(The)N
713(segment)X
1013(writer)X
1238(and)X
1387(user)X
1554(processes)X
1895(will)X
2052(defer)X
2250(to)X
555 5163(the)N
685(cleaner)X
950(if)X
1031(the)X
1161(disk)X
1326(system)X
1580(does)X
1759(not)X
1893(have)X
2076(enough)X
555 5253(clean)N
768(space.)X
1029(A)X
1129(user)X
1305(process)X
1588(detects)X
1853(this)X
2010(condition)X
555 5343(when)N
779(it)X
873(attempts)X
1194(to)X
1306(write)X
1521(a)X
1607(block)X
1835(but)X
1987(the)X
2134(block)X
555 5433(accounting)N
938(indicates)X
1254(that)X
1405(there)X
1597(is)X
1681(no)X
1792(space)X
2002(available.)X
555 5523(The)N
725(segment)X
1037(writer)X
1274(detects)X
1542(this)X
1702(condition)X
2049(when)X
2268(it)X
555 5613(attempts)N
860(to)X
956(begin)X
1168(writing)X
1433(to)X
1529(a)X
1598(new)X
1765(segment)X
2065(and)X
2214(the)X
555 5703(number)N
820(of)X
907(clean)X
1097(segments)X
1415(has)X
1542(reached)X
1813(two.)X
3 f
7 s
3557 1005(Buffers)N
3749(\(locked_queue_count\))X
2875 1897(A)N
2929(waits)X
3068(for)X
3154(B)X
3205(on)X
3278("address")X
3538(due)X
3639(to)X
3700("Reason")X
3214 1828(Reason)N
3402(\(address\))X
10 s
3724 1774(B)N
3059(A)X
1 Dt
3695 1740 MXY
-19 -12 Dl
7 12 Dl
-7 12 Dl
19 -12 Dl
-552 0 Dl
7 s
3412 1335(Dirops)N
3588(\(lfs_writer\))X
3129 1212(Space)N
3283(\(lfs_avail\))X
2621 991(work)N
2759(\(lfs_allclean_wakeup\))X
3309 858 MXY
-22 5 Dl
13 3 Dl
4 14 Dl
5 -22 Dl
-552 551 Dl
3089 1649(work)N
3227(\(lfs_allclean_wakeup\))X
3179 1450(Segments)N
3421(\(lfs_avail\))X
3861 1574 MXY
-19 -12 Dl
7 12 Dl
-7 13 Dl
19 -13 Dl
-884 0 Dl
3529 1079 MXY
5 22 Dl
4 -14 Dl
14 -3 Dl
-23 -5 Dl
332 330 Dl
4081 MX
-4 -22 Dl
-4 13 Dl
-14 4 Dl
22 5 Dl
-552 -551 Dl
3723 1184(Writing)N
3928(\(lfs_dirops\))X
2977 1478 MXY
20 12 Dl
-7 -12 Dl
7 -12 Dl
-20 12 Dl
884 0 Dl
2977 1409 MXY
23 -5 Dl
-14 -4 Dl
-4 -13 Dl
-5 22 Dl
332 -330 Dl
3888 1542(Writer)N
5 Dt
3861 1409 MXY
0 221 Dl
220 0 Dl
0 -221 Dl
-220 0 Dl
3363 991(Proc)N
2772 1542(Cleaner)N
2757 1409 MXY
0 221 Dl
220 0 Dl
0 -221 Dl
-220 0 Dl
3309 858 MXY
0 221 Dl
220 0 Dl
0 -221 Dl
-220 0 Dl
3 Dt
-1 Ds
10 s
2541 2025(Figure)N
2807(8:)X
2913(Synchronization)X
3511(Relationships)X
4011(in)X
4115(BSD-)X
2541 2115(LFS.)N
1 f
8 s
2744(The)X
2864(cleaner)X
3068(has)X
3174(precedence)X
3480(over)X
3613(all)X
3697(components)X
4026(in)X
4096(the)X
4194(sys-)X
2541 2205(tem.)N
2693(It)X
2756(waits)X
2915(on)X
3003(the)X
2 f
3105(lfs_allclean_wakeup)X
1 f
3655(condition)X
3921(and)X
4037(wakes)X
4219(the)X
2541 2295(segment)N
2774(writer)X
2946(or)X
3019(user)X
3145(processes)X
3409(using)X
3568(the)X
2 f
3665(lfs_avail)X
1 f
3905(condition.)X
4198(The)X
2541 2385(segment)N
2772(writer)X
2942(and)X
3052(user)X
3176(processes)X
3438(maintain)X
3680(directory)X
3928(operation)X
4187(syn-)X
2541 2475(chronization)N
2884(through)X
3107(the)X
2 f
3209(lfs_dirop)X
1 f
3465(and)X
2 f
3581(lfs_writer)X
1 f
3855(conditions.)X
4177(User)X
2541 2565(processes)N
2813(doing)X
2987(writes)X
3170(wait)X
3307(on)X
3398(the)X
2 f
3503(locked_queue_count)X
1 f
4054(when)X
4219(the)X
2541 2655(number)N
2752(of)X
2821(dirty)X
2958(buffers)X
3154(held)X
3280(by)X
3360(BSD-LFS)X
3633(exceeds)X
3850(a)X
3894(system)X
4088(limit.)X
10 s
10 f
2541 2745 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 f
2741 3021(In)N
2837(addition)X
3127(to)X
3217(cleaner)X
3478(synchronization,)X
4038(the)X
4164(seg-)X
2541 3111(ment)N
2724(writer)X
2939(and)X
3078(user)X
3235(processes)X
3566(synchronize)X
3977(on)X
4080(the)X
4200(the)X
2541 3201(availability)N
2936(of)X
3038(buffer)X
3270(headers.)X
3591(When)X
3818(the)X
3951(number)X
4231(of)X
2541 3291(buffer)N
2763(headers)X
3034(drops)X
3236(below)X
3456(the)X
2 f
3578(start)X
3748(write)X
3936(threshold)X
1 f
4262(a)X
2541 3381(segment)N
2844(write)X
3045(is)X
3134(initiated.)X
3471(If)X
3560(a)X
3631(write)X
3831(request)X
4098(would)X
2541 3471(push)N
2714(the)X
2833(number)X
3099(of)X
3187(available)X
3498(buffer)X
3716(headers)X
3983(below)X
4200(the)X
2 f
2541 3561(stop)N
2696(access)X
2928(threshold)X
1 f
3230(,)X
3272(the)X
3391(writing)X
3643(process)X
3905(waits)X
4095(until)X
4262(a)X
2541 3651(segment)N
2830(write)X
3017(completes,)X
3384(making)X
3646(more)X
3833(buffer)X
4052(headers)X
2541 3741(available.)N
2917(Finally,)X
3209(there)X
3416(is)X
3515(the)X
3659(directory)X
3995(operation)X
2541 3831(synchronization.)N
3117(User)X
3293(processes)X
3625(wait)X
3786(on)X
3889(the)X
2 f
4010(lfs_dirop)X
1 f
2541 3921(condition)N
2875(and)X
3023(the)X
3153(segment)X
3452(writer)X
3676(waits)X
3877(on)X
2 f
3988(lfs_writer)X
1 f
2541 4011(condition.)N
3 f
2541 4197(4.5.)N
2701(Minor)X
2939(Modi\256cations)X
1 f
2741 4320(There)N
2966(are)X
3102(a)X
3174(few)X
3331(additional)X
3687(changes)X
3982(to)X
4080(Sprite-)X
2541 4410(LFS.)N
2751(To)X
2873(provide)X
3151(more)X
3349(robust)X
3581(recovery)X
3895(we)X
4021(replicate)X
2541 4500(the)N
2669(superblock)X
3050(throughout)X
3430(the)X
3557(\256le)X
3688(system,)X
3959(as)X
4055(in)X
4146(FFS.)X
2541 4590(Since)N
2752(the)X
2883(\256le)X
3018(system)X
3272(meta-data)X
3621(is)X
3706(stored)X
3934(in)X
4028(the)X
2 f
4158(i\256le)X
1 f
(,)S
2541 4680(we)N
2660(have)X
2837(no)X
2942(need)X
3119(for)X
3238(separate)X
3526(checkpoint)X
3902(regions,)X
4182(and)X
2541 4770(simply)N
2787(store)X
2972(the)X
3099(disk)X
3261(address)X
3531(of)X
3627(the)X
2 f
3754(i\256le)X
1 f
3903(inode)X
4110(in)X
4200(the)X
2541 4860(superblock.)N
2970(Note)X
3163(that)X
3320(it)X
3400(is)X
3489(not)X
3627(necessary)X
3976(to)X
4074(keep)X
4262(a)X
2541 4950(duplicate)N
2 f
2863(i\256le)X
1 f
3011(since)X
3204(it)X
3276(can)X
3416(be)X
3520(reconstructed)X
3981(from)X
4164(seg-)X
2541 5040(ment)N
2721(summary)X
3039(information,)X
3457(if)X
3526(necessary.)X
3 f
2541 5226(5.)N
2641(Performance)X
3108(Measurements)X
1 f
2741 5349(This)N
2917(chapter)X
3188(compares)X
3529(the)X
3660(performance)X
4100(of)X
4200(the)X
2541 5439(redesigned)N
2928(log-structured)X
3417(\256le)X
3558(system)X
3819(to)X
3920(more)X
4124(tradi-)X
2541 5529(tional)N
2754(\256le)X
2887(systems)X
3171(on)X
3281(a)X
3347(variety)X
3600(of)X
3697(benchmarks)X
4115(based)X
2541 5619(on)N
2643(real)X
2786(workloads.)X
3181(The)X
3327(new)X
3482(log-structured)X
3953(\256le)X
4076(system)X
2541 5709(was)N
2689(written)X
2939(in)X
3024(November)X
3386(of)X
3476(1991)X
3659(and)X
3798(was)X
3946(left)X
4075(largely)X
2541 5799(untouched)N
2905(until)X
3081(late)X
3227(spring)X
3457(1992)X
3647(and)X
3793(is)X
3876(a)X
3942(completely)X
3 f
555 6048(212)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

213 p
%%Page: 213 13
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
555 762(untuned)N
836(implementation.)X
1401(While)X
1619(design)X
1850(decisions)X
2170(took)X
555 852(into)N
705(account)X
981(the)X
1105(expected)X
1417(performance)X
1850(impact,)X
2114(at)X
2197(this)X
555 942(point)N
741(there)X
924(is)X
999(little)X
1167(empirical)X
1492(evidence)X
1799(to)X
1882(support)X
2143(those)X
555 1032(decisions.)N
755 1155(The)N
901(\256le)X
1024(systems)X
1298(against)X
1546(which)X
1763(LFS)X
1921(is)X
1995(compared)X
555 1245(are)N
676(the)X
795(regular)X
1044(fast)X
1181(\256le)X
1304(system)X
1547(\(FFS\),)X
1774(and)X
1911(an)X
2008(enhanced)X
555 1335(version)N
870(of)X
1016(FFS)X
1226(similar)X
1526(to)X
1666(that)X
1864(described)X
2250(in)X
555 1425([MCVO91],)N
988(referred)X
1283(to)X
1384(as)X
1490(EFS)X
1666(for)X
1799(the)X
1936(rest)X
2091(of)X
2197(this)X
555 1515(paper.)N
3 f
555 1701(5.1.)N
715(Extent-like)X
1113(Performance)X
1580(from)X
1770(FFS)X
1 f
755 1824(EFS)N
919(provides)X
1222(extent-based)X
1655(\256le)X
1783(system)X
2031(behavior)X
555 1914(without)N
823(changing)X
1141(the)X
1262(underlying)X
1632(structures)X
1967(of)X
2057(FFS,)X
2232(by)X
555 2004(allocating)N
905(blocks)X
1148(sequentially)X
1568(on)X
1681(disk)X
1847(and)X
1996(clustering)X
555 2094(multiple)N
858(block)X
1072(requests.)X
1411(FFS)X
1579(is)X
1668(parameterized)X
2160(by)X
2276(a)X
555 2184(variable)N
858(called)X
2 f
1094(maxcontig)X
1 f
1471(that)X
1634(speci\256es)X
1953(how)X
2134(many)X
555 2274(logically)N
874(sequential)X
1238(disk)X
1410(blocks)X
1657(should)X
1908(be)X
2022(allocated)X
555 2364(contiguously.)N
1046(When)X
1276(maxcontig)X
1651(is)X
1741(large)X
1939(\(equal)X
2177(to)X
2276(a)X
555 2454(track\),)N
796(FFS)X
961(does)X
1140(what)X
1328(is)X
1413(essentially)X
1783(track)X
1976(allocation.)X
555 2544(In)N
643(EFS,)X
821(sequential)X
1167(dirty)X
1339(buffers)X
1587(are)X
1706(accumulated)X
2132(in)X
2214(the)X
555 2634(cache,)N
800(and)X
957(when)X
1172(an)X
1289(extent's)X
1584(worth)X
1812(\(i.e.)X
2 f
1978(maxcontig)X
1 f
555 2724(blocks\))N
813(have)X
987(been)X
1160(collected,)X
1491(they)X
1650(are)X
1770(bundled)X
2049(together)X
555 2814(into)N
699(a)X
755(cluster,)X
1009(providing)X
1340(extent-based)X
1766(writing.)X
755 2937(To)N
867(provide)X
1135(extent-based)X
1564(reading,)X
1848(the)X
1969(interaction)X
555 3027(between)N
853(the)X
981(buffer)X
1207(cache)X
1420(and)X
1565(the)X
1692(disk)X
1854(was)X
2008(modi\256ed.)X
555 3117(Typically,)N
908(before)X
1140(a)X
1202(block)X
1406(is)X
1485(read)X
1650(from)X
1832(disk,)X
2011(the)X
2 f
2134(bmap)X
1 f
555 3207(routine)N
806(is)X
882(called)X
1097(to)X
1182(translate)X
1477(logical)X
1718(block)X
1919(addresses)X
2250(to)X
555 3297(physical)N
847(disk)X
1005(block)X
1208(addresses.)X
1581(The)X
1731(block)X
1934(is)X
2011(then)X
2173(read)X
555 3387(from)N
739(disk)X
900(and)X
1044(the)X
1170(next)X
1336(block)X
1542(is)X
1623(requested.)X
1999(Since)X
2205(I/O)X
555 3477(interrupts)N
890(are)X
1017(not)X
1147(handled)X
1429(instantaneously,)X
1974(the)X
2099(disk)X
2259(is)X
555 3567(usually)N
815(unable)X
1058(to)X
1149(respond)X
1432(to)X
1522(two)X
1670(contiguous)X
2049(requests)X
555 3657(on)N
662(the)X
787(same)X
979(rotation,)X
1275(so)X
1373(sequentially)X
1787(allocated)X
2103(blocks)X
555 3747(incur)N
747(the)X
872(cost)X
1028(of)X
1122(an)X
1224(entire)X
1433(rotation.)X
1728(For)X
1865(both)X
2033(EFS)X
2196(and)X
555 3837(BSD-LFS,)N
2 f
921(bmap)X
1 f
1125(was)X
1276(extended)X
1592(to)X
1680(return,)X
1918(not)X
2046(only)X
2214(the)X
555 3927(physical)N
856(disk)X
1023(address,)X
1317(but)X
1452(the)X
1583(number)X
1861(of)X
1961(contiguous)X
555 4017(blocks)N
796(that)X
948(follow)X
1189(the)X
1319(requested)X
1659(block.)X
1908(Then,)X
2124(rather)X
555 4107(than)N
727(reading)X
1002(one)X
1152(block)X
1363(at)X
1454(a)X
1523(time)X
1698(and)X
1847(requesting)X
2214(the)X
555 4197(next)N
715(block)X
914(asynchronously,)X
1458(the)X
1577(\256le)X
1700(system)X
1943(reads)X
2134(many)X
555 4287(contiguous)N
964(blocks)X
1231(in)X
1351(a)X
1444(single)X
1692(request,)X
2001(providing)X
555 4377(extent-based)N
997(reading.)X
1313(Because)X
1616(BSD-LFS)X
1970(potentially)X
555 4467(allocates)N
862(many)X
1065(blocks)X
1299(contiguously,)X
1757(it)X
1826(may)X
1989(miss)X
2160(rota-)X
555 4557(tions)N
752(between)X
1062(reading)X
1345(collections)X
1734(of)X
1843(blocks.)X
2134(Since)X
555 4647(EFS)N
713(uses)X
872(the)X
991(FFS)X
1144(allocator,)X
1466(it)X
1531(leaves)X
1753(a)X
1810(rotational)X
2138(delay)X
555 4737(between)N
870(clusters)X
1162(of)X
1276(blocks)X
1532(and)X
1694(does)X
1887(not)X
2035(pay)X
2197(this)X
555 4827(penalty.)N
3 f
555 5013(5.2.)N
715(The)X
868(Evaluation)X
1260(Platform)X
1 f
755 5136(Our)N
909(benchmarking)X
1397(con\256guration)X
1853(consisted)X
2180(of)X
2276(a)X
555 5226(Hewlett-Packard)N
1124(series)X
1336(9000/380)X
1667(computer)X
1998(with)X
2168(a)X
2232(25)X
555 5316(Mhz)N
743(MC68040)X
1108(processor.)X
1497(It)X
1586(had)X
1742(16)X
1862(megabytes)X
2245(of)X
555 5406(main)N
759(memory,)X
1090(and)X
1250(an)X
1370(HP)X
1516(97560)X
1760(SCSI)X
1971(disk.)X
2187(The)X
555 5496(hardware)N
878(con\256guration)X
1327(is)X
1402(summarized)X
1816(in)X
1900(Table)X
2105(5.)X
2187(The)X
555 5586(system)N
803(was)X
954(running)X
1229(the)X
1352(4.4BSD-Alpha)X
1855(operating)X
2183(sys-)X
555 5676(tem)N
699(and)X
839(all)X
943(measurements)X
1426(were)X
1607(taken)X
1804(with)X
1969(the)X
2090(system)X
555 5766(running)N
829(single-user,)X
1226(unattached)X
1598(to)X
1684(any)X
1824(network.)X
2151(Each)X
2541 762(of)N
2640(the)X
2769(\256le)X
2902(systems)X
3186(used)X
3364(a)X
3431(4-kilobyte)X
3791(block)X
4000(size)X
4156(with)X
2541 852(FFS)N
2693(and)X
2829(EFS)X
2986(using)X
3179(1-kilobyte)X
3528(fragments.)X
2741 975(The)N
2887(three)X
3069(\256le)X
3192(systems)X
3465(being)X
3663(evaluated)X
3991(run)X
4118(in)X
4200(the)X
2541 1065(same)N
2733(operating)X
3063(system)X
3312(kernel)X
3539(and)X
3681(share)X
3877(most)X
4058(of)X
4151(their)X
2541 1155(source)N
2784(code.)X
3009(There)X
3230(are)X
3361(approximately)X
3856(6000)X
4048(lines)X
4231(of)X
2541 1245(shared)N
2782(C)X
2866(code,)X
3069(4000)X
3260(lines)X
3442(of)X
3540(LFS-speci\256c)X
3980(code,)X
4182(and)X
2541 1335(3500)N
2732(lines)X
2914(of)X
3012(FFS-speci\256c)X
3447(code.)X
3670(EFS)X
3837(uses)X
4005(the)X
4133(same)X
2541 1425(source)N
2788(code)X
2977(as)X
3081(FFS)X
3250(plus)X
3420(an)X
3532(additional)X
3888(500)X
4044(lines)X
4231(of)X
2541 1515(clustering)N
2885(code,)X
3085(of)X
3180(which)X
3404(300)X
3552(are)X
3679(also)X
3835(used)X
4009(by)X
4116(BSD-)X
2541 1605(LFS)N
2698(\(for)X
2839(reads\).)X
2741 1728(Each)N
2923(of)X
3011(the)X
3130(next)X
3288(sections)X
3566(describes)X
3885(a)X
3941(benchmark)X
2541 1818(and)N
2692(presents)X
2990(performance)X
3431(analysis)X
3723(for)X
3851(each)X
4033(\256le)X
4169(sys-)X
2541 1908(tem.)N
2740(The)X
2904(\256rst)X
3067(benchmark)X
3462(analyzes)X
3777(raw)X
3936(\256le)X
4076(system)X
2541 1998(performance.)N
3045(The)X
3227(next)X
3422(two)X
3599(benchmarks)X
4044(emulate)X
2541 2088(speci\256c)N
2830(workloads.)X
3248(A)X
3349(time-sharing)X
3797(environment)X
4245(is)X
2541 2178(represented)N
2953(by)X
3074(a)X
3150(software)X
3467(development)X
3921(benchmark,)X
2541 2268(and)N
2712(a)X
2803(database)X
3135(environment)X
3595(is)X
3703(represented)X
4128(by)X
4262(a)X
2541 2358(modi\256ed)N
2882(version)X
3175(of)X
3299(the)X
3454(industry-standard)X
4072(TPC-B)X
2541 2448(benchmark)N
2926([TPCB90].)X
3327(For)X
3466(a)X
3530(more)X
3723(thorough)X
4040(analysis)X
2541 2538(of)N
2666(LFS)X
2861(and)X
3035(a)X
3129(wider)X
3370(range)X
3606(of)X
3730(benchmarks,)X
4195(see)X
2541 2628([SELT93a].)N
3 f
2541 2814(5.2.1.)N
2761(Raw)X
2937(File)X
3086(System)X
3351(Performance)X
1 f
2741 2937(The)N
2888(goal)X
3048(of)X
3137(this)X
3274(test)X
3407(is)X
3482(to)X
3566(measure)X
3855(the)X
3974(maximum)X
2541 3027(throughput)N
2923(that)X
3074(can)X
3217(be)X
3324(expected)X
3641(from)X
3828(the)X
3957(given)X
4165(disk)X
2541 3117(and)N
2684(system)X
2933(con\256guration)X
3386(for)X
3506(each)X
3680(of)X
3773(the)X
3897(\256le)X
4025(systems.)X
2541 3207(For)N
2699(this)X
2861(test,)X
3038(the)X
3182(three)X
3389(\256le)X
3537(systems)X
3836(are)X
3981(compared)X
10 f
2758 3346(i)N
2759(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
3051 3436(Disk)N
3222(\(SCSI)X
3437(HP)X
3559(97560\))X
10 f
2758 3446(i)N
2759(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2798 3536(Average)N
3091(seek)X
3786(13.0)X
3946(ms)X
2798 3626(Single)N
3022(rotation)X
3786(15.0)X
3946(ms)X
2798 3716(Track)N
3006(size)X
3828(36)X
3928(KB)X
2798 3806(Track)N
3006(buffer)X
3788(128)X
3928(KB)X
2798 3896(Disk)N
2969(bandwidth)X
3670(2.2)X
3790(MB/sec)X
2798 3986(Bus)N
2942(bandwidth)X
3670(1.6)X
3790(MB/sec)X
2798 4076(Controller)N
3147(overhead)X
3826(1.0)X
3946(ms)X
2798 4166(Track)N
3006(skew)X
3756(8)X
3816(sectors)X
2798 4256(Cylinder)N
3098(skew)X
3716(10)X
3816(sectors)X
2798 4346(Cylinder)N
3098(size)X
3747(19)X
3847(tracks)X
2798 4436(Disk)N
2969(size)X
10 f
3505 4444(c)N
4406(c)Y
4326(c)Y
4246(c)Y
4166(c)Y
4086(c)Y
4006(c)Y
3926(c)Y
3846(c)Y
3766(c)Y
3686(c)Y
3606(c)Y
3526(c)Y
1 f
3565 4436(1962)N
3745(cylinders)X
10 f
2758 4438(i)N
2759(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
2758 4454(i)N
2759(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
3045 4536(CPU)N
3220(\(Motorola)X
3565(68040\))X
10 f
2758 4546(i)N
2759(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
2798 4636(Memory)N
3094(Bandwidth)X
3630(12.0)X
3790(MB/sec)X
2798 4726(CPU)N
3792(25)X
3892(Mhz)X
2798 4816(MIPS)N
3852(10-12)X
10 f
2758 4826(i)N
2759(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
2758 4834(c)N
4786(c)Y
4706(c)Y
4626(c)Y
4546(c)Y
4466(c)Y
4386(c)Y
4306(c)Y
4226(c)Y
4146(c)Y
4066(c)Y
3986(c)Y
3906(c)Y
3826(c)Y
3746(c)Y
3666(c)Y
3586(c)Y
3506(c)Y
3426(c)Y
3505 4818(c)N
4786(c)Y
4706(c)Y
4626(c)Y
4079 4834(c)N
4786(c)Y
4706(c)Y
4626(c)Y
4546(c)Y
4466(c)Y
4386(c)Y
4306(c)Y
4226(c)Y
4146(c)Y
4066(c)Y
3986(c)Y
3906(c)Y
3826(c)Y
3746(c)Y
3666(c)Y
3586(c)Y
3506(c)Y
3426(c)Y
3 f
2541 5039(Table)N
2757(5:)X
2844(Hardware)X
3216(Speci\256cations.)X
1 f
8 s
3734(Although)X
3992(the)X
4086(disk)X
4209(can)X
2541 5129(transfer)N
2752(at)X
2814(2.2)X
2910(megabytes)X
3199(per)X
3296(second,)X
3505(the)X
3599(bus)X
3704(bandwidth)X
3990(is)X
4049(limited)X
4247(to)X
2541 5219(1.6)N
2641(megabytes)X
2934(per)X
3035(second.)X
3264(SCSI)X
3420(supports)X
3657(two)X
3772(transfer)X
3985(modes,)X
4187(syn-)X
2541 5309(chronous)N
2799(and)X
2915(asynchronous)X
3289([ADAP85].)X
3624(Synchronous)X
3981(mode)X
4146(is)X
4212(op-)X
2541 5399(tional)N
2707(under)X
2872(SCSI-I)X
3070(and)X
3182(is)X
3245(not)X
3347(supported)X
3619(by)X
3702(the)X
3799(disk)X
3925(driver.)X
4128(There-)X
2541 5489(fore,)N
2683(all)X
2771(transfers)X
3014(are)X
3115(performed)X
3404(using)X
3566(asynchronous)X
3940(mode)X
4105(and)X
4220(are)X
2541 5579(limited)N
2739(to)X
2805(1.6)X
2901(MB/sec.)X
3 f
10 s
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(213)X

214 p
%%Page: 214 14
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
555 762(against)N
821(the)X
958(maximum)X
1321(speed)X
1543(at)X
1639(which)X
1873(the)X
2009(operating)X
555 852(system)N
802(can)X
939(write)X
1129(directly)X
1399(to)X
1486(the)X
1609(disk.)X
1806(The)X
1955(benchmark)X
555 942(consists)N
846(of)X
950(creating)X
1246(a)X
1319(\256le)X
1458(of)X
1562(size)X
2 f
1724(S)X
1 f
1801(and)X
1954(then)X
2129(either)X
555 1032(reading)N
821(or)X
913(writing)X
1169(the)X
1292(entire)X
1500(\256le)X
1627(50)X
1732(times.)X
1970(The)X
2120(meas-)X
555 1122(urements)N
887(recorded)X
1207(are)X
1344(averages)X
1664(across)X
1902(the)X
2037(50)X
2154(runs.)X
555 1212(For)N
688(the)X
808(read)X
969(tests,)X
1153(the)X
1273(cache)X
1479(is)X
1553(\257ushed)X
1805(before)X
2032(each)X
2201(test)X
555 1302(by)N
655(unmounting)X
1061(and)X
1197(remounting)X
1586(the)X
1704(\256le)X
1826(system.)X
3 f
555 1425(Raw)N
731(Write)X
952(Performance)X
1 f
755 1548(The)N
924(graph)X
1150(in)X
1255(Figure)X
1507(9)X
1590(shows)X
1833(the)X
1974(bandwidth)X
555 1638(attained)N
834(for)X
953(writing,)X
1229(as)X
1321(a)X
1382(function)X
1674(of)X
2 f
1766(S)X
1 f
(,)S
1851(the)X
1974(size)X
2123(of)X
2214(the)X
555 1728(I/O.)N
744(Given)X
981(the)X
1120(sequential)X
1486(layout)X
1727(of)X
1835(both)X
2018(LFS)X
2196(and)X
555 1818(EFS,)N
735(the)X
856(expectation)X
1249(is)X
1325(that)X
1467(both)X
1631(should)X
1866(perform)X
2147(com-)X
555 1908(parably)N
817(to)X
900(the)X
1019(speed)X
1223(of)X
1310(the)X
1428(raw)X
1569(disk)X
1722(and)X
1858(that)X
1998(FFS,)X
2170(with)X
555 1998(its)N
683(rotational)X
1043(positioning,)X
1475(should)X
1741(achieve)X
2040(approxi-)X
555 2088(mately)N
808(50%)X
990(of)X
1091(the)X
1223(disk)X
1390(bandwidth.)X
1802(However,)X
2151(there)X
555 2178(are)N
674(several)X
922(anomalies.)X
755 2301(First,)N
963(as)X
1071(the)X
1210(I/O)X
1358(size)X
1524(increases,)X
1880(EFS)X
2058(actually)X
555 2391(provides)N
860(more)X
1053(bandwidth)X
1419(than)X
1585(the)X
1711(raw)X
1860(disk)X
2021(partition.)X
555 2481(The)N
713(explanation)X
1120(for)X
1247(this)X
1395(can)X
1539(be)X
1647(found)X
1866(by)X
1978(looking)X
2254(at)X
555 2571(the)N
684(number)X
960(of)X
1058(synchronous)X
1493(I/O's)X
1688(and)X
1834(the)X
1962(begin)X
2170(time)X
555 2661(for)N
673(each)X
844(operation.)X
1210(When)X
1425(accessing)X
1756(the)X
1877(raw)X
2021(partition,)X
555 2751(all)N
660(I/Os)X
822(are)X
945(synchronous.)X
1414(Therefore,)X
1776(there)X
1961(is)X
2038(no)X
2142(over-)X
555 2841(lap)N
684(between)X
983(the)X
1112(time)X
1285(required)X
1584(to)X
1677(copy)X
1864(the)X
1992(data)X
2156(from)X
555 2931(user-space)N
934(into)X
1097(the)X
1234(kernel)X
1474(and)X
1628(the)X
1764(time)X
1944(required)X
2250(to)X
555 3021(perform)N
861(the)X
1006(I/Os.)X
1231(As)X
1367(a)X
1450(result,)X
1695(there)X
1902(is)X
2001(a)X
2083(gap)X
2245(of)X
555 3111(approximately)N
1119(\256ve)X
1340(milliseconds)X
1845(between)X
2214(the)X
10 f
555 3297 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
938 4359 MXY
-13 13 Dl
7 -7 Dl
-7 -6 Dl
13 13 Dl
945 3997 MXY
-13 13 Dl
6 -7 Dl
-6 -6 Dl
13 13 Dl
969 3946 MXY
-13 14 Dl
6 -7 Dl
-6 -7 Dl
13 14 Dl
1003 3906 MXY
-14 14 Dl
7 -7 Dl
-7 -7 Dl
14 14 Dl
1070 3901 MXY
-13 14 Dl
7 -7 Dl
-7 -7 Dl
13 14 Dl
1205 3886 MXY
-14 14 Dl
7 -7 Dl
-7 -7 Dl
14 14 Dl
1474 3886 MXY
-13 14 Dl
7 -7 Dl
-7 -7 Dl
13 14 Dl
2013 3886 MXY
-14 14 Dl
7 -7 Dl
-7 -7 Dl
14 14 Dl
4 Ds
1 Dt
932 4365 MXY
6 -362 Dl
24 -50 Dl
34 -40 Dl
68 -5 Dl
134 -15 Dl
270 0 Dl
538 0 Dl
7 s
1 f
2068 3913(RAW)N
-1 Ds
3 Dt
925 4513 MXY
0 -14 Dl
13 0 Dl
0 14 Dl
-13 0 Dl
932 4398 MXY
0 -14 Dl
13 0 Dl
0 14 Dl
-13 0 Dl
956 4423 MXY
0 -14 Dl
13 0 Dl
0 14 Dl
-13 0 Dl
989 4388 MXY
0 -14 Dl
14 0 Dl
0 14 Dl
-14 0 Dl
1057 4367 MXY
0 -13 Dl
13 0 Dl
0 13 Dl
-13 0 Dl
1191 4352 MXY
0 -13 Dl
14 0 Dl
0 13 Dl
-14 0 Dl
1461 4357 MXY
0 -14 Dl
13 0 Dl
0 14 Dl
-13 0 Dl
1999 4352 MXY
0 -13 Dl
14 0 Dl
0 13 Dl
-14 0 Dl
5 Dt
932 4506 MXY
6 -115 Dl
24 25 Dl
34 -35 Dl
68 -20 Dl
134 -15 Dl
270 4 Dl
538 -4 Dl
2068 4365(FFS)N
3 Dt
925 4471 MXY
13 Dc
932 4340 MXY
13 Dc
956 4240 MXY
13 Dc
989 4084 MXY
13 Dc
1057 3958 MXY
13 Dc
1191 3838 MXY
13 Dc
1461 3832 MXY
13 Dc
1999 3787 MXY
13 Dc
16 Ds
1 Dt
932 4471 MXY
6 -131 Dl
24 -100 Dl
34 -156 Dl
68 -126 Dl
134 -120 Dl
270 -6 Dl
538 -45 Dl
2068 3807(EFS)N
-1 Ds
3 Dt
932 4399 MXY
-7 14 Dl
13 0 Dl
-6 -14 Dl
938 4278 MXY
-6 14 Dl
13 0 Dl
-7 -14 Dl
962 4253 MXY
-6 14 Dl
13 0 Dl
-7 -14 Dl
996 4238 MXY
-7 14 Dl
14 0 Dl
-7 -14 Dl
1064 4228 MXY
-7 14 Dl
13 0 Dl
-6 -14 Dl
1198 4218 MXY
-7 14 Dl
14 0 Dl
-7 -14 Dl
1468 4123 MXY
-7 13 Dl
13 0 Dl
-6 -13 Dl
2006 4077 MXY
-7 14 Dl
14 0 Dl
-7 -14 Dl
932 4406 MXY
6 -121 Dl
24 -25 Dl
34 -15 Dl
68 -10 Dl
134 -10 Dl
270 -96 Dl
538 -45 Dl
2068 4103(LFS)N
929 4592 MXY
1077 0 Dl
929 3586 MXY
1077 0 Dl
929 4592 MXY
0 -1006 Dl
2006 4592 MXY
0 -1006 Dl
929 4592 MXY
0 13 Dl
3586 MY
0 -13 Dl
915 4673(0)N
1198 4592 MXY
0 13 Dl
3586 MY
0 -13 Dl
1142 4673(1024)N
1468 4592 MXY
0 13 Dl
3586 MY
0 -13 Dl
1412 4673(2048)N
1737 4592 MXY
0 13 Dl
3586 MY
0 -13 Dl
1681 4673(3072)N
2006 4592 MXY
0 13 Dl
3586 MY
0 -13 Dl
1950 4673(4096)N
929 4592 MXY
-14 0 Dl
2006 MX
14 0 Dl
832 4611(0.0)N
929 4340 MXY
-14 0 Dl
2006 MX
14 0 Dl
832 4360(0.5)N
929 4089 MXY
-14 0 Dl
2006 MX
14 0 Dl
832 4109(1.0)N
929 3838 MXY
-14 0 Dl
2006 MX
14 0 Dl
832 3857(1.5)N
929 3586 MXY
-14 0 Dl
2006 MX
14 0 Dl
832 3606(2.0)N
1217 4721(I/O)N
1306(Size)X
1417(\(in)X
1494(kilobytes\))X
577 3477(Throughput)N
856(\(in)X
933(megabytes/sec\))X
3 Dt
-1 Ds
3 f
10 s
555 4849(Figure)N
805(9:)X
895(Maximum)X
1274(File)X
1425(System)X
1692(Write)X
1915(Bandwidth.)X
1 f
8 s
555 4939(This)N
687(graph)X
850(shows)X
1028(the)X
1124(write)X
1273(bandwidth)X
1561(of)X
1632(each)X
1766(\256le)X
1866(system)X
2062(as)X
2132(a)X
2177(func-)X
555 5029(tion)N
673(of)X
744(the)X
840(transfer)X
1052(size.)X
1201(EFS)X
1330(attains)X
1515(the)X
1611(best)X
1732(performance,)X
2086(as)X
2156(it)X
2209(per-)X
555 5119(forms)N
722(nearly)X
899(all)X
981(its)X
1060(writes)X
1234(asynchronously)X
1653(in)X
1721(maximal-sized)X
2115(buffers.)X
555 5209(Writes)N
745(to)X
815(the)X
913(RAW)X
1082(partition)X
1319(also)X
1442(occur)X
1603(in)X
1673(maximal-sized)X
2069(units,)X
2229(but)X
555 5299(are)N
652(performed)X
937(synchronously.)X
1361(In)X
1433(LFS,)X
1579(since)X
1729(a)X
1776(large)X
1922(amount)X
2133(of)X
2205(data)X
555 5389(is)N
615(gathered)X
851(in)X
918(the)X
1013(cache)X
1174(before)X
1353(being)X
1512(written)X
1710(to)X
1777(the)X
1872(disk,)X
2012(there)X
2156(is)X
2215(less)X
555 5479(overlap)N
772(between)X
1010(CPU)X
1161(processing)X
1460(and)X
1578(disk)X
1711(activity,)X
1945(leading)X
2158(to)X
2233(the)X
555 5569(gap)N
676(shown)X
872(above.)X
1084(The)X
1211(rotational)X
1484(delay)X
1650(of)X
1731(FFS)X
1867(prohibits)X
2123(it)X
2187(from)X
555 5659(achieving)N
819(more)X
966(than)X
1092(25%)X
1225(of)X
1294(the)X
1388(available)X
1634(disk)X
1757(bandwidth.)X
10 s
2541 762(completion)N
2931(of)X
3028(each)X
3206(I/O)X
3343(and)X
3489(the)X
3617(initiation)X
3935(of)X
4032(the)X
4160(next)X
2541 852(I/O.)N
2711(In)X
2801(contrast,)X
3098(EFS)X
3258(has)X
3388(an)X
3487(aggressive)X
3848(buffering)X
4169(pol-)X
2541 942(icy,)N
2702(allowing)X
3024(it)X
3110(to)X
3214(perform)X
3515(asynchronous)X
3998(writes)X
4236(in)X
2541 1032(units)N
2721(of)X
2813(64)X
2918(kilobytes.)X
3276(Therefore,)X
3639(the)X
3761(I/Os)X
3923(are)X
4046(queued,)X
2541 1122(and)N
2677(successive)X
3036(I/Os)X
3194(are)X
3313(begun)X
3529(almost)X
3762(immediately.)X
2741 1245(The)N
2893(next)X
3058(anomaly)X
3361(lies)X
3499(in)X
3588(the)X
3712(fact)X
3859(that)X
4005(LFS)X
4168(per-)X
2541 1335(forms)N
2758(noticeably)X
3122(worse)X
3343(than)X
3510(either)X
3722(EFS)X
3888(or)X
3984(the)X
4111(RAW)X
2541 1425(partition.)N
2895(This)X
3080(is)X
3176(an)X
3295(artifact)X
3566(of)X
3675(this)X
3832(benchmark)X
4231(as)X
2541 1515(opposed)N
2836(to)X
2926(a)X
2990(fundamental)X
3418(difference)X
3772(in)X
3861(the)X
3986(attainable)X
2541 1605(write)N
2729(bandwidth)X
3090(of)X
3180(the)X
3301(two)X
3444(\256le)X
3569(systems.)X
3884(The)X
4031(problem)X
2541 1695(is)N
2635(that)X
2796(the)X
2934(benchmark)X
3331(performs)X
3661(the)X
3799(write)X
4004(and)X
4160(then)X
2541 1785(calls)N
2 f
2712(fsync)X
1 f
2901(to)X
2987(ensure)X
3221(that)X
3365(the)X
3487(blocks)X
3720(have)X
3896(been)X
4071(written)X
2541 1875(to)N
2623(disk.)X
2741 1998(LFS)N
2910(achieves)X
3219(its)X
3326(write)X
3523(performance)X
3962(by)X
4074(buffer-)X
2541 2088(ing)N
2678(a)X
2748(large)X
2943(number)X
3222(of)X
3323(dirty)X
3508(buffers)X
3770(before)X
4010(initiating)X
2541 2178(I/O.)N
2713(As)X
2827(a)X
2887(result,)X
3109(LFS)X
3270(does)X
3441(not)X
3567(begin)X
3769(writing)X
4024(any)X
4164(data)X
2541 2268(to)N
2644(disk)X
2817(until)X
3003(requested)X
3351(to)X
3453(do)X
3573(so)X
3684(by)X
3804(the)X
3942(application)X
2 f
2541 2358(fsync)N
1 f
2758(or)X
2877(until)X
3074(the)X
2 f
3223(start)X
3420(write)X
3635(threshold)X
1 f
3988(has)X
4146(been)X
2541 2448(reached.)N
2875(On)X
3016(this)X
3174(system,)X
3459(the)X
2 f
3600(start)X
3789(write)X
3996(threshold)X
1 f
2541 2538(results)N
2783(in)X
2878(approximately)X
3374(800)X
3527(kilobytes)X
3853(of)X
3953(data)X
4120(being)X
2541 2628(buffered)N
2837(before)X
3066(a)X
3125(write)X
3313(is)X
3389(initiated.)X
3713(As)X
3824(a)X
3882(result,)X
4102(for)X
4218(all)X
2541 2718(the)N
2666(tests)X
2835(where)X
3058(the)X
3182(transfer)X
3454(size)X
3605(was)X
3756(smaller)X
4018(than)X
4182(one)X
2541 2808(megabyte,)N
2900(the)X
3025(benchmark)X
3409(had)X
3552(two)X
3699(phases,)X
3960(the)X
4085(\256rst)X
4236(in)X
2541 2898(which)N
2761(data)X
2919(was)X
3068(written)X
3319(into)X
3467(the)X
3588(cache,)X
3815(and)X
3954(the)X
4075(second)X
2541 2988(during)N
2770(which)X
2986(time)X
3148(the)X
3266(data)X
3420(was)X
3565(being)X
3763(written)X
4010(to)X
4092(disk.)X
2741 3111(To)N
2861(verify)X
3084(this,)X
3250(timings)X
3520(were)X
3708(taken)X
3912(after)X
4090(all)X
4200(the)X
2541 3201(writes)N
2758(had)X
2895(been)X
3068(issued,)X
3309(but)X
3432(before)X
3659(the)X
3778(call)X
3915(to)X
2 f
3997(fsync)X
1 f
4182(and)X
2541 3291(then)N
2711(again)X
2917(after)X
3096(the)X
3225(call)X
3372(to)X
2 f
3465(fsync)X
1 f
3630(.)X
3701(In)X
3799(the)X
3928(tests)X
4101(where)X
2541 3381(the)N
2690(total)X
2882(transfer)X
3178(size)X
3353(was)X
3528(less)X
3698(than)X
3886(800K,)X
4134(LFS')X
2541 3471(elapsed)N
2811(time)X
2982(for)X
3105(the)X
2 f
3231(fsync)X
1 f
3424(was)X
3577(nearly)X
3806(identical)X
4110(to)X
4200(the)X
2541 3561(time)N
2712(required)X
3009(for)X
3132(EFS)X
3298(to)X
3389(write)X
3582(all)X
3690(its)X
3793(buffers.)X
4089(Figure)X
2541 3651(10)N
2673(depicts)X
2952(this)X
3119(behavior.)X
3492(In)X
3610(the)X
3759(tests)X
3952(where)X
4200(the)X
2541 3741(transfer)N
2830(size)X
2998(was)X
3165(greater)X
3431(than)X
3611(800K,)X
3851(LFS')X
4057(elapsed)X
2541 3831(time)N
2713(for)X
2837(the)X
2 f
2965(fsync)X
1 f
3160(was)X
3315(the)X
3442(time)X
3613(reported)X
3910(for)X
4033(the)X
4160(syn-)X
2541 3921(chronous)N
2859(LFS)X
3020(write)X
3209(that)X
3353(\257ushed)X
3608(the)X
3730(data)X
3888(remaining)X
4236(in)X
2541 4011(the)N
2659(cache)X
2863(at)X
2941(the)X
3059(time)X
3221(of)X
3308(the)X
2 f
3426(fsync)X
1 f
3591(.)X
10 f
2541 4246 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
9 s
1 f
3412 4873(I/O)N
3526(Time)X
3412 4595(I/O)N
3526(Time)X
3 f
4141 4549(EFS)N
4141 4827(LFS)N
1 f
3368 4781(CPU)N
3526(Time)X
1 Dt
3076 4797 MXY
 3076 4797 lineto
 3724 4797 lineto
 3724 4890 lineto
 3076 4890 lineto
 3076 4797 lineto
closepath 1 3076 4797 3724 4890 Dp
2613 4704 MXY
 2613 4704 lineto
 3076 4704 lineto
 3076 4797 lineto
 2613 4797 lineto
 2613 4704 lineto
closepath 3 2613 4704 3076 4797 Dp
2740 4519 MXY
 2740 4519 lineto
 2740 4612 lineto
 3354 4612 lineto
 3354 4519 lineto
 2740 4519 lineto
closepath 1 2740 4519 3354 4612 Dp
2613 4426 MXY
 2613 4426 lineto
 3168 4426 lineto
 3168 4519 lineto
 2613 4519 lineto
 2613 4426 lineto
closepath 3 2613 4426 3168 4519 Dp
3368 4503(CPU)N
3526(Time)X
3 Dt
-1 Ds
3 f
10 s
2541 5124(Figure)N
2791(10:)X
2921(Effects)X
3181(of)X
3271(LFS)X
3440(Write)X
3664(Accumulation.)X
1 f
8 s
4198(The)X
2541 5214(bars)N
2672(represent)X
2930(elapsed)X
3146(time)X
3285(for)X
3384(each)X
3525(phase)X
3695(of)X
3772(the)X
3874(benchmark)X
4181(on)X
4269(a)X
2541 5304(one-half)N
2782(megabyte)X
3059(write.)X
3251(EFS)X
3391(effectively)X
3692(overlaps)X
3937(I/O)X
4051(and)X
4172(CPU)X
2541 5394(processing)N
2835(while)X
2998(LFS)X
3129(waits)X
3284(until)X
3422(all)X
3506(the)X
3604(data)X
3730(is)X
3793(accumulated)X
4135(before)X
2541 5484(initiating)N
2791(the)X
2886(write.)X
3066(As)X
3154(a)X
3199(result,)X
3374(the)X
3469(bandwidth)X
3756(measured)X
4017(by)X
4098(this)X
4208(test)X
2541 5574(appears)N
2751(much)X
2909(lower)X
3070(for)X
3160(LFS.)X
3 f
10 s
555 6048(214)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

215 p
%%Page: 215 15
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
755 762(These)N
984(write)X
1186(tests)X
1365(were)X
1558(repeated)X
1867(for)X
1997(LFS)X
2170(with)X
555 852(the)N
675(cleaner)X
930(running,)X
1221(but)X
1345(the)X
1465(results)X
1695(were)X
1873(indistinguish-)X
555 942(able)N
723(from)X
913(the)X
1045(results)X
1288(without)X
1566(the)X
1697(cleaner.)X
2003(Since)X
2214(the)X
555 1032(same)N
746(data)X
906(is)X
985(overwritten)X
1381(for)X
1501(each)X
1674(iteration)X
1966(of)X
2058(the)X
2181(test,)X
555 1122(there)N
746(are)X
875(always)X
1128(empty)X
1358(segments)X
1686(available)X
2005(for)X
2128(recla-)X
555 1212(mation)N
831(by)X
965(the)X
1117(cleaner.)X
1444(As)X
1587(a)X
1677(result,)X
1928(the)X
2079(cleaner)X
555 1302(reported)N
855(that)X
1007(it)X
1083(always)X
1338(cleaned)X
1616(empty)X
1847(segments,)X
2196(and)X
555 1392(the)N
673(overhead)X
988(was)X
1133(unmeasurable.)X
755 1515(The)N
902(last)X
1035(anomaly)X
1333(is)X
1407(that)X
1548(FFS)X
1701(did)X
1824(not)X
1947(achieve)X
2214(the)X
555 1605(50%)N
728(bandwidth)X
1092(expected,)X
1423(but)X
1550(achieved)X
1861(closer)X
2078(to)X
2165(31%)X
555 1695(of)N
653(the)X
782(transfer)X
1058(bandwidth)X
1426(\(0.5)X
1583(megabytes)X
1956(per)X
2089(second)X
555 1785(of)N
643(the)X
762(possible)X
1045(1.6)X
1166(megabytes)X
1530(per)X
1654(second\).)X
1965(The)X
2111(expla-)X
555 1875(nation)N
780(of)X
872(this)X
1012(is)X
1089(in)X
1175(the)X
1297(FFS)X
2 f
1453(rot_delay)X
1 f
1784(parameter.)X
2170(This)X
555 1965(parameter)N
917(is)X
1010(used)X
1197(by)X
1317(FFS)X
1488(to)X
1589(express)X
1869(the)X
2006(length)X
2245(of)X
555 2055(time,)N
738(from)X
915(the)X
1033(disk's)X
1244(perspective,)X
1650(that)X
1790(it)X
1854(takes)X
2039(the)X
2157(CPU)X
555 2145(to)N
642(acknowledge)X
1091(the)X
1214(completion)X
1599(of)X
1691(an)X
1792(I/O)X
1924(and)X
2065(to)X
2152(issue)X
555 2251(another)N
816(one.)X
7 s
952 2219(3)N
10 s
755 2374(For)N
907(the)X
1046(system)X
1309(under)X
1533(test,)X
1705(the)X
2 f
1844(rot_delay)X
1 f
2192(that)X
555 2464(provided)N
887(the)X
1032(best)X
1207(performance)X
1660(was)X
1831(experimentally)X
555 2554(determined)N
964(to)X
1074(be)X
1198(4)X
1286(milliseconds.)X
1777(This)X
1966(value)X
2187(was)X
555 2644(determined)N
942(by)X
1048(building)X
1339(\256le)X
1466(systems)X
1744(with)X
1911(successively)X
555 2734(larger)N
2 f
763(rot_delays)X
1 f
1121(and)X
1257(selecting)X
1562(the)X
1680(value)X
1874(that)X
2014(led)X
2132(to)X
2214(the)X
555 2824(best)N
709(performance.)X
1181(However,)X
1521(with)X
1688(a)X
1749(rotational)X
2080(latency)X
555 2914(of)N
673(15)X
804(milliseconds,)X
1279(36)X
1409(kilobyte)X
1721(tracks,)X
1983(4-kilobyte)X
555 3004(blocks,)N
805(and)X
942(a)X
998(4)X
1058(millisecond)X
2 f
1451(rot_delay)X
1 f
1758(,)X
1798(only)X
1960(one)X
2096(in)X
2178(four)X
555 3094(blocks)N
786(is)X
860(allocated)X
1171(to)X
1254(the)X
1373(same)X
1559(\256le,)X
1702(as)X
1790(shown)X
2020(in)X
2103(Figure)X
555 3184(11.)N
698(The)X
846(maximum)X
1192(transfer)X
1460(bandwidth)X
1820(of)X
1909(the)X
2029(disk)X
2184(is)X
2259(is)X
555 3274(2.2)N
689(megabytes)X
1066(per)X
1202(second)X
1458(and)X
1607(one-quarter)X
2011(of)X
2111(this)X
2259(is)X
555 3364(0.55)N
740(megabytes)X
1128(per)X
1275(second,)X
1562(which)X
1802(is)X
1899(close)X
2108(to)X
2214(the)X
555 3454(observed)N
865(performance)X
1292(of)X
1379(FFS.)X
10 f
555 3696 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1 Dt
813 4316 MXY
7 31 Dl
5 -19 Dl
19 -5 Dl
-31 -7 Dl
300 300 Dl
2073 4316 MXY
-32 7 Dl
19 5 Dl
5 19 Dl
8 -31 Dl
-300 300 Dl
1 f
1174 4664(allocated)N
1484(blocks)X
1515 4384(4)N
1575(ms)X
1688(rot_delay)X
1993 4196 MXY
-28 -18 Dl
10 18 Dl
-10 17 Dl
28 -17 Dl
-480 0 Dl
0 0 Dl
27 17 Dl
-10 -17 Dl
10 -18 Dl
-27 18 Dl
1993 4116 MXY
 1993 4116 lineto
 2153 4116 lineto
 2153 4276 lineto
 1993 4276 lineto
 1993 4116 lineto
closepath 21 1993 4116 2153 4276 Dp
1353 MX
 1353 4116 lineto
 1513 4116 lineto
 1513 4276 lineto
 1353 4276 lineto
 1353 4116 lineto
closepath 21 1353 4116 1513 4276 Dp
875 4384(4)N
935(ms)X
1048(rot_delay)X
1353 4196 MXY
-28 -18 Dl
10 18 Dl
-10 17 Dl
28 -17 Dl
-480 0 Dl
0 0 Dl
27 17 Dl
-10 -17 Dl
10 -18 Dl
-27 18 Dl
713 4116 MXY
 713 4116 lineto
 873 4116 lineto
 873 4276 lineto
 713 4276 lineto
 713 4116 lineto
closepath 21 713 4116 873 4276 Dp
1053 4050(15)N
1153(ms)X
1266(\(1.67)X
1453(ms)X
1566(/)X
1608(block\))X
2153 3876 MXY
0 140 Dl
713 3956 MXY
1440 0 Dl
713 3876 MXY
0 160 Dl
1118 3916(1)N
1178(track/9)X
1421(4K)X
1539(blocks)X
1993 4116 MXY
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
1833 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
1673 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
1513 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
1353 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
1193 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
1033 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
873 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
713 MX
0 160 Dl
160 0 Dl
0 -160 Dl
-160 0 Dl
1433 4316 MXY
-18 27 Dl
18 -10 Dl
17 10 Dl
-17 -27 Dl
0 240 Dl
3 Dt
-1 Ds
3 f
555 4875(Figure)N
805(11:)X
935(Impact)X
1203(of)X
1293(Rotational)X
1675(Delay)X
1893(on)X
1999(FFS)X
2163(Per-)X
555 4965(formance.)N
1 f
8 s
941(Since)X
2 f
1107(rot_delay)X
1 f
1376(for)X
1473(this)X
1589(disk)X
1719(is)X
1785(4)X
1840(milliseconds,)X
2203(FFS)X
555 5055(will)N
682(allocate)X
906(only)X
1046(one)X
1164(in)X
1240(every)X
1407(four)X
1539(blocks.)X
1764(Therefore,)X
2056(at)X
2128(most)X
2279(3)X
555 5145(blocks)N
753(\(2.25)X
917(on)X
1011(average\))X
1259(can)X
1377(be)X
1467(accessed)X
1719(on)X
1813(each)X
1959(disk)X
2096(rotation.)X
555 5235(Therefore,)N
853(FFS)X
993(will)X
1125(attain)X
1299(at)X
1377(most)X
1534(one-quarter)X
1858(of)X
1942(the)X
2051(maximum)X
555 5325(bandwidth)N
841(of)X
910(the)X
1004(disk.)X
10 f
555 5493(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)N
5 s
1 f
727 5571(3)N
8 s
766 5596(This)N
899(is)X
961(based)X
1125(on)X
1208(the)X
1305(assumption)X
1616(that)X
1731(queueing)X
1984(is)X
2046(performed)X
555 5668(by)N
635(the)X
729(host)X
852(and)X
960(not)X
1058(the)X
1152(disk.)X
7 s
2563 858(Throughput)N
2842(\(in)X
2919(megabytes/sec\))X
3203 2102(I/O)N
3292(Size)X
3403(\(in)X
3480(kilobytes\))X
2818 987(2.0)N
3992 967 MXY
14 0 Dl
2915 MX
-14 0 Dl
2818 1238(1.5)N
3992 1219 MXY
14 0 Dl
2915 MX
-14 0 Dl
2818 1490(1.0)N
3992 1470 MXY
14 0 Dl
2915 MX
-14 0 Dl
2818 1741(0.5)N
3992 1721 MXY
14 0 Dl
2915 MX
-14 0 Dl
2818 1992(0.0)N
3992 1973 MXY
14 0 Dl
2915 MX
-14 0 Dl
3936 2054(4096)N
3992 967 MXY
0 -13 Dl
1973 MY
0 13 Dl
3667 2054(3072)N
3723 967 MXY
0 -13 Dl
1973 MY
0 13 Dl
3398 2054(2048)N
3454 967 MXY
0 -13 Dl
1973 MY
0 13 Dl
3128 2054(1024)N
3184 967 MXY
0 -13 Dl
1973 MY
0 13 Dl
2901 2054(0)N
2915 967 MXY
0 -13 Dl
1973 MY
0 13 Dl
3992 1973 MXY
0 -1006 Dl
2915 1973 MXY
0 -1006 Dl
1077 0 Dl
2915 1973 MXY
1077 0 Dl
4054 1324(LFS)N
2918 1742 MXY
6 25 Dl
24 -91 Dl
34 -120 Dl
68 -126 Dl
134 -86 Dl
270 -50 Dl
538 -30 Dl
1257 MY
-7 14 Dl
14 0 Dl
-7 -14 Dl
3454 1287 MXY
-7 14 Dl
13 0 Dl
-6 -14 Dl
3184 1338 MXY
-7 13 Dl
14 0 Dl
-7 -13 Dl
3050 1423 MXY
-7 13 Dl
13 0 Dl
-6 -13 Dl
2982 1549 MXY
-7 13 Dl
14 0 Dl
-7 -13 Dl
2948 1669 MXY
-6 14 Dl
13 0 Dl
-7 -14 Dl
2924 1760 MXY
-6 13 Dl
13 0 Dl
-7 -13 Dl
2918 1735 MXY
-7 13 Dl
13 0 Dl
-6 -13 Dl
4054 1217(EFS)N
16 Ds
1 Dt
2918 1656 MXY
6 55 Dl
24 -100 Dl
34 -131 Dl
68 -105 Dl
134 -76 Dl
270 -40 Dl
538 -20 Dl
-1 Ds
3 Dt
3985 MX
13 Dc
3447 1259 MXY
13 Dc
3177 1299 MXY
13 Dc
3043 1375 MXY
13 Dc
2975 1480 MXY
13 Dc
2942 1611 MXY
13 Dc
2918 1711 MXY
13 Dc
2911 1656 MXY
13 Dc
4054 1731(FFS)N
5 Dt
2918 1877 MXY
6 -90 Dl
24 -5 Dl
34 -31 Dl
68 -20 Dl
134 -10 Dl
270 -10 Dl
538 0 Dl
3 Dt
3985 1718 MXY
0 -13 Dl
14 0 Dl
0 13 Dl
-14 0 Dl
3447 MX
0 -13 Dl
13 0 Dl
0 13 Dl
-13 0 Dl
3177 1728 MXY
0 -13 Dl
14 0 Dl
0 13 Dl
-14 0 Dl
3043 1738 MXY
0 -14 Dl
13 0 Dl
0 14 Dl
-13 0 Dl
2975 1758 MXY
0 -13 Dl
14 0 Dl
0 13 Dl
-14 0 Dl
2942 1788 MXY
0 -13 Dl
13 0 Dl
0 13 Dl
-13 0 Dl
2918 1794 MXY
0 -14 Dl
13 0 Dl
0 14 Dl
-13 0 Dl
2911 1884 MXY
0 -13 Dl
13 0 Dl
0 13 Dl
-13 0 Dl
4054 1273(RAW)N
4 Ds
1 Dt
2918 1686 MXY
6 -176 Dl
24 -181 Dl
34 -30 Dl
68 -20 Dl
134 -20 Dl
270 0 Dl
538 -5 Dl
-1 Ds
3 Dt
3999 1247 MXY
-14 14 Dl
7 -7 Dl
-7 -7 Dl
14 14 Dl
3460 1252 MXY
-13 14 Dl
7 -7 Dl
-7 -7 Dl
13 14 Dl
3191 1252 MXY
-14 14 Dl
7 -7 Dl
-7 -7 Dl
14 14 Dl
3056 1272 MXY
-13 14 Dl
7 -7 Dl
-7 -7 Dl
13 14 Dl
2989 1292 MXY
-14 14 Dl
7 -7 Dl
-7 -7 Dl
14 14 Dl
2955 1322 MXY
-13 14 Dl
6 -7 Dl
-6 -7 Dl
13 14 Dl
2931 1504 MXY
-13 13 Dl
6 -7 Dl
-6 -6 Dl
13 13 Dl
2924 1679 MXY
-13 14 Dl
7 -7 Dl
-7 -7 Dl
13 14 Dl
3 Dt
-1 Ds
3 f
10 s
2541 2320(Figure)N
2871(12:)X
3081(Maximum)X
3540(File)X
3772(System)X
4119(Read)X
2541 2410(Bandwidth.)N
1 f
8 s
2972(The)X
3089(graph)X
3252(shows)X
3430(the)X
3526(maximum)X
3804(read)X
3931(throughput)X
4230(at-)X
2541 2500(tained)N
2715(by)X
2797(each)X
2931(\256le)X
3031(system)X
3227(as)X
3298(a)X
3344(function)X
3574(of)X
3644(the)X
3739(transfer)X
3950(size.)X
4098(As)X
4186(EFS)X
2541 2590(and)N
2654(LFS)X
2786(allocate)X
3005(blocks)X
3193(contiguously)X
3545(and)X
3658(use)X
3764(the)X
3862(exact)X
4016(same)X
4167(read-)X
2541 2680(ahead)N
2712(algorithm,)X
3000(the)X
3101(expectation)X
3417(is)X
3482(that)X
3600(both)X
3736(will)X
3858(perform)X
4085(compar-)X
2541 2770(ably)N
2678(to)X
2754(the)X
2858(raw)X
2979(partition.)X
3254(Once)X
3414(again,)X
3594(FFS)X
3728(is)X
3797(limited)X
4005(to)X
4081(approxi-)X
2541 2860(mately)N
2745(25%)X
2892(of)X
2975(the)X
3082(total)X
3225(disk)X
3361(bandwidth)X
3660(due)X
3781(to)X
3860(rotational)X
4134(delays)X
2541 2950(between)N
2769(allocated)X
3015(blocks.)X
10 s
10 f
2541 3040 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
3 f
2541 3316(Raw)N
2717(Read)X
2915(Performance)X
1 f
2741 3439(The)N
2892(results)X
3127(of)X
3220(the)X
3344(raw)X
3491(read)X
3656(tests,)X
3844(shown)X
4078(in)X
4165(Fig-)X
2541 3529(ure)N
2684(12,)X
2824(are)X
2963(much)X
3181(closer)X
3413(to)X
3514(what)X
3709(is)X
3801(expected.)X
4166(FFS)X
2541 3619(demonstrates)N
2993(read)X
3161(performance)X
3597(nearly)X
3827(identical)X
4132(to)X
4223(its)X
2541 3709(write)N
2729(performance)X
3159(since)X
3347(it)X
3414(is)X
3490(limited)X
3739(by)X
3842(the)X
3963(number)X
4231(of)X
2541 3799(blocks)N
2776(transferred)X
3151(during)X
3386(a)X
3448(single)X
3665(rotation.)X
3980(Both)X
4161(LFS)X
2541 3889(and)N
2696(EFS)X
2872(perform)X
3170(comparably)X
3588(to)X
3689(the)X
3826(raw)X
3985(disk)X
4156(with)X
2541 3979(very)N
2704(small)X
2897(\(3%\))X
3078(differences)X
3456(in)X
3538(performance.)X
2741 4102(This)N
2903(benchmark)X
3280(demonstrates)X
3723(that)X
3863(both)X
4025(EFS)X
4182(and)X
2541 4192(LFS)N
2715(can)X
2864(utilize)X
3101(close)X
3303(to)X
3402(100%)X
3626(of)X
3730(the)X
3865(available)X
4191(I/O)X
2541 4282(bandwidth)N
2933(on)X
3066(large)X
3280(I/Os.)X
3511(When)X
3756(individual)X
4133(write)X
2541 4372(response)N
2854(time)X
3027(is)X
3111(an)X
3218(issue,)X
3429(LFS)X
3597(incurs)X
3824(a)X
3891(performance)X
2541 4462(penalty)N
2797(due)X
2933(to)X
3015(its)X
3110(delayed)X
3380(write)X
3565(policy.)X
2741 4585(The)N
2887(remaining)X
3233(tests)X
3396(are)X
3515(all)X
3615(designed)X
3920(to)X
4002(stress)X
4200(the)X
2541 4675(\256le)N
2669(systems.)X
2988(For)X
3125(BSD-LFS,)X
3489(that)X
3634(means)X
3864(the)X
3987(cleaner)X
4245(is)X
2541 4765(running)N
2826(and)X
2978(the)X
3111(disk)X
3279(partitions)X
3616(are)X
3750(80%)X
3932(utilized,)X
4227(so)X
2541 4855(that)N
2692(the)X
2821(cleaner)X
3085(is)X
3169(forced)X
3406(to)X
3499(reclaim)X
3771(space.)X
4020(For)X
4161(EFS)X
2541 4945(and)N
2690(FFS,)X
2875(as)X
2975(the)X
3105(disk)X
3270(partition)X
3573(\256lls,)X
3744(it)X
3820(becomes)X
4133(more)X
2541 5035(dif\256cult)N
2814(for)X
2928(them)X
3108(to)X
3190(allocate)X
3460(blocks)X
3689(optimally.)X
3 f
2541 5221(5.2.2.)N
2761(Software)X
3089(Development)X
3559(Workload)X
1 f
2741 5344(The)N
2902(next)X
3076(tests)X
3254(evaluate)X
3558(BSD-LFS)X
3912(in)X
4009(a)X
4080(typical)X
2541 5434(software)N
2878(development)X
3351(environment.)X
3855(The)X
4039(Andrew)X
2541 5524(benchmark)N
2928([HOWA88])X
3342(is)X
3425(often)X
3620(used)X
3797(for)X
3920(this)X
4064(type)X
4231(of)X
2541 5614(measurement.)N
3029(It)X
3098(contains)X
3385(\256ve)X
3525(phases:)X
2701 5737(1.)N
2781(Create)X
3011(a)X
3067(directory)X
3377(hierarchy.)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(215)X

216 p
%%Page: 216 16
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
715 762(2.)N
795(Make)X
998(a)X
1054(copy)X
1230(of)X
1317(the)X
1435(data.)X
715 852(3.)N
795(Recursively)X
1198(examine)X
1490(the)X
1608(status)X
1810(of)X
1897(every)X
2096(\256le.)X
715 942(4.)N
795(Examine)X
1100(every)X
1299(byte)X
1457(of)X
1544(every)X
1743(\256le.)X
715 1032(5.)N
795(Compile)X
1090(several)X
1338(of)X
1425(the)X
1543(\256les.)X
555 1155(Unfortunately,)N
1051(the)X
1175(test)X
1312(set)X
1427(for)X
1547(the)X
1671(Andrew)X
1955(benchmark)X
555 1245(is)N
634(small,)X
853(and)X
995(main-memory)X
1475(\256le)X
1603(caching)X
1878(can)X
2015(make)X
2214(the)X
555 1335(results)N
789(uninteresting.)X
1272(In)X
1364(order)X
1559(to)X
1646(exercise)X
1935(the)X
2057(\256le)X
2183(sys-)X
555 1425(tems,)N
776(this)X
940(benchmark)X
1346(is)X
1448(run)X
1604(both)X
1795(single-user)X
2196(and)X
555 1515(multi-user)N
922(\(where)X
1183(several)X
1448(invocations)X
1854(of)X
1958(the)X
2093(bench-)X
555 1605(mark)N
740(are)X
859(run)X
986(concurrently\).)X
3 f
555 1728(Single-User)N
971(Andrew)X
1267(Performance)X
1 f
755 1851(Table)N
969(6)X
1040(shows)X
1271(the)X
1400(performance)X
1838(of)X
1935(the)X
2063(original)X
555 1941(Andrew)N
852(benchmark.)X
1287(The)X
1450(entire)X
1671(\256ve-phase)X
2039(test)X
2187(was)X
555 2031(run)N
685(ten)X
806(times)X
1002(for)X
1119(each)X
1290(of)X
1380(FFS,)X
1554(EFS,)X
1733(and)X
1871(LFS,)X
2050(with)X
2214(the)X
555 2121(directory)N
881(hierarchy)X
1221(deleted)X
1489(after)X
1672(each)X
1855(pass.)X
2068(For)X
2214(the)X
555 2211(LFS)N
713(test)X
845(with)X
1008(the)X
1127(cleaner)X
1381(running)X
1651(\(LFSC\),)X
1936(the)X
2055(test)X
2187(was)X
555 2301(repeated)N
856(100)X
1004(times)X
1205(to)X
1295(ensure)X
1533(that)X
1681(the)X
1807(\256le)X
1937(system)X
2187(was)X
555 2391(completely)N
956(overwritten)X
1371(at)X
1474(least)X
1666(twice.)X
1925(In)X
2036(order)X
2250(to)X
555 2481(understand)N
959(the)X
1109(differences)X
1519(in)X
1633(performance,)X
2111(kernel)X
555 2571(counters)N
856(that)X
1005(record)X
1240(disk)X
1402(and)X
1547(LFS)X
1713(statistics)X
2016(were)X
2201(ini-)X
555 2661(tialized)N
811(before,)X
1057(and)X
1193(sampled)X
1480(after,)X
1668(each)X
1836(phase.)X
755 2784(Overall,)N
1050(LFS)X
1220(demonstrates)X
1676(a)X
1745(9%)X
1885(improvement)X
555 2874(over)N
728(EFS)X
895(and)X
1041(FFS,)X
1223(which)X
1449(perform)X
1738(comparably.)X
2187(The)X
555 2964(difference)N
910(is)X
991(isolated)X
1268(to)X
1358(phases)X
1600(one,)X
1764(two,)X
1932(and)X
2076(\256ve.)X
2263(It)X
555 3054(is)N
634(not)X
761(surprising)X
1106(that)X
1251(LFS)X
1413(would)X
1638(outperform)X
2024(the)X
2147(other)X
555 3144(systems)N
841(in)X
936(phase)X
1152(one,)X
1321(the)X
1452(create)X
1678(phase,)X
1914(as)X
2013(LFS)X
2182(per-)X
555 3234(forms)N
773(all)X
884(its)X
989(directory)X
1309(creations)X
1629(asynchronously,)X
2182(per-)X
555 3324(forming)N
838(no)X
943(writes,)X
1184(while)X
1387(EFS)X
1549(and)X
1690(FFS)X
1846(issue)X
2030(100)X
2174(syn-)X
555 3414(chronous)N
892(writes)X
1131(each.)X
1362(As)X
1494(phase)X
1720(two)X
1883(is)X
1979(the)X
2120(write-)X
555 3504(intensive)N
871(phase,)X
1101(it)X
1172(is)X
1252(also)X
1408(expected)X
1721(that)X
1868(LFS)X
2032(will)X
2182(per-)X
555 3594(form)N
738(better,)X
968(and)X
1111(it)X
1182(does)X
1355(so,)X
1472(demonstrating)X
1956(37%)X
2129(better)X
555 3684(performance)N
989(than)X
1153(the)X
1277(other)X
1468(two)X
1614(systems.)X
1933(Again,)X
2175(EFS)X
555 3774(and)N
716(FFS)X
892(are)X
1035(performing)X
1440(a)X
1520(great)X
1725(deal)X
1903(of)X
2014(I/O)X
2165(\(263)X
555 3864(requests)N
847(for)X
970(about)X
1177(750)X
1326(kilobytes\),)X
1695(over)X
1867(half)X
2021(of)X
2116(which)X
555 3954(are)N
674(synchronous)X
1099(\(as)X
1213(a)X
1269(result)X
1467(of)X
1554(closing)X
1805(\256les\).)X
2025(LFS)X
2182(per-)X
555 4044(forms)N
778(no)X
894(writes)X
1126(during)X
1371(this)X
1522(phase)X
1740(as)X
1842(all)X
1957(the)X
2090(data)X
2259(is)X
555 4134(written)N
802(to)X
884(the)X
1002(cache.)X
755 4257(Phase)N
988(5,)X
1094(which)X
1336(is)X
1435(moderately)X
1841(CPU-intensive)X
555 4347(\(59%)N
771(CPU)X
968(utilization)X
1334(for)X
1470(LFS)X
1648(and)X
1805(49%)X
1993(for)X
2128(EFS\),)X
10 f
779 4486(i)N
794(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1184 4576(Phase)N
1391(1)X
1659(Phase)X
1866(2)X
2176(Phase)X
2383(3)X
2719(Phase)X
2926(4)X
3239(Phase)X
3446(5)X
3772(Total)X
1202 4666(Create)N
1609(Copy)X
1802(Files)X
2237(Stat)X
2762(Grep)X
3225(Compile)X
1129 4756(Directories)N
2080(Touch)X
2305(Inodes)X
2639(Touch)X
2864(Bytes)X
10 f
779 4758(i)N
794(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
779 4774(i)N
794(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
819 4856(FFS)N
1129(2.10)X
1289(\(0.30\))X
1606(7.90)X
1766(\(0.30\))X
2080(6.30)X
2240(\(0.46\))X
2639(9.00)X
2799(\(0.00\))X
3166(44.80)X
3366(\(0.40\))X
3680(70.1)X
3840(\(0.70\))X
10 f
779 4866(i)N
794(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
819 4956(EFS)N
1129(2.10)X
1289(\(0.30\))X
1606(7.90)X
1766(\(0.30\))X
2080(6.70)X
2240(\(1.19\))X
2639(9.10)X
2799(\(0.30\))X
3166(44.40)X
3366(\(0.49\))X
3680(70.2)X
3840(\(1.60\))X
10 f
779 4966(i)N
794(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
819 5056(LFS)N
1129(0.33)X
1289(\(0.47\))X
1606(5.00)X
1766(\(0.00\))X
2080(6.50)X
2240(\(0.81\))X
2639(9.07)X
2799(\(0.25\))X
3166(42.90)X
3366(\(1.40\))X
3680(63.8)X
3840(\(2.34\))X
10 f
779 5066(i)N
794(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
819 5156(LFSC)N
1129(0.43)X
1289(\(0.49\))X
1606(5.09)X
1766(\(0.28\))X
2080(6.37)X
2240(\(0.48\))X
2639(9.07)X
2799(\(0.26\))X
3166(42.61)X
3366(\(0.49\))X
3680(63.6)X
3840(\(0.62\))X
10 f
779 5166(i)N
794(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
779(c)X
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
1069 5166(c)N
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
1546 5166(c)N
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
2020 5166(c)N
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
2579 5166(c)N
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
3106 5166(c)N
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
3620 5166(c)N
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
4074 5166(c)N
5126(c)Y
5046(c)Y
4966(c)Y
4886(c)Y
4806(c)Y
4726(c)Y
4646(c)Y
4566(c)Y
3 f
555 5289(Table)N
775(6:)X
867(Single-User)X
1288(Andrew)X
1589(Benchmark)X
2014(Results.)X
1 f
8 s
2320(This)X
2455(table)X
2600(shows)X
2781(the)X
2880(elapsed)X
3092(time)X
3227(for)X
3322(each)X
3459(phase)X
3625(of)X
3698(the)X
3796(benchmark)X
4099(on)X
4183(each)X
555 5379(\256le)N
657(system.)X
887(Reported)X
1141(times)X
1300(are)X
1397(the)X
1495(average)X
1712(across)X
1891(ten)X
1989(iterations)X
2246(with)X
2379(the)X
2476(standard)X
2711(deviation)X
2968(in)X
3037(parentheses.)X
3385(LFSC)X
3558(indicates)X
3804(that)X
3919(the)X
4016(benchmark)X
555 5469(was)N
671(run)X
773(on)X
854(the)X
949(log-structured)X
1324(\256le)X
1423(system)X
1618(with)X
1749(the)X
1844(cleaner)X
2044(running,)X
2276(but)X
2375(the)X
2470(similarity)X
2733(in)X
2800(results)X
2984(for)X
3074(most)X
3215(phases)X
3401(indicates)X
3644(that)X
3756(the)X
3850(cleaner)X
4049(had)X
4157(virtu-)X
555 5559(ally)N
671(no)X
755(impact)X
949(on)X
1033(performance.)X
1406(Overall,)X
1633(LFS)X
1764(demonstrates)X
2121(approximately)X
2510(a)X
2558(9%)X
2663(difference)X
2940(in)X
3010(performance)X
3351(which)X
3527(can)X
3635(be)X
3715(attributed)X
3979(to)X
4048(asynchro-)X
555 5649(nous)N
692(\256le)X
790(creation)X
1011(and)X
1119(write-clustering.)X
10 s
2541 762(surprisingly)N
2961(demonstrates)X
3422(a)X
3496(small)X
3707(\(3-5%\))X
3972(advantage)X
2541 852(for)N
2656(LFS.)X
2854(Once)X
3045(again,)X
3260(kernel)X
3482(disk)X
3636(counters)X
3929(reveals)X
4178(that)X
2541 942(EFS)N
2717(and)X
2872(FFS)X
3043(are)X
3181(synchronously)X
3687(writing)X
3957(the)X
4094(output)X
2541 1032(object)N
2776(\256les)X
2948(to)X
3049(disk)X
3221(\(45)X
3367(of)X
3473(48)X
3592(writes\))X
3854(while)X
4070(LFS)X
4245(is)X
2541 1122(buffering)N
2863(the)X
2984(data)X
3140(and)X
3278(performing)X
3661(nearly)X
3884(one-third)X
4200(the)X
2541 1212(number)N
2806(of)X
2893(writes.)X
2741 1335(The)N
2888(more)X
3075(striking)X
3341(difference)X
3689(is)X
3763(in)X
3846(the)X
3965(number)X
4231(of)X
2541 1425(reads)N
2750(issued)X
2989(by)X
3108(the)X
3245(two)X
3404(\256le)X
3545(systems)X
3837(in)X
3937(phase)X
4158(\256ve.)X
2541 1515(LFS)N
2706(issues)X
2925(only)X
3095(a)X
3158(single)X
3376(read)X
3542(while)X
3747(FFS)X
3906(issues)X
4124(46)X
4231(of)X
2541 1605(them.)N
2767(The)X
2917(explanation)X
3316(for)X
3435(this)X
3575(also)X
3729(lies)X
3865(in)X
3952(\256le)X
4079(alloca-)X
2541 1695(tion.)N
2740(When)X
2967(FFS)X
3133(creates)X
3391(a)X
3461(\256le,)X
3617(it)X
3695(allocates)X
4010(an)X
4120(inode)X
2541 1785(from)N
2718(the)X
2837(appropriate)X
3224(cylinder)X
3508(group)X
3716(and)X
3852(then)X
4010(reads)X
4200(the)X
2541 1875(contents)N
2831(of)X
2921(the)X
3042(inode)X
3243(from)X
3422(disk.)X
3617(\(This)X
3808(is)X
3883(an)X
3981(artifact)X
4231(of)X
2541 1965(the)N
2671(\256le)X
2805(system)X
3059(architecture)X
3470(and)X
3617(could)X
3826(be)X
3933(avoided)X
4218(by)X
2541 2055(modifying)N
2898(the)X
3020(interface)X
3326(to)X
3412(the)X
2 f
3534(vfs)X
1 f
3647(routine)X
2 f
3898(vfs_vget)X
1 f
4161(.\))X
4231(In)X
2541 2145(LFS,)N
2740(new)X
2916(inodes)X
3167(are)X
3308(created)X
3583(in)X
3687(memory,)X
4016(not)X
4159(read)X
2541 2235(from)N
2717(the)X
2835(disk.)X
2741 2358(These)N
2979(single-user)X
3377(results)X
3632(differ)X
3857(slightly)X
4142(from)X
2541 2448(those)N
2743(presented)X
3084(in)X
3178([ROSE92].)X
3588(First,)X
3786(the)X
3916(compilation)X
2541 2538(phase)N
2759(in)X
2856([ROSE92])X
3229(is)X
3317(much)X
3530(longer)X
3770(than)X
3942(in)X
4038(this)X
4187(test)X
2541 2628(because)N
2821(different)X
3123(compilers)X
3464(were)X
3646(used.)X
3858(Secondly,)X
4200(the)X
2541 2718(results)N
2778(in)X
2868([ROSE92])X
3233(show)X
3429(LFS)X
3593(providing)X
3931(a)X
3994(40%)X
4168(per-)X
2541 2808(formance)N
2888(improvement)X
3357(on)X
3479(phase)X
3704(3)X
3786(\(the)X
3953(phase)X
4178(that)X
2541 2898(examines)N
2905(every)X
3145(inode\))X
3411(and)X
3588(a)X
3684(29%)X
3891(performance)X
2541 2988(improvement)N
3011(on)X
3134(phase)X
3359(4)X
3441(\(the)X
3608(phase)X
3833(that)X
3995(examines)X
2541 3078(every)N
2752(byte\),)X
2968(while)X
3177(the)X
3306(results)X
3546(here)X
3716(show)X
3916(virtually)X
4218(no)X
2541 3168(difference.)N
2935(Phases)X
3180(3)X
3247(and)X
3390(4)X
3457(perform)X
3743(no)X
3850(I/O)X
3983(on)X
4089(any)X
4231(of)X
2541 3258(the)N
2668(\256le)X
2798(systems,)X
3099(so)X
3198(performance)X
3633(is)X
3714(limited)X
3968(strictly)X
4218(by)X
2541 3348(the)N
2673(\256le)X
2809(system)X
3065(code)X
3251(that)X
3404(reads)X
3607(data)X
3774(from)X
3963(the)X
4094(cache,)X
2541 3438(traverses)N
2867(directories,)X
3265(and)X
3420(reads)X
3629(inodes)X
3877(from)X
4072(the)X
4209(in-)X
2541 3528(memory)N
2851(inode)X
3072(cache.)X
3338(Since)X
3558(the)X
3698(three)X
3901(\256le)X
4045(systems)X
2541 3618(share)N
2745(the)X
2877(same)X
3076(code)X
3261(for)X
3388(performing)X
3782(these)X
3980(functions,)X
2541 3708(the)N
2686(expectation)X
3103(is)X
3202(that)X
3368(the)X
3512(systems)X
3811(should)X
4070(behave)X
2541 3798(identically.)N
2948(Since)X
3155(the)X
3282(system)X
3533(measured)X
3870(in)X
3960([ROSE92])X
2541 3888(is)N
2630(unavailable)X
3035(for)X
3164(instrumentation,)X
3721(it)X
3800(is)X
3888(unclear)X
4160(why)X
2541 3978(results)N
2770(on)X
2870(phases)X
3104(3)X
3164(and)X
3300(4)X
3360(differ.)X
3 f
2541 4101(Multi-User)N
2940(Andrew)X
3236(Performance)X
1 f
2741 4224(The)N
2887(multi-user)X
3236(version)X
3492(of)X
3579(Andrew)X
3858(shows)X
4078(the)X
4196(\256le)X
2541 4314(system)N
2802(performance)X
3248(as)X
3354(a)X
3429(function)X
3735(of)X
3841(the)X
3978(degree)X
4231(of)X
3 f
555 6048(216)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

217 p
%%Page: 217 17
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
555 762(multiprogramming.)N
1226(The)X
1378(test)X
1516(is)X
1596(performed)X
1957(by)X
2063(running)X
555 852(N)N
635(concurrent)X
1001(invocations)X
1392(of)X
1481(the)X
1601(benchmark,)X
2000(with)X
2164(each)X
555 942(invocation)N
921(creating,)X
1227(traversing,)X
1595(and)X
1738(removing)X
2072(its)X
2174(own)X
555 1032(directory)N
868(hierarchy.)X
1235(The)X
1383(reported)X
1674(results)X
1905(are)X
2026(the)X
2146(aver-)X
555 1122(ages)N
720(of)X
809(the)X
929(results)X
1160(of)X
1249(each)X
1419(of)X
1508(ten)X
1628(runs)X
1787(for)X
1902(each)X
2071(invoca-)X
555 1212(tion.)N
749(The)X
904(resulting)X
1214(averages)X
1526(are)X
1655(divided)X
1925(by)X
2034(the)X
2161(mul-)X
555 1302(tiprogramming)N
1069(level)X
1259(to)X
1355(produce)X
1648(the)X
1779(metric)X
2017(``elapsed)X
555 1392(seconds)N
829(per)X
952(invocation.'')X
755 1515(The)N
901(goal)X
1060(of)X
1147(the)X
1265(multi-user)X
1614(test)X
1745(is)X
1818(to)X
1900(examine)X
2192(two)X
555 1605(aspects)N
847(of)X
974(the)X
1132(\256le)X
1293(systems')X
1632(behavior)X
1972(under)X
2214(the)X
555 1695(software)N
873(development)X
1327(workload.)X
1710(First,)X
1916(as)X
2023(the)X
2161(mul-)X
555 1785(tiprogramming)N
1067(level)X
1255(increases,)X
1602(the)X
1732(entire)X
1947(data)X
2112(set)X
2232(no)X
555 1875(longer)N
798(\256ts)X
933(in)X
1033(the)X
1169(cache,)X
1411(so)X
1520(more)X
1723(I/O)X
1867(is)X
1957(performed.)X
555 1965(Secondly,)N
899(with)X
1067(separate)X
1357(directory)X
1673(hierarchies,)X
2072(the)X
2196(dif-)X
555 2055(ferent)N
770(forms)X
984(of)X
1078(locality)X
1345(used)X
1519(by)X
1626(LFS)X
1790(\(temporal)X
2129(local-)X
555 2145(ity)N
665(--)X
745(\256les)X
904(created)X
1163(at)X
1247(about)X
1450(the)X
1573(same)X
1763(time)X
1930(reside)X
2147(close)X
555 2235(together\))N
870(and)X
1011(FFS)X
1168(\(logical)X
1438(locality)X
1703(--)X
1782(\256les)X
1939(in)X
2025(the)X
2147(same)X
555 2325(directory)N
865(are)X
984(placed)X
1214(close)X
1399(together\))X
1709(can)X
1841(be)X
1937(compared.)X
755 2448(The)N
906(multi-user)X
1261(performance)X
1694(is)X
1773(the)X
1897(result)X
2100(of)X
2192(two)X
555 2538(competing)N
926(factors.)X
1217(As)X
1338(concurrent)X
1714(invocations)X
2115(of)X
2214(the)X
555 2628(benchmark)N
949(compete)X
1258(for)X
1389(resources,)X
1750(the)X
1885(utilization)X
2245(of)X
555 2718(both)N
727(the)X
854(CPU)X
1038(and)X
1183(the)X
1310(disk)X
1472(increases,)X
1816(as)X
1912(does)X
2088(perfor-)X
555 2808(mance.)N
843(However,)X
1195(after)X
1380(the)X
1515(multiprogramming)X
2156(level)X
555 2898(exceeds)N
838(two,)X
1006(the)X
1132(total)X
1302(working)X
1597(set)X
1714(becomes)X
2022(too)X
2151(large)X
555 2988(to)N
654(\256t)X
757(in)X
856(the)X
991(cache)X
1212(and)X
1364(the)X
1498(total)X
1676(I/O)X
1819(time)X
1997(increases.)X
555 3078(Towards)N
864(the)X
990(left-hand)X
1308(side)X
1465(of)X
1560(the)X
1685(graph,)X
1915(the)X
2040(predom-)X
555 3168(inant)N
747(factor)X
967(is)X
1052(the)X
1181(overlap)X
1453(between)X
1752(the)X
1881(CPU)X
2067(and)X
2214(the)X
555 3258(disk.)N
762(As)X
885(LFS)X
1056(is)X
1143(already)X
1414(performing)X
1809(most)X
1997(of)X
2097(its)X
2205(I/O)X
555 3348(asynchronously,)N
1124(it)X
1214(has)X
1367(less)X
1532(room)X
1746(for)X
1885(improvement)X
10 f
555 3534 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
1068 4167 MXY
0 -15 Dl
15 0 Dl
0 15 Dl
-15 0 Dl
1263 4214 MXY
0 -15 Dl
15 0 Dl
0 15 Dl
-15 0 Dl
1654 4233 MXY
0 -15 Dl
14 0 Dl
0 15 Dl
-14 0 Dl
2044 4230 MXY
0 -15 Dl
15 0 Dl
0 15 Dl
-15 0 Dl
5 Dt
1076 4159 MXY
195 47 Dl
390 20 Dl
390 -3 Dl
7 s
1 f
2118 4272(FFS)N
3 Dt
1068 4158 MXY
14 Dc
1263 4210 MXY
14 Dc
1654 4225 MXY
14 Dc
2044 4200 MXY
14 Dc
16 Ds
1 Dt
1076 4158 MXY
195 52 Dl
390 15 Dl
390 -25 Dl
2118 4219(EFS)N
-1 Ds
3 Dt
1076 4221 MXY
-8 15 Dl
15 0 Dl
-7 -15 Dl
1271 4234 MXY
-8 15 Dl
15 0 Dl
-7 -15 Dl
1661 4204 MXY
-7 15 Dl
14 0 Dl
-7 -15 Dl
2051 4172 MXY
-7 15 Dl
15 0 Dl
-8 -15 Dl
1076 4228 MXY
195 14 Dl
390 -30 Dl
390 -33 Dl
2118 4169(LFS)N
881 4925 MXY
1170 0 Dl
881 3833 MXY
1170 0 Dl
881 4925 MXY
0 -1092 Dl
2051 4925 MXY
0 -1092 Dl
881 4925 MXY
0 15 Dl
3833 MY
0 -15 Dl
867 5010(0)N
1271 4925 MXY
0 15 Dl
3833 MY
0 -15 Dl
1257 5010(2)N
1661 4925 MXY
0 15 Dl
3833 MY
0 -15 Dl
1647 5010(4)N
2051 4925 MXY
0 15 Dl
3833 MY
0 -15 Dl
2037 5010(6)N
881 4925 MXY
-15 0 Dl
2051 MX
15 0 Dl
823 4943(0)N
881 4652 MXY
-15 0 Dl
2051 MX
15 0 Dl
795 4669(25)N
881 4379 MXY
-15 0 Dl
2051 MX
15 0 Dl
795 4396(50)N
881 4106 MXY
-15 0 Dl
2051 MX
15 0 Dl
795 4123(75)N
881 3833 MXY
-15 0 Dl
2051 MX
15 0 Dl
767 3850(100)N
1162 5062(Degree)N
1338 0.2458(Multiprogramming)AX
582 3714(Elapsed)N
774(Time)X
907(\(in)X
984(seconds\))X
3 Dt
-1 Ds
3 f
10 s
555 5282(Figure)N
817(13:)X
959(Multi-User)X
1373(Andrew)X
1684(Performance.)X
1 f
8 s
2197(This)X
555 5372(graph)N
730(shows)X
920(the)X
1028(elapsed)X
1249(time)X
1393(for)X
1497(all)X
1591(\256ve)X
1717(phases)X
1917(of)X
1999(the)X
2106(Andrew)X
555 5462(benchmark)N
868(under)X
1043(increasing)X
1334(multiprogramming.)X
1879(Overall,)X
2115(the)X
2222(im-)X
555 5552(pact)N
684(of)X
760(multiprogramming)X
1267(is)X
1333(less)X
1452(signi\256cant)X
1742(than)X
1875(might)X
2048(have)X
2191(been)X
555 5642(expected,)N
813(yielding)X
1039(at)X
1101(most)X
1242(a)X
1286(9%)X
1387(performance)X
1724(improvement.)X
10 s
2541 762(than)N
2711(EFS)X
2880(and)X
3028(FFS.)X
3231(So,)X
3366(the)X
3495(CPU)X
3681(utilization)X
4036(for)X
4161(LFS)X
2541 852(increases)N
2861(from)X
3042(60%)X
3214(to)X
3300(80%)X
3471(while)X
3673(the)X
3795(CPU)X
3974(utilization)X
2541 942(for)N
2656(EFS)X
2814(goes)X
2982(from)X
3158(50%)X
3325(to)X
3407(89%,)X
3594(explaining)X
3952(the)X
4070(steeper)X
2541 1032(decline)N
2793(in)X
2875(elapsed)X
3136(time)X
3298(for)X
3412(EFS)X
3569(than)X
3727(for)X
3841(LFS.)X
2741 1155(As)N
2871(the)X
3009(multiprogramming)X
3653(level)X
3849(exceeds)X
4144(four,)X
2541 1245(the)N
2672(data)X
2839(sets)X
2992(no)X
3105(longer)X
3343(\256t)X
3441(in)X
3535(the)X
3665(cache)X
3881(and)X
4029(the)X
4159(read)X
2541 1335(performance)N
2978(becomes)X
3289(the)X
3417(dominant)X
3749(factor)X
3967(for)X
4091(all)X
4200(the)X
2541 1425(\256le)N
2666(systems.)X
2982(Kernel)X
3223(I/O)X
3352(statistics)X
3649(reveal)X
3868(that,)X
4030(on)X
4132(aver-)X
2541 1515(age,)N
2696(LFS)X
2855(is)X
2930(performing)X
3313(more)X
3500(seeks)X
3696(than)X
3856(EFS,)X
4035(explain-)X
2541 1605(ing)N
2676(the)X
2807(small)X
3013(difference)X
3373(in)X
3468(performance)X
3908(observed)X
4231(as)X
2541 1695(the)N
2659(multiprogramming)X
3283(level)X
3459(increases.)X
2741 1998(This)N
2927(benchmark)X
3328(indicates)X
3657(that)X
3821(LFS)X
4002(and)X
4161(EFS)X
2541 2088(perform)N
2868(comparably)X
3315(on)X
3463(this)X
3646(particular)X
4021(software)X
2541 2178(development)N
2991(workload.)X
3370(To)X
3495(generalize,)X
3881(LFS)X
4053(demon-)X
2541 2268(strates)N
2777(superior)X
3070(\256le)X
3202(creation)X
3491(performance,)X
3948(but)X
4080(logical)X
2541 2358(locality)N
2803(appears)X
3071(better)X
3276(than)X
3436(temporal)X
3743(locality)X
4005(when)X
4200(the)X
2541 2448(working)N
2837(set)X
2955(is)X
3036(too)X
3166(large)X
3355(to)X
3445(\256t)X
3539(in)X
3629(the)X
3755(cache.)X
4007(The)X
4160(next)X
2541 2538(benchmark)N
2918(demonstrates)X
3361(this)X
3496(even)X
3668(more)X
3853(dramatically.)X
3 f
2541 2724(5.2.3.)N
2761(Transaction)X
3194(Processing)X
3579(Performance)X
1 f
2741 2847(A)N
2850(modi\256ed)X
3185(version)X
3472(of)X
3589(the)X
3737(industry-standard)X
2541 2937(TPC-B)N
2804(is)X
2894(used)X
3078(as)X
3182(the)X
3317(database-oriented)X
3921(benchmark.)X
10 f
2541 3123 -0.0930(hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh)AN
3058 3791 MXY
0 -15 Dl
15 0 Dl
0 15 Dl
-15 0 Dl
3255 4107 MXY
0 -15 Dl
15 0 Dl
0 15 Dl
-15 0 Dl
3650 4235 MXY
0 -15 Dl
15 0 Dl
0 15 Dl
-15 0 Dl
4044 4216 MXY
0 -15 Dl
15 0 Dl
0 15 Dl
-15 0 Dl
5 Dt
3066 3783 MXY
197 317 Dl
394 128 Dl
394 -20 Dl
7 s
1 f
4104 4243(FFS)N
3 Dt
3058 3776 MXY
15 Dc
3255 4124 MXY
15 Dc
3650 4224 MXY
15 Dc
4044 4053 MXY
15 Dc
16 Ds
1 Dt
3066 3776 MXY
197 348 Dl
394 100 Dl
394 -171 Dl
4104 4087(EFS)N
-1 Ds
3 Dt
3066 4239 MXY
-8 15 Dl
15 0 Dl
-7 -15 Dl
3263 4327 MXY
-8 15 Dl
15 0 Dl
-7 -15 Dl
3657 4129 MXY
-7 15 Dl
15 0 Dl
-8 -15 Dl
4051 3908 MXY
-7 15 Dl
15 0 Dl
-8 -15 Dl
3066 4247 MXY
197 88 Dl
394 -199 Dl
394 -220 Dl
4104 3950(LFS)N
2869 4526 MXY
1182 0 Dl
2869 3423 MXY
1182 0 Dl
2869 4526 MXY
0 -1103 Dl
4051 4526 MXY
0 -1103 Dl
2869 4526 MXY
0 15 Dl
3423 MY
0 -15 Dl
2855 4611(0)N
3263 4526 MXY
0 15 Dl
3423 MY
0 -15 Dl
3249 4611(2)N
3657 4526 MXY
0 15 Dl
3423 MY
0 -15 Dl
3643 4611(4)N
4051 4526 MXY
0 15 Dl
3423 MY
0 -15 Dl
4037 4611(6)N
2869 4526 MXY
-15 0 Dl
4051 MX
15 0 Dl
2783 4543(60)N
2869 4158 MXY
-15 0 Dl
4051 MX
15 0 Dl
2783 4175(65)N
2869 3791 MXY
-15 0 Dl
4051 MX
15 0 Dl
2783 3808(70)N
2869 3423 MXY
-15 0 Dl
4051 MX
15 0 Dl
2783 3440(75)N
3156 4663(Degree)N
3332 0.2458(Multiprogramming)AX
2570 3303(Elapsed)N
2762(Time)X
2895(\(in)X
2972(seconds\))X
3 Dt
-1 Ds
3 f
10 s
2541 4884(Figure)N
2848(14:)X
3035(Multi-User)X
3494(Andrew)X
3850(Performance)X
2541 4974(\(Blow-Up\).)N
1 f
8 s
2979(This)X
3139(graph)X
3330(emphasizes)X
3669(the)X
3792(small)X
3976(performance)X
2541 5064(differences)N
2842(in)X
2910(the)X
3006(multi-user)X
3287(Andrew)X
3510(benchmark.)X
3843(For)X
3950(EFS)X
4079(and)X
4189(FFS)X
2541 5154(which)N
2726(perform)X
2960(many)X
3131(synchronous)X
3482(operations,)X
3792(multi-programming)X
2541 5244(allows)N
2727(the)X
2824(overlapping)X
3148(of)X
3220(CPU)X
3364(and)X
3475(disk)X
3601(and)X
3712(reduces)X
3925(per-invocation)X
2541 5334(time.)N
2704(LFS)X
2832(also)X
2952(bene\256ts)X
3168(from)X
3309(this)X
3419(overlap,)X
3643(but)X
3742(not)X
3841(as)X
3911(signi\256cantly)X
4244(as)X
2541 5424(the)N
2643(other)X
2798(systems.)X
3057(The)X
3180(second)X
3381(effect)X
3549(is)X
3616(that)X
3736(the)X
3838(total)X
3975(data)X
4104(set)X
4198(size)X
2541 5514(begins)N
2729(to)X
2800(exceed)X
2997(the)X
3096(cache)X
3260(capacity)X
3492(and)X
3604(read)X
3733(performance)X
4074(becomes)X
2541 5604(the)N
2635(dominant)X
2893(factor.)X
3 f
10 s
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(217)X

218 p
%%Page: 218 18
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
1 f
555 762(The)N
720(system)X
982(is)X
1075(con\256gured)X
1458(for)X
1591(a)X
1666(ten)X
1803(transaction-per-)X
555 852(second)N
808(system,)X
1080(but)X
1212(runs)X
1380(single-user)X
1762(without)X
2036(a)X
2102(redun-)X
555 942(dant)N
722(log)X
852(and)X
996(does)X
1171(not)X
1301(model)X
1529(think)X
1721(time.)X
1931(Each)X
2120(meas-)X
555 1032(urement)N
848(in)X
940(Table)X
1153(7)X
1223(represents)X
1579(ten)X
1707(runs)X
1875(of)X
1971(1000)X
2160(tran-)X
555 1122(sactions.)N
890(The)X
1051(counting)X
1367(of)X
1470(transactions)X
1889(is)X
1978(not)X
2116(begun)X
555 1212(until)N
733(the)X
863(buffer)X
1092(pool)X
1266(has)X
1405(\256lled,)X
1621(so)X
1724(the)X
1853(measurements)X
555 1302(do)N
661(not)X
789(exhibit)X
1037(any)X
1179(artifacts)X
1464(of)X
1557(an)X
1659(empty)X
1884(cache.)X
2133(Tran-)X
555 1392(saction)N
814(run)X
953(lengths)X
1216(of)X
1315(greater)X
1571(than)X
1741(1000)X
1932(were)X
2120(meas-)X
555 1482(ured,)N
754(but)X
892(there)X
1088(was)X
1248(no)X
1363(noticeable)X
1728(change)X
1991(in)X
2088(perfor-)X
555 1572(mance)N
785(after)X
953(the)X
1071(\256rst)X
1215(1000)X
1395(transactions.)X
755 1695(When)N
968(the)X
1086(cleaner)X
1339(is)X
1412(not)X
1534(running,)X
1823(LFS)X
1980(provides)X
2276(a)X
555 1785(15%)N
731(performance)X
1166(improvement)X
1621(over)X
1792(EFS.)X
1997(However,)X
555 1875(the)N
677(impact)X
919(of)X
1010(the)X
1132(cleaner)X
1389(is)X
1466(far)X
1580(worse)X
1796(than)X
1958(was)X
2107(antici-)X
555 1965(pated.)N
789(The)X
934(benchmark)X
1311(randomly)X
1638(updates)X
1903(blocks)X
2132(in)X
2214(the)X
555 2055(237)N
696(megabyte)X
1028(account)X
1298(relation,)X
1583(leaving)X
1839(most)X
2014(segments)X
555 2145(fairly)N
762(full.)X
945(During)X
1204(the)X
1334(course)X
1576(of)X
1675(the)X
1805(benchmark,)X
2214(the)X
555 2235(cleaner)N
815(cleaned)X
1088(approximately)X
1578(one)X
1720(segment)X
2013(for)X
2133(every)X
555 2325(50)N
678(transactions)X
1104(executed.)X
1473(On)X
1613(average,)X
1926(the)X
2066(cleaned)X
555 2415(segments)N
915(were)X
1134(71%)X
1343(utilized)X
1645(and)X
1822(cleaner)X
2116(writes)X
555 2505(accounted)N
925(for)X
1063(between)X
1375(60%)X
1566(and)X
1726(80%)X
1917(of)X
2028(the)X
2170(total)X
555 2595(blocks)N
784(written)X
1031(and)X
1167(31%)X
1334(of)X
1421(all)X
1521(blocks)X
1750(transferred.)X
755 2718(In)N
867(an)X
988(attempt)X
1273(to)X
1380(reduce)X
1640(cleaner)X
1917(overhead,)X
2276(a)X
555 2808(second)N
811(set)X
933(of)X
1033(tests)X
1207(were)X
1396(run)X
1535(with)X
1709(a)X
1777(smaller)X
2045(segment)X
555 2898(size)N
712(\(256)X
891(kilobytes\).)X
1283(The)X
1440(performance)X
1878(before)X
2115(clean-)X
555 2988(ing)N
684(is)X
764(the)X
889(same)X
1081(as)X
1175(for)X
1296(the)X
1421(one)X
1563(megabyte)X
1901(case,)X
2086(but)X
2214(the)X
555 3078(after-cleaning)N
1060(performance)X
1524(is)X
1634(only)X
1833(slightly)X
2129(better)X
555 3168(\(about)N
786(6%\).)X
986(As)X
1101(in)X
1189(the)X
1313(one)X
1454(megabyte)X
1791(case,)X
1975(the)X
2098(major-)X
555 3258(ity)N
687(of)X
802(the)X
948(writes)X
1192(performed)X
1575(are)X
1722(on)X
1850(behalf)X
2099(of)X
2214(the)X
555 3348(cleaner)N
831(\(60-70%\).)X
1222(While)X
1460(the)X
1600(smaller)X
1878(segment)X
2187(size)X
555 3438(reduces)N
837(the)X
971(variation)X
1292(in)X
1390(response)X
1707(time)X
1884(as)X
1986(evidenced)X
555 3528(through)N
846(the)X
986(smaller)X
1264(standard)X
1578(deviation,)X
1937(it)X
2022(does)X
2210(not)X
555 3618(signi\256cantly)N
1001(improve)X
1318(performance)X
1775(as)X
1892(most)X
2097(of)X
2214(the)X
555 3708(write)N
748(activity)X
1016(is)X
1097(due)X
1241(to)X
1331(the)X
1457(cleaner.)X
1758(Although)X
2088(a)X
2151(user-)X
8 s
10 f
646 3953(i)N
651(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1316 4043(Transactions)N
1786(Elapsed)X
2004(Time)X
1342 4133(per)N
1439(second)X
1738(1000)X
1882(transactions)X
10 f
646 4151(i)N
651(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
646 4167(i)N
651(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
678 4249(FFS)N
1423(14.2)X
1795(70.23)X
1955(\(1.0%\))X
10 f
646 4275(i)N
651(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
678 4365(EFS)N
1423(16.8)X
1795(59.51)X
1955(\(2.1%\))X
10 f
646 4391(i)N
651(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
678 4481(LFS)N
805(\(no)X
906(cleaner\))X
1423(19.3)X
1795(51.75)X
1955(\(0.6%\))X
678 4571(LFS)N
805(\(cleaner,)X
1041(1M\))X
1423(11.6)X
1795(85.86)X
1955(\(5.3%\))X
678 4661(LFS)N
805(\(cleaner,)X
1041(256)X
1153(K\))X
1423(12.4)X
1795(80.72)X
1955(\(1.8%\))X
10 f
646 4687(i)N
651(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
646(c)X
4657(c)Y
4593(c)Y
4529(c)Y
4465(c)Y
4401(c)Y
4337(c)Y
4273(c)Y
4209(c)Y
4145(c)Y
4081(c)Y
4017(c)Y
1268 4687(c)N
4657(c)Y
4593(c)Y
4529(c)Y
4465(c)Y
4401(c)Y
4337(c)Y
4273(c)Y
4209(c)Y
4145(c)Y
4081(c)Y
4017(c)Y
1690 4687(c)N
4657(c)Y
4593(c)Y
4529(c)Y
4465(c)Y
4401(c)Y
4337(c)Y
4273(c)Y
4209(c)Y
4145(c)Y
4081(c)Y
4017(c)Y
2219 4687(c)N
4657(c)Y
4593(c)Y
4529(c)Y
4465(c)Y
4401(c)Y
4337(c)Y
4273(c)Y
4209(c)Y
4145(c)Y
4081(c)Y
4017(c)Y
3 f
10 s
555 4900(Table)N
771(7:)X
858(Modi\256ed)X
1184(TPC-B)X
1444(Performance)X
1911(Results.)X
1 f
8 s
2212(The)X
555 4990(test)N
678(database)X
931(was)X
1063(scaled)X
1255(for)X
1362(a)X
1423(10)X
1520 -0.1458(transaction-per-second)AX
2133(system)X
555 5080(\(1,000,000)N
863(accounts,)X
1133(100)X
1260(tellers,)X
1463(and)X
1586(10)X
1681(branches\).)X
1991(The)X
2120(elapsed)X
555 5170(time)N
690(and)X
803(standard)X
1040(deviation,)X
1315(as)X
1389(a)X
1438(percent)X
1646(of)X
1719(the)X
1817(elapsed)X
2028(time,)X
2178(is)X
2241(re-)X
555 5260(ported)N
739(for)X
834(runs)X
965(of)X
1038(1000)X
1186(transactions.)X
1543(The)X
1662(LFS)X
1793(results)X
1980(show)X
2135(perfor-)X
555 5350(mance)N
742(before)X
925(the)X
1024(cleaner)X
1228(begins)X
1416(to)X
1487(run)X
1593(and)X
1706(after)X
1843(the)X
1941(cleaner)X
2144(begins)X
555 5440(to)N
627(run.)X
766(Since)X
930(the)X
1029(cleaner)X
1233(decreased)X
1504(performance)X
1846(by)X
1931(40%,)X
2085(a)X
2134(second)X
555 5530(test)N
660(was)X
775(run)X
876(with)X
1006(256)X
1118(kilobyte)X
1344(segments.)X
1630(Even)X
1777(with)X
1907(the)X
2001(smaller)X
2205(seg-)X
555 5620(ment)N
699(size,)X
830(the)X
924(cleaner)X
1123(decreased)X
1389(performance)X
1726(by)X
1806(35%.)X
10 s
2541 762(level)N
2741(cleaner)X
3018(avoids)X
3271(synchronization)X
3827(costs)X
4030(between)X
2541 852(user)N
2701(processes)X
3035(and)X
3177(the)X
3300(kernel,)X
3546(it)X
3615(cannot)X
3854(avoid)X
4057(conten-)X
2541 942(tion)N
2685(on)X
2785(the)X
2903(disk)X
3056(arm.)X
3 f
2541 1128(6.)N
2641(Conclusions)X
1 f
2741 1251(The)N
2911(implementation)X
3458(of)X
3570(BSD-LFS)X
3934(highlighted)X
2541 1341(some)N
2737(subtleties)X
3066(in)X
3155(the)X
3280(overall)X
3530(LFS)X
3694(strategy)X
3974(as)X
4067(well)X
4231(as)X
2541 1431(some)N
2741(performance)X
3179(de\256ciencies.)X
3629(While)X
3856(LFS)X
4023(can)X
4165(util-)X
2541 1521(ize)N
2662(a)X
2724(large)X
2911(fraction)X
3187(of)X
3280(the)X
3404(disk)X
3563(bandwidth)X
3927(for)X
4047(writing,)X
2541 1611(the)N
2667(cleaner)X
2928(has)X
3063(a)X
3127(severe)X
3361(impact)X
3607(in)X
3697(certain)X
3944(workloads,)X
2541 1701(particularly)N
2931(transaction)X
3303(processing.)X
2741 1824(While)N
2962(allocation)X
3303(in)X
3390(BSD-LFS)X
3733(is)X
3810(simpler)X
4074(than)X
4236(in)X
2541 1914(extent-based)N
2973(\256le)X
3101(systems)X
3380(or)X
3473(\256le)X
3600(systems)X
3878(like)X
4023(FFS,)X
4200(the)X
2541 2004(management)N
2986(of)X
3087(memory)X
3388(is)X
3475(much)X
3687(more)X
3886(complicated.)X
2541 2094(The)N
2700(Sprite-LFS)X
3089(implementation)X
3625(addressed)X
3976(this)X
4124(prob-)X
2541 2184(lem)N
2701(by)X
2820(reserving)X
3158(large)X
3358(amounts)X
3668(of)X
3774(memory.)X
4120(Since)X
2541 2274(this)N
2678(is)X
2753(not)X
2877(feasible)X
3149(in)X
3233(most)X
3410(environments,)X
3888(a)X
3946(more)X
4133(com-)X
2541 2364(plex)N
2740(mechanism)X
3166(to)X
3288(manage)X
3598(buffer)X
3855(and)X
4031(memory)X
2541 2454(requirements)N
2986(is)X
3065(necessary.)X
3444(LFS)X
3607(operates)X
3901(best)X
4055(when)X
4254(it)X
2541 2544(can)N
2685(write)X
2882(out)X
3016(many)X
3226(dirty)X
3409(buffers)X
3669(at)X
3759(once.)X
3983(However,)X
2541 2634(holding)N
2827(dirty)X
3020(data)X
3196(in)X
3300(memory)X
3609(until)X
3797(much)X
4016(data)X
4191(has)X
2541 2724(accumulated)N
2982(requires)X
3275(consuming)X
3660(more)X
3859(memory)X
4160(than)X
2541 2814(might)N
2753(be)X
2855(desirable)X
3171(and)X
3313(may)X
3477(not)X
3604(be)X
3705(allowed)X
3984(\(e.g.)X
4152(NFS)X
2541 2904(semantics)N
2897(require)X
3164(synchronous)X
3608(writes\).)X
3910(In)X
4016(addition,)X
2541 2994(the)N
2680(act)X
2815(of)X
2922(writing)X
3193(a)X
3269(segment)X
3576(requires)X
3875(allocation)X
4231(of)X
2541 3084(additional)N
2897(memory)X
3200(\(for)X
3356(segment)X
3658(summaries)X
4040(and)X
4191(on-)X
2541 3174(disk)N
2701(inodes\),)X
2984(so)X
3082(segment)X
3376(writing)X
3634(needs)X
3844(to)X
3933(be)X
4036(initiated)X
2541 3264(before)N
2780(memory)X
3080(becomes)X
3394(a)X
3463(critical)X
3719(resource)X
4025(to)X
4120(avoid)X
2541 3354(memory)N
2828(thrashing)X
3146(or)X
3233(deadlock.)X
2741 3477(The)N
2921(delayed)X
3226(allocation)X
3597(of)X
3719(BSD-LFS)X
4093(makes)X
2541 3567(accounting)N
2917(of)X
3008(available)X
3322(free)X
3471(space)X
3673(more)X
3861(complex)X
4160(than)X
2541 3657(that)N
2682(in)X
2765(a)X
2822(pre-allocated)X
3262(system)X
3504(like)X
3644(FFS.)X
3836(In)X
3923(Sprite-LFS,)X
2541 3747(the)N
2668(space)X
2876(available)X
3195(to)X
3286(a)X
3351(\256le)X
3482(system)X
3733(is)X
3815(the)X
3942(sum)X
4104(of)X
4200(the)X
2541 3837(disk)N
2709(space)X
2923(and)X
3073(the)X
3205(buffer)X
3436(pool.)X
3652(As)X
3775(a)X
3845(result,)X
4077(data)X
4245(is)X
2541 3927(written)N
2790(to)X
2874(the)X
2994(buffer)X
3213(pool)X
3377(for)X
3493(which)X
3710(there)X
3892(might)X
4099(not)X
4222(be)X
2541 4017(free)N
2703(space)X
2917(available)X
3242(on)X
3357(disk.)X
3565(Since)X
3778(the)X
3911(applications)X
2541 4107(that)N
2686(wrote)X
2894(the)X
3017(data)X
3176(may)X
3339(have)X
3515(exited)X
3735(before)X
3965(the)X
4087(data)X
4245(is)X
2541 4197(written)N
2797(to)X
2888(disk,)X
3070(there)X
3260(is)X
3341(no)X
3449(way)X
3611(to)X
3701(report)X
3921(the)X
4047(``out)X
4231(of)X
2541 4287(disk)N
2700(space'')X
2959(condition.)X
3326(This)X
3493(failure)X
3728(to)X
3815(report)X
4032(errors)X
4245(is)X
2541 4377(unacceptable)N
2991(in)X
3083(a)X
3149(production)X
3526(environment.)X
4001(To)X
4120(avoid)X
2541 4467(this)N
2690(phenomena,)X
3114(available)X
3437(space)X
3649(accounting)X
4034(must)X
4222(be)X
2541 4557(done)N
2727(as)X
2824(dirty)X
3004(blocks)X
3242(enter)X
3432(the)X
3559(cache)X
3772(instead)X
4028(of)X
4124(when)X
2541 4647(they)N
2699(are)X
2818(written)X
3065(from)X
3241(cache)X
3445(to)X
3527(disk.)X
3 f
2541 4833(7.)N
2641(Future)X
2897(Directions)X
1 f
2741 4956(The)N
2899(novel)X
3110(structures)X
3455(of)X
3555(BSD-LFS)X
3907(makes)X
4145(it)X
4222(an)X
2541 5046(exciting)N
2840(vehicle)X
3113(for)X
3248(adding)X
3507(functionality)X
3956(to)X
4058(the)X
4196(\256le)X
2541 5136(system.)N
2813(For)X
2954(example,)X
3275(there)X
3465(are)X
3593(two)X
3742(characteristics)X
4231(of)X
2541 5226(BSD-LFS)N
2893(that)X
3046(make)X
3253(it)X
3330(desirable)X
3653(for)X
3780(transaction)X
4164(pro-)X
2541 5316(cessing.)N
2842(First,)X
3033(the)X
3156(multiple,)X
3467(random)X
3736(writes)X
3956(of)X
4047(a)X
4107(single)X
2541 5406(transaction)N
2947(get)X
3099(bundled)X
3411(and)X
3581(written)X
3862(at)X
3973(sequential)X
2541 5496(speeds,)N
2808(so)X
2912(we)X
3039(expect)X
3281(to)X
3375(see)X
3510(a)X
3578(dramatic)X
3891(performance)X
2541 5586(improvement)N
2995(in)X
3083(multi-user)X
3438(transaction)X
3816(applications,)X
4249(if)X
2541 5676(suf\256cient)N
2869(disk)X
3032(space)X
3241(is)X
3324(available.)X
3684(Second,)X
3970(since)X
4164(data)X
2541 5766(is)N
2623(never)X
2831(overwritten,)X
3250(before-images)X
3738(of)X
3833(updated)X
4115(pages)X
3 f
555 6048(218)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

219 p
%%Page: 219 19
10 s 10 xH 0 xS 3 f
555 378(Seltzer)N
812(et)X
895(al.)X
2167(An)X
2289(Implementation)X
2856(of)X
2943(a)X
3003(Log-Structured)X
3557(File)X
3706(System)X
3971(for)X
4094(UNIX)X
1 f
555 762(exist)N
731(in)X
818(the)X
941(\256le)X
1068(system)X
1314(until)X
1484(they)X
1646(are)X
1769(reclaimed)X
2110(by)X
2214(the)X
555 852(cleaner.)N
866(An)X
1002(implementation)X
1542(that)X
1700(exploits)X
1990(these)X
2192(two)X
555 942(characteristics)N
1110(is)X
1258(described)X
1660(and)X
1870(analyzed)X
2250(in)X
555 1032([SELT93b])N
957(on)X
1074(Sprite-LFS,)X
1486(and)X
1638(we)X
1768(plan)X
1942(on)X
2058(doing)X
2276(a)X
555 1122(prototype)N
913(implementation)X
1466(of)X
1584(transactions)X
2018(in)X
2130(BSD-)X
555 1212(LFS.)N
755 1335(The)N
904 0.2250(``no-overwrite'')AX
1451(characteristic)X
1903(of)X
1993(BSD-LFS)X
555 1425(makes)N
784(it)X
852(ideal)X
1032(for)X
1150(supporting)X
2 f
1516(unrm)X
1 f
1709(which)X
1929(would)X
2152(undo)X
555 1515(a)N
626(\256le)X
763(deletion.)X
1096(Saving)X
1353(a)X
1423(single)X
1648(copy)X
1838(of)X
1939(a)X
2009(\256le)X
2145(is)X
2232(no)X
555 1605(more)N
747(dif\256cult)X
1027(than)X
1192(changing)X
1513(the)X
1637(cleaner)X
1896(policy)X
2122(to)X
2210(not)X
555 1695(reclaim)N
826(space)X
1035(from)X
1221(the)X
1349(last)X
1490(version)X
1756(of)X
1853(a)X
1918(\256le,)X
2069(and)X
2214(the)X
555 1785(only)N
718(challenge)X
1046(is)X
1119(\256nding)X
1365(the)X
1483(old)X
1605(inode.)X
1843(More)X
2037(sophisti-)X
555 1875(cated)N
746(versioning)X
1104(should)X
1337(be)X
1433(only)X
1595(marginally)X
1962(more)X
2147(com-)X
555 1965(plicated.)N
755 2088(Also,)N
962(the)X
1095(sequential)X
1455(nature)X
1691(of)X
1793(BSD-LFS)X
2147(write)X
555 2178(patterns)N
834(makes)X
1064(it)X
1133(nearly)X
1359(ideal)X
1539(for)X
1657(tertiary)X
1913(storage)X
2169(dev-)X
555 2268(ices)N
723([KOHL93].)X
1163(LFS)X
1342(may)X
1522(be)X
1640(extended)X
1972(to)X
2076(include)X
555 2358(multiple)N
843(devices)X
1106(in)X
1190(a)X
1248(single)X
1461(\256le)X
1584(system.)X
1847(If)X
1922(one)X
2059(or)X
2147(more)X
555 2448(of)N
648(these)X
839(devices)X
1106(is)X
1185(a)X
1247(robotic)X
1500(storage)X
1757(device,)X
2012(such)X
2184(as)X
2276(a)X
555 2538(tape)N
724(stacker,)X
1007(then)X
1180(the)X
1312(\256le)X
1448(system)X
1704(may)X
1876(have)X
2062(tremen-)X
555 2628(dous)N
743(storage)X
1012(capacity.)X
1336(Such)X
1532(a)X
1604(\256le)X
1742(system)X
2000(would)X
2236(be)X
555 2718(particularly)N
969(suitable)X
1261(for)X
1398(on-line)X
1668(archival)X
1970(or)X
2080(backup)X
555 2808(storage.)N
755 2931(An)N
882(early)X
1072(version)X
1337(of)X
1433(the)X
1560(BSD-LFS)X
1907(implementa-)X
555 3021(tion)N
702(was)X
850(shipped)X
1122(as)X
1212(part)X
1359(of)X
1448(the)X
1568(4.4BSD-Alpha)X
2068(release.)X
555 3111(The)N
718(current)X
984(version)X
1258(described)X
1604(in)X
1704(this)X
1857(paper)X
2074(will)X
2236(be)X
555 3201(available)N
882(as)X
986(part)X
1148(of)X
1252(4.4BSD.)X
1584(Additionally,)X
2045(the)X
2180(FFS)X
555 3291(shipped)N
837(with)X
1012(4.4BSD)X
1300(will)X
1457(contain)X
1726(the)X
1857(enhancements)X
555 3381(to)N
637(provide)X
902(clustered)X
1212(reading)X
1473(and)X
1609(writing.)X
3 f
555 3567(8.)N
655(Acknowledgements)X
1 f
755 3690(Mendel)N
1046(Rosenblum)X
1455(and)X
1616(John)X
1812(Ousterhout)X
2213(are)X
555 3780(responsible)N
941(for)X
1056(the)X
1175(original)X
1445(design)X
1674(and)X
1810(implementation)X
555 3870(of)N
655(Sprite-LFS.)X
1083(Without)X
1378(their)X
1558(work,)X
1775(we)X
1901(never)X
2112(would)X
555 3960(have)N
739(tried)X
918(any)X
1066(of)X
1165(this.)X
1352(We)X
1496(also)X
1657(wish)X
1840(to)X
1933(express)X
2205(our)X
555 4050(gratitude)N
887(to)X
996(John)X
1194(Wilkes)X
1468(and)X
1631(Hewlett-Packard)X
2218(for)X
555 4140(their)N
722(support.)X
3 f
555 4326(9.)N
655(References)X
1 f
555 4506([ADAP85])N
2 f
934(SCSI)X
1121(User)X
1304(Guide,)X
1 f
1547(Adaptive)X
1868(Data)X
2046(Systems)X
555 4596(Inc.,)N
718(Pomona,)X
1020(CA,)X
1171(1985.)X
555 4776([BAKE91])N
929(Baker,)X
1163(M.,)X
1296(Hartman.,)X
1639(J.,)X
1731(Kupfer.,)X
2020(M.,)X
2152(Shir-)X
555 4866(riff,)N
716(L.,)X
843(Ousterhout,)X
1257(J.,)X
1366(``Measurements)X
1926(of)X
2030(a)X
2103(Distri-)X
555 4956(buted)N
762(File)X
915(System,'')X
2 f
1253(Proceedings)X
1683(of)X
1774(the)X
1901(13th)X
2071(Sympo-)X
555 5046(sium)N
733(on)X
840(Operating)X
1196(System)X
1446(Principles)X
1 f
1775(,)X
1822(Monterey,)X
2181(CA,)X
555 5136(October)N
842(1991,)X
1050(198-212.)X
1385(Published)X
1728(as)X
2 f
1822(Operating)X
2178(Sys-)X
555 5226(tems)N
722(Review)X
974(25)X
1 f
(,)S
1094(5)X
1154(\(October)X
1460(1991\).)X
555 5406([BAKE92])N
983(Baker,)X
1271(M.,)X
1458(Asami,)X
1763(S.,)X
1923(Deprit,)X
2223(E.,)X
555 5496(Ousterhout,)N
969(S.,)X
1091(Seltzer,)X
1372(M.,)X
1521(``Non-Volatile)X
2036(Memory)X
555 5586(for)N
681(Fast,)X
865(Reliable)X
1163(File)X
1318(Systems,'')X
2 f
1689(Proceedings)X
2121(of)X
2214(the)X
555 5676(Fifth)N
749(Conference)X
1158(on)X
1277(Architectural)X
1743(Support)X
2034(for)X
2165(Pro-)X
555 5766(gramming)N
906(Languages)X
1279(and)X
1421(Operating)X
1771(Systems)X
1 f
2025(,)X
2066(Boston,)X
2541 762(MA,)N
2710(October)X
2989(1992.)X
2541 942([CAR92])N
2865(Carson,)X
3138(S.,)X
3248(Setia,)X
3453(S.,)X
3562(``Optimal)X
3903(Write)X
4111(Batch)X
2541 1032(Size)N
2705(in)X
2793(Log-structured)X
3296(File)X
3445(Systems,'')X
2 f
3810(Proceedings)X
4236(of)X
2541 1122(1992)N
2732(Usenix)X
2986(Workshop)X
3342(on)X
3453(File)X
3613(Systems)X
1 f
3867(,)X
3918(Ann)X
4086(Arbor,)X
2541 1212(MI,)N
2679(May)X
2846(21-22)X
3053(1992,)X
3253(79-91.)X
2541 1392([KAZA90])N
2943(Kazar,)X
3200(M.,)X
3355(Leverett,)X
3687(B.,)X
3824(Anderson,)X
4200(O.,)X
2541 1482(Vasilis,)N
2833(A.,)X
2981(Bottos,)X
3259(B.,)X
3402(Chutani,)X
3725(S.,)X
3859(Everhart,)X
4205(C.,)X
2541 1572(Mason,)N
2803(A.,)X
2924(Tu,)X
3056(S.,)X
3163(Zayas,)X
3398(E.,)X
3510(``DECorum)X
3916(File)X
4063(System)X
2541 1662(Architectural)N
3010(Overview,'')X
2 f
3445(Proceedings)X
3890(of)X
3996(the)X
4138(1990)X
2541 1752(Summer)N
2824(Usenix)X
1 f
3067(Anaheim,)X
3401(CA,)X
3552(June)X
3719(1990,)X
3919(151-164.)X
2541 1932([HAER83])N
2937(Haerder,)X
3261(T.)X
3394(Reuter,)X
3672(A.)X
3814(``Principles)X
4231(of)X
2541 2022(Transaction-Oriented)N
3266(Database)X
3599(Recovery,'')X
2 f
4018(Comput-)X
2541 2112(ing)N
2663(Surveys)X
1 f
2913(,)X
2953(15\(4\);)X
3169(1983,)X
3369(237-318.)X
2541 2292([HOWA88])N
2957(Howard,)X
3267(J.,)X
3369(Kazar,)X
3613(Menees,)X
3914(S.,)X
4029(Nichols,)X
2541 2382(D.,)N
2677(Satyanarayanan,)X
3243(M.,)X
3391(Sidebotham,)X
3830(N.,)X
3965(West,)X
4187(M.,)X
2541 2472(``Scale)N
2809(and)X
2965(Performance)X
3416(in)X
3518(a)X
3594(Distributed)X
3993(File)X
4156(Sys-)X
2541 2562(tem,'')N
2 f
2772(ACM)X
2978(Transaction)X
3400(on)X
3516(Computer)X
3872(Systems)X
4162(6)X
1 f
(,)S
4258(1)X
2541 2652(\(February)N
2878(1988\),)X
3105(51-81.)X
2541 2832([KLEI86])N
2889(S.)X
2984(R.)X
3088(Kleiman,)X
3415(``Vnodes:)X
3767(An)X
3896(Architecture)X
2541 2922(for)N
2689(Multiple)X
3017(File)X
3194(System)X
3482(Types)X
3731(in)X
3846(Sun)X
4023(UNIX,'')X
2 f
2541 3012(Usenix)N
2784(Conference)X
3174(Proceedings)X
1 f
3575(,)X
3615(June)X
3782(1986,)X
3982(238-247.)X
2541 3192([KOHL93])N
2948(Kohl,)X
3177(J.,)X
3297(Staelin,)X
3588(C.,)X
3730(Stonebraker,)X
4187(M.,)X
2541 3282(``Highlight:)N
2976(Using)X
3200(a)X
3269(Log-structured)X
3779(File)X
3936(System)X
4204(for)X
2541 3372(Tertiary)N
2850(Storage)X
3145(Management,'')X
2 f
3688(Proceedings)X
4138(1993)X
2541 3462(Winter)N
2779(Usenix)X
1 f
3002(,)X
3042(San)X
3182(Diego,)X
3418(CA,)X
3569(January)X
3839(1993.)X
2541 3642([MCKU84])N
2956(Marshall)X
3282(Kirk)X
3470(McKusick,)X
3865(William)X
4167(Joy,)X
2541 3732(Sam)N
2705(Lef\257er,)X
2966(and)X
3104(R.)X
3199(S.)X
3285(Fabry,)X
3514(``A)X
3648(Fast)X
3803(File)X
3948(System)X
4204(for)X
2541 3822(UNIX'',)N
2 f
2861(ACM)X
3075(Transactions)X
3536(on)X
3660(Computer)X
4024(Systems)X
1 f
4278(,)X
2541 3912(2\(3\),)N
2715(August)X
2966(1984,)X
3166(181-197.)X
2541 4092([MCKU90])N
2972(Marshall)X
3314(Kirk)X
3518(McKusick,)X
3928(Michael)X
4247(J.)X
2541 4182(Karels,)N
2813(Keith)X
3033(Bostic,)X
3299(``A)X
3453(Pageable)X
3785(Memory)X
4102(Based)X
2541 4272(Filesystem,'')N
2 f
2983(Proceedings)X
3406(of)X
3490(the)X
3610(1990)X
3791(Summer)X
4075(Usenix)X
2541 4362(Technical)N
2913(Conference)X
1 f
3283(,)X
3359(Anaheim,)X
3729(CA,)X
3916(June)X
4118(1990,)X
2541 4452(137-144.)N
2541 4632([MORA90])N
2958(Moran,)X
3235(J.,)X
3349(Sandberg,)X
3714(R.,)X
3849(Coleman,)X
4200(D.,)X
2541 4722(Kepecs,)N
2823(J.,)X
2919(Lyon,)X
3133(B.,)X
3251(Breaking)X
3570(Through)X
3871(the)X
3994(NFS)X
4164(Per-)X
2541 4812(formance)N
2882(Barrier,'')X
2 f
3220(Proceedings)X
3657(of)X
3755(the)X
3889(1990)X
4085(Spring)X
2541 4902(European)N
2914(Unix)X
3126(Users)X
3369(Group)X
1 f
3578(,)X
3654(Munich,)X
3979(Germany,)X
2541 4992(199-206,)N
2848(April)X
3037(1990.)X
2541 5172([MCVO91])N
2963(McVoy,)X
3276(L.,)X
3413(Kleiman,)X
3757(S.,)X
3888(``Extent-like)X
2541 5262(Performance)N
2979(from)X
3162(a)X
3225(Unix)X
3412(File)X
3562(System,'')X
2 f
3897(Proceedings)X
2541 5352(Winter)N
2779(Usenix)X
3022(1991)X
1 f
(,)S
3222(Dallas,)X
3467(TX,)X
3614(January)X
3884(1991,)X
4084(33-44.)X
2541 5532([OUST85])N
2929(Ousterhout,)X
3350(J.,)X
3466(Costa,)X
3713(H.,)X
3855(Harrison,)X
4200(D.,)X
2541 5622(Kunze,)N
2820(J.,)X
2940(Kupfer,)X
3237(M.,)X
3397(Thompson,)X
3808(J.,)X
3927(``A)X
4087(Trace-)X
2541 5712(Driven)N
2793(Analysis)X
3102(of)X
3198(the)X
3325(UNIX)X
3554(4.2BSD)X
3837(File)X
3989(System,'')X
2 f
2541 5802(Proceedings)N
2982(of)X
3084(the)X
3222(Tenth)X
3444(Symposium)X
3849(on)X
3969(Operating)X
3 f
555 6048(1993)N
735(Winter)X
1000(USENIX)X
1322(-)X
1369(January)X
1673(25-29,)X
1900(1993)X
2080(-)X
2127(San)X
2275(Diego,)X
2511(CA)X
4179(219)X

220 p
%%Page: 220 20
10 s 10 xH 0 xS 3 f
555 378(An)N
677(Implementation)X
1244(of)X
1331(a)X
1391(Log-Structured)X
1945(File)X
2094(System)X
2359(for)X
2482(UNIX)X
3877(Seltzer)X
4134(et)X
4217(al.)X
2 f
555 762(System)N
805(Principles)X
1 f
1134(,)X
1181(December)X
1538(1985,)X
1744(15-24.)X
1997(Published)X
555 852(as)N
2 f
642(Operating)X
991(Systems)X
1265(Review)X
1517(19)X
1 f
(,)S
1637(5)X
1697(\(December)X
2075(1985\).)X
555 1032([OUST89])N
933(Ousterhout,)X
1344(J.,)X
1450(Douglis,)X
1758(F.,)X
1877(``Beating)X
2214(the)X
555 1122(I/O)N
695(Bottleneck:)X
1097(A)X
1188(Case)X
1377(for)X
1504(Log-structured)X
2014(File)X
2170(Sys-)X
555 1212(tems,'')N
2 f
832(Operating)X
1212(Systems)X
1517(Review)X
1800(23)X
1 f
(,)S
1951(1,)X
2062(January)X
555 1302(1989,)N
787(11-27.)X
1065(Also)X
1267(available)X
1608(as)X
1726(Technical)X
2094(Report)X
555 1392(UCB/CSD)N
916(88/467.)X
555 1572([ROSE90])N
930(Rosenblum,)X
1351(M.,)X
1499(Ousterhout,)X
1912(J.)X
1999(K.,)X
2133(``The)X
555 1662(LFS)N
741(Storage)X
1035(Manager,'')X
2 f
1444(Proceedings)X
1894(of)X
2005(the)X
2152(1990)X
555 1752(Summer)N
838(Usenix)X
1 f
1061(,)X
1101(Anaheim,)X
1435(CA,)X
1586(June)X
1753(1990,)X
1953(315-324.)X
555 1932([ROSE91])N
930(Rosenblum,)X
1351(M.,)X
1499(Ousterhout,)X
1912(J.)X
1999(K.,)X
2133(``The)X
555 2022(Design)N
814(and)X
962(Implementation)X
1501(of)X
1600(a)X
1667(Log-Structured)X
2188(File)X
555 2112(System,'')N
2 f
896(Proceedings)X
1329(of)X
1422(the)X
1551(Symposium)X
1947(on)X
2058(Operat-)X
555 2202(ing)N
688(System)X
941(Principles)X
1 f
1270(,)X
1320(Monterey,)X
1682(CA,)X
1843(October)X
2132(1991,)X
555 2292(1-15.)N
776(Published)X
1125(as)X
2 f
1225(Operating)X
1587(Systems)X
1874(Review)X
2139(25)X
1 f
(,)S
2272(5)X
555 2382(\(October)N
881(1991\).)X
1148(Also)X
1339(available)X
1669(as)X
2 f
1776(Transactions)X
2232(on)X
555 2472(Computer)N
895(Systems)X
1169(10)X
1 f
(,)S
1289(1)X
1349(\(February)X
1686(1992\),)X
1913(26-52.)X
555 2652([ROSE92])N
925(Rosenblum,)X
1341(M.,)X
1483(``The)X
1693(Design)X
1951(and)X
2098(Imple-)X
555 2742(mentation)N
922(of)X
1036(a)X
1119(Log-structured)X
1643(File)X
1814(System,'')X
2170(PhD)X
555 2832(Thesis,)N
808(University)X
1170(of)X
1261(California,)X
1629(Berkeley,)X
1962(June)X
2132(1992.)X
555 2922(Also)N
726(available)X
1036(as)X
1123(Technical)X
1460(Report)X
1698(UCB/CSD)X
2059(92/696.)X
555 3102([SELT90])N
902(Seltzer,)X
1167(M.,)X
1300(Chen,)X
1511(P.,)X
1617(Ousterhout,)X
2015(J.,)X
2107(``Disk)X
555 3192(Scheduling)N
975(Revisited,'')X
2 f
1411(Proceedings)X
1872(of)X
1994(the)X
2152(1990)X
555 3282(Winter)N
831(Usenix)X
1 f
1054(,)X
1132(Washington,)X
1597(D.C.,)X
1825(January)X
2132(1990,)X
555 3372(313-324.)N
555 3552([SELT91])N
948(Seltzer,)X
1259(M.,)X
1438(Stonebraker,)X
1914(M.,)X
2093(``Read)X
555 3642(Optimized)N
917(File)X
1065(Systems:)X
1376(A)X
1457(Performance)X
1891(Evaluation,'')X
2 f
555 3732(Proceedings)N
987(7th)X
1119(Annual)X
1380(International)X
1832(Conference)X
2232(on)X
555 3822(Data)N
735(Engineering)X
1 f
1131(,)X
1171(Kobe,)X
1385(Japan,)X
1608(April)X
1797(1991,)X
1997(602-611.)X
555 4002([SELT93a])N
960(Seltzer,)X
1247(M.,)X
1402(``File)X
1623(System)X
1901(Performance)X
555 4092(and)N
698(Transaction)X
1104(Support,'')X
1458(PhD)X
1626(Thesis,)X
1881(University)X
2245(of)X
555 4182(California,)N
920(Berkeley,)X
1250(May)X
1417(1993.)X
555 4362([SELT93b])N
963(Seltzer,)X
1249(M.,)X
1402(``Transaction)X
1877(Support)X
2172(in)X
2276(a)X
555 4452(Log-Structured)N
1107(File)X
1293(System,'')X
1664(To)X
1815(appear)X
2091(in)X
2214(the)X
2 f
555 4542(Proceedings)N
984(of)X
1074(the)X
1199(1993)X
1386(International)X
1835(Conference)X
2232(on)X
555 4632(Data)N
735(Engineering)X
1 f
1131(,)X
1171(Vienna,)X
1443(Austria,)X
1719(April)X
1908(1993.)X
555 4812([THOM78])N
958(Thompson,)X
1353(K.,)X
1484(``Unix)X
1731(Implementation,'')X
2 f
555 4902(Bell)N
720(Systems)X
1010(Technical)X
1362(Journal)X
1 f
1611(,)X
1667(57\(6\),)X
1897(part)X
2057(2,)X
2152(July-)X
555 4992(August)N
806(1978,)X
1006(1931-1946.)X
555 5172([TPCB90])N
910(Transaction)X
1311(Processing)X
1680(Performance)X
2112(Coun-)X
555 5262(cil,)N
703(``TPC)X
951(Benchmark)X
1368(B,'')X
1542(Standard)X
1874(Speci\256cation,)X
555 5352(Waterside)N
901(Associates,)X
1284(Fremont,)X
1595(CA.,)X
1766(1990.)X
755 5475(Margo)N
1011(I.)X
1100(Seltzer)X
1365(is)X
1459(an)X
1576(Assistant)X
1910(Professor)X
2254(at)X
555 5565(Harvard)N
839(University.)X
1237(Her)X
1378(research)X
1667(interests)X
1954(include)X
2210(\256le)X
555 5655(systems,)N
872(databases,)X
1243(and)X
1402(transaction)X
1797(processing)X
2183(sys-)X
555 5745(tems.)N
794(She)X
962(spent)X
1179(several)X
1455(years)X
1673(working)X
1988(at)X
2094(startup)X
2541 762(companies)N
2922(designing)X
3271(and)X
3425(implementing)X
3906(\256le)X
4045(systems)X
2541 852(and)N
2706(transaction)X
3107(processing)X
3498(software)X
3823(and)X
3987(designing)X
2541 942(microprocessors.)N
3135(Ms.)X
3285(Seltzer)X
3536(completed)X
3897(her)X
4027(Ph.D.)X
4236(in)X
2541 1032(Computer)N
2908(Science)X
3205(at)X
3310(the)X
3455(University)X
3840(of)X
3953(California,)X
2541 1122(Berkeley)N
2852(in)X
2935(December)X
3286(of)X
3373(1992)X
3553(and)X
3689(received)X
3982(her)X
4105(AB)X
4236(in)X
2541 1212(Applied)N
2823(Mathematics)X
3261(from)X
3441 0.1953(Harvard/Radcliffe)AX
4049(College)X
2541 1302(in)N
2623(1983.)X
2741 1425(Keith)N
2940(Bostic)X
3165(has)X
3292(been)X
3464(a)X
3520(member)X
3803(of)X
3890(the)X
4008(Berkeley)X
2541 1515(Computer)N
2910(Systems)X
3225(Research)X
3569(Group)X
3823(\(CSRG\))X
4133(since)X
2541 1605(1986.)N
2770(In)X
2866(this)X
3009(capacity,)X
3325(he)X
3429(was)X
3582(the)X
3708(principle)X
4021(architect)X
2541 1695(of)N
2632(the)X
2754(2.10BSD)X
3073(release)X
3321(of)X
3412(the)X
3534(Berkeley)X
3847(Software)X
4160(Dis-)X
2541 1785(tribution)N
2839(for)X
2955(PDP-11's.)X
3328(He)X
3444(is)X
3519(currently)X
3831(one)X
3969(of)X
4058(the)X
4178(two)X
2541 1875(principal)N
2876(developers)X
3274(in)X
3385(the)X
3532(CSRG,)X
3809(continuing)X
4200(the)X
2541 1965(development)N
2995(of)X
3102(future)X
3334(versions)X
3641(of)X
3748(Berkeley)X
4077(UNIX.)X
2541 2055(He)N
2658(received)X
2954(his)X
3069(undergraduate)X
3551(degree)X
3788(in)X
3872(Statistics)X
4182(and)X
2541 2145(his)N
2681(Masters)X
2981(degree)X
3242(in)X
3350(Electrical)X
3704(Engineering)X
4142(from)X
2541 2235(George)N
2813(Washington)X
3235(University.)X
3648(He)X
3777(is)X
3864(a)X
3934(member)X
4231(of)X
2541 2325(the)N
2688(ACM,)X
2939(the)X
3086(IEEE)X
3309(and)X
3474(several)X
3751(POSIX)X
4031(working)X
2541 2415(groups.)N
2741 2538(Dr.)N
2876(Marshall)X
3191(Kirk)X
3368(McKusick)X
3732(got)X
3863(his)X
3985(undergra-)X
2541 2628(duate)N
2750(degree)X
3000(in)X
3097(Electrical)X
3440(Engineering)X
3867(from)X
4058(Cornell)X
2541 2718(University.)N
2975(His)X
3142(graduate)X
3475(work)X
3696(was)X
3876(done)X
4087(at)X
4200(the)X
2541 2808(University)N
2914(of)X
3016(California,)X
3396(where)X
3627(he)X
3737(received)X
4044(Masters)X
2541 2898(degrees)N
2817(in)X
2909(Computer)X
3259(Science)X
3538(and)X
3683(Business)X
3996(Adminis-)X
2541 2988(tration,)N
2820(and)X
2986(a)X
3072(Ph.D.)X
3304(in)X
3415(the)X
3562(area)X
3746(of)X
3862(programming)X
2541 3078(languages.)N
2946(While)X
3186(at)X
3287(Berkeley)X
3620(he)X
3739(implemented)X
4200(the)X
2541 3168(4.2BSD)N
2830(fast)X
2980(\256le)X
3116(system)X
3372(and)X
3522(was)X
3681(involved)X
3994(in)X
4089(imple-)X
2541 3258(menting)N
2832(the)X
2959(Berkeley)X
3278(Pascal)X
3512(system.)X
3803(He)X
3926(currently)X
4245(is)X
2541 3348(the)N
2660(Research)X
2975(Computer)X
3315(Scientist)X
3610(at)X
3688(the)X
3806(Berkeley)X
4116(Com-)X
2541 3438(puter)N
2780(Systems)X
3119(Research)X
3487(Group,)X
3785(continuing)X
4200(the)X
2541 3528(development)N
2995(of)X
3102(future)X
3334(versions)X
3641(of)X
3748(Berkeley)X
4077(UNIX.)X
2541 3618(He)N
2663(is)X
2744(past-president)X
3221(of)X
3315(the)X
3440(Usenix)X
3694(Association,)X
4119(and)X
4262(a)X
2541 3708(member)N
2824(of)X
2911(ACM)X
3113(and)X
3249(IEEE.)X
2741 3831(Carl)N
2902(Staelin)X
3147(works)X
3365(for)X
3481(Hewlett-Packard)X
4043(Labora-)X
2541 3921(tories)N
2756(in)X
2855(the)X
2990(Berkeley)X
3316(Science)X
3602(Center)X
3852(and)X
4004(the)X
4138(Con-)X
2541 4011(current)N
2839(Systems)X
3175(Project.)X
3512(His)X
3693(research)X
4031(interests)X
2541 4101(include)N
2798(high)X
2961(performance)X
3389(\256le)X
3512(system)X
3755(design,)X
4005(and)X
4142(terti-)X
2541 4191(ary)N
2665(storage)X
2918(\256le)X
3041(systems.)X
3355(As)X
3464(part)X
3609(of)X
3696(the)X
3814(Science)X
4084(Center)X
2541 4281(he)N
2653(is)X
2742(currently)X
3068(working)X
3371(with)X
3549(Project)X
3812(Sequoia)X
4106(at)X
4200(the)X
2541 4371(University)N
2905(of)X
2998(California)X
3349(at)X
3433(Berkeley.)X
3788(He)X
3907(received)X
4205(his)X
2541 4461(PhD)N
2714(in)X
2807(Computer)X
3157(Science)X
3437(from)X
3623(Princeton)X
3960(University)X
2541 4551(in)N
2623(1992)X
2803(in)X
2885(high)X
3047(performance)X
3474(\256le)X
3596(system)X
3838(design.)X
3 f
555 6048(220)N
2227(1993)X
2407(Winter)X
2672(USENIX)X
2994(-)X
3041(January)X
3345(25-29,)X
3572(1993)X
3752(-)X
3799(San)X
3947(Diego,)X
4183(CA)X

20 p
%%Trailer
xt

xs
