h34570
s 00004/00001/01562
d D 8.65 95/06/19 20:51:44 eric 103 102
c add warning about wildcard MX
e
s 00014/00000/01549
d D 8.64 95/06/10 18:17:41 eric 102 101
c add DontExpandCnames option -- IETF seems to be moving in this direction
e
s 00002/00000/01547
d D 8.63 95/06/10 14:53:02 eric 101 100
c add confCF_VERSION to set local version info
e
s 00009/00000/01538
d D 8.62 95/05/27 17:50:52 eric 100 99
c add confMAX_QUEUE_RUN_SIZE
e
s 00001/00000/01537
d D 8.61 95/05/27 12:59:53 eric 99 98
c misc comments re rule 99
e
s 00005/00002/01532
d D 8.60 95/05/24 15:35:52 eric 98 97
c default confCHECK_ALIASES to False -- too confusing for some people
e
s 00009/00000/01525
d D 8.59 95/05/23 12:11:52 eric 97 96
c add MAILER(mail11) from Barb Dijker
e
s 00014/00009/01511
d D 8.58 95/05/23 10:52:04 eric 96 95
c document DECNET_RELAY; improve FAX_RELAY documentation
e
s 00007/00018/01513
d D 8.57 95/05/18 08:21:41 eric 95 94
c eliminate dotted users in favor of plussed users
e
s 00013/00000/01518
d D 8.56 95/05/16 13:22:30 eric 94 93
c more flaming about full names as e-mail addresses
e
s 00013/00001/01505
d D 8.55 95/04/26 09:24:18 eric 93 92
c document *_MAILER_CHARSET macros
e
s 00070/00039/01436
d D 8.54 95/04/21 12:17:45 eric 92 91
c update for new domain and ostype files
e
s 00007/00000/01468
d D 8.53 95/04/19 10:40:27 eric 91 90
c add ColonOkInAddr (confCOLON_OK_IN_ADDR) option
e
s 00005/00005/01463
d D 8.52 95/04/10 11:04:05 eric 90 89
c eliminate BrokenSmtpPeers and two line SMTP greeting messages
e
s 00007/00000/01461
d D 8.51 95/04/08 15:28:46 eric 89 88
c missed some docs on MaxMessageSize
e
s 00019/00014/01442
d D 8.50 95/03/31 15:06:56 eric 88 87
c clean up documentation on MAIL_HUB vs LOCAL_RELAY
e
s 00164/00127/01292
d D 8.49 95/03/31 13:36:03 eric 87 86
c long option names
e
s 00001/00001/01418
d D 8.48 95/02/24 10:36:24 eric 86 85
c typo
e
s 00004/00000/01415
d D 8.47 95/02/15 16:50:30 eric 85 84
c add LOCAL_MAILER_MAX and PROCMAIL_MAILER_MAX
e
s 00008/00000/01407
d D 8.46 95/01/31 11:30:04 eric 84 83
c add FEATURE(smrsh)
e
s 00005/00000/01402
d D 8.45 95/01/26 10:55:24 eric 83 82
c document FEATURE(bestmx_is_local)
e
s 00003/00000/01399
d D 8.44 95/01/10 16:47:06 eric 82 81
c document confQUEUE_SORT_ORDER
e
s 00009/00001/01390
d D 8.43 94/12/06 09:44:59 eric 81 80
c UUCP updates
e
s 00002/00000/01389
d D 8.42 94/11/24 09:19:14 eric 80 79
c add LOCAL_SHELL_DIR
e
s 00038/00001/01351
d D 8.41 94/11/21 17:10:34 eric 79 78
c add security notes section
e
s 00025/00002/01327
d D 8.40 94/11/20 17:23:14 eric 78 77
c FEATURE(local_procmail) and MAILER(procmail)
e
s 00004/00000/01325
d D 8.39 94/11/14 08:54:14 eric 77 76
c add description of POP mailer
e
s 00015/00001/01310
d D 8.38 94/11/13 16:47:11 eric 76 75
c accept user+detail; add FEATURE(procmail)
e
s 00003/00003/01308
d D 8.37 94/11/13 15:48:54 eric 75 74
c stickydomain => stickyhost
e
s 00044/00011/01267
d D 8.36 94/11/13 15:46:06 eric 74 73
c add LUSER_RELAY; invert sense of FEATURE(notsticky); add
c documentation of un-MXed hosts; add smtp8 mailer, add *SMTP*_MAILER_ARGS
e
s 00006/00000/01272
d D 8.35 94/10/16 11:54:42 eric 73 72
c add confRECEIVED_HEADER
e
s 00003/00000/01269
d D 8.34 94/10/15 08:33:03 eric 72 71
c add confDONT_PRUNE_ROUTES to set R option
e
s 00001/00000/01268
d D 8.33 94/07/23 10:50:58 eric 71 70
c confEIGHT_BIT_HANDLING
e
s 00032/00001/01236
d D 8.32 94/07/16 10:21:35 eric 70 69
c add dotted users
e
s 00011/00008/01226
d D 8.31 94/07/02 09:30:51 eric 69 68
c clarify UUCP mailers
e
s 00002/00003/01232
d D 8.30 94/07/02 08:16:13 eric 68 67
c delete OLD_SENDMAIL support
e
s 00008/00005/01227
d D 8.29 94/06/25 10:22:40 eric 67 66
c generalize domaintable lookups
e
s 00005/00001/01227
d D 8.28 94/04/14 15:31:12 eric 66 65
c clarify quotes in ALIAS_FILE definition
e
s 00026/00004/01202
d D 8.27 94/03/12 08:49:54 eric 65 64
c clarification of SITECONFIG
e
s 00001/00001/01205
d D 8.26 94/02/16 08:44:23 eric 64 63
c move bitdomain and uudomain maps up in ruleset 3
e
s 00005/00003/01201
d D 8.25 94/02/10 09:07:23 eric 63 62
c make it match the way it really is, not the way I want it
e
s 00001/00001/01203
d D 8.24 94/02/03 08:09:39 eric 62 61
c corrections to MX instructions
e
s 00007/00012/01197
d D 8.23 94/02/01 08:20:47 eric 61 60
c spelling errors; delete non-existent HOSTMAP_SPEC
e
s 00008/00000/01201
d D 8.22 94/01/26 17:37:58 eric 60 59
c add *_MAILER_MAX
e
s 00002/00002/01199
d D 8.21 94/01/12 06:19:00 eric 59 58
c "c" option was poorly documented
e
s 00007/00000/01194
d D 8.20 94/01/05 10:44:29 eric 58 57
c make it clear that they should be customized
e
s 00095/00006/01099
d D 8.19 93/12/27 14:49:59 eric 57 56
c expand on UUCP address rewriting
e
s 00001/00003/01104
d D 8.18 93/12/20 10:50:30 eric 56 55
c delete CSNET domain support
e
s 00002/00000/01105
d D 8.17 93/12/15 06:35:45 eric 55 54
c add MAILER(pop)
e
s 00010/00004/01095
d D 8.16 93/12/01 11:35:38 eric 54 53
c GNU m4 is fixed; more info about M4 magic frotz
e
s 00006/00000/01093
d D 8.15 93/10/31 11:35:22 eric 53 52
c extend reservations on ruleset numbering
e
s 00058/00024/01035
d D 8.14 93/09/19 17:46:26 eric 52 51
c update FlexFAX information
e
s 00010/00005/01049
d D 8.13 93/09/03 09:24:14 eric 51 50
c document how FEATURE(nocanonify) interacts with FEATURE(nullclient)
e
s 00003/00001/01051
d D 8.12 93/08/28 14:10:08 eric 50 49
c cf/cf/Makefile.dist
e
s 00021/00001/01031
d D 8.11 93/08/21 16:20:15 eric 49 48
c add FEATURE(nullclient) and clientproto.mc
e
s 00023/00017/01009
d D 8.10 93/08/15 08:41:19 eric 48 47
c add confDOMAIN_NAME; clarify $w/$j distinction; clarify user database;
c drop NEED_DOMAIN
e
s 00004/00004/01022
d D 8.9 93/08/09 21:26:13 eric 47 46
c fix cases of -o following filename in map definitions
e
s 00056/00012/00970
d D 8.8 93/08/08 12:55:22 eric 46 45
c many changes for 8.6
e
s 00056/00007/00926
d D 8.7 93/07/23 14:55:22 eric 45 44
c add confRELAY_MAILER and improve mailertable description
e
s 00003/00000/00930
d D 8.6 93/07/22 16:01:52 eric 44 43
c add confLOCAL_MAILER
e
s 00003/00000/00927
d D 8.5 93/07/21 12:11:49 eric 43 42
c add confSMTP_MAILER
e
s 00020/00006/00907
d D 8.4 93/07/18 11:13:15 eric 42 41
c add confTRY_NULL_MX_LIST; random documentation improvements
e
s 00006/00000/00907
d D 8.3 93/07/13 13:00:44 eric 41 40
c add uucp-dom mailer, OSTYPE(aix3), LOCAL_SHELL_{FLAGS,ARGS}, UUCP_MAX_SIZE
e
s 00050/00004/00857
d D 8.2 93/07/11 12:00:14 eric 40 39
c add FEATURE(allmasquerade); FEATURE(domaintable); LOCAL_MAILER_ARGS;
c clarify several things
e
s 00000/00000/00861
d D 8.1 93/06/27 18:31:03 bostic 39 38
c 4.4BSD snapshot (revision 8.1)
e
s 00016/00009/00845
d D 6.30 93/06/24 18:15:48 eric 38 36
c reality therapy
e
s 00000/00000/00854
d R 8.1 93/06/07 10:02:50 bostic 37 36
c 4.4BSD snapshot (revision 8.1)
e
s 00002/00004/00852
d D 6.29 93/06/01 12:03:05 eric 36 35
c ruleset 6 => 96, 7 => 97
e
s 00003/00000/00853
d D 6.28 93/05/28 07:19:18 eric 35 34
c ruleset 90 for mailertable
e
s 00004/00000/00849
d D 6.27 93/05/24 09:21:13 eric 34 33
c add FEATURE(always_add_domain)
e
s 00001/00001/00848
d D 6.26 93/05/21 19:48:32 eric 33 32
c $=P is top-level pseudo-domains
e
s 00002/00000/00847
d D 6.25 93/05/11 08:32:25 eric 32 31
c document SMTP_MAILER_FLAGS and UUCP_MAILER_FLAGS
e
s 00002/00001/00845
d D 6.24 93/05/06 13:57:01 eric 31 30
c document change in alias file syntax
e
s 00004/00001/00842
d D 6.23 93/05/05 07:12:37 eric 30 29
c O8 => O7; add Oj
e
s 00001/00001/00842
d D 6.22 93/04/27 07:01:46 eric 29 28
c fix minor doc botch (from Bryan Costales)
e
s 00004/00000/00839
d D 6.21 93/04/14 13:11:01 eric 28 27
c add FEATURE(nocanonify)
e
s 00005/00000/00834
d D 6.20 93/04/10 11:08:20 eric 27 26
c document FEATURE(uucpdomain)
e
s 00008/00000/00826
d D 6.19 93/04/10 10:58:22 eric 26 25
c document FEATURE(bitdomain)
e
s 00002/00000/00824
d D 6.18 93/03/29 17:26:10 eric 25 24
c add O and V options
e
s 00004/00004/00820
d D 6.17 93/03/25 10:29:05 eric 24 23
c change some of the defaults
e
s 00013/00001/00811
d D 6.16 93/03/23 16:15:25 eric 23 22
c mailertable feature; FEATURE can take arguments
e
s 00000/00004/00812
d D 6.15 93/03/18 16:02:02 eric 22 21
c clean up confUSERDB_SPEC
e
s 00005/00000/00811
d D 6.14 93/03/18 15:53:37 eric 21 20
c document confUSERDB_SPEC
e
s 00006/00003/00805
d D 6.13 93/03/16 12:26:38 eric 20 19
c add LOCAL_RULE_1 and LOCAL_RULE_2; delete $<
e
s 00005/00000/00803
d D 6.12 93/03/06 11:05:12 eric 19 18
c document FEATURE(notsticky)
e
s 00001/00001/00802
d D 6.11 93/03/05 07:36:07 eric 18 17
c fix documentation of confMESSAGE_TIMEOUT
e
s 00010/00000/00793
d D 6.10 93/03/03 10:07:49 eric 17 16
c allow redefinition of sendmail.cw path; mention that DOMAIN h
c is really optional
e
s 00099/00001/00694
d D 6.9 93/03/02 13:43:47 eric 16 15
c document Sam's FlexFAX software
e
s 00010/00000/00685
d D 6.8 93/02/27 08:23:56 eric 15 14
c add FEATURE(nouucp) and improve "getting started" description
e
s 00001/00001/00684
d D 6.7 93/02/21 12:09:36 eric 14 13
c changes for "r" option generalization
e
s 00038/00007/00647
d D 6.6 93/02/20 14:19:27 eric 13 12
c add documentation of usenet and redirect mailers and defaults for
c b and p options
e
s 00046/00014/00608
d D 6.5 93/02/19 16:31:08 eric 12 11
c document SMART_HOST support
e
s 00003/00010/00619
d D 6.4 93/02/14 15:10:42 eric 11 10
c delete no_wildcard_MX
e
s 00084/00004/00545
d D 6.3 93/02/12 12:11:30 eric 10 9
c make everything configurable on M4 macros
e
s 00023/00001/00526
d D 6.2 93/01/18 14:41:48 eric 9 8
c document MAIL_HUB
e
s 00000/00000/00527
d D 6.1 92/12/21 16:13:05 eric 8 7
c Release 6
e
s 00022/00030/00505
d D 2.7 92/12/20 16:25:46 eric 7 6
c editorial changes
e
s 00283/00042/00252
d D 2.6 92/12/20 14:16:35 eric 6 5
c update for R6-alpha release
e
s 00001/00001/00293
d D 2.5 92/11/13 23:29:52 eric 5 4
c quote the argument to VERSIONID
e
s 00007/00006/00287
d D 2.4 92/07/09 13:17:52 eric 4 3
c document some of the other internal macros and rules
e
s 00018/00011/00275
d D 2.3 91/10/03 15:08:09 eric 3 2
c snapshot
e
s 00036/00010/00250
d D 2.2 91/10/02 22:01:47 eric 2 1
c snapshot -- some more stuff added
e
s 00260/00000/00000
d D 2.1 91/10/02 14:46:54 eric 1 0
c date and time created 91/10/02 14:46:54 by eric
e
u
U
t
T
I 1
D 6
%W% (Berkeley) %G%
E 6

D 6
This document describes the sendmail configuration files being used
at Berkeley.  There have been several previous versions.  This file
is being written on 24 July 1991, and will probably not be generally
available for several months.
E 6

D 6
INSTALLING A NEW SITE CONFIGURATION
E 6
I 6
		NEW SENDMAIL CONFIGURATION FILES
E 6

D 6
Configuration files are contained in the subdirectory "cf", with a
suffix ".mc".  They must be run through "m4" to produce a ".cf" file.
E 6
I 6
		Eric Allman <eric@CS.Berkeley.EDU>
E 6

D 6
Every .mc file SHOULD begin with:
E 6
I 6
		%W% (Berkeley) %G%
E 6

D 6
	divert(-1)
	COPYRIGHT NOTICE
	divert(0)
E 6

D 6
If you don't care about copyrights, you can omit this.  If you try
to patent this, I'll be very, very pissed.  I haven't patented a lot
of hot ideas so that you can use them; I expect reciprocal courtesy.
A copyleft is a copyright by another name.
E 6
I 6
This document describes the sendmail configuration files being used
D 42
at Berkeley.  These use features in the new (R6) sendmail, and although
E 42
I 42
D 68
at Berkeley.  These use features in the new (R8) sendmail, and although
E 42
there is an ``OLDSENDMAIL'' mode, they haven't really been tested on
D 7
old versions and cannot be expected to work well.
E 7
I 7
old versions of sendmail and cannot be expected to work well.
E 68
I 68
at Berkeley.  These use features in the new (R8) sendmail; they will
not work on other versions.
E 68
E 7
E 6

D 6
The copyright, if any, MUST be followed by:
E 6
I 6
These configuration files are probably not as general as previous
D 61
versions, and don't handle as many of the wierd cases automagically.
E 61
I 61
versions, and don't handle as many of the weird cases automagically.
E 61
I was able to simplify by them for two reasons.  First, the network
has become more consistent -- for example, at this point, everyone
on the internet is supposed to be running a name server, so hacks to
handle NIC-registered hosts can go away.  Second, I assumed that a
subdomain would be running SMTP internally -- UUCP is presumed to be
a long-haul protocol.  I realize that this is not universal, but it
does describe the vast majority of sites with which I am familiar,
including those outside the US.
E 6

D 6
	include(../m4/cf.m4)
E 6
I 6
D 61
Of course, the downside of this is that if you do live in a wierd
world, things are going to get wierder for you.  I'm sorry about that,
E 61
I 61
Of course, the downside of this is that if you do live in a weird
world, things are going to get weirder for you.  I'm sorry about that,
E 61
but at the time we at Berkeley had a problem, and it seemed like the
right thing to do.
E 6

D 6
This will pull in the M4 macros you will need to make sense of
everything else.  As the saying goes, don't think about it, just
do it.  If you don't do it, don't bother reading the rest of this
file.
E 6
I 6
D 7
This package requires a relatively new version of M4.  SunOS's
/usr/5bin/m4 or BSD-Net/2's m4 both work.  GNU m4 (which is a language
unto itself) also works, but I don't intend to work so hard to keep
this up in the future.  [Note to GNU folks:  the construct
E 7
I 7
This package requires a post-V7 version of m4; if you are running the
4.2bsd, SysV.2, or 7th Edition version, I suggest finding a friend with
a newer version.  You can m4-expand on their system, then run locally.
D 54
SunOS's /usr/5bin/m4 or BSD-Net/2's m4 both work.  GNU m4 (which is a
language unto itself) also works, but I don't intend to work so hard
to keep this up in the future.  [Note to GNU folks:  the construct
E 7
"define(`FOO')" should work without my having to add a null value.]
E 54
I 54
SunOS's /usr/5bin/m4 or BSD-Net/2's m4 both work.  GNU m4 version 1.1
also works.  Unfortunately, I'm told that the M4 on BSDI 1.0 doesn't
work -- you'll have to use a Net/2 or GNU version.
E 54
E 6

I 15
IF YOU DON'T HAVE A BERKELEY MAKE, don't despair!  Just run
D 50
"m4 foo.mc > foo.cf" -- that should be all you need.
E 50
I 50
"m4 foo.mc > foo.cf" -- that should be all you need.  There is also
a fairly crude (but functional) Makefile.dist that works on the
old version of make.
E 50

To get started, you may want to look at tcpproto.mc (for TCP-only
D 49
sites) and uucpproto.m4 (for UUCP-only sites).  Others are versions
E 49
I 49
sites), uucpproto.mc (for UUCP-only sites), and clientproto.mc (for
clusters of clients using a single mail host).  Others are versions
E 49
that we use at Berkeley, although not all are in current use.  For
example, ucbarpa has gone away, but I've left ucbarpa.mc in because
it demonstrates some interesting techniques.

E 15
D 7
At this point, let me make one thing perfectly clear.  I am a rope
salesman.  I sell you rope.  I haven't produced a new M4 system
that detects latent bugs, nor have I tried to fix the old one.
(However, I have decided to rely on a post-V7 version; if you
are running the 4.2bsd, SysV.2, or 7th Edition version, I suggest
finding a friend with a newer version.  You can m4-expand on
their system, then run locally.)

E 7
I 6
I'm not pretending that this README describes everything that these
configuration files can do; clever people can probably tweak them
to great effect.  But it should get you started.

I 58
*******************************************************************
***  BE SURE YOU CUSTOMIZE THESE FILES!  They have some		***
***  Berkeley-specific assumptions built in, such as the name	***
***  of our UUCP-relay.  You'll want to create your own domain	***
***  description, and use that in place of domain/Berkeley.m4.	***
*******************************************************************

E 58
I 13

E 13
D 7
These files only include minimal database primitives, largely because
of inertia -- and those haven't really been tested at Berkeley.

E 7
+--------------------------+
| INTRODUCTION AND EXAMPLE |
+--------------------------+

Configuration files are contained in the subdirectory "cf", with a
suffix ".mc".  They must be run through "m4" to produce a ".cf" file.

E 6
D 92
Let's examine a typical .mc file (cf/cs-exposed.mc):
E 92
I 92
Let's examine a typical .mc file (cf/cs-hpux9.mc):
E 92

	divert(-1)
	#
	# Copyright (c) 1983 Eric P. Allman
D 92
	# Copyright (c) 1988 The Regents of the University of California.
	# All rights reserved.
E 92
I 92
	# Copyright (c) 1988, 1993
	#	The Regents of the University of California.  All rights reserved.
E 92
	#
D 92
	# Redistribution and use in source and binary forms are permitted
	# provided that the above copyright notice and this paragraph are
	# duplicated in all such forms and that any documentation,
	# advertising materials, and other materials related to such
	# distribution and use acknowledge that the software was developed
	# by the University of California, Berkeley.  The name of the
	# University may not be used to endorse or promote products derived
	# from this software without specific prior written permission.
	# THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
	# IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
	# WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
E 92
I 92
	# Redistribution and use in source and binary forms, with or without
	# modification, are permitted provided that the following conditions
	# are met:
	# 1. Redistributions of source code must retain the above copyright
	#    notice, this list of conditions and the following disclaimer.
	# 2. Redistributions in binary form must reproduce the above copyright
	#    notice, this list of conditions and the following disclaimer in
	#    the documentation and/or other materials provided with the
	#    distribution.
	# 3. All advertising materials mentioning features or use of this
	#    software #    must display the following acknowledgement:
	#	This product includes software developed by the University of
	#	California, Berkeley and its contributors.
	# 4. Neither the name of the University nor the names of its
	#    contributors may be used to endorse or promote products derived
	#    from this software without specific prior written permission.
E 92
	#
I 92
	# THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS''
	# AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
	# THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	# PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS
	# BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,
	# OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
	# OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
	# BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
	# WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
	# OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
	# EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	#
E 92

I 92
	#
	#  This is a Berkeley-specific configuration file for HP-UX 9.x.
	#  It applies only the the Computer Science Division at Berkeley,
	#  and should not be used elsewhere.   It is provided on the sendmail
	#  distribution as a sample only.  To create your own configuration
	#  file, create an appropriate domain file in ../domain, change the
	#  `DOMAIN' macro below to reference that file, and copy the result
	#  to a name of your own choosing.
	#

E 92
D 6
If you copy this file and modify it, you should maintain this copyright
notice.  If you actually start from scratch you can delete it -- but be
honest!
E 6
I 6
The divert(-1) will delete the crud in the resulting output file.
D 7
The copyright notice is what your lawyers require.  My lawyers require
E 7
I 7
D 92
The copyright notice is what your lawyers require.  Our lawyers require
E 7
the one that I've included in my files. A copyleft is a copyright by
another name.
E 92
I 92
The copyright notice can be replace by whatever your lawyers require;
our lawyers require the one that I've included in my files.  A copyleft
is a copyright by another name.
E 92
E 6

I 6
The next line MUST be

E 6
	include(`../m4/cf.m4')

D 6
You need this line!
E 6
I 6
This will pull in the M4 macros you will need to make sense of
everything else.  As the saying goes, don't think about it, just
do it.  If you don't do it, don't bother reading the rest of this
file.
E 6

D 2
	VERSIONID(%W% (Berkeley) %G%)
E 2
I 2
D 5
	VERSIONID(<SCCS or RCS version id>)
E 5
I 5
	VERSIONID(`<SCCS or RCS version id>')
E 5
E 2

VERSIONID is a macro that stuffs the version information into the
resulting file.  We use SCCS; you could use RCS, something else, or
D 6
omit it completely.
E 6
I 6
omit it completely.  This is not the same as the version id included
in SMTP greeting messages -- this is defined in m4/version.m4.
E 6

D 2
	DOMAIN(cs.exposed)dnl
E 2
I 2
D 92
	DOMAIN(cs.exposed)
E 92
I 92
	OSTYPE(hpux9)dnl
E 92
E 2

D 92
This example exposes the host inside of the CS subdomain -- that is,
it doesn't try to hide the name of the workstation to the outside
world.  Changing this to DOMAIN(cs.hidden) would have made outgoing
messages refer to "<username>@CS.Berkeley.EDU" instead of using the
D 6
local hostname.  This can also be effected by using:
E 6
I 6
D 42
local hostname.  Internaly this is effected by using
E 42
I 42
local hostname.  Internally this is effected by using
E 42
"MASQUERADE_AS(CS.Berkeley.EDU)".
E 92
I 92
You must specify an OSTYPE to properly configure things such as the
pathname of the help and status files, the flags needed for the local
mailer, and other important things.  If you omit it, you will get an
error when you try to build the configuration.  Look at the ostype
directory for the list of known operating system types.
E 92
E 6

I 92
	DOMAIN(CS.Berkeley.EDU)dnl

This example is specific to the Computer Science Division at Berkeley.
You can use "DOMAIN(generic)" to get a sufficiently bland definition
that may well work for you, or you can create a customized domain
definition appropriate for your environment.

	MAILER(local)
E 92
D 6
	define(`MASQUERADE_AS', `masquerade.host.name.domain.name')dnl

in the ".mc" file.

E 6
D 2
	MAILER(local)dnl
	MAILER(smtp)dnl
E 2
I 2
D 3
	MAILER(local)
E 3
	MAILER(smtp)
E 2

D 3
These describe the mailers used at the default CS site site.  
E 3
I 3
These describe the mailers used at the default CS site site.  The
local mailer is always included automatically.
E 3

I 13

E 13
I 6
+--------+
| OSTYPE |
+--------+

E 6
D 92
Note that cf/cs-exposed.mc omits an OSTYPE macro -- this assumes
default Computer Science Division environment.  There are several
D 6
environments available: bsd4.3, bsd4.4, riscos4.5, sunos3.5,
sunos4.1, and ultrix4.1.  These change things like the location
of the alias file and queue directory.
E 6
I 6
D 7
environments available: bsd4.3, bsd4.4, hpux, irix, osf1, riscos4.5,
sunos3.5, sunos4.1, and ultrix4.1.  These change things like the
location of the alias file and queue directory.  Some of these
are identical.
E 7
I 7
explicit environments available: bsd4.3, bsd4.4, hpux, irix, osf1,
riscos4.5, sunos3.5, sunos4.1, and ultrix4.1.  These change things
like the location of the alias file and queue directory.  Some of
these files are identical to one another.
E 92
I 92
You MUST define an operating system environment, or the configuration
file build will puke.  There are several environments available; look
at the "ostype" directory for the current list.  This macro changes
things like the location of the alias file and queue directory.  Some
of these files are identical to one another.
E 92
E 7
E 6

D 6
MAILERS
E 6
I 6
D 92
Operating system definitions are easy to write.  They may define
the following variables (everything defaults, so an ostype file
may be empty).
E 92
I 92
Operating system definitions are usually easy to write.  They may define
the following variables (everything defaults, so an ostype file may be
empty).  Unfortunately, the list of configuration-supported systems is
not as broad as the list of source-supported systems, since many of
the source contributors do not include corresponding ostype files.
E 92
E 6

I 6
ALIAS_FILE		[/etc/aliases] The location of the text version
D 31
			of the alias file.
E 31
I 31
			of the alias file(s).  It can be a comma-separated
D 66
			list of names.
E 66
I 66
			list of names (but be sure you quote values with
D 86
			comments in them -- for example, use
E 86
I 86
			commas in them -- for example, use
E 86
				define(`ALIAS_FILE', `a,b')
			to get "a" and "b" both listed as alias files;
			otherwise the define() primitive only sees "a").
E 66
E 31
HELP_FILE		[/usr/lib/sendmail.hf] The name of the file
			containing information printed in response to
			the SMTP HELP command.
D 13
LOCAL_MAILER		[/bin/mail] The program used to deliver local mail.
LOCAL_SHELL		[/bin/sh] The shell used to deliver piped email.
E 13
QUEUE_DIR		[/var/spool/mqueue] The directory containing
			queue files.
STATUS_FILE		[/etc/sendmail.st] The file containing status
			information.
I 13
LOCAL_MAILER_PATH	[/bin/mail] The program used to deliver local mail.
E 13
D 46
LOCAL_MAILER_FLAGS	[rn] The flags used by the local mailer.  The
			flags lsDFMm are always included.
E 46
I 46
LOCAL_MAILER_FLAGS	[rmn] The flags used by the local mailer.  The
			flags lsDFM are always included.
E 46
I 40
LOCAL_MAILER_ARGS	[mail -d $u] The arguments passed to deliver local
			mail.
I 85
LOCAL_MAILER_MAX	[undefined] If defined, the maximum size of local
			mail that you are willing to accept.
I 93
LOCAL_MAILER_CHARSET	[undefined] If defined, messages containing 8-bit data
			that ARRIVE from an address that resolves to the
			local mailer and which are converted to MIME will be
			labelled with this character set.
E 93
E 85
E 40
I 13
LOCAL_SHELL_PATH	[/bin/sh] The shell used to deliver piped email.
I 41
LOCAL_SHELL_FLAGS	[eu] The flags used by the shell mailer.  The
			flags lsDFM are always included.
LOCAL_SHELL_ARGS	[sh -c $u] The arguments passed to deliver "prog"
			mail.
I 80
LOCAL_SHELL_DIR		[$z:/] The directory search path in which the
			shell should run.
E 80
E 41
USENET_MAILER_PATH	[/usr/lib/news/inews] The name of the program
			used to submit news.
USENET_MAILER_FLAGS	[rlsDFMmn] The mailer flags for the usenet mailer.
USENET_MAILER_ARGS	[-m -h -n] The command line arguments for the
			usenet mailer.
I 60
USENET_MAILER_MAX	[100000] The maximum size of messages that will
			be accepted by the usenet mailer.
E 60
I 32
D 42
SMTP_MAILER_FLAGS	[undefined] Flags added to SMTP mailer.
UUCP_MAILER_FLAGS	[undefined] Flags added to UUCP mailer.
E 42
I 42
SMTP_MAILER_FLAGS	[undefined] Flags added to SMTP mailer.  Default
D 74
			flags are `mDFMUX' (and `a' for esmtp mailer).
E 74
I 74
			flags are `mDFMUX' for all SMTP-based mailers; the
			"esmtp" mailer adds `a' and "smtp8" adds `8'.
E 74
I 60
SMTP_MAILER_MAX		[undefined] The maximum size of messages that will
D 74
			be transported using the smtp or esmtp mailers.
E 74
I 74
			be transported using the smtp, smtp8, or esmtp
			mailers.
SMTP_MAILER_ARGS	[IPC $h] The arguments passed to the smtp mailer.
			About the only reason you would want to change this
			would be to change the default port.
ESMTP_MAILER_ARGS	[IPC $h] The arguments passed to the esmtp mailer.
SMTP8_MAILER_ARGS	[IPC $h] The arguments passed to the smtp8 mailer.
RELAY_MAILER_ARGS	[IPC $h] The arguments passed to the relay mailer.
I 93
SMTP_MAILER_CHARSET	[undefined] If defined, messages containing 8-bit data
			that ARRIVE from an address that resolves to one of
			the SMTP mailers and which are converted to MIME will
			be labelled with this character set.
E 93
E 74
E 60
UUCP_MAILER_FLAGS	[undefined] Flags added to UUCP mailer.  Default
D 87
			flags are `DFMhuU' (and `m' for suucp mailer, minus
			`U' for uucp-dom mailer).
E 87
I 87
			flags are `DFMhuU' (and `m' for uucp-new mailer,
			minus `U' for uucp-dom mailer).
E 87
E 42
I 40
D 81
UUCP_MAILER_ARGS	[uux - -r -z -a$f -gC $h!rmail ($u)] The arguments
E 81
I 81
UUCP_MAILER_ARGS	[uux - -r -z -a$g -gC $h!rmail ($u)] The arguments
E 81
			passed to the UUCP mailer.
I 41
D 93
UUCP_MAX_SIZE		[100000] The maximum size message accepted for
E 93
I 93
UUCP_MAILER_MAX		[100000] The maximum size message accepted for
E 93
			transmission by the UUCP mailers.
I 93
UUCP_MAILER_CHARSET	[undefined] If defined, messages containing 8-bit data
			that ARRIVE from an address that resolves to one of
			the UUCP mailers and which are converted to MIME will
			be labelled with this character set.
E 93
I 60
FAX_MAILER_PATH		[/usr/local/lib/fax/mailfax] The program used to
			submit FAX messages.
FAX_MAILER_MAX		[100000] The maximum size message accepted for
			transmission by FAX.
I 77
POP_MAILER_PATH		[/usr/lib/mh/spop] The pathname of the POP mailer.
POP_MAILER_FLAGS	[Penu] Flags added to POP mailer.  Flags "lsDFM"
			are always added.
POP_MAILER_ARGS		[pop $u] The arguments passed to the POP mailer.
I 78
PROCMAIL_MAILER_FLAGS	[Shu] Flags added to Procmail mailer.  Flags
			``DFMmn'' are always set.
PROCMAIL_MAILER_ARGS	[procmail -m $h $f $u] The arguments passed to
			the Procmail mailer.
I 85
PROCMAIL_MAILER_MAX	[undefined] If set, the maximum size message that
			will be accepted by the procmail mailer.
I 97
MAIL11_MAILER_PATH	[/usr/etc/mail11] The path to the mail11 mailer.
MAIL11_MAILER_FLAGS	[nsFx] Flags for the mail11 mailer.
MAIL11_MAILER_ARGS	[mail11 $g $x $h $u] Arguments passed to the mail11
			mailer.
E 97
E 85
E 78
E 77
E 60
E 41
E 40
E 32
E 13
D 61
HOSTMAP_SPEC		[dbm -o /etc/hostmap] The value for the builtin
			hostmap key definition.  You can redefine this
			to change the class, flags, and filename of
			the hostmap.  The default flag (-o) makes this
			map optional.
E 61

D 48
In addition, the following boolean flags may be defined -- the value
is ignored.

NEED_DOMAIN		If set, the $j macro is defined as $w.$D.
			If not set, $j is defined as $w.  If this is
			set, the domain must be defined using the line
			DD<domainname> (probably in the domain file,
			but possibly in the .mc file).  You will only
			need this if you define your system hostname
			without a domain (type "hostname" -- if it
D 13
			has no dots in the output, you qualify) or if
			you are running Ultrix or OSF/1 sendmail.
			Either of these is probably a mistake.
E 13
I 13
			has no dots in the output, you qualify) AND
			if you are not running the nameserver AND if
			the first (canonical) name in /etc/hosts for
			your machine has no domain -- OR if you are
			running Ultrix or OSF/1 sendmail.  Either of
			these is probably a mistake.
E 13

E 48
+---------+
| DOMAINS |
+---------+

You will probably want to collect domain-dependent defines into one
file, referenced by the DOMAIN macro.  For example, our Berkeley
domain file includes definitions for several internal distinguished
hosts:

D 96
UUCP_RELAY	The host that will forward UUCP-addressed email.
E 96
I 96
UUCP_RELAY	The host that will accept UUCP-addressed email.
E 96
		If not defined, all UUCP sites must be directly
D 42
		connected.
E 42
I 42
D 45
		connected.  This can be an SMTP hostname or a
		mailer:hostname.
E 45
I 45
		connected.
E 45
E 42
D 96
BITNET_RELAY	The host that will forward BITNET-addressed email.
E 96
I 96
BITNET_RELAY	The host that will accept BITNET-addressed email.
E 96
		If not defined, the .BITNET pseudo-domain won't work.
I 96
DECNET_RELAY	The host that will accept DECNET-addressed email.
		If not defined, the .DECNET pseudo-domain and addresses
		of the form node::user will not work.
FAX_RELAY	The host that will accept mail to the .FAX pseudo-domain.
		The "fax" mailer overrides this value.
E 96
I 42
D 45
		Can be an SMTP hostname or a mailer:hostname.
E 45
E 42
D 56
CSNET_RELAY	The host that will forward CSNET-addressed email.
		If not defined, the .CSNET pseudo-domain won't work.
E 56
I 42
D 45
		Can be an SMTP hostname or a mailer:hostname.
E 45
E 42
D 88
LOCAL_RELAY	The site that will handle unqualified names -- that
		is, names with out an @domain extension.  If not set,
		they are assumed to belong on this machine.  This
		allows you to have a central site to store a
E 88
I 88
LOCAL_RELAY	DEPRECATED.  The site that will handle unqualified
		names -- that is, names with out an @domain extension.
		If not set, they are assumed to belong on this machine.
		This allows you to have a central site to store a
E 88
		company- or department-wide alias database.  This
D 88
		only works at small sites, and there are better
D 42
		methods.
E 42
I 42
D 45
		methods.  Can be an SMTP hostname or a mailer:hostname.
E 45
I 45
		methods.
E 88
I 88
		only works at small sites, and only with some user
		agents.
E 88
I 74
LUSER_RELAY	The site that will handle lusers -- that is, apparently
		local names that aren't local accounts or aliases.
E 74
E 45
E 42

I 45
D 74
Each of these can be either ``mailer:hostname'' (in which case the
E 74
I 74
Any of these can be either ``mailer:hostname'' (in which case the
E 74
D 87
mailer is the internal mailer name, such as ``suucp'' and the hostname
E 87
I 87
mailer is the internal mailer name, such as ``uucp-new'' and the hostname
E 87
is the name of the host as appropriate for that mailer) or just a
``hostname'', in which case a default mailer type (usually ``relay'',
D 46
a variant on SMTP) is used.
E 46
I 46
a variant on SMTP) is used.  WARNING: if you have a wildcard MX
record matching your domain, you probably want to define these to
have a trailing dot so that you won't get the mail diverted back
to yourself.
E 46

E 45
The domain file can also be used to define a domain name, if needed
D 7
(directly using "DD<domain>") and set certain site-wide features,
such as no_wildcard_MX.  If all hosts at your site masquerade
behind one email name, you could also use MASQUERADE_AS here.
E 7
I 7
D 11
(using "DD<domain>") and set certain site-wide features, such as
no_wildcard_MX.  If all hosts at your site masquerade behind one
email name, you could also use MASQUERADE_AS here.
E 11
I 11
(using "DD<domain>") and set certain site-wide features.  If all hosts
at your site masquerade behind one email name, you could also use
MASQUERADE_AS here.
E 11
E 7

I 17
You do not have to define a domain -- in particular, if you are a
single machine sitting off somewhere, it is probably more work than
it's worth.  This is just a mechanism for combining "domain dependent
knowledge" into one place.

E 17
+---------+
| MAILERS |
+---------+

E 6
There are fewer mailers supported in this version than the previous
version, owing mostly to a simpler world.

local		The local and prog mailers.  You will almost always
		need these; the only exception is if you relay ALL
D 7
		your mail to another site.
E 7
I 7
		your mail to another site.  This mailer is included
		automatically.
E 7

smtp		The Simple Mail Transport Protocol mailer.  This does
		not hide hosts behind a gateway or another other
		such hack; it assumes a world where everyone is
D 40
		running the name server.
E 40
I 40
		running the name server.  This file actually defines
D 74
		three mailers: "smtp" for regular (old-style) SMTP to
E 74
I 74
		four mailers: "smtp" for regular (old-style) SMTP to
E 74
		other servers, "esmtp" for extended SMTP to other
D 74
		servers, and "relay" for transmission to our
		RELAY_HOST or MAILER_HUB.
E 74
I 74
		servers, "smtp8" to do SMTP to other servers without
		converting 8-bit data to MIME (essentially, this is
		your statement that you know the other end is 8-bit
		clean even if it doesn't say so), and "relay" for
		transmission to our RELAY_HOST, LUSER_RELAY, or
		MAILER_HUB.
E 74
E 40

uucp		The Unix-to-Unix Copy Program mailer.  Actually, this
D 69
		defines two mailers, "uucp" and "suucp".  The latter
		is for when you know that the UUCP mailer at the other
		end can handle multiple recipients in one transfer.
I 6
		When you invoke this, sendmail looks for all names in
E 69
I 69
		defines two mailers, "uucp-old" (a.k.a. "uucp") and
		"uucp-new" (a.k.a. "suucp").  The latter is for when you
		know that the UUCP mailer at the other end can handle
		multiple recipients in one transfer.  If the smtp mailer
		is also included in your configuration, two other mailers
D 87
		("uucp-dom" and "uucp-uudom") are also defined.  When you
E 87
I 87
		("uucp-dom" and "uucp-uudom") are also defined [warning:
		you MUST specify MAILER(smtp) before MAILER(uucp)].  When you
E 87
		include the uucp mailer, sendmail looks for all names in
E 69
D 57
		the $=U class and sends them to the uucp mailer; all
		names in the $=Y class are sent to suucp.  Note that
E 57
I 57
		the $=U class and sends them to the uucp-old mailer; all
		names in the $=Y class are sent to uucp-new; and all
		names in the $=Z class are sent to uucp-uudom.  Note that
E 57
		this is a function of what version of rmail runs on
		the receiving end, and hence may be out of your control.
I 42
D 57
		If smtp is defined, it also defines a "uucp-dom" mailer
		that uses domain-style rewriting.
E 57
I 57
D 69
		If smtp is defined, it also defines "uucp-dom" and
		"uucp-uudom" mailers that use domain-style rewriting.
E 69
		See the section below describing UUCP mailers in more
		detail.
E 57
E 42
E 6

I 13
usenet		Usenet (network news) delivery.  If this is specified,
		an extra rule is added to ruleset 0 that forwards all
		local email for users named ``group.usenet'' to the
		``inews'' program.  Note that this works for all groups,
		and may be considered a security problem.

I 16
fax		Facsimile transmission.  This is experimental and based
		on Sam Leffler's FlexFAX software.  For more information,
		see below.
E 16

I 55
pop		Post Office Protocol.

I 78
procmail	An interface to procmail (does not come with sendmail).
		This is designed to be used in mailertables.  For example,
		a common question is "how do I forward all mail for a given
		domain to a single person?".  If you have this mailer
		defined, you could set up a mailertable reading:

			host.com	procmail:/etc/procmailrcs/host.com

		with the file /etc/procmailrcs/host.com reading:

			:0	# forward mail for host.com
			! -oi -f $1 person@other.host

		This would arrange for (anything)@host.com to be sent
		to person@other.host.  Within the procmail script, $1 is
		the name of the sender and $2 is the name of the recipient.
		If you use this with FEATURE(local_procmail), the FEATURE
		should be listed first.

I 97
mail11		The DECnet mail11 mailer, useful only if you have the mail11
		program from gatekeeper.dec.com:/pub/DEC/gwtools (and
		DECnet, of course).

E 97
E 78
I 76
The local mailer accepts addresses of the form "user+detail", where
the "+detail" is not used for mailbox matching but is available
D 78
to certain local mail programs (in particular, see FEATURE(procmail)).
E 78
I 78
to certain local mail programs (in particular, see FEATURE(local_procmail)).
E 78
For example, "eric", "eric+sendmail", and "eric+sww" all indicate
the same user, but additional arguments <null>, "sendmail", and "sww"
may be provided for use in sorting mail.
E 76
E 55
I 16

I 76

E 76
E 16
E 13
I 2
D 6
EXTENSIONS
E 6
I 6
+----------+
| FEATURES |
+----------+
E 6

I 6
Special features can be requested using the "FEATURE" macro.  For
example, the .mc line:

	FEATURE(use_cw_file)

tells sendmail that you want to have it read an /etc/sendmail.cw
D 23
file to get values for class $=w.  Available features are:
E 23
I 23
file to get values for class $=w.  The FEATURE may contain a single
optional parameter -- for example:
E 23

I 23
	FEATURE(mailertable, dbm /usr/lib/mailertable)

Available features are:

E 23
use_cw_file	Read the file /etc/sendmail.cw file to get alternate
		names for this host.  This might be used if you were
		on a host that MXed for a dynamic set of other
		hosts.  If the set is static, just including the line
		"Cw<name1> <name2> ..." is probably superior.
I 17
		The actual filename can be overridden by redefining
		confCW_FILE.
I 49

E 49
E 17
I 13
redirect	Reject all mail addressed to "address.REDIRECT" with
		a ``551 User not local; please try <address>'' message.
		If this is set, you can alias people who have left
		to their new address with ".REDIRECT" appended.
I 49

E 49
I 15
nouucp		Don't do anything special with UUCP addresses at all.
I 49

E 49
I 28
nocanonify	Don't pass addresses to $[ ... $] for canonification.
		This would generally only be used by sites that only
		act as mail gateways or which have user agents that do
D 45
		full canonification themselves.
E 45
I 45
		full canonification themselves.  You may also want to
		use "define(`confBIND_OPTS',`-DNSRCH -DEFNAMES')" to
		turn off the usual resolver options that do a similar
		thing.
I 49

E 49
E 45
E 28
I 19
D 74
notsticky	By default, email sent to "user@local.host" are marked
E 74
I 74
D 75
stickydomain	If set, email sent to "user@local.host" are marked
E 75
I 75
stickyhost	If set, email sent to "user@local.host" are marked
E 75
E 74
		as "sticky" -- that is, the local addresses aren't
		matched against UDB and don't go through ruleset 5.
D 74
		This features disables this treatment.  It would
		normally be used on network gateway machines.
E 74
I 74
		This is used if you want a set up where "user" is
		not necessarily the same as "user@local.host", e.g.,
		to make a distinct domain-wide namespace.  Prior to
		8.7 this was the default, and notsticky was used to
		turn this off.
E 74
I 49

E 49
I 23
mailertable	Include a "mailer table" which can be used to override
		routing for particular domains.  The argument of the
		FEATURE may be the key definition.  If none is specified,
		the definition used is:
D 40
			hash /etc/mailertable.db -o
		Keys in this database must be of the form:
E 40
I 40
D 47
			hash /etc/mailertable -o
E 47
I 47
			hash -o /etc/mailertable
E 47
		Keys in this database are fully qualified domain names
		or partial domains preceded by a dot -- for example,
		"vangogh.CS.Berkeley.EDU" or ".CS.Berkeley.EDU".
		Values must be of the form:
E 40
			mailer:domain
I 40
		where "mailer" is the internal mailer name, and "domain"
		is where to send the message.  These maps are not
		reflected into the message header.
I 49

E 49
domaintable	Include a "domain table" which can be used to provide
D 67
		full domains on unqualified (single word) hosts.  The
		argument of the FEATURE may be the key definition.  If
		none is specified, the definition used is:
E 67
I 67
		domain name mapping.  Use of this should really be
		limited to your own domains.  It may be useful if you
		change names (e.g., your company changes names from
		oldname.com to newname.com).  The argument of the
		FEATURE may be the key definition.  If none is specified,
		the definition used is:
E 67
D 47
			hash /etc/domaintable -o
E 47
I 47
			hash -o /etc/domaintable
E 47
D 67
		The key in this table is the unqualified host name; the
		value is the fully qualified domain.  Anything in the
E 67
I 67
		The key in this table is the domain name; the value is
		the new (fully qualified) domain.  Anything in the
E 67
		domaintable is reflected into headers; that is, this
		is done in ruleset 3.
I 49

E 49
E 40
I 26
bitdomain	Look up bitnet hosts in a table to try to turn them into
		internet addresses.  The table can be built using the
D 46
		bitdomain program contributed by John Gardiner Meyers.
E 46
I 46
		bitdomain program contributed by John Gardiner Myers.
E 46
		The argument of the FEATURE may be the key definition; if
		none is specified, the definition used is:
D 47
			hash /etc/bitdomain.db -o
E 47
I 47
			hash -o /etc/bitdomain.db
E 47
		Keys are the bitnet hostname; values are the corresponding
		internet hostname.
I 49

E 49
I 27
uucpdomain	Similar feature for UUCP hosts.  The default map definition
		is:
D 47
			hash /etc/uudomain.db -o
E 47
I 47
			hash -o /etc/uudomain.db
E 47
		At the moment there is no automagic tool to build this
		database.
I 49

E 49
I 34
always_add_domain
		Include the local host domain even on locally delivered
		mail.  Normally it is not added unless it is already
		present.
I 49

E 49
I 40
allmasquerade	If masquerading is enabled (using MASQUERADE_AS), this
		feature will cause recipient addresses to also masquerade
		as being from the masquerade host.  Normally they get
		the local hostname.  Although this may be right for
		ordinary users, it can break local aliases.  For example,
		if you send to "localalias", the originating sendmail will
		find that alias and send to all members, but send the
		message with "To: localalias@masqueradehost".  Since that
		alias likely does not exist, replies will fail.  Use this
		feature ONLY if you can guarantee that the ENTIRE
		namespace on your masquerade host supersets all the
		local entries.
I 49

E 49
I 46
nodns		We aren't running DNS at our site (for example,
		we are UUCP-only connected).  It's hard to consider
		this a "feature", but hey, it had to go somewhere.
I 49

nullclient	This is a special case -- it creates a stripped down
		configuration file containing nothing but support for
D 51
		forwarding all mail to a central hub.  The argument
		is the name of that hub.  No other features should be
		used, and no mailers need be defined -- this is all
		implicit.  The client always masquerades as the mail
		hub.  No aliasing or forwarding is done.
E 51
I 51
		forwarding all mail to a central hub via a local
		SMTP-based network.  The argument is the name of that
		hub.
		
		The only other feature that should be used in conjunction
		with this one is "nocanonify" (this causes addresses to
		be sent unqualified via the SMTP connection; normally
		they are qualifed with the masquerade name, which
		defaults to the name of the hub machine).  No mailers
		should be defined.  No aliasing or forwarding is done.
E 51
E 49
E 46
E 40
E 34
E 27
E 26
E 23
E 19
E 15
E 13
D 11

no_wildcard_MX	This domain does not have a wildcard MX record that
		matches it.  For example, I am in domain
		CS.Berkeley.EDU, and there is no MX record that
		matches *.CS.Berkeley.EDU or *.Berkeley.EDU, so I
		can safely use this feature.  If you set this, you
		get better name server performance.
E 11

I 76
D 78
procmail	Use procmail as the local mailer.  This mailer can
E 78
I 78
local_procmail	Use procmail as the local mailer.  This mailer can
E 78
		make use of the "user+indicator@local.host" syntax;
		normally the +indicator is just tossed, but by default
		it is passed as the -a argument to procmail.  The
		argument to this feature is the pathname of procmail,
		which defaults to /usr/local/bin/procmail.
E 76
D 46
Other FEATUREs should be defined, but I was trying to keep these
config files fairly lean and mean.
E 46

I 83
bestmx_is_local	Accept mail as though locally addressed for any host that
		lists us as the best possible MX record.  This generates
		additional DNS traffic, but should be OK for low to
D 103
		medium traffic hosts.
E 103
I 103
		medium traffic hosts.  THIS FEATURE IS FUNDAMENTALLY
		INCOMPATIBLE WITH WILDCARD MX RECORDS!!!  If you have
		a wildcard MX record that matches your domain, you
		cannot use this feature.
E 103

I 84
smrsh		Use the SendMail Restricted SHell (smrsh) provided
		with the distribution instead of /bin/sh for mailing
		to programs.  This improves the ability of the local
		system administrator to control what gets run via
		e-mail.  If an argument is provided it is used as the
		pathname to smrsh; otherwise, /usr/local/etc/smrsh is
		assumed.

E 84
E 83
I 76

E 76
I 13
D 46

E 46
E 13
+-------+
| HACKS |
+-------+

Some things just can't be called features.  To make this clear,
D 7
they go in the hack subdirectory and are ferenced using the HACK
E 7
I 7
they go in the hack subdirectory and are referenced using the HACK
E 7
macro.  These will tend to be site-dependent.  The release
includes the Berkeley-dependent "cssubdomain" hack (that makes
sendmail accept local names in either Berkeley.EDU or CS.Berkeley.EDU;
this is intended as a short-term aid while we move hosts into
subdomains.

I 13

E 13
+--------------------+
| SITE CONFIGURATION |
+--------------------+
I 81

    *****************************************************
    * This section is really obsolete, and is preserved	*
    * only for back compatibility.  You should plan on	*
    * using mailertables for new installations.	  In	*
    * particular, it doesn't work for the newer forms	*
    * of UUCP mailers, such as uucp-uudom.		*
    *****************************************************
E 81

Complex sites will need more local configuration information, such as
lists of UUCP hosts they speak with directly.  This can get a bit more
tricky.  For an example of a "complex" site, see cf/ucbvax.mc.

I 65
If your host is known by several different names, you need to augment
the $=w class.  This is a list of names by which you are known, and
anything sent to an address using a host name in this list will be
treated as local mail.  You can do this in two ways: either create
the file /etc/sendmail.cw containing a list of your aliases (one per
line), and use ``FEATURE(use_cw_file)'' in the .mc file, or add the
line:

	Cw alias.host.name

at the end of that file.  See the ``vangogh.mc'' file for an example.
Be sure you use the fully-qualified name of the host, rather than a
short name.

E 65
The SITECONFIG macro allows you to indirectly reference site-dependent
configuration information stored in the siteconfig subdirectory.  For
example, the line

	SITECONFIG(uucp.ucbvax, ucbvax, U)

reads the file uucp.ucbvax for local connection information.  The
second parameter is the local name (in this case just "ucbvax" since
D 65
it is locally connected, and hence a UUCP hostname) and the name of
the class in which to store the host information.  Another SITECONFIG
line reads
E 65
I 65
it is locally connected, and hence a UUCP hostname).  The third
parameter is the name of both a macro to store the local name (in
this case, $U) and the name of the class (e.g., $=U) in which to store
the host information read from the file.  Another SITECONFIG line reads
E 65

	SITECONFIG(uucp.ucbarpa, ucbarpa.Berkeley.EDU, W)

This says that the file uucp.ucbarpa contains the list of UUCP sites
connected to ucbarpa.Berkeley.EDU.  The $=W class will be used to
D 65
store this list.  [The machine ucbarpa is gone now, but I've left
E 65
I 65
store this list, and $W is defined to be ucbarpa.Berkeley.EDU, that
is, the name of the relay to which the hosts listed in uucp.ucbarpa
are connected.  [The machine ucbarpa is gone now, but I've left
E 65
this out-of-date configuration file around to demonstrate how you
might do this.]
I 65

Note that the case of SITECONFIG with a third parameter of ``U'' is
special; the second parameter is assumed to be the UUCP name of the
local site, rather than the name of a remote site, and the UUCP name
is entered into $=w (the list of local hostnames) as $U.UUCP.
E 65

The siteconfig file (e.g., siteconfig/uucp.ucbvax.m4) contains nothing
more than a sequence of SITE macros describing connectivity.  For
example:

	SITE(cnmat)
	SITE(sgi olympus)

The second example demonstrates that you can use two names on the
same line; these are usually aliases for the same host (or are at
least in the same company).

I 13

I 57
+--------------------+
| USING UUCP MAILERS |
+--------------------+

It's hard to get UUCP mailers right because of the extremely ad hoc
nature of UUCP addressing.  These config files are really designed
for domain-based addressing, even for UUCP sites.

There are four UUCP mailers available.  The choice of which one to
use is partly a matter of local preferences and what is running at
the other end of your UUCP connection.  Unlike good protocols that
define what will go over the wire, UUCP uses the policy that you
should do what is right for the other end; if they change, you have
to change.  This makes it hard to do the right thing, and discourages
people from updating their software.  In general, if you can avoid
UUCP, please do.

The major choice is whether to go for a domainized scheme or a
non-domainized scheme.  This depends entirely on what the other
end will recognize.  If at all possible, you should encourage the
other end to go to a domain-based system -- non-domainized addresses
don't work entirely properly.

The four mailers are:

    uucp-old (obsolete name: "uucp")
	This is the oldest, the worst (but the closest to UUCP) way of
	sending messages accros UUCP connections.  It does bangify
	everything and prepends $U (your UUCP name) to the sender's
	address (which can already be a bang path itself).  It can
	only send to one address at a time, so it spends a lot of
	time copying duplicates of messages.  Avoid this if at all
	possible.

    uucp-new (obsolete name: "suucp")
	The same as above, except that it assumes that in one rmail
	command you can specify several recipients.  It still has a
	lot of other problems.

    uucp-dom
	This UUCP mailer keeps everything as domain addresses.
D 69
	Basically, it uses the SMTP mailer rewriting rules.
E 69
I 69
	Basically, it uses the SMTP mailer rewriting rules.  This mailer
	is only included if MAILER(smtp) is also specified.
E 69

	Unfortunately, a lot of UUCP mailer transport agents require
	bangified addresses in the envelope, although you can use
	domain-based addresses in the message header.  (The envelope
	shows up as the From_ line on UNIX mail.)  So....

    uucp-uudom
	This is a cross between uucp-new (for the envelope addresses)
	and uucp-dom (for the header addresses).  It bangifies the
	envelope sender (From_ line in messages) without adding the
	local hostname, unless there is no host name on the address
	at all (e.g., "wolf") or the host component is a UUCP host name
	instead of a domain name ("somehost!wolf" instead of
D 69
	"some.dom.ain!wolf").
E 69
I 69
	"some.dom.ain!wolf").  This is also included only if MAILER(smtp)
	is also specified.
E 69

Examples:

We are on host grasp.insa-lyon.fr (UUCP host name "grasp").  The
following summarizes the sender rewriting for various mailers.

Mailer          sender		rewriting in the envelope
------		------		-------------------------
uucp-{old,new}	wolf		grasp!wolf
uucp-dom	wolf		wolf@grasp.insa-lyon.fr
uucp-uudom	wolf		grasp.insa-lyon.fr!wolf

uucp-{old,new}	wolf@fr.net	grasp!fr.net!wolf
uucp-dom	wolf@fr.net	wolf@fr.net
uucp-uudom	wolf@fr.net	fr.net!wolf

uucp-{old,new}	somehost!wolf	grasp!somehost!wolf
uucp-dom	somehost!wolf	somehost!wolf@grasp.insa-lyon.fr
uucp-uudom	somehost!wolf	grasp.insa-lyon.fr!somehost!wolf

If you are using one of the domainized UUCP mailers, you really want
to convert all UUCP addresses to domain format -- otherwise, it will
do it for you (and probably not the way you expected).  For example,
if you have the address foo!bar!baz (and you are not sending to foo),
the heuristics will add the @uucp.relay.name or @local.host.name to
this address.  However, if you map foo to foo.host.name first, it
will not add the local hostname.  You can do this using the uucpdomain
feature.


E 57
E 13
+-------------------+
| TWEAKING RULESETS |
+-------------------+

E 6
For more complex configurations, you can define special rules.
The macro LOCAL_RULE_3 introduces rules that are used in canonicalizing
the names.  Any modifications made here are reflected in the header.

A common use is to convert old UUCP addreses to SMTP addresses using
the UUCPSMTP macro.  For example:

	LOCAL_RULE_3
	UUCPSMTP(decvax,	decvax.dec.com)
	UUCPSMTP(research,	research.att.com)

will cause addresses of the form "decvax!user" and "research!user"
to be converted to "user@decvax.dec.com" and "user@research.att.com"
respectively.

I 6
D 61
This could also be used to look hosts in a database map:
E 61
I 61
This could also be used to look up hosts in a database map:
E 61

	LOCAL_RULE_3
	R$* < @ $+ > $*		$: $1 < @ $(hostmap $2 $) > $3

This map would be defined in the LOCAL_CONFIG portion, as shown below.

E 6
Similarly, LOCAL_RULE_0 can be used to introduce new parsing rules.
For example, new rules are needed to parse hostnames that you accept
D 3
via MX records.
E 3
I 3
via MX records.  For example, you might have:
E 3

I 3
	LOCAL_RULE_0
D 62
	R$+ < @ cnmat.Berkeley.EDU >	$#uucp $@ cnmat $: $1
E 62
I 62
	R$+ <@ host.dom.ain.>	$#uucp $@ cnmat $: $1 < @ host.dom.ain.>
E 62

You would use this if you had installed an MX record for cnmat.Berkeley.EDU
pointing at this host; this rule catches the message and forwards it on
using UUCP.

I 20
You can also tweak rulesets 1 and 2 using LOCAL_RULE_1 and LOCAL_RULE_2.
These rulesets are normally empty.

E 20
E 3
D 6
????
E 6
I 6
A similar macro is LOCAL_CONFIG.  This introduces lines added after the
boilerplate option setting but before rulesets, and can be used to
D 10
override default options, declare local database maps, or whatever.
For example:
E 10
I 10
declare local database maps or whatever.  For example:
E 10
E 6

E 2
D 6
HIERARCHY
E 6
I 6
	LOCAL_CONFIG
	Khostmap hash /etc/hostmap.db
	Kyplocal nis -m hosts.byname
D 10
	OJ/var/forward/$u:$z/.forward
	OL3
E 10
E 6

I 13

E 13
I 6
+---------------------------+
| MASQUERADING AND RELAYING |
+---------------------------+

You can have your host masquerade as another using

	MASQUERADE_AS(host.domain)

D 61
This causes outgoing SMTP mail to be labelled as coming from the
E 61
I 61
This causes outgoing SMTP mail to be labeled as coming from the
E 61
indicated domain, rather than $j.  One normally masquerades as one
D 61
of your own subdomains (for example, it's unlikely that I would
E 61
I 61
of one's own subdomains (for example, it's unlikely that I would
E 61
choose to masquerade as an MIT site).

I 46
The masquerade name is not normally canonified, so it is important
that it be your One True Name, that is, fully qualified and not a
CNAME.

E 46
there are always users that need to be "exposed" -- that is, their
internal site name should be displayed instead of the masquerade name.
Root is an example.  You can add users to this list using

	EXPOSED_USER(usernames)

This adds users to class E; you could also use something like

	FE/etc/sendmail.cE

You can also arrange to relay all unqualified names (that is, names
without @host) to a relay host.  For example, if you have a central
email server, you might relay to that host so that users don't have
to have .forward files or aliases.  You can do this using

D 12
	define(`LOCAL_RELAY', hostname)
E 12
I 12
	define(`LOCAL_RELAY', mailer:hostname)
E 12

D 12
There are some user names that you don't want relayed, perhaps because
of local aliases.  A common example is root, which may be locally
aliased.  You can add entries to this list using
E 12
I 12
The ``mailer:'' can be omitted, in which case the mailer defaults to
"smtp".  There are some user names that you don't want relayed, perhaps
because of local aliases.  A common example is root, which may be
locally aliased.  You can add entries to this list using
E 12

	LOCAL_USER(usernames)

This adds users to class L; you could also use something like

	FL/etc/sendmail.cL

I 9
D 46
If you want all mail sent to a centralized hub, as for a shared
/var/spool/mail scheme, use
E 46
I 46
If you want all incoming mail sent to a centralized hub, as for a
shared /var/spool/mail scheme, use
E 46

D 12
	define(`MAIL_HUB', hostname)
E 12
I 12
	define(`MAIL_HUB', mailer:hostname)
E 12

D 12
If you define both LOCAL_RELAY and MAIL_HUB, unqualified names and
names in class L will be sent to the LOCAL_RELAY and other local names
will be sent to MAIL_HUB.  For example, if are on machine
mastodon.CS.Berkeley.EDU, the following combinations of settings
will have the indicated effects:
E 12
I 12
Again, ``mailer:'' defaults to "smtp".  If you define both LOCAL_RELAY
D 63
and MAIL_HUB, unqualified names and names in class L will be sent to
the LOCAL_RELAY and other local names will be sent to MAIL_HUB.  For
example, if are on machine mastodon.CS.Berkeley.EDU, the following
E 63
I 63
D 88
and MAIL_HUB, unqualified names will be sent to the LOCAL_RELAY and
other local names will be sent to MAIL_HUB.  Names in $=L will be
delivered locally, so you MUST have aliases or .forward files for them.
E 88
I 88
and MAIL_HUB _AND_ you have FEATURE(stickyhost), unqualified names will
be sent to the LOCAL_RELAY and other local names will be sent to MAIL_HUB.
Names in $=L will be delivered locally, so you MUST have aliases or
.forward files for them.
E 88

D 88
For example, if are on machine mastodon.CS.Berkeley.EDU, the following
E 63
combinations of settings will have the indicated effects:
E 88
I 88
For example, if are on machine mastodon.CS.Berkeley.EDU and you have
FEATURE(stickyhost), the following combinations of settings will have the
indicated effects:
E 88
E 12

email sent to....	eric			  eric@mastodon.CS.Berkeley.EDU

LOCAL_RELAY set to	mail.CS.Berkeley.EDU	  (delivered locally)
D 88
mail.CS.Berkeley.EDU
E 88
I 88
mail.CS.Berkeley.EDU	  (no local aliasing)	    (aliasing done)
E 88

MAIL_HUB set to		mammoth.CS.Berkeley.EDU	  mammoth.CS.Berkeley.EDU
D 88
mammoth.CS.Berkeley.EDU
E 88
I 88
mammoth.CS.Berkeley.EDU	  (aliasing done)	    (aliasing done)
E 88

Both LOCAL_RELAY and	mail.CS.Berkeley.EDU	  mammoth.CS.Berkeley.EDU
D 88
MAIL_HUB set as above
E 88
I 88
MAIL_HUB set as above	  (no local aliasing)	    (aliasing done)

If you do not have FEATURE(stickyhost) set, then LOCAL_RELAY and
MAIL_HUB act identically, with MAIL_HUB taking precedence.
E 88
I 10

I 46
If you want all outgoing mail to go to a central relay site, define
SMART_HOST as well.  Briefly:
E 46
I 12

I 46
	LOCAL_RELAY applies to unqualifed names (e.g., "eric").
	MAIL_HUB applies to names qualified with the name of the
		local host (e.g., "eric@mastodon.CS.Berkeley.EDU").
	SMART_HOST applies to names qualified with other hosts.

D 96
However, beware that other relays (e.g., UUCP_RELAY, BITNET_RELAY, and
FAX_RELAY) take precedence over SMART_HOST, so if you really want
absolutely everything to go to a single central site you will need to
unset all the other relays -- or better yet, find or build a minimal
config file that does this.
E 96
I 96
However, beware that other relays (e.g., UUCP_RELAY, BITNET_RELAY,
DECNET_RELAY, and FAX_RELAY) take precedence over SMART_HOST, so if you
really want absolutely everything to go to a single central site you will
need to unset all the other relays -- or better yet, find or build a
minimal config file that does this.
E 96


E 46
+-------------------------------+
| NON-SMTP BASED CONFIGURATIONS |
+-------------------------------+

These configuration files are designed primarily for use by SMTP-based
sites.  I don't pretend that they are well tuned for UUCP-only or
UUCP-primarily nodes (the latter is defined as a small local net
connected to the rest of the world via UUCP).  However, there is one
hook to handle some special cases.

You can define a ``smart host'' that understands a richer address syntax
using:

	define(`SMART_HOST', mailer:hostname)

D 45
In this case, the ``mailer:'' defaults to "suucp".  Any messages that
E 45
I 45
In this case, the ``mailer:'' defaults to "relay".  Any messages that
E 45
can't be handled using the usual UUCP rules are passed to this host.

If you are on a local SMTP-based net that connects to the outside
world via UUCP, you can use LOCAL_NET_CONFIG to add appropriate rules.
For example:

	define(`SMART_HOST', suucp:uunet)
	LOCAL_NET_CONFIG
D 40
	R$* < @ $* .$m > $*	$#smtp $@ $2.$m $: $1 < @ $2.$m > $3
E 40
I 40
	R$* < @ $* .$m. > $*	$#smtp $@ $2.$m. $: $1 < @ $2.$m. > $3
E 40

This will cause all names that end in your domain name ($m) via
SMTP; anything else will be sent via suucp (smart UUCP) to uunet.
I 40
If you have FEATURE(nocanonify), you may need to omit the dots after
the $m.  If you are running a local DNS inside your domain which is
not otherwise connected to the outside world, you probably want to
use:

	define(`SMART_HOST', smtp:fire.wall.com)
	LOCAL_NET_CONFIG
	R$* < @ $* . > $*	$#smtp $@ $2. $: $1 < @ $2. > $3

That is, send directly only to things you found in your DNS lookup;
anything else goes through SMART_HOST.
E 40

I 46
If you are not running DNS at all, it is important to use
FEATURE(nodns) to avoid having sendmail queue everything waiting
for the name server to come up.
E 46

I 46

I 48
+-----------+
| WHO AM I? |
+-----------+

Normally, the $j macro is automatically defined to be your fully
qualified domain name (FQDN).  Sendmail does this by getting your
host name using gethostname and then calling gethostbyname on the
result.  For example, in some environments gethostname returns
only the root of the host name (such as "foo"); gethostbyname is
supposed to return the FQDN ("foo.bar.com").  In some (fairly rare)
cases, gethostbyname may fail to return the FQDN.  In this case
you MUST define confDOMAIN_NAME to be your fully qualified domain
name.  This is usually done using:

	Dmbar.com
	define(`confDOMAIN_NAME', `$w.$m')dnl


E 48
E 46
I 45
+--------------------+
| USING MAILERTABLES |
+--------------------+

To use FEATURE(mailertable), you will have to create an external
database containing the routing information for various domains.
For example, a mailertable file in text format might be:

	.my.domain		xnet:%1.my.domain
	uuhost1.my.domain	suucp:uuhost1
	.bitnet			smtp:relay.bit.net

This should normally be stored in /etc/mailertable.  The actual
database version of the mailertable is built using:

	makemap hash /etc/mailertable.db < /etc/mailertable

The semantics are simple.  Any LHS entry that does not begin with
a dot matches the full host name indicated.  LHS entries beginning
with a dot match anything ending with that domain name -- that is,
they can be thought of as having a leading "*" wildcard.  Matching
is done in order of most-to-least qualified -- for example, even
though ".my.domain" is listed first in the above example, an entry
of "uuhost1.my.domain" will match the second entry since it is
more explicit.

The RHS should always be a "mailer:host" pair.  The mailer is the
configuration name of a mailer (that is, an `M' line in the
sendmail.cf file).  The "host" will be the hostname passed to
that mailer.  In domain-based matches (that is, those with leading
dots) the "%1" may be used to interpolate the wildcarded part of
the host name.  For example, the first line above sends everything
addressed to "anything.my.domain" to that same host name, but using
the (presumably experimental) xnet mailer.

I 74
In some cases you may want to temporarily turn off MX records,
particularly on gateways.  For example, you may want to MX
everything in a domain to one machine that then forwards it
directly.  To do this, you might use the DNS configuration:
E 74

I 74
	*.domain.	IN	MX	0	relay.machine

and on relay.machine use the mailertable:

	.domain		smtp:[gateway.domain]

The [square brackets] turn off MX records for this host only.
If you didn't do this, the mailertable would use the MX record
again, which would give you an MX loop.


E 74
I 46
+--------------------------------+
| USING USERDB TO MAP FULL NAMES |
+--------------------------------+

The user database was not originally intended for mapping full names
to login names (e.g., Eric.Allman => eric), but some people are using
it that way.  (I would recommend that you set up aliases for this
purpose instead -- since you can specify multiple alias files, this
is fairly easy.)  The intent was to locate the default maildrop at
a site, but allow you to override this by sending to a specific host.

If you decide to set up the user database in this fashion, it is
D 75
imperative that you also specify FEATURE(notsticky) -- otherwise,
E 75
I 75
imperative that you not use FEATURE(stickyhost) -- otherwise,
E 75
e-mail sent to Full.Name@local.host.name will be rejected.

I 48
D 75
To build the internal form of the user databae, use:
E 75
I 75
To build the internal form of the user database, use:
E 75
E 48

I 48
	makemap btree /usr/data/base.db < /usr/data/base.txt

I 94
As a general rule, I am adamantly opposed to using full names as
e-mail addresses, since they are not in any sense unique.  For example,
the Unix software-development community has two Andy Tannenbaums,
at least two well-known Peter Deutsches, and at one time Bell Labs
had two Stephen R. Bournes with offices along the same hallway.
Which one will be forced to suffer the indignity of being
Stephen_R_Bourne_2?  The less famous of the two, or the one that
was hired later?

Finger should handle full names (and be fuzzy).  Mail should use
handles, and not be fuzzy.  [Not that I expect anyone to pay any
attention to my opinions.]

E 94

I 70
+--------------------------------+
| MISCELLANEOUS SPECIAL FEATURES |
+--------------------------------+

D 95
DOTTED_USER(name)
E 95
I 95
Plussed users
E 95
	Sometimes it is convenient to merge configuration on a
	centralized mail machine, for example, to forward all
	root mail to a mail server.  In this case it might be
	useful to be able to treat the root addresses as a class
	of addresses with subtle differences.  You can do this
D 95
	using dotted users.  For example, a client might include
E 95
I 95
	using plussed users.  For example, a client might include
E 95
	the alias:

D 95
		root:  root.client1@server
E 95
I 95
		root:  root+client1@server
E 95

D 95
	On the server, the mail configuration would include:
E 95
I 95
	On the server, this will match an alias for "root+client1".
	If that is not found, the alias "root+*" will be tried,
	then "root".
E 95

D 95
		DOTTED_USER(root)
E 95

D 95
	Aliases on the server that would match this address would
	be "root.client", "root.*", and "root", tried in that
	order.  You can specify multiple addresses either by
	joining them in one DOTTTED_USER macro or by having
	multiple macros:

		DOTTED_USER(root)
		DOTTED_USER(postmaster mailer-daemon)

	defines three dotted users.


E 95
I 79
+----------------+
| SECURITY NOTES |
+----------------+

A lot of sendmail security comes down to you.  Sendmail 8 is much
more careful about checking for security problems than previous
versions, but there are some things that you still need to watch
for.  In particular:

* Make sure the aliases file isn't writable except by trusted
  system personnel.  This includes both the text and database
  version.

* Make sure that other files that sendmail reads, such as the
  mailertable, is only writable by trusted system personnel.

* The queue directory should not be world writable PARTICULARLY
  if your system allows "file giveaways" (that is, if a non-root
  user can chown any file they own to any other user).

* If your system allows file giveaways, DO NOT create a publically
  writable directory for forward files.  This will allow anyone
  to steal anyone else's e-mail.  Instead, create a script that
  copies the .forward file from users' home directories once a
  night (if you want the non-NFS-mounted forward directory).

* If your system allows file giveaways, you'll find that
  sendmail is much less trusting of :include: files -- in
  particular, you'll have to have /SENDMAIL/ANY/SHELL/ in
  /etc/shells before they will be trusted (that is, before
  files and programs listed in them will be honored).

In general, file giveaways are a mistake -- if you can turn them
off I recommend you do so.


E 79
E 70
E 48
E 46
E 45
I 16
+------------------+
| FlexFAX SOFTWARE |
+------------------+

Sam Leffler's FlexFAX software is still in beta test -- but he expects a
public version out "later this week" [as of 3/1/93].  The following
blurb is direct from Sam:

D 52
	$Header: /usr/people/sam/fax/RCS/HOWTO,v 1.7 93/02/08 09:00:55 sam Exp $
E 52
I 52
	$Header: /usr/people/sam/fax/RCS/HOWTO,v 1.14 93/05/24 11:42:16 sam Exp $
E 52

	How To Obtain This Software (in case all you get is this file)
D 52

E 52
I 52
	--------------------------------------------------------------
E 52
	The source code is available for public ftp on
D 52
	    sgi.com			sgi/fax/v2.1beta.tar.Z
E 52
I 52
	    sgi.com			sgi/fax/v2.1.src.tar.Z
E 52
		(192.48.153.1)

	You can also obtain inst'able images for Silicon Graphics machines from
D 52
	    sgi.com			sgi/fax/v2.1beta.inst.tar
E 52
I 52
	    sgi.com			sgi/fax/v2.1.inst.tar
E 52
		(192.48.153.1)

	For example,
	    % ftp -n sgi.com
	    ....
	    ftp> user anonymous
	    ... <type in password>
	    ftp> cd sgi/fax
	    ftp> binary
D 52
	    ftp> get v2.1beta.tar.Z
E 52
I 52
	    ftp> get v2.1.src.tar.Z
E 52

D 52
	If you cannot use FTP at all, there is a service called "ftpmail"
	available from gateekeeper.dec.com:  you can send e-mail to this
	machine and it will use FTP to retrieve files for you and send you the
	files back again via e-mail.  To find out more about the ftpmail
E 52
I 52
	In general, the latest version of the 2.1 release of the software is
	always available as "v2.1.src.tar.Z" or "v2.1.inst.tar" in the ftp
	directory.  This file is a link to the appropriate released version (so
	don't waste your time retrieving the linked file as well!) Any files of
	the form v2.1.*.patch are shell scripts that can be used to patch older
	versions of the source code.  For example, the file v2.1.0.patch would
	contain patches to update v2.1.0.tar.Z.  (Note to beta testers: this is
	different than the naming conventions used during beta testing.) Patch
	files only work to go between consecutive versions, so if you are
	multiple versions behind the latest release, you will need to apply
	each patch file between your current version and the latest.


	Obtaining the Software by Electronic Mail
	-----------------------------------------
	Do not send me requests for the software; they will be ignored (without
	response).  If you cannot use FTP at all, there is a service called
	"ftpmail" available from gatekeeper.dec.com:  you can send e-mail to
	this machine and it will use FTP to retrieve files for you and send you
	the files back again via e-mail.  To find out more about the ftpmail
E 52
	service, send a message to "ftpmail@gatekeeper.dec.com" whose body
	consists of the single line "help".

I 52

	Obtaining the Software Within Silicon Graphics
	----------------------------------------------
E 52
	Internal to Silicon Graphics there are inst'able images on the host
D 52
	flake.asd in the directory /d/dist.  Thus you can do something like:
E 52
I 52
	flake.asd in the directory /usr/dist.  Thus you can do something like:
E 52

D 52
	    % inst -f flake.asd.sgi.com:/d/dist/flexfax
E 52
I 52
	    % inst -f flake.asd.sgi.com:/usr/dist/flexfax
E 52

D 52
	to install the software on your machine.
E 52
I 52
	to install the latest version of the software on your machine.
E 52

I 52

	What to do Once You've Retrieved Stuff
	--------------------------------------
E 52
	The external distributions come in a compressed or uncompressed tar
	file.  To extract the source distribution:

D 52
	    % zcat v2.1beta.tar.Z | tar xf -
E 52
I 52
	    % zcat v2.1.src.tar.Z | tar xf -
E 52

	(uncompress and extract individual files in current directory).  To
	unpack and install the client portion of the inst'able distribution:

	    % mkdir dist
D 52
	    % cd dist; tar xf ../v2.1beta.inst.tar; cd ..
E 52
I 52
	    % cd dist; tar xf ../v2.1.inst.tar; cd ..
E 52
	    % inst -f dist/flexfax
	    ...
	    inst> go

	(Note, the dist subdirectory is because some versions of inst fail if
D 52
	the files are in the current directory.) Server binaries is also
	included in the inst'able images as flexfax.server.*.  It is not
	installed by default, so to get it also you need to extract the do:
E 52
I 52
	the files are in the current directory.) Server binaries are also
	included in the inst'able images as flexfax.server.*.  They are not
	installed by default, so to get them also you need to do:
E 52

	    % inst -f flexfax
	    ...
	    inst> install flexfax.server.*
	    inst> go

D 52
	The SGI binaries were built for Version 4.0.5 of the IRIX operating
E 52
I 52
	The SGI binaries were built for Version 4.0.5H of the IRIX operating
E 52
	system.  They should work w/o problem on earlier versions of the
	system, but I have not fully tested this.  Also, note that to install a
	server on an SGI machine, you need to have installed the Display
	PostScript execution environment product (dps_eoe).  Otherwise, the fax
	server will not be able to convert PostScript to facsimile for
	transmission.

D 52
	If you are working from the source distribution, look at the file README
	in the top of the source tree.  If you are working from the inst images,
	you need to run faxaddmodem to setup and configure your fax modem.  Do
	man faxaddmodem for more information.
E 52
I 52
	If you are working from the source distribution, look at the file
	README in the top of the source tree.  If you are working from the inst
	images, the subsystem flexfax.man.readme contains the README file and
	other useful pieces of information--the installed files are placed in
	the directory /usr/local/doc/flexfax).  Basically you will need to run
	the faxaddmodem script to setup and configure your fax modem.  Consult
	the README file and the manual page for faxaddmodem for information.
E 52

D 52
Also from Sam:
E 52

I 52
	FlexFAX Mail List
	-----------------
E 52
	A mailing list for users of this software is located on sgi.com.
	If you want to join this mailing list or have a list-related request
	such as getting your name removed from it, send a request to

D 52
	    flexfax-request@sgi.com
E 52
I 52
	    majordomo@whizzer.wpd.sgi.com
E 52

I 52
	For example, to subscribe, send the line "subscribe flexfax" in
	the body of your message.  The line "help" will return a list of
	the commands understood by the mailing list management software.

E 52
	Submissions (including bug reports) should be directed to:

	    flexfax@sgi.com
I 52

	When corresponding about this software please always specify what
	version you have, what system you're running on, and, if the problem is
	specific to your modem, identify the modem and firmware revision.
E 52


E 16
E 12
+--------------------------------+
| TWEAKING CONFIGURATION OPTIONS |
+--------------------------------+

There are a large number of configuration options that don't normally
need to be changed.  However, if you feel you need to tweak them, you
can define the following M4 variables.  This list is shown in four
columns:  the name you define, the default value for that definition,
the option or macro that is affected (either Ox for an option or Dx
for a macro), and a brief description.  Greater detail of the semantics
can be found in the Installation and Operations Guide.

I 38
Some options are likely to be deprecated in future versions -- that is,
the option is only included to provide back-compatibility.  These are
marked with "*".

I 54
Remember that these options are M4 variables, and hence may need to
be quoted.  In particular, arguments with commas will usually have to
be ``double quoted, like this phrase'' to avoid having the comma
confuse things.  This is common for alias file definitions and for
the read timeout.

E 54
E 38
D 87
M4 Variable Name	Default		Mac/Opt	Description
I 54
================	=======		=======	===========
E 54
confMAILER_NAME		MAILER-DAEMON	Dn	The sender name used for
						internally generated
						outgoing messages.
D 20
confFROM_LINE		From $?<$<$|$g$.  $d	The From_ line used when
					Dl	sending to files or programs.
E 20
I 20
confFROM_LINE		From $g  $d	Dl	The From_ line used when
						sending to files or programs.
E 20
confFROM_HEADER		$?x$x <$g>$|$g$.	The format of an internally
					Dq	generated From: address.
D 76
confOPERATORS		.:%@!^/[]	Do	Address operator characters.
E 76
I 76
confOPERATORS		.:%@!^/[]+	Do	Address operator characters.
E 76
D 46
confSTMP_LOGIN_MSG	$j Sendmail $v/$Z ready at $b
E 46
I 46
confSMTP_LOGIN_MSG	$j Sendmail $v/$Z ready at $b
E 46
					De	The initial (spontaneous)
						SMTP greeting message.
I 73
confRECEIVED_HEADER	$?sfrom $s $.$?_($?s$|from $.$_) $.by $j ($v/$Z)$?r with $r$. id $i$?u for $u$.; $b
					HReceived
						The format of the Received:
						header in messages passed
						through this host.  It is
						unwise to try to change this.
E 73
D 24
confEIGHT_BIT_INPUT	False		O8	Use 8-bit input?
E 24
I 24
D 30
confEIGHT_BIT_INPUT	True		O8	Use 8-bit input?
E 30
I 30
confSEVEN_BIT_INPUT	False		O7	Force input to seven bits?
I 71
confEIGHT_BIT_HANDLING	pass8		O8	8-bit data handling
E 71
E 30
E 24
confALIAS_WAIT		10		Oa	Wait (in minutes) for alias
						file rebuild.
I 13
confMIN_FREE_BLOCKS	4		Ob	Minimum number of free blocks
						on queue filesystem to accept
						SMTP mail.
E 13
confBLANK_SUB		.		OB	Blank (space) substitution
						character.
D 59
confCON_EXPENSIVE	False		Oc	Connect immediately to
						mailers marked expensive?
E 59
I 59
confCON_EXPENSIVE	False		Oc	Avoid connecting immediately
						to mailers marked expensive?
E 59
confCHECKPOINT_INTERVAL	10		OC	Checkpoint queue files
						every N recipients.
confDELIVERY_MODE	background	Od	Default delivery mode.
confAUTO_REBUILD	False		OD	Automatically rebuild
						alias file if needed.
confERROR_MODE		(undefined)	Oe	Error message mode.
confERROR_MESSAGE	(undefined)	OE	Error message header/file.
confSAVE_FROM_LINES	False		Of	Save extra leading
						From_ lines.
confTEMP_FILE_MODE	0600		OF	Temporary file mode.
confDEF_GROUP_ID	1		Og	Default group id.
confMATCH_GECOS		False		OG	Match GECOS field.
confMAX_HOP		17		Oh	Maximum hop count.
D 38
confIGNORE_DOTS		False		Oi	Ignore dot as terminator
E 38
I 38
confIGNORE_DOTS		False		Oi *	Ignore dot as terminator
E 38
						for incoming messages?
confBIND_OPTS		(empty)		OI	Default options for BIND.
I 30
D 38
confMIME_FORMAT_ERRORS	True		Oj	Send error messages as MIME-
E 38
I 38
confMIME_FORMAT_ERRORS	True		Oj *	Send error messages as MIME-
E 38
						encapsulated messages per
						RFC 1344.
I 46
confFORWARD_PATH	(undefined)	OJ	The colon-separated list of
						places to search for .forward
D 79
						files.
E 79
I 79
						files.  N.B.: see the Security
						Notes section.
E 79
E 46
E 30
confMCI_CACHE_SIZE	2		Ok	Size of open connection cache.
confMCI_CACHE_TIMEOUT	5m		OK	Open connection cache timeout.
I 38
confUSE_ERRORS_TO	False		Ol *	Use the Errors-To: header to
						deliver error messages.  This
						should not be necessary because
						of general acceptance of the
						envelope/header distinction.
E 38
confLOG_LEVEL		9		OL	Log level.
confME_TOO		False		Om	Include sender in group
						expansions.
confCHECK_ALIASES	True		On	Check RHS of aliases when
						running newaliases.
D 38
confOLD_STYLE_HEADERS	True		Oo	Assume that headers without
E 38
I 38
confOLD_STYLE_HEADERS	True		Oo *	Assume that headers without
E 38
						special chars are old style.
I 25
confDAEMON_OPTIONS	(undefined)	OO	SMTP daemon options.
E 25
I 13
D 24
confPRIVACY_FLAGS	public		Op	Privacy flags.
E 24
I 24
confPRIVACY_FLAGS	authwarnings	Op	Privacy flags.
E 24
E 13
confCOPY_ERRORS_TO	(undefined)	OP	Address for additional copies
						of all error messages.
confQUEUE_FACTOR	(undefined)	Oq	Slope of queue-only function
D 14
confREAD_TIMEOUT	20m		Or	SMTP read timeout.
E 14
I 14
confREAD_TIMEOUT	(undefined)	Or	SMTP read timeouts.
I 72
confDONT_PRUNE_ROUTES	False		OR	Don't prune down route-addr
						syntax addresses to the
						minimum possible.
E 72
E 14
D 38
confSAFE_QUEUE		True		Os	Commit all messages to disk
E 38
I 38
confSAFE_QUEUE		True		Os *	Commit all messages to disk
E 38
						before forking.
D 18
confMESSAGE_TIMEOUT	3d		OT	Timeout for messages before
E 18
I 18
D 24
confMESSAGE_TIMEOUT	5d		OT	Timeout for messages before
E 18
						sending error message.
E 24
I 24
confMESSAGE_TIMEOUT	5d/4h		OT	Timeout for messages before
						sending error/warning message.
E 24
D 29
confTIME_ZONE		USE_SYSTEM	Oz	Time zone info -- can be
E 29
I 29
confTIME_ZONE		USE_SYSTEM	Ot	Time zone info -- can be
E 29
						USE_SYSTEM to use the system's
						idea, USE_TZ to use the user's
						TZ envariable, or something
						else to force that value.
confDEF_USER_ID		1		Ou	Default user id.
I 21
confUSERDB_SPEC		(undefined)	OU	User database specification.
I 25
confFALLBACK_MX		(undefined)	OV	Fallback MX host.
I 42
confTRY_NULL_MX_LIST	False		Ow	If we are the best MX for a
						host and haven't made other
						arrangements, try connecting
						to the host directly; normally
						this would be a config error.
E 42
E 25
D 22
						If it has commas it should be
						double quoted (e.g.,
						``file1,file2'') to prevent
						m4 from chomping on it.
E 22
E 21
D 38
confNO_WILDCARD_MX	False		Ow	No wildcard MX records matches
						our domain.
E 38
confQUEUE_LA		8		Ox	Load average at which queue-only
						function kicks in.
confREFUSE_LA		12		OX	Load average at which incoming
						SMTP connections are refused.
E 87
I 87
M4 Variable Name	Configuration	Description & [Default]
================	=============	=======================
confMAILER_NAME		$n macro	[MAILER-DAEMON] The sender name used
					for internally generated outgoing
					messages.
confFROM_LINE		$l macro	[From $g  $d] The From_ line used
					when sending to files or programs.
confFROM_HEADER		$q macro	[$?x$x <$g>$|$g$.] The format of an 
					internally generated From: address.
confOPERATORS		$o macro	[.:%@!^/[]+] Address operator
					characters.
D 90
confSMTP_LOGIN_MSG	$e macro	[$j Sendmail $v/$Z ready at $b]
E 90
I 90
confSMTP_LOGIN_MSG	$e macro	[$j Sendmail $v/$Z; $b]
E 90
					The initial (spontaneous) SMTP
D 90
					greeting message.
E 90
I 90
					greeting message.  The word "ESMTP"
					will be inserted between the first and
					second words to convince other
					sendmails to try to speak ESMTP.
E 90
confDOMAIN_NAME		$j macro	If defined, sets $j.  This should
					only be done if your system cannot
					determine your local domain name,
					and then it should be set to
					$w.Foo.COM, where Foo.COM is your
					domain name.
I 101
confCF_VERSION		$Z macro	If defined, this is appended to the
					configuration version name.
E 101
confRECEIVED_HEADER	Received:
      [.$?_($?s$|from $.$_) $.by $j ($v/$Z)$?r with $r$. id $i$?u for $u$.; $b]
					The format of the Received: header
					in messages passed through this host.
					It is unwise to try to change this.
confCW_FILE		Fw class	[/etc/sendmail.cw] Name of file used
					to get the local additions to the $=w
					class.
confSMTP_MAILER		-		[smtp] The mailer name used when
					SMTP connectivity is required.
					One of "smtp", "smtp8", or "esmtp".
confLOCAL_MAILER	-		[local] The mailer name used when
					local connectivity is required.
					Almost always "local".
confRELAY_MAILER	-		[relay] The default mailer name used
					for relaying any mail (e.g., to a
					BITNET_RELAY, a SMART_HOST, or
					whatever).  This can reasonably be
					"uucp-new" if you are on a
					UUCP-connected site.
confSEVEN_BIT_INPUT	SevenBitInput	[False] Force input to seven bits?
confEIGHT_BIT_HANDLING	EightBitMode	[pass8] 8-bit data handling
confALIAS_WAIT		AliasWait	[10m] Time to wait for alias file
					rebuild until you get bored and
					decide that the apparently pending
					rebuild failed.
confMIN_FREE_BLOCKS	MinFreeBlocks	[100] Minimum number of free blocks on
					queue filesystem to accept SMTP mail.
I 89
					(Prior to 8.7 this was minfree/maxsize,
					where minfree was the number of free
					blocks and maxsize was the maximum
					message size.  Use confMAX_MESSAGE_SIZE
					for the second value now.)
confMAX_MESSAGE_SIZE	MaxMessageSize	The maximum size of messages that will
					be accepted (in bytes).
E 89
confBLANK_SUB		BlankSub	[.] Blank (space) substitution
					character.
confCON_EXPENSIVE	HoldExpensive	[False] Avoid connecting immediately
					to mailers marked expensive?
confCHECKPOINT_INTERVAL	CheckpointInterval
					Checkpoint queue files every N
					recipients.
confDELIVERY_MODE	DeliveryMode	[background] Default delivery mode.
confAUTO_REBUILD	AutoRebuildAliases
					Automatically rebuild alias
					file if needed.
confERROR_MODE		ErrorMode	Error message mode.
confERROR_MESSAGE	ErrorHeader	Error message header/file.
confSAVE_FROM_LINES	SafeFromLine	Save extra leading From_ lines.
confTEMP_FILE_MODE	TempFileMode	[0600] Temporary file mode.
confMATCH_GECOS		MatchGECOS	Match GECOS field.
confMAX_HOP		MaxHopCount	Maximum hop count.
confIGNORE_DOTS*	IgnoreDots	Ignore dot as terminator for incoming
					messages?
confBIND_OPTS		ResolverOptions	Default options for DNS resolver.
confMIME_FORMAT_ERRORS*	SendMimeErrors	[True] Send error messages as MIME-
					encapsulated messages per RFC 1344.
confFORWARD_PATH	ForwardPath	[$z/.forward.$w:$z/.forward]
					The colon-separated list of places to
					search for .forward files.  N.B.: see
					the Security Notes section.
confMCI_CACHE_SIZE	ConnectionCacheSize
					[2] Size of open connection cache.
confMCI_CACHE_TIMEOUT	ConnectionCacheTimeout
					[5m] Open connection cache timeout.
confUSE_ERRORS_TO*	UserErrorsTo	[False] Use the Errors-To: header to deliver
					error messages.  This should not be
					necessary because of general acceptance
					of the envelope/header distinction.
confLOG_LEVEL		LogLevel	[9] Log level.
confME_TOO		MeToo		Include sender in group expansions.
D 98
confCHECK_ALIASES	CheckAliases	[True] Check RHS of aliases when
					running newaliases.
E 98
I 98
confCHECK_ALIASES	CheckAliases	[False] Check RHS of aliases when
					running newaliases.  Since this does
					DNS lookups on every address, it can
					slow down the alias rebuild process
					considerably on large alias files.
E 98
confOLD_STYLE_HEADERS*	OldStyleHeaders	[True] Assume that headers without
					special chars are old style.
confDAEMON_OPTIONS	DaemonPortOptions
					SMTP daemon options.
confPRIVACY_FLAGS	PrivacyOptions	[authwarnings] Privacy flags.
confCOPY_ERRORS_TO	PostmasterCopy	Address for additional copies of all
					error messages.
confQUEUE_FACTOR	QueueFactor	Slope of queue-only function.
confDONT_PRUNE_ROUTES	DontPruneRoutes	Don't prune down route-addr syntax
					addresses to the minimum possible.
confSAFE_QUEUE*		SuperSafe	[True] Commit all messages to disk
					before forking.
confTIME_ZONE		TimeZoneSpec	[USE_SYSTEM] Time zone info -- can be
					USE_SYSTEM to use the system's idea,
					USE_TZ to use the user's TZ envariable,
					or something else to force that value.
confDEF_USER_ID		DefaultUser	[1:1] Default user id.
confUSERDB_SPEC		UserDatabaseSpec
					User database specification.
confFALLBACK_MX		FallbackMXhost	Fallback MX host.
confTRY_NULL_MX_LIST	TryNullMXList	If we are the best MX for a host and
					haven't made other arrangements, try
					connecting to the host directly;
					normally this would be a config error.
confQUEUE_LA		QueueLA		Load average at which queue-only
					function kicks in.
confREFUSE_LA		RefuseLA	Load average at which incoming
					SMTP connections are refused.
E 87
D 38
confSEPARATE_PROC	False		Oy	Run all deliveries in a
						separate process.
E 38
confWORK_RECIPIENT_FACTOR
D 38
			(undefined)	OY	Cost of each recipient.
E 38
I 38
D 87
			(undefined)	Oy	Cost of each recipient.
confSEPARATE_PROC	False		OY	Run all deliveries in a
						separate process.
E 38
confWORK_CLASS_FACTOR	(undefined)	Oz	Priority multiplier for class.
confWORK_TIME_FACTOR	(undefined)	OZ	Cost of each delivery attempt.
I 82
confQUEUE_SORT_ORDER	Priority	O QueueSortOrder
						Queue sort algorithm:
						Priority or Host.
E 82
I 17
confCW_FILE		/etc/sendmail.cw	Name of file used to get the
					Fw	local additions to the $=w
						class.
I 43
D 46
confSMTP_MAILER		esmtp		-	The mailer name used when
E 46
I 46
confSMTP_MAILER		smtp		-	The mailer name used when
E 46
						SMTP connectivity is required.
D 74
						Either "smtp" or "esmtp".
E 74
I 74
						One of "smtp", "smtp8", or
						"esmtp".
E 74
I 44
confLOCAL_MAILER	local		-	The mailer name used when
						local connectivity is required.
						Almost always "local".
I 45
confRELAY_MAILER	relay		-	The default mailer name used
						for relaying any mail (e.g.,
						to a BITNET_RELAY, a
						SMART_HOST, or whatever).
						This can reasonably be "suucp"
						if you are on a UUCP-connected
						site.
I 48
confDOMAIN_NAME		(undefined)	Dj	If defined, sets $j.
E 87
I 87
			RecipientFactor	Cost of each recipient.
confSEPARATE_PROC	ForkEachJob	Run all deliveries in a separate
					process.
confWORK_CLASS_FACTOR	ClassFactor	Priority multiplier for class.
confWORK_TIME_FACTOR	RetryFactor	Cost of each delivery attempt.
confQUEUE_SORT_ORDER	QueueSortOrder	Queue sort algorithm: Priority or Host.
D 90
confBROKEN_SMTP_PEERS	BrokenSmtpPeers	Set this to prevent two-line greeting
					messages that confuse some (mostly
					PC-based) clients.
E 90
confMIN_QUEUE_AGE	MinQueueAge	The minimum amount of time a job
					must sit in the queue between queue
					runs.  This allows you to set the
					queue run interval low for better
					resposiveness without trying all
					jobs in each run.
confDEF_CHAR_SET	DefaultCharSet	When converting unlabelled 8 bit
					input to MIME, the character set to
					use by default.
confSERVICE_SWITCH_FILE	ServiceSwitchFile
					The file to use for the service switch
					on systems that do not have a system-
					defined switch.
confDIAL_DELAY		DialDelay	If a connection fails, wait this long
					and try again.  This is to allow
					"dial on demand" connections to have
					enough time to complete a connection.
confNO_RCPT_ACTION	NoRecipientAction
					What to do if there are no legal
					recipient fields (To:, Cc: or Bcc:)
					in the message.  Legal values can
					be "none" to just leave the
					nonconforming message as is, "add-to"
					to add a To: header with all the
					known recipients (which may expose
					blind recipients), "add-apparently-to"
					to do the same but use Apparently-To:
					instead of To:, "add-bcc" to add an
					empty Bcc: header, or
					"add-to-undisclosed" to add the header
					``To: undisclosed-recipients:;''.
					Default is "none".
confSAFE_FILE_ENV	SafeFileEnvironment
					If set, sendmail will do a chroot()
					into this directory before writing
					files.
I 91
confCOLON_OK_IN_ADDR	ColonOkInAddr	If set, colons are treated as a regular
					character in addresses.  If not set,
					they are treated as the introducer to
					the RFC 822 "group" syntax.  Colons are
					handled properly in route-addrs.  This
					option defaults on for V5 and lower
					configuration files.
I 100
confMAX_QUEUE_RUN_SIZE	MaxQueueRunSize	If set, limit the maximum size of any
					given queue run to this number of
					entries.  Essentially, this will stop
					reading the queue directory after this
					number of entries are reached; it does
					_not_ pick the highest priority jobs,
					so this should be as large as your
					system can tolerate.  If not set, there
					is no limit.
I 102
confDONT_EXPAND_CNAMES	DontExpandCnames
					If set, $[ ... $] lookups that do DNS
					based lookups do not expand CNAME
					records.  This currently violates the
					published standards, but the IETF
					seems to be moving toward legalizing
					this.  For example, if "FTP.Foo.ORG"
					is a CNAME for "Cruft.Foo.ORG", then
					with this option set a lookup of
					"FTP" will return "FTP.Foo.ORG"; if
					clear it returns "Cruft.FOO.ORG".  N.B.
					you may not see any effect until your
					downstream neighbors stop doing CNAME
					lookups as well.
E 102
E 100
E 91
E 87
E 48
E 45
E 44
E 43
E 17
E 10

I 13

E 13
E 9
+-----------+
| HIERARCHY |
+-----------+

E 6
Within this directory are several subdirectories, to wit:

m4		General support routines.  These are typically
		very important and should not be changed without
D 7
		contacting your lawyer.
E 7
I 7
		very careful consideration.
E 7

cf		The configuration files themselves.  They have
		".mc" suffixes, and must be run through m4 to
		become complete.  The resulting output should
		have a ".cf" suffix.

ostype		Definitions describing a particular operating
		system type.  These should always be referenced
		using the OSTYPE macro in the .mc file.  Examples
		include "bsd4.3", "bsd4.4", "sunos3.5", and
		"sunos4.1".

domain		Definitions describing a particular domain, referenced
		using the DOMAIN macro in the .mc file.  These are
D 92
		site dependent; for example, we contribute "cs.exposed.m4"
		and "cs.hidden.m4" which both describe hosts in the
		CS.Berkeley.EDU subdomain; the former displays the local
		hostname (e.g., mammoth.CS.Berkeley.EDU), whereas the
		latter does its best to hide the identity of the local
		workstation inside the CS subdomain.
E 92
I 92
		site dependent; for example, "CS.Berkeley.EDU.m4"
		describes hosts in the CS.Berkeley.EDU subdomain.
E 92

mailer		Descriptions of mailers.   These are referenced using
		the MAILER macro in the .mc file.

sh		Shell files used when building the .cf file from the
		.mc file in the cf subdirectory.

feature		These hold special orthogonal features that you might
		want to include.  They should be referenced using
		the FEATURE macro.

hack		Local hacks.  These can be referenced using the HACK
		macro.  They shouldn't be of more than voyeuristic
		interest outside the .Berkeley.EDU domain, but who knows?
D 61
		We've all got our own peccadilloes.
E 61
I 61
		We've all got our own peccadillos.
E 61

I 2
siteconfig	Site configuration -- e.g., tables of locally connected
		UUCP sites.
E 2

I 2

E 2
D 6
ADMINISTRATIVE DETAILS
E 6
I 6
+------------------------+
| ADMINISTRATIVE DETAILS |
+------------------------+
E 6

The following sections detail usage of certain internal parts of the
sendmail.cf file.  Read them carefully if you are trying to modify
the current model.  If you find the above descriptions adequate, these
should be {boring, confusing, tedious, ridiculous} (pick one or more).

RULESETS (* means built in to sendmail)

   0 *	Parsing
   1 *	Sender rewriting
   2 *	Recipient rewriting
   3 *	Canonicalization
   4 *	Post cleanup
D 4
   5	Back compatibility for UUCP
E 4
I 4
   5 *	Local address rewrite (after aliasing)
E 4
D 36
   6	Bottom half of Ruleset 3
D 4
   7	--unused--
E 4
I 4
D 7
   7	Back compatibility for UUCP
E 4
   8	"host dependent cleanup" -- unused?
   9	change rightmost % to @ -- needed?
E 7
I 7
   7	Hook for recursive ruleset 0 call
   8
   9
E 36
I 35
  1x	mailer rules (sender qualification)
  2x	mailer rules (recipient qualification)
I 53
  3x	mailer rules (sender header qualification)
  4x	mailer rules (recipient header qualification)
  5x	mailer subroutines (general)
  6x	mailer subroutines (general)
  7x	mailer subroutines (general)
  8x	reserved
E 53
  90	Mailertable host stripping
I 36
  96	Bottom half of Ruleset 3 (ruleset 6 in old sendmail)
  97	Hook for recursive ruleset 0 call (ruleset 7 in old sendmail)
I 42
  98	Local part of ruleset 0 (ruleset 8 in old sendmail)
I 99
  99	Guaranteed null (for debugging)
E 99
E 42
E 36
E 35
E 7


MAILERS

   0	local, prog	local and program mailers
D 57
   1	smtp		SMTP channel
D 13
   2	uucp
E 13
I 13
   2	uucp		UNIX-to-UNIX Copy Program
E 57
I 57
   1	[e]smtp, relay	SMTP channel
   2	uucp-*		UNIX-to-UNIX Copy Program
E 57
   3	netnews		Network News delivery
I 16
   4	fax		Sam Leffler's FlexFAX software
I 97
   5	mail11		DECnet mailer
E 97
E 16
E 13


MACROS

   A
   B	Bitnet Relay
D 56
   C	CSNET Relay
E 56
I 56
D 96
   C
E 96
I 96
   C	DECnet Relay
E 96
E 56
D 4
   D
E 4
I 4
   D	The local domain -- usually not needed
E 4
   E
D 16
   F
E 16
I 16
   F	FAX Relay
E 16
   G
D 9
   H
E 9
I 9
   H	mail Hub (for mail clusters)
E 9
   I
   J
   K
D 74
   L
E 74
I 74
   L	Luser Relay
E 74
   M	Masquerade (who I claim to be)
   N
   O
   P
   Q
   R	Relay (for unqualified names)
D 12
   S
E 12
I 12
   S	Smart Host
E 12
   T
D 3
   U	UUCP Relay (all hosts)
D 2
   V	UUCP Relay (class V hosts)
E 2
I 2
   V	my UUCP name (if I have a UUCP connection)
E 3
I 3
   U	my UUCP name (if I have a UUCP connection)
   V	UUCP Relay (class V hosts)
E 3
E 2
   W	UUCP Relay (class W hosts)
   X	UUCP Relay (class X hosts)
D 3
   Y	UUCP Relay (class Y hosts)
E 3
I 3
   Y	UUCP Relay (all other hosts)
E 3
   Z	Version number


CLASSES

   A
   B
   C
D 70
   D
E 70
I 70
D 95
   D	"dotted" users
E 95
I 95
   D
E 95
E 70
D 6
   E
E 6
I 6
   E	addresses that should not seem to come from $M
E 6
D 4
   F
E 4
I 4
   F	hosts we forward for
E 4
   G
   H
   I
   J
   K
   L	addresses that should not be forwarded to $R
   M
   N
   O	operators that indicate network operations (cannot be in local names)
D 33
   P
E 33
I 33
D 96
   P	top level pseudo-domains: BITNET, FAX, UUCP, etc.
E 96
I 96
   P	top level pseudo-domains: BITNET, DECNET, FAX, UUCP, etc.
E 96
E 33
   Q
   R
   S
   T
   U	locally connected UUCP hosts
D 2
   V	UUCP hosts connected to host $V
   W	UUCP hosts connected to host $X
   X	UUCP hosts connected to host $Y
   Y	UUCP hosts connected to host $Z
E 2
I 2
D 3
   V	locally connected smart UUCP hosts
   W	UUCP hosts connected to host $W
   X	UUCP hosts connected to host $X
   Y	UUCP hosts connected to host $Y
E 3
I 3
   V	UUCP hosts connected to relay $V
   W	UUCP hosts connected to relay $W
   X	UUCP hosts connected to relay $X
   Y	locally connected smart UUCP hosts
E 3
E 2
D 46
   Z
E 46
I 46
   Z	locally connected domain-ized UUCP hosts
E 46
I 4
   .	the class containing only a dot
E 4


M4 DIVERSIONS

D 6
   1	Versions
E 6
I 6
D 12
   1
E 6
   2	Local Ruleset 0 additions
   3	Local Ruleset 3 additions
E 12
I 12
   1	Local host detection and resolution
   2	Local Ruleset 3 additions
   3	Local Ruleset 0 additions
E 12
D 2
   4
E 2
I 2
   4	UUCP Ruleset 0 additions
E 2
D 3
   5
E 3
I 3
   5	locally interpreted names (overrides $R)
E 3
D 4
   6
E 4
I 4
   6	local configuration (at top of file)
E 4
   7	mailer definitions
D 4
   8
E 4
I 4
D 64
   8	special local name recognition (late in ruleset 3)
E 64
I 64
   8
E 64
E 4
D 13
   9
E 13
I 13
D 20
   9	special local name recognition (late in ruleset 0)
E 20
I 20
   9	special local rulesets (1 and 2)
E 20
E 13
E 1
