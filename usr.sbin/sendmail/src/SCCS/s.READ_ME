h18219
s 00006/00000/01080
d D 8.98 95/06/20 10:41:51 eric 116 115
c explain that USERDB is not a separate package
e
s 00007/00000/01073
d D 8.97 95/06/19 18:11:35 eric 115 114
c warn of the sins of wildcard MX records
e
s 00007/00003/01066
d D 8.96 95/06/18 12:37:34 eric 114 113
c updates for NEXTSTEP 3.3
e
s 00001/00001/01068
d D 8.95 95/06/10 09:16:01 eric 113 112
c fix patch pathname
e
s 00043/00067/01026
d D 8.94 95/05/28 07:14:31 eric 112 111
c clean up Solaris 2.4 LD_LIBRARY_PATH description
e
s 00063/00000/01030
d D 8.93 95/05/27 14:37:39 eric 111 110
c warnings re shared libraries on Solaris 2.4
e
s 00006/00002/01024
d D 8.92 95/05/27 07:44:01 eric 110 109
c extend NEEDPUTENV; clarify USERDB
e
s 00002/00002/01024
d D 8.91 95/05/25 07:55:31 eric 109 108
c add Ultrix patch number for IDENT fix
e
s 00006/00007/01020
d D 8.90 95/05/24 08:54:14 eric 108 107
c search for /yp/ in filename instead of accessing /var/yp/Makefile
e
s 00005/00001/01022
d D 8.89 95/05/24 07:55:40 eric 107 106
c description of problems when IP_SRCROUTE is bogus
e
s 00008/00000/01015
d D 8.88 95/05/23 16:44:26 eric 106 105
c allow use of seteuid() on systems that have new Posix semantics
e
s 00006/00000/01009
d D 8.87 95/05/22 08:29:55 eric 105 104
c add option to print IP source routing info
e
s 00051/00015/00958
d D 8.86 95/05/18 08:30:29 eric 104 103
c update to improve detail and coverage
e
s 00007/00000/00966
d D 8.85 95/05/05 08:20:30 eric 103 102
c mention that IDENT works on Ultrix 4.4
e
s 00014/00000/00952
d D 8.84 95/04/26 09:05:49 eric 102 101
c add BROKEN_ANSI_LIBRARY define to get around strtoul problem
e
s 00001/00001/00951
d D 8.83 95/04/21 09:56:37 eric 101 100
c update copyright notice
e
s 00002/00000/00950
d D 8.82 95/03/22 12:42:42 eric 100 99
c note that gcc problems are fixed in 2.6
e
s 00005/00000/00945
d D 8.81 95/03/20 19:21:42 eric 99 97
c update for UnixWare
e
s 00000/00000/00857
d D 8.61.1.1 95/03/05 12:52:33 eric 98 78
i 97
c add Linux comments
e
s 00011/00000/00934
d D 8.80 95/03/05 12:50:13 eric 97 96
c add Linux
e
s 00003/00000/00931
d D 8.79 95/02/24 06:48:15 eric 96 95
c change way statfs.f_bavail is handled to be more general
e
s 00001/00000/00930
d D 8.78 95/02/06 07:21:13 eric 95 94
c IRIX64
e
s 00019/00006/00911
d D 8.77 95/01/31 08:07:21 eric 94 93
c warning about SCO resolver
e
s 00010/00004/00907
d D 8.76 95/01/07 13:30:20 eric 93 92
c more emphasis to use the makesendmail script
e
s 00006/00000/00905
d D 8.75 94/12/29 07:00:00 eric 92 91
c Amdahl UTS 2.1.5 comments
e
s 00009/00007/00896
d D 8.74 94/12/09 07:05:13 eric 91 90
c update for DG/UX
e
s 00000/00001/00903
d D 8.73 94/12/02 14:29:32 eric 90 89
c MIME compile option is gone
e
s 00039/00028/00865
d D 8.72 94/11/02 14:13:06 eric 89 88
c explain Makefiles subdirectory change & new database definitions
e
s 00013/00003/00880
d D 8.71 94/09/09 16:46:51 eric 88 87
c change setproctitle definitions to use SPT_TYPE variable a la
c SFS_TYPE and LA_TYPE; this allows for a cleaner integration of new types
e
s 00004/00000/00879
d D 8.70 94/08/14 18:07:44 eric 87 86
c mention IRIX developers' option
e
s 00001/00000/00878
d D 8.69 94/07/24 06:41:53 eric 86 85
c instructions for porting pmake for Ultrix
e
s 00004/00000/00874
d D 8.68 94/06/19 11:41:27 eric 85 84
c add NAMELISTMASK doc
e
s 00002/00000/00872
d D 8.67 94/06/19 08:53:39 eric 84 83
c updates for SVR4 and NonStop-UX
e
s 00006/00000/00866
d D 8.66 94/06/19 07:34:08 eric 83 82
c avoid denial-of-service attacks caused by setting resource limits
c low before calling sendmail
e
s 00007/00001/00859
d D 8.65 94/06/19 06:37:14 eric 82 81
c portability fixes for DG/UX 5.4.3
e
s 00005/00000/00855
d D 8.64 94/05/29 13:08:35 eric 81 80
c CONVEX notes
e
s 00004/00003/00851
d D 8.63 94/05/21 12:56:57 eric 80 79
c clarify that conf/Info.Ultrix is in BIND distribution
e
s 00013/00005/00841
d D 8.62 94/05/17 08:16:28 eric 79 78
c change SFS_STATVFS to be SVR4 semantics; document NIS problem in SunOS
e
s 00006/00002/00840
d D 8.61 94/04/17 07:05:49 eric 78 77
c make OLD_NEWDB a #if instead of #ifdef; autoconfigure it for old
c versions of BSD/386
e
s 00004/00000/00838
d D 8.60 94/04/14 16:50:01 eric 77 76
c document NEEDFSYNC
e
s 00005/00005/00833
d D 8.59 94/04/12 09:33:14 eric 76 75
c add SFS_STATVFS
e
s 00012/00000/00826
d D 8.58 94/03/13 09:38:23 eric 75 74
c notes on BIND 4.9.2 and Ultrix interactions
e
s 00017/00000/00809
d D 8.57 94/03/12 08:49:24 eric 74 73
c commentary on IRIX and RISC/os
e
s 00027/00002/00782
d D 8.56 94/03/09 09:03:00 eric 73 72
c Solaris updates
e
s 00006/00000/00778
d D 8.55 94/03/06 09:06:08 eric 72 71
c apply workaround to broken res_search on Ultrix
e
s 00018/00012/00760
d D 8.54 94/03/03 08:35:14 eric 71 70
c Linux portability changes; add LA_PROCSTR
e
s 00001/00001/00771
d D 8.53 94/02/07 09:44:04 eric 70 69
c fix patch id for Solaris 2.3
e
s 00009/00006/00763
d D 8.52 94/02/07 09:30:14 eric 69 68
c allow full size syslog buffer in all Solaris versions by default,
c since patches are available
e
s 00002/00002/00767
d D 8.51 94/01/31 17:37:26 eric 68 67
c spelling errors
e
s 00036/00000/00733
d D 8.50 94/01/26 17:36:09 eric 67 66
c comments for various operating systems
e
s 00009/00000/00724
d D 8.49 94/01/22 08:59:39 eric 66 65
c Apollo & NeXT portability fixes
e
s 00011/00006/00713
d D 8.48 94/01/15 12:39:32 eric 65 64
c change for method of declaring statfs(2) interface
e
s 00001/00001/00718
d D 8.47 94/01/12 06:00:13 eric 64 63
c OSF/1 patch
e
s 00000/00009/00719
d D 8.46 94/01/08 17:54:38 eric 63 62
c HP-UX now has GETUSERSHELL turned off by default
e
s 00009/00000/00719
d D 8.45 94/01/04 07:51:35 eric 62 61
c comments about getusershell on HP-UX
e
s 00055/00017/00664
d D 8.44 94/01/03 10:56:36 eric 61 60
c clarify Makefiles
e
s 00007/00009/00674
d D 8.43 93/12/26 06:07:47 eric 60 59
c clean up implementation if you don't have getusershell(3) in libc
e
s 00008/00004/00675
d D 8.42 93/12/24 10:11:59 eric 59 58
c make NEEDGETUSERSHELL a 0/1 flag instead of a def/ndef flag
e
s 00003/00003/00676
d D 8.41 93/12/24 07:57:07 eric 58 57
c go ahead and actually implement getusershell in compat mode; too many
c systems don't have it
e
s 00016/00000/00663
d D 8.40 93/12/24 06:29:20 eric 57 56
c fixes to restrict users who don't have a "regular" login shell (i.e.,
c not listed in /etc/shells) from forwarding to a program or file; they can
c write their .forward file from another machine and then get in.
e
s 00014/00005/00649
d D 8.39 93/12/22 05:24:20 eric 56 55
c updates for SVR4
e
s 00000/00025/00654
d D 8.38 93/12/20 10:52:41 eric 55 54
c Linux is easier now
e
s 00008/00002/00671
d D 8.37 93/12/16 19:57:57 eric 54 53
c more comments about SYSLOG_BUFSIZE
e
s 00026/00000/00647
d D 8.36 93/12/15 08:16:53 eric 53 52
c have SIGUSR1 call and print ruleset 89
e
s 00001/00000/00646
d D 8.35 93/12/12 07:25:34 eric 52 51
c SunOS 4.0.3 changes
e
s 00100/00000/00546
d D 8.34 93/12/11 17:35:33 eric 51 50
c more addendums
e
s 00096/00026/00450
d D 8.33 93/12/01 11:34:48 eric 50 49
c numerous changes for 8.6.5
e
s 00010/00000/00466
d D 8.32 93/11/08 09:46:52 eric 49 48
c info re: -mandoc macros
e
s 00006/00000/00460
d D 8.31 93/10/31 11:33:09 eric 48 47
c comments re: SunOS
e
s 00004/00001/00456
d D 8.30 93/10/24 10:39:19 eric 47 46
c release 8.6.3
e
s 00046/00000/00411
d D 8.29 93/10/15 08:34:23 eric 46 45
c 8.6.2: improved error return messages; better error handling on
c hung connections or the name server is down; add "vendor code" on V line;
c fix some X-Authentication-Warning: problems; portability fixes
e
s 00001/00000/00410
d D 8.28 93/10/08 16:01:21 eric 45 44
c 8.6.1: SYS5SETPGRP
e
s 00004/00000/00406
d D 8.27 93/10/05 13:15:55 eric 44 43
c warning about gcc 2.4.x optimizer
e
s 00001/00001/00405
d D 8.26 93/09/27 14:18:18 eric 43 42
c fix description of NeXTStep workaround
e
s 00003/00000/00403
d D 8.25 93/09/22 10:32:22 eric 42 41
c include hacks to allow old versions of wait that use "union wait"
e
s 00004/00000/00399
d D 8.24 93/09/22 09:13:44 eric 41 40
c document GNU getopt problem
e
s 00032/00003/00367
d D 8.23 93/09/19 19:38:17 eric 40 39
c Linux, SCO UNIX, and Make commentary
e
s 00010/00003/00360
d D 8.22 93/09/04 11:50:29 eric 39 38
c expanded comments re: resolv+
e
s 00006/00000/00357
d D 8.21 93/09/02 17:14:51 eric 38 37
c mention limitations in Solaris syslog function
e
s 00030/00014/00327
d D 8.20 93/08/30 12:38:13 eric 37 36
c clarifications
e
s 00033/00000/00308
d D 8.19 93/08/26 11:22:15 eric 36 35
c tips for specific environments
e
s 00000/00005/00308
d D 8.18 93/08/20 11:51:54 eric 35 34
c more on elimination of frozen config files
e
s 00000/00005/00313
d D 8.17 93/08/20 08:17:06 eric 34 33
c delete FROZENCONFIG support
e
s 00004/00003/00314
d D 8.16 93/08/17 09:49:13 eric 33 32
c strengthen admonishments against FROZENCONFIG
e
s 00004/00000/00313
d D 8.15 93/08/15 13:18:30 eric 32 31
c describe makesendmail script
e
s 00011/00009/00302
d D 8.14 93/08/15 09:26:12 eric 31 30
c cleanup system-dependent Makefiles
e
s 00064/00020/00247
d D 8.13 93/08/14 11:32:03 eric 30 29
c eliminate YPCOMPAT (do this automatically if NIS and NDBM are defined)
e
s 00003/00001/00264
d D 8.12 93/07/28 08:10:30 eric 29 28
c NeXT changes
e
s 00003/00005/00262
d D 8.11 93/07/27 21:38:10 eric 28 27
c portability enhancements: NeXT and SCO
e
s 00036/00007/00231
d D 8.10 93/07/26 09:21:53 eric 27 26
c signal and file locking portability changes
e
s 00003/00000/00235
d D 8.9 93/07/21 12:17:36 eric 26 25
c ARBPTR_T
e
s 00003/00000/00232
d D 8.8 93/07/21 09:09:00 eric 25 24
c portability for Sony NEWS workstations
e
s 00001/00000/00231
d D 8.7 93/07/20 19:24:36 eric 24 23
c RISCOS and SGI fixes; fix error handling (caused error messages to
c be discarded in some circumstances)
e
s 00011/00006/00220
d D 8.6 93/07/20 15:35:37 eric 23 22
c more portability changes, including ConvexOS support
e
s 00007/00000/00219
d D 8.5 93/07/19 20:50:04 eric 22 21
c SGI IRIX & ANSI C portability
e
s 00012/00010/00207
d D 8.4 93/07/19 11:30:32 eric 21 20
c HASSETEUID => HASSETREUID and changes to avoid having to do
c setuid(getuid()) in main.
e
s 00010/00000/00207
d D 8.3 93/07/13 12:58:13 eric 20 19
c many fixes.  primarily fix for seteuid problem in 8.2; also,
c Solaris compatibility fixes; timed out messages problems; messages
c silently discarded if checkcompat returned EX_TEMPFAIL
e
s 00008/00001/00199
d D 8.2 93/07/11 06:52:16 eric 19 18
c huge number of changes for 8.2, including IRIX & Solaris portability;
c improved error checking; fix -m flag and add -O flag in maps; fix long
c DNS timeouts; relax safefile restrictions; add -X command line flag; etc.
e
s 00000/00000/00200
d D 8.1 93/06/07 10:27:15 bostic 18 17
c 4.4BSD snapshot (revision 8.1)
e
s 00049/00018/00151
d D 6.8 93/05/29 03:50:36 eric 17 16
c clarify compilation flags
e
s 00087/00012/00082
d D 6.7 93/05/28 16:04:58 eric 16 15
c document compile flags
e
s 00004/00002/00090
d D 6.6 93/05/21 07:06:31 eric 15 14
c need to delete ndbm.h from db library as well as ndbm.o
e
s 00004/00001/00088
d D 6.5 93/03/18 11:54:06 eric 14 13
c point people at conf.h
e
s 00002/00000/00087
d D 6.4 93/02/14 14:41:27 eric 13 12
c HPUX and OSF/1 support; fix SMTP reply codes & multiple SMTP error
c problem; consider cache timeout non-permanent; be more graceful on OS
c failures; log forward, alias, and userdb expansions on log level 10
e
s 00008/00000/00079
d D 6.3 93/02/12 11:51:08 eric 12 11
c fix wildcard MX handling (option W no longer needed); fix
c process title when using cached connection; many minor fixes
e
s 00011/00003/00068
d D 6.2 93/01/05 08:24:56 eric 11 10
c describe Makefile differences
e
s 00000/00000/00071
d D 6.1 92/12/21 16:07:55 eric 10 9
c Release 6
e
s 00003/00013/00068
d D 4.6 91/04/23 19:52:41 bostic 9 8
c new copyright; att/bsd/shared
e
s 00011/00009/00070
d D 4.5 88/07/10 12:43:25 bostic 8 7
c install approved copyright notice
e
s 00012/00006/00067
d D 4.4 88/03/13 19:51:24 bostic 7 6
c add Berkeley specific header
e
s 00000/00004/00073
d D 4.3 88/03/13 16:58:23 bostic 6 5
c remove ref's to bmove and bcopy; they're in the C library.
e
s 00011/00000/00066
d D 4.2 85/06/07 21:34:51 miriam 5 4
m 
c Add copyright
e
s 00000/00000/00066
d D 4.1 83/07/25 19:43:19 eric 4 3
m 
c 4.2 release version
e
s 00020/00175/00046
d D 3.3 82/12/24 07:42:48 eric 3 2
m 
c make reasonable with today's reality -- a lot of stuff has been
c stripped out here that ought to be added to doc/op.me.
e
s 00013/00013/00208
d D 3.2 82/06/17 10:43:01 eric 2 1
c move junk into AUX directory
e
s 00221/00000/00000
d D 3.1 82/01/10 22:09:48 eric 1 0
c date and time created 82/01/10 22:09:48 by eric
e
u
U
f b 
f i 
t
T
I 5
D 9
#
E 9
I 8
D 101
# Copyright (c) 1983 Eric P. Allman
E 101
I 101
# Copyright (c) 1983, 1995 Eric P. Allman
E 101
E 8
D 7
#  Sendmail
#  Copyright (c) 1983  Eric P. Allman
#  Berkeley, California
E 7
I 7
D 9
# Copyright (c) 1988 Regents of the University of California.
E 9
I 9
# Copyright (c) 1988 The Regents of the University of California.
E 9
# All rights reserved.
E 7
#
D 7
#  Copyright (c) 1983 Regents of the University of California.
#  All rights reserved.  The Berkeley software License Agreement
#  specifies the terms and conditions for redistribution.
E 7
I 7
D 9
# Redistribution and use in source and binary forms are permitted
D 8
# provided that this notice is preserved and that due credit is given
# to the University of California at Berkeley. The name of the University
# may not be used to endorse or promote products derived from this
# software without specific prior written permission. This software
# is provided ``as is'' without express or implied warranty.
E 8
I 8
# provided that the above copyright notice and this paragraph are
# duplicated in all such forms and that any documentation,
# advertising materials, and other materials related to such
# distribution and use acknowledge that the software was developed
# by the University of California, Berkeley.  The name of the
# University may not be used to endorse or promote products derived
# from this software without specific prior written permission.
# THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
# IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
# WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
E 9
I 9
# %sccs.include.redist.sh%
E 9
E 8
E 7
#
#	%W% (Berkeley) %G%
I 7
D 8
#
#  Sendmail
#  Copyright (c) 1983  Eric P. Allman
#  Berkeley, California
E 8
E 7
#
I 9

E 9
E 5
I 1
D 3
This directory contains the files for sendmail.  On some
installations it may also contain the source files for
auxiliary mailers.
E 3
I 3
This directory contains the source files for sendmail.
E 3

D 3
INSTALLING SENDMAIL
E 3
I 3
D 16
For installation instructions, please read the document ../doc/op.me:
E 16
I 16
For detailed instructions, please read the document ../doc/op.me:
E 16
E 3

D 3
This is a non-trivial task -- please plan to take time to think
about this process carefully.
E 3
I 3
D 16
	nroff -me ../doc/op.me
E 16
I 16
	eqn ../doc/op.me | pic | ditroff -me
E 16
E 3

I 89
D 93
DO NOT USE MAKE to compile sendmail -- instead, use the "makesendmail"
E 93
I 93
D 94
*******************
* DO NOT USE MAKE * to compile sendmail -- instead, use the "makesendmail"
*******************
E 93
script located in the src directory.  It will find an appropriate
Makefile, and create an appropriate obj.* subdirectory so that
multiplatform support works easily.
E 94
I 94
*********************
!! DO NOT USE MAKE !!  to compile sendmail -- instead, use the
*********************  "makesendmail" script located in the src
directory.  It will find an appropriate Makefile, and create an
appropriate obj.* subdirectory so that multiplatform support
works easily.
E 94

E 89
I 11
D 31
The Makefile is for the new Berkeley make, available from ftp.uu.net
in the directory /systems/unix/bsd-sources/usr.bin/make.  There is
also a Makefile.dist which is much less clever, but works on the old
traditional make.  You can use this using:
E 31
I 31
D 61
The Makefile is for the new (4.4BSD) Berkeley make, available from
ftp.uu.net in the directory /systems/unix/bsd-sources/usr.bin/make.
D 40
It has assumptions about the 4.4 file system layout built in.  There
is also a Makefile.dist which is much less clever, but works on the
old traditional make.  You can use this using:
E 40
I 40
(Paul Southworth <pauls@umich.edu> published a description of porting
this make in comp.unix.bsd.)  This Makefile has assumptions about the
4.4 file system layout built in.
E 61
I 61
The Makefile is for the new (4.4BSD) Berkeley make and uses syntax
that is not recognized by older makes.  It also has assumptions
about the 4.4 file system layout built in.  See below for details
about other Makefiles.
E 61
E 40
E 31

I 40
D 89
There is also a Makefile.dist which is much less clever, but works on
the old traditional make.  You can use this using:
E 89
I 89
If you are porting to a new architecture for which there is no existing
Makefile, you might start with Makefile.dist.  This works on the old
traditional make, but isn't customized for any particular architecture.
E 89

E 40
D 89
	make -f Makefile.dist
E 89
I 89
	**************************************************
	**  Read below for more details of Makefiles.	**
	**************************************************
E 89

I 56
D 61
     <<<<<<<<<<<<<<<<<<<<  IMPORTANT  >>>>>>>>>>>>>>>>>>>>
E 56
I 12
D 16
If you are compiling on SunOS, you must use -Bstatic -- if you do not,
frozen configuration files fail in bizarre ways and you will open up
several security holes.
E 16
I 16
D 31
There are a couple of other Makefiles for other systems -- these are
E 31
I 31
There are a bunch of other Makefiles for other systems -- these are
E 31
D 17
the ones that I use, and I don't guarantee that they will work in
your environment.  They are provided for information only.
E 17
I 17
the ones that I use, they have "Berkeley quirks" in them, and I don't
D 31
guarantee that they will work in your environment.  To make it worse,
some are for the new Berkeley make, and some are for the old make.
I provide them for information only.  Still, they may help you get
started.  They have names like "Makefile.HPUX".
E 31
I 31
guarantee that they will work unmodified in your environment.  However,
they are all designed for the old make and can be used to help you get
started.  They have names like "Makefile.HPUX".  Many of them include
-I/usr/sww/include/db and -L/usr/sww/lib -- this is Berkeley's
D 50
location for the new database libraries, described below.
E 50
I 50
location for the new database libraries, described below.  You don't
have to remove these definitions if you don't have these directories.
I 56
Please look for an appropriate Makefile before you start trying to
compile with Makefile or Makefile.dist.
     <<<<<<<<<<<<<<<<<<<<<<<<<<*>>>>>>>>>>>>>>>>>>>>>>>>>>
E 61
I 61
D 89
**************************************************
**  Read below for more details of Makefiles.	**
**************************************************
E 61
E 56
E 50
E 31
E 17
E 16

I 32
There is also a shell script (makesendmail) that tries to be clever
about using object subdirectories.  It's pretty straightforward, and
may help if you share a source tree among different architectures.

E 89
I 44
D 50
IMPORTANT:  DO NOT USE OPTIMIZATION (``-O'') IF YOU ARE RUNNING GCC
2.4.x.  THERE IS A BUG IN THE GCC OPTIMIZER THAT CAUSES SENDMAIL TO
FAIL MISERABLY.
E 50
I 50
**************************************************************************
**  IMPORTANT:  DO NOT USE OPTIMIZATION (``-O'') IF YOU ARE RUNNING	**
**  GCC 2.4.x or 2.5.x.  THERE IS A BUG IN THE GCC OPTIMIZER THAT	**
**  CAUSES SENDMAIL COMPILES TO FAIL MISERABLY.				**
**************************************************************************
E 50

I 46
D 50
IMPORTANT:  Read the appropriate paragraphs in the section on
``Operating System and Compile Quirks''.
E 50
I 50
Jim Wilson of Cygnus believes he has found the problem -- it will
probably be fixed in GCC 2.5.6 -- but until this is verified, be
very suspicious of gcc -O.
E 50
E 46
E 44
E 32
I 27

I 100
This problem is reported to have been fixed in gcc 2.6.

E 100
I 50
**************************************************************************
**  IMPORTANT:  Read the appropriate paragraphs in the section on	**
**  ``Operating System and Compile Quirks''.				**
**************************************************************************
I 61


+-----------+
| MAKEFILES |
+-----------+

I 89
By far, the easiest way to compile sendmail is to use the "makesendmail"
D 93
script.  This uses the "uname" command to figure out what architecture
you are on and selects a proper Makefile accordingly.  It also creates
a subdirectory per object format, so that multiarchitecture support is
E 93
I 93
script:

	sh makesendmail

This uses the "uname" command to figure out what architecture you are
on and selects a proper Makefile accordingly.  It also creates a
subdirectory per object format, so that multiarchitecture support is
E 93
easy.  In general this should be all you need.  However, if for some
reason this doesn't work (e.g., NeXT systems don't have the "uname"
command) you may have to set up your compile environment by hand.

E 89
The "Makefile"s in these directories are from 4.4 BSD, and hence
really only work properly if you are on a 4.4 system.  In particular,
they use new syntax that will not be recognized on old make programs,
and some of them do things like ``.include ../../Makefile.inc'' to
pick up some system defines.  If you are getting sendmail separately,
these files won't be included in the distribution, as they are
outside of the sendmail tree.

Instead, you should use one of the other Makefiles, such as
Makefile.SunOS for a SunOS system, and so forth.  These should
work with the version of make that is appropriate for that
D 89
system.
E 89
I 89
system.  All other Makefiles are in the "src/Makefiles" subdirectory.
They use the version of make that is native for that system.  These
are the Makefiles that I use, and they have "Berkeley quirks" in them.
I can't guarantee that they will work unmodified in your environment.
In particular, Many of them include -I/usr/sww/include/db and
-L/usr/sww/lib -- these are Berkeley's locations in the ``Software
Warehouse'' for the new database libraries, described below.  You don't
have to remove these definitions if you don't have these directories,
but you may have to remove -DNEWDB from the DBMDEF definition.
E 89

D 89
There are a bunch of other Makefiles for other systems with names
like Makefile.HPUX for an HP-UX system.  They use the version of
make that is native for that system.  These are the Makefiles that
I use, and they have "Berkeley quirks" in them.  I can't guarantee
that they will work unmodified in your environment.  Many of them
include -I/usr/sww/include/db and -L/usr/sww/lib -- this is Berkeley's
location (the ``Software Warehouse'') for the new database libraries,
described below.  You don't have to remove these definitions if you
don't have these directories.

E 89
Please look for an appropriate Makefile before you start trying to
compile with Makefile or Makefile.dist.

If you want to port the new Berkeley make, you can get it from
ftp.uu.net in the directory /systems/unix/bsd-sources/usr.bin/make.
Diffs and instructions for building this version of make under
SunOS 4.1.x are available on ftp.css.itd.umich.edu in
D 113
/pub/systems/sun/Net2-make.sun4.diff.Z.  Diffs and instructions
E 113
I 113
/pub/systems/sun/Net2-make-sun4.diff.Z.  Diffs and instructions
E 113
for building this version of make under IBM AIX 3.2.4 are available
on ftp.uni-stuttgart.de in /sw/src/patches/bsd-make-rus-patches.
I 86
For Ultrix, try ftp.vix.com:~ftp/pub/patches/pmake-for-ultrix.Z.
E 86
Paul Southworth <pauls@umich.edu> published a description of porting
this make in comp.unix.bsd.

The complete text of the Makefile.inc that is in the parent of the
sendmail directory is:

	#	@(#)Makefile.inc	8.1 (Berkeley) 6/6/93

	BINDIR?=	/usr/sbin
E 61
E 50
I 46

I 50

E 50
E 46
I 30
+----------------------+
| DATABASE DEFINITIONS |
+----------------------+

There are several database formats that can be used for the alias files
and for general maps.  When used for alias files they interact in an
attempt to be back compatible.

The three options are NEWDB (the new Berkeley DB package), NDBM (the
older DBM implementation -- the very old V7 implementation is no
longer supported), and NIS (Network Information Services).  Used alone
D 37
these just include the support they indicate.
E 37
I 37
these just include the support they indicate.  [If you are using NEWDB,
D 89
get the latest version from FTP.CS.Berkeley.EDU in /ucb/4bsd.  DO NOT
D 50
use the version from the Net2 distribution!]
E 50
I 50
use the version from the Net2 distribution!  However, if you are on
BSD/386 or 386BSD-based systems, use the one that already exists
D 78
on your system.  You may need to define OLD_NEWDB to do this.]
E 78
I 78
on your system.  You may need to #define OLD_NEWDB 1 to do this.]
E 89
I 89
get the latest version from FTP.CS.Berkeley.EDU in /ucb/4bsd/db.tar.Z
(or db.tar.gz).  DO NOT use the version from the Net2 distribution!
However, if you are on BSD/386 or 386BSD-based systems, use the one
that already exists on your system.  You may need to #define OLD_NEWDB
1 to do this.]
E 89
E 78
E 50
E 37

I 67
[NOTE WELL: it is CRITICAL that you remove ndbm.o from libdb.a and
ndbm.h from the appropriate include directories if you want to get
ndbm support.  These files OVERRIDE calls to ndbm routines -- in
particular, if you leave ndbm.h in, you can find yourself using
the new db package even if you don't define NEWDB.]

E 67
If NEWDB and NDBM are defined (but not NIS), then sendmail will read
NDBM format alias files, but the next time a newaliases is run the
format will be converted to NEWDB; that format will be used forever
more.  This is intended as a transition feature.  [Note however that
the NEWDB library also catches and maps NDBM calls; you will have to
back out this feature to get this to work.  See ``Quirks'' section
below for details.]

D 108
If all three are defined, sendmail operates as described above, and also
looks for the file /var/yp/Makefile.  If it exists, newaliases will
build BOTH the NEWDB and NDBM format alias files.  However, it will
only use the NEWDB file; the NDBM format file is used only by the
NIS subsystem.
E 108
I 108
If all three are defined and the name of the file includes the string
"/yp/", sendmail will rebuild BOTH the NEWDB and NDBM format alias
files.  However, it will only read the NEWDB file; the NDBM format file
is used only by the NIS subsystem.
E 108

D 108
If NDBM and NIS are defined (regardless of the definition of NEWDB
or the existance of /var/yp/Makefile), sendmail adds the special
E 108
I 108
If NDBM and NIS are defined (regardless of the definition of NEWDB),
and the filename includes the string "/yp/", sendmail adds the special
E 108
tokens "YP_LAST_MODIFIED" and "YP_MASTER_NAME", both of which are
required if the NDBM file is to be used as an NIS map.

D 89
All of -DNEWDB, -DNDBM, and -DNIS are normally defined in the DBMDEF
line in the Makefile.
E 89
I 89
There is also preliminary support for NIS+ (-DNISPLUS), Hesiod
(-DHESIOD), and NetInfo (-DNETINFO).  These have not been well
tested.

All of -DNEWDB, -DNDBM, -DNIS, -DNISPLUS, -DHESIOD, and -DNETINFO are
normally defined in the DBMDEF line in the Makefile.
E 89

I 116
If you define NEWDB or HESIOD you get the User Database (USERDB)
automatically.  Generally you do want to have NEWDB for it to do
anything interesting.  See above for getting the Berkeley "db"
package (i.e., NEWDB).  There is no separate "user database"
package -- don't bother searching for it on the net.

E 116

E 30
+---------------+
| COMPILE FLAGS |
+---------------+

E 27
I 16
Whereever possible, I try to make sendmail pull in the correct
D 17
compilation options based on automatically defined symbols.  Some
machines don't seem to have useful symbols availble, requiring
the following compilation flags in the Makefile:
E 17
I 17
compilation options needed to compile on various environments based on
automatically defined symbols.  Some machines don't seem to have useful
symbols availble, requiring the following compilation flags in the
Makefile:
E 17

SOLARIS		Define this if you are running Solaris 2.0 or higher.
I 50
SOLARIS_2_3	Define this if you are running Solaris 2.3 or higher.
I 52
SUNOS403	Define this if you are running SunOS 4.0.3.
E 52
E 50
D 19
NeXT		Define this if you are on a NeXT box.
E 19
I 19
D 29
__NeXT__	Define this if you are on a NeXT box.  (This one may
E 29
I 29
NeXT		Define this if you are on a NeXT box.  (This one may
E 29
D 28
		be pre-defined for you.)
E 28
I 28
		be pre-defined for you.)  There are other hacks you
		have to make -- see below.
E 28
E 19
_AIX3		Define this if you are IBM AIX 3.x.
I 24
RISCOS		Define this if you are running RISC/os from MIPS.
I 74
IRIX		Define this if you are running IRIX from SGI.
E 74
I 40
_SCO_unix_	Define this if you are on SCO UNIX.
I 51
_SCO_unix_4_2	Define this if you are on SCO Open Server 3.2v4.
I 82
DGUX		Define this if you are on DG/UX 5.4.3 or later
DGUX_5_4_2	Define this if you are on DG/UX systems prior to 5.4.3.
I 84
NonStop_UX_BXX	Define this if you are on a Tandem NonStop-UX release
		Bxx system.
I 95
IRIX64		Define this if you are on an IRIX64 system.
E 95
E 84
E 82
E 51
E 40
E 24

D 17
Other compilation flags that you may need to tweak in order to get
it to compile and link properly include:
E 17
I 17
If you are a system that sendmail has already been ported to, you
probably won't have to touch these.  But if you are porting, you may
D 23
have to tweak the following compilation flags in order to get
it to compile and link properly:
E 23
I 23
have to tweak the following compilation flags in conf.h in order to
get it to compile and link properly:
E 23
E 17

D 23
UNSETENV	Define this if your system library does NOT include the
		"unsetenv" subroutine.
E 23
D 56
SYSTEM5		Adjust for System V.
E 56
I 56
SYSTEM5		Adjust for System V (not necessarily Release 4).
E 56
D 27
LOCKF		Set this if you do not have the flock system call -- it
		will revert to System V file locking.  There are some
		semantic gotchas, so flock is preferred.  Implied by
		SYSTEM5.
E 27
I 27
SYS5SIGNALS	Use System V signal semantics -- the signal handler
		is automatically dropped when the signal is caught.
		If this is not set, use POSIX/BSD semantics, where the
		signal handler stays in force until an exec or an
		explicit delete.  Implied by SYSTEM5.
I 45
SYS5SETPGRP	Use System V setpgrp() semantics.  Implied by SYSTEM5.
E 45
HASFLOCK	Set this if you prefer to use the flock(2) system call
		rather than using fcntl-based locking.  Fcntl locking
		has some semantic gotchas, but many vendor systems
		also interface it to lockd(8) to do NFS-style locking.
		For this reason, this should not be set unless you
		don't have an alternative.
E 27
D 23
SYS5TZ		Use System V-style time zones.  If not set, the TZ
		environment variable is ignored.  Implied by SYSTEM5.
E 23
HASUNAME	Set if you have the "uname" system call.  Implied by
		SYSTEM5.
I 23
D 28
HASSETENV	Define this if your system library has the "setenv"
		call.  If not defined, sendmail defines this in terms
		of the putenv(3) routine.
E 28
HASUNSETENV	Define this if your system library has the "unsetenv"
		subroutine.
E 23
D 17
HASSTATFS	Define this if you have the statfs(2) system call.
HASUSTAT	Define this if you have the ustat(2) system call.
E 17
I 17
D 65
HASSTATFS	Define this if you have the statfs(2) system call.  It's
		not a disaster to get this wrong -- but you do lose the
		queue free space code.
HASUSTAT	Define this if you have the ustat(2) system call.  It's
		not a disaster to get this wrong -- but you do lose the
		queue free space code.
E 65
E 17
HASSETSID	Define this if you have the setsid(2) system call.  This
		is implied if your system appears to be POSIX compliant.
HASINITGROUPS	Define this if you have the initgroups(3) routine.
I 19
HASSETVBUF	Define this if you have the setvbuf(3) library call.
		If you don't, setlinebuf will be used instead.  This
		defaults on if your compiler defines __STDC__.
I 20
D 21
HASSETEUID	Define this if you have seteuid(2) ***AND*** root can use
		it to change to an arbitrary user.  This second condition
		is not satisfied on AIX 3.x.  You may find that
		your system has setreuid(2) or setresuid(2), in which
		case you will also have to #define seteuid(uid) to be
		the appropriate call.  The important thing is that you
		have a call that will set the effective uid and NOT
		set the real or saved uid.  Setting this improves the
		security somewhat, since sendmail doesn't have to read
		.forward and :include: files as root.
E 21
I 21
HASSETREUID	Define this if you have setreuid(2) ***AND*** root can
		use setreuid to change to an arbitrary user.  This second
		condition is not satisfied on AIX 3.x.  You may find that
		your system has setresuid(2), (for example, on HP-UX) in
		which case you will also have to #define setreuid(r, e)
		to be the appropriate call.  Some systems (such as Solaris)
D 50
		have a compatibility routine that doesn't work properly.
E 50
I 50
		have a compatibility routine that doesn't work properly,
		but may have "saved user ids" properly implemented so you
		can ``#define setreuid(r, e) seteuid(e)'' and have it work.
E 50
		The important thing is that you have a call that will set
D 50
		the effective uid independently of the real or saved uid.
		Setting this improves the security somewhat, since
		sendmail doesn't have to read .forward and :include: files
		as root.
E 50
I 50
		the effective uid independently of the real or saved uid
		and be able to set the effective uid back again when done.
		There's a test program in ../test/t_setreuid.c that will
		try things on your system.  Setting this improves the
		security, since sendmail doesn't have to read .forward
		and :include: files as root.  There are certain attacks
		that may be unpreventable without this call.
I 106
USESETEUID	Define this to 1 if you have seteuid(2) if you have a seteuid
		system call that will allow root to set only the effective
		user id to an arbitrary value ***AND*** you have saved user
		ids.  This is preferable to HASSETREUID if these conditions
		are fulfilled.  These are the semantics of the to-be-released
		revision of Posix.1.  The test program ../test/t_seteuid.c
		will try this out on your system.  If you define both
		HASSETREUID and USESETEUID, the former is ignored.
E 106
HASLSTAT	Define this if you have symbolic links (and thus the
		lstat(2) system call).  This improves security.  Unlike
		most other options, this one is on by default, so you
		need to #undef it in conf.h if you don't have symbolic
		links (these days everyone does).
I 83
HASSETRLIMIT	Define this to 1 if you have the setrlimit(2) syscall.
		You can define it to 0 to force it off.  It is assumed
		if you are running a BSD-like system.
HASULIMIT	Define this if you have the ulimit(2) syscall (System V
		style systems).  HASSETRLIMIT overrides, as it is more
		general.
E 83
I 57
NEEDGETOPT	Define this if you need a reimplementation of getopt(3).
		On some systems, getopt does very odd things if called
		to scan the arguments twice.  This flag will ask sendmail
		to compile in a local version of getopt that works
		properly.
NEEDSTRTOL	Define this if your standard C library does not define
		strtol(3).  This will compile in a local version.
NEEDVPRINTF	Define this if your standard C library does not define
		vprintf(3).  Note that the resulting fake implementation
		is not very elegant and may not even work on some
		architectures.
I 77
NEEDFSYNC	Define this if your standard C library does not define
		fsync(2).  This will try to simulate the operation using
		fcntl(2); if that is not available it does nothing, which
		isn't great, but at least it compiles and runs.
E 77
D 60
NEEDGETUSERSHELL
D 59
		Define this if you do not have getusershell(3) in your
D 58
		standard C library.  Currently it does not compile in
		a new version -- instead, it just deletes the call;
		a future version will supply a replacement implementation.
E 58
I 58
		standard C library.  This compiles in a version that
		looks in /etc/shells (no NIS-style support) and defaults
		to /bin/sh and /bin/csh.
E 59
I 59
		Define this to 1 if you do not have getusershell(3) in
		your standard C library.  This will cause inclusion of
		a getusershell implementation that looks in /etc/shells
		(no NIS-style support) and defaults to /bin/sh and
		/bin/csh if that file does not exist.  You can #define
		this to 0 to force it to believe that getusershell(3)
		does exist in the C library (for example, for SVR4
		systems that have BSD extensions, such as Solaris 2.x).
E 60
I 60
HASGETUSERSHELL	Define this to 1 if you have getusershell(3) in your
		standard C library.  If this is not defined, or is defined
		to be 0, sendmail will scan the /etc/shells file (no
		NIS-style support, defaults to /bin/sh and /bin/csh if
		that file does not exist) to get a list of unrestricted
		user shells.  This is used to determine whether users
		are allowed to forward their mail to a program or a file.
I 110
NEEDPUTENV	Define this if your system needs am emulation of the
		putenv(3) call.  Define to 1 to implement it in terms
		of setenv(3) or to 2 to do it in terms of primitives.
E 110
E 60
E 59
E 58
E 57
E 50
I 22
GIDSET_T	The type of entries in a gidset passed as the second
		argument to getgroups(2).  Historically this has been an
		int, so this is the default, but some systems (such as
		IRIX) pass it as a gid_t, which is an unsigned short.
		This will make a difference, so it is important to get
		this right!  However, it is only an issue if you have
		group sets.
I 25
SLEEP_T		The type returned by the system sleep() function.
		Defaults to "unsigned int".  Don't worry about this
		if you don't have compilation problems.
I 26
ARBPTR_T	The type of an arbitrary pointer -- defaults to "void *".
		If you are an very old compiler you may need to define
		this to be "char *".
E 26
E 25
E 22
E 21
E 20
E 19
I 17
LA_TYPE		The type of load average your kernel supports.  These
D 71
		can be LA_SUBR (4) if you have the getloadavg(3) routine,
E 71
I 71
		can be one of:
D 104
		LA_ZERO (1) -- it always returns the load average as
E 104
I 104
		 LA_ZERO (1) -- it always returns the load average as
E 104
			"zero" (and does so on all architectures).
D 104
		LA_SUBR (4) if you have the getloadavg(3) routine,
E 71
D 37
		LA_FLOAT (3) if you read kmem and interpret the value
		as a floating point number, LA_INT (2) to interpret as
		an integer.  These last two have several other parameters
		that they try to divine: the name of your kernel, the name
		of the variable in the kernel to examine, the number of
		bits of precision in a fixed point load average, and so
		forth.  In desparation, use LA_ZERO -- it always returns
		the load average as "zero" (and does so on all architectures).
		The actual code is in conf.c -- it can be tweaked if you
		are brave.
E 37
I 37
		LA_MACH (5) to use MACH-style load averages (calls
E 104
I 104
		 LA_INT (2) to read /dev/kmem for the symbol avenrun and
			interpret as a long integer.
		 LA_FLOAT (3) same, but interpret the result as a floating
			point number.
		 LA_SHORT (6) to interpret as a short integer.
		 LA_SUBR (4) if you have the getloadavg(3) routine in your
			system library.
		 LA_MACH (5) to use MACH-style load averages (calls
E 104
D 71
		processor_set_info()), LA_FLOAT (3) if you read kmem and
		interpret the value as a floating point number, LA_INT (2)
		to interpret as a long integer, or LA_SHORT (6) to
		interpret as a short integer.  These last three have
		several other parameters that they try to divine: the
		name of your kernel, the name of the variable in the
		kernel to examine, the number of bits of precision in
D 68
		a fixed point load average, and so forth.  In desparation,
E 68
I 68
		a fixed point load average, and so forth.  In desperation,
E 68
		use LA_ZERO (1) -- it always returns the load average as
		"zero" (and does so on all architectures).  The actual
		code is in conf.c -- it can be tweaked if you are brave.
E 71
I 71
			processor_set_info()),
D 104
		LA_PROCSTR (7) to read /proc/loadavg and interpret it
E 104
I 104
		 LA_PROCSTR (7) to read /proc/loadavg and interpret it
E 104
			as a string representing a floating-point
D 104
			number (Linux-style),
		LA_FLOAT (3) if you read kmem and interpret the value
			as a floating point number,
		LA_INT (2) to interpret as a long integer,
		LA_SHORT (6) to interpret as a short integer.
		These last three have several other parameters that they
		try to divine: the name of your kernel, the name of the
		variable in the kernel to examine, the number of bits of
		precision in a fixed point load average, and so forth.
E 104
I 104
			number (Linux-style).
		 LA_READKSYM (8) is an implementation suitable for some
			versions of SVr4 that uses the MIOC_READKSYM ioctl
			call to read /dev/kmem.
		 LA_DGUX (9) is a special implementation for DG/UX that uses
			the dg_sys_info system call.
		 LA_HPUX (10) is an HP-UX specific version that uses the
			pstat_getdynamic system call.
		LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM have several
		other parameters that they try to divine: the name of your
		kernel, the name of the variable in the kernel to examine,
		the number of bits of precision in a fixed point load average,
		and so forth.
E 104
		In desperation, use LA_ZERO.  The actual code is in
		conf.c -- it can be tweaked if you are brave.
I 104
FSHIFT		For LA_INT, LA_SHORT, and LA_READKSYM, this is the number
		of bits of load average after the binary point -- i.e.,
		the number of bits to shift right in order to scale the
		integer to get the true integer load average.  Defaults to 8.
_PATH_UNIX	The path to your kernel.  Needed only for LA_INT, LA_SHORT,
		and LA_FLOAT.  Defaults to "/unix" on System V, "/vmunix"
		everywhere else.
LA_AVENRUN	For LA_INT, LA_SHORT, and LA_FLOAT, the name of the kernel
		variable that holds the load average.  Defaults to "avenrun"
		on System V, "_avenrun" everywhere else.
E 104
E 71
I 65
SFS_TYPE	Encodes how your kernel can locate the amount of free
		space on a disk partition.  This can be set to SFS_NONE
		(0) if you have no way of getting this information,
		SFS_USTAT (1) if you have the ustat(2) system call,
		SFS_4ARGS (2) if you have a four-argument statfs(2)
		system call (and the include file is <sys/statfs.h>),
D 76
		and SFS_VFS (3), SFS_MOUNT (4), or SFS_STATFS (5) if
		you have the two-argument statfs(2) system call, with
		includes in <sys/vfs.h>, <sys/mount.h>, or <sys/statfs.h>
		respectively.  The default if nothing is defined is
		SFS_NONE.
E 76
I 76
D 79
		and SFS_VFS (3), SFS_MOUNT (4), SFS_STATFS (5) or
		SFS_STATVFS (6) if you have the two-argument statfs(2)
		system call, with includes in <sys/vfs.h>, <sys/mount.h>,
		<sys/statfs.h>, or <sys/statvfs.h> respectively.  The
		default if nothing is defined is SFS_NONE.
E 79
I 79
		SFS_VFS (3), SFS_MOUNT (4), SFS_STATFS (5) if you have
		the two-argument statfs(2) system call with includes in
		<sys/vfs.h>, <sys/mount.h>, or <sys/statfs.h> respectively,
		or SFS_STATVFS (6) if you have the two-argument statvfs(2)
		call.  The default if nothing is defined is SFS_NONE.
I 96
SFS_BAVAIL	with SFS_4ARGS hou can also set SFS_BAVAIL to the field name
		in the statfs structure that holds the useful information;
		this defaults to f_bavail.
E 96
I 88
SPT_TYPE	Encodes how your system can display what a process is doing
		on a ps(1) command (SPT stands for Set Process Title).  Can
		be set to:
		SPT_NONE (0) -- Don't try to set the process title at all.
		SPT_REUSEARGV (1) -- Pad out your argv with the information;
			this is the default if none specified.
		SPT_BUILTIN (2) -- The system library has setproctitle.
		SPT_PSTAT (3) -- Use the PSTAT_SETCMD option to pstat(2)
			to set the process title; this is used by HP-UX.
		SPT_PSSTRINGS (4) -- Use the magic PS_STRINGS pointer (4.4BSD).
SPT_PADCHAR	Character used to pad the process title; if undefined,
		the space character (0x20) is used.  This is ignored if
		SPT_TYPE != SPT_REUSEARGV
E 88
E 79
E 76
E 65
E 37
I 23
ERRLIST_PREDEFINED
		If set, assumes that some header file defines sys_errlist.
		This may be needed if you get type conflicts on this
		variable -- otherwise don't worry about it.
I 42
WAITUNION	The wait(2) routine takes a "union wait" argument instead
		of an integer argument.  This is for compatibility with
		old versions of BSD.
I 50
SCANF		You can set this to extend the F command to accept a
		scanf string -- this gives you a primitive parser for
		class definitions -- BUT it can make you vulnerable to
		core dumps if the target file is poorly formed.
I 51
SYSLOG_BUFSIZE	You can define this to be the size of the buffer that
		syslog accepts.  If it is not defined, it assumes a
		1024-byte buffer.  If the buffer is very small (under
		256 bytes) the log message format changes -- each
		e-mail message will log many more messages, since it
		will log each piece of information as a separate line
		in syslog.
I 72
BROKEN_RES_SEARCH
		On Ultrix (and maybe other systems?) if you use the
		res_search routine with an unknown host name, it returns
		-1 but sets h_errno to 0 instead of HOST_NOT_FOUND.  If
		you set this, sendmail considers 0 to be the same as
		HOST_NOT_FOUND.
I 85
NAMELISTMASK	If defined, values returned by nlist(3) are masked
		against this value before use -- a common value is
		0x7fffffff to strip off the top bit.
I 104
BSD4_4_SOCKADDR	If defined, socket addresses have an sa_len field that
		defines the length of this address.
E 104

E 85
E 72
E 51
E 50
E 42
E 23
E 17

I 27

+-----------------------+
| COMPILE-TIME FEATURES |
+-----------------------+

E 27
D 17
Compilation flags that add support for special features include:
E 17
I 17
There are a bunch of features that you can decide to compile in, such
as selecting various database packages and special protocol support.
Several are assumed based on other compilation flags -- if you want to
"un-assume" something, you probably need to edit conf.h.  Compilation
flags that add support for special features include:
E 17

NDBM		Include support for "new" DBM library for aliases and maps.
I 30
		Normally defined in the Makefile.
E 30
NEWDB		Include support for Berkeley "db" package (hash & btree)
D 30
		for aliases and maps.
E 30
I 30
		for aliases and maps.  Normally defined in the Makefile.
I 78
OLD_NEWDB	If non-zero, the version of NEWDB you have is the old
		one that does not include the "fd" call.  This call was
		added in version 1.5 of the Berkeley DB code.  If you
		use -DOLD_NEWDB=0 it forces you to use the new interface.
E 78
E 30
NIS		Define this to get NIS (YP) support for aliases and maps.
D 30
YPCOMPAT	Define this to force building of DBM versions of alias
		files even if you have NEWDB defined; this will only
		occur on NIS master machines.  It is independent of NIS.
E 30
I 30
		Normally defined in the Makefile.
I 104
NISPLUS		Define this to get NIS+ support for aliases and maps.
		Normally defined in the Makefile.
HESIOD		Define this to get Hesiod support for aliases and maps.
		Normally defined in the Makefile.
NETINFO		Define this to get NeXT NetInfo support for aliases and maps.
		Normally defined in the Makefile.
E 104
E 30
D 110
USERDB		Include support for the User Information Database.  Implied
D 17
		by NEWDB.
E 17
I 17
D 30
		by NEWDB conf.h.
E 30
I 30
		by NEWDB in conf.h.
E 110
I 110
USERDB		Define this to 1 to include support for the User Information
		Database.  Implied by NEWDB or HESIOD.  You can use
		-DUSERDB=0 to explicitly turn it off.
E 110
E 30
E 17
D 50
IDENTPROTO	Define this to get IDENT (RFC 1413) protocol support.
E 50
I 50
IDENTPROTO	Define this as 1 to get IDENT (RFC 1413) protocol support.
E 50
		This is assumed unless you are running on Ultrix or
		HP-UX, both of which have a problem in the UDP
D 50
		implementation.
E 50
I 50
		implementation.  You can define it to be 0 to explicitly
D 104
		turn off IDENT protocol support.
E 104
I 104
		turn off IDENT protocol support.  If defined off, the code
		is actually still compiled in, but it defaults off; you
		can turn it on by setting the IDENT timeout to 30s in the
		configuration file.
I 105
IP_SRCROUTE	Define this to 1 to get IP source routing information
		displayed in the Received: header.  This is assumed on
		most systems, but some (e.g., Ultrix) apparently have a
		broken version of getsockopt that doesn't properly
		support the IP_OPTIONS call.  You probably want this if
D 107
		your OS can cope with it.
E 107
I 107
		your OS can cope with it.  Symptoms of failure will be that
		it won't compile properly (that is, no support for fetching
		IP_OPTIONs), or it compiles but source-routed TCP connections
		either refuse to open or open and hang for no apparent reason.
		Ultrix and AIX are known to fail this way.
E 107
E 105
E 104
E 50
D 90
MIME		Include support for MIME-encapsulated error messages.
E 90
D 34
FROZENCONFIG	Define this to get support for frozen configuration
D 17
		files.  At this point this is NOT recommended.
E 17
I 17
D 33
		files.  Frozen configurations make sense if your I/O system
		is fast relative to your processor.  At this point this
		is NOT recommended.
E 33
I 33
		files.  Frozen configurations only make sense if your I/O
		system is fast relative to your processor.  At this point
		this is NOT RECOMMENDED.  Also, it doesn't work at all on
		some systems, notably SunOS, Solaris, and NeXT.
E 34
E 33
E 17
LOG		Set this to get syslog(3) support.  Defined by default
D 17
		in conf.h.
E 17
I 17
		in conf.h.  You want this if at all possible.
E 17
NETINET		Set this to get TCP/IP support.  Defined by default
D 17
		in conf.h
E 17
I 17
		in conf.h.  You probably want this.
E 17
NETISO		Define this to get ISO networking support.
SMTP		Define this to get the SMTP code.  Implied by NETINET
		or NETISO.
D 104
NAMED_BIND	Define this to get DNS (name daemon) support, including
E 104
I 104
NAMED_BIND	If non-zero, include DNS (name daemon) support, including
E 104
		MX support.  The specs you must use this if you run
		SMTP.  Defined by default in conf.h.
QUEUE		Define this to get queueing code.  Implied by NETINET
D 17
		or NETISO; required by SMTP.
E 17
I 17
		or NETISO; required by SMTP.  This gives you other good
		stuff -- it should be on.
E 17
DAEMON		Define this to get general network support.  Implied by
D 17
		NETINET or NETISO.
E 17
I 17
		NETINET or NETISO.  Defined by default in conf.h.  You
		almost certainly want it on.
E 17
MATCHGECOS	Permit fuzzy matching of user names against the full
		name (GECOS) field in the /etc/passwd file.  This should
		probably be on, since you can disable it from the config
D 17
		file if you want to.
E 17
I 17
		file if you want to.  Defined by default in conf.h.
I 104
MIME8TO7	If non-zero, include 8 to 7 bit MIME conversions.  This
		also controls advertisement of 8BITMIME in the ESMTP
		startup dialogue.
MIME7TO8	If non-zero, include 7 to 8 bit MIME conversions.  Not yet
		implemented.
E 104
E 17
D 88
SETPROCTITLE	Try to set the string printed by "ps" to something
D 17
		informative about what sendmail is doing.
E 17
I 17
		informative about what sendmail is doing.  Defined by
		default in conf.h.
E 88
E 17

I 27

D 50
+-------------------------------------+
E 50
I 50
+---------------------+
| DNS/RESOLVER ISSUES |
+---------------------+

Many systems have old versions of the resolver library.  At a minimum,
you should be running BIND 4.8.3; older versions may compile, but they
have known bugs that should give you pause.

Common problems in old versions include "undefined" errors for
dn_skipname.

Some people have had a problem with BIND 4.9; it uses some routines
that it expects to be externally defined such as strerror().  It may
help to link with "-l44bsd" to solve this problem.

I 51
!PLEASE! be sure to link with the same version of the resolver as
the header files you used -- some people have used the 4.9 headers
and linked with BIND 4.8 or vice versa, and it doesn't work.
Unfortunately, it doesn't fail in an obvious way -- things just
D 68
subtlely don't work.
E 68
I 68
subtly don't work.
E 68
E 51

I 115
WILDCARD MX RECORDS ARE A BAD IDEA!  The only situation in which they
work reliably is if you have two versions of DNS, one in the real world
which has a wildcard pointing to your firewall, and a completely
different version of the database internally that does not include
wildcard MX records that match your domain.  ANYTHING ELSE WILL GIVE
YOU HEADACHES!

E 115
I 51

E 51
+-------------------------------------+
E 50
| OPERATING SYSTEM AND COMPILE QUIRKS |
+-------------------------------------+

I 51
GCC 2.5.x problems  *** IMPORTANT ***
	Date: Mon, 29 Nov 93 19:08:44 PST
	From: wilson@cygnus.com (Jim Wilson)
	Message-Id: <9311300308.AA04608@cygnus.com>
	To: kenner@vlsi1.ultra.nyu.edu
	Subject: [cattelan@thebarn.com: gcc 2.5.4-2.5.5 -O bug]
	Cc: cattelan@thebarn.com, rms@gnu.ai.mit.edu, sendmail@cs.berkeley.edu

	This fixes a problem that occurs when gcc 2.5.5 is used to compile
	sendmail 8.6.4 with optimization on a sparc.

	Mon Nov 29 19:00:14 1993  Jim Wilson  (wilson@sphagnum.cygnus.com)

		* reload.c (find_reloads_toplev): Replace obsolete reference to
		BYTE_LOADS_*_EXTEND with LOAD_EXTEND_OP.

	*** clean-ss-931128/reload.c    Sun Nov 14 16:20:01 1993
	--- ss-931128/reload.c  Mon Nov 29 18:52:55 1993
	*************** find_reloads_toplev (x, opnum, type, ind
	*** 3888,3894 ****
		 force a reload in that case.  So we should not do anything here.  */
D 112
	  
E 112
I 112

E 112
		else if (regno >= FIRST_PSEUDO_REGISTER
	! #if defined(BYTE_LOADS_ZERO_EXTEND) || defined(BYTE_LOADS_SIGN_EXTEND)
		       && (GET_MODE_SIZE (GET_MODE (x))
			   <= GET_MODE_SIZE (GET_MODE (SUBREG_REG (x))))
	  #endif
	--- 3888,3894 ----
		 force a reload in that case.  So we should not do anything here.  */
D 112
	  
E 112
I 112

E 112
		else if (regno >= FIRST_PSEUDO_REGISTER
	! #ifdef LOAD_EXTEND_OP
		       && (GET_MODE_SIZE (GET_MODE (x))
			   <= GET_MODE_SIZE (GET_MODE (SUBREG_REG (x))))
	  #endif


E 51
E 27
D 30
If you are compiling on SunOS and want to use frozen configuration
files, you must use -Bstatic -- if you do not, frozen configuration
files fail in bizarre ways and you will open up several security holes.
E 30
I 30
D 37
SunOS
D 35
	If you are compiling on SunOS and want to use frozen configuration
	files, you must use -Bstatic -- if you do not, frozen
	configuration files fail in bizarre ways and you will open up
	several security holes.
E 30

E 35
I 27
D 30
You may have to use -lresolv on SunOS.
E 30
I 30
	You may have to use -lresolv on SunOS.
E 37
I 37
SunOS 4.x (Solaris 1.x)
	You may have to use -lresolv on SunOS.  However, beware that
	this links in a new version of gethostbyname that does not
	understand NIS, so you must have all of your hosts in DNS.
D 39
	I understand that resolv+ works properly, allowing you to
	specify a search-path of services.  I haven't tried this, as
	we use DNS exclusively.
E 39
I 39

I 48
	Some people have reported problems with the SunOS version of
	-lresolv and/or in.named, and suggest that you get a newer
	version.  The symptoms are delays when you connect to the
D 50
	SMTP server on a SunOS machine.  There is a version of BIND
E 50
I 50
	SMTP server on a SunOS machine or having your domain added to
	addresses inappropriately.  There is a version of BIND
E 50
	version 4.9 on gatekeeper.DEC.COM in pub/BSD/bind/4.9.

E 48
	There is substantial disagreement about whether you can make
	this work with resolv+, which allows you to specify a search-path
	of services.  Some people report that it works fine, others
	claim it doesn't work at all (including causing sendmail to
	drop core when it tries to do multiple resolv+ lookups for a
	single job).  I haven't tried resolv+, as we use DNS exclusively.

	Should you want to try resolv+, it is on ftp.uu.net in
	/networking/ip/dns.
I 79

	Apparently getservbyname() can fail under moderate to high
	load under some circumstances.  This will exhibit itself as
	the message ``554 makeconnection: service "smtp" unknown''.
	The problem has been traced to one or more blank lines in
	/etc/services on the NIS server machine.  Delete these
	and it should work.  This info is thanks to Brian Bartholomew
	<bb@math.ufl.edu> of I-Kinetics, Inc.
E 79
E 39
E 37
E 30

I 36
D 37
Solaris
E 37
I 37
Solaris 2.x (SunOS 5.x)
	To compile for Solaris, be sure you use -DSOLARIS.

I 73
	To the best of my knowledge, Solaris does not have the
	gethostbyname problem described above.  However, it does
	have another one:

E 73
E 37
	From a correspondent:

D 112
	   For solaris 2.2, I have 
E 112
I 112
	   For solaris 2.2, I have
E 112

		hosts:      files dns

	   in /etc/nsswitch.conf and /etc/hosts has to have the fully
	   qualified host name. I think "files" has to be before "dns"
	   in /etc/nsswitch.conf during bootup.

I 37
D 73
	To the best of my knowledge, Solaris does not have the
	gethostbyname problem described above.
E 73
I 73
	From another correspondent:

	   When running sendmail under Solaris, the gethostbyname()
	   hack in conf.c which should perform proper canonicalization
	   of host names could fail.  Result: the host name is not
	   canonicalized despite the hack, and you'll have to define $j
	   and $m in sendmail.cf somewhere.

	   The reason could be that /etc/nsswitch.conf is improperly
	   configured (at least from sendmail's point of view).  For
	   example, the line

		hosts:      files nisplus dns

	   will make gethostbyname() look in /etc/hosts first, then ask
	   nisplus, then dns.  However, if /etc/hosts does not contain
	   the full canonicalized hostname, then no amount of
	   gethostbyname()s will work.

	   Solution (or rather, a workaround): Ask nisplus first, then
	   dns, then local files:

		hosts:      nisplus dns [NOTFOUND=return] files
E 73

I 38
	The Solaris "syslog" function is apparently limited to something
	about 90 characters because of a kernel limitation.  If you have
D 50
	source code, you can probably up this number.  Bill Wisner
	<wisner@well.sf.ca.us> was able to get an unofficial, unsupported
	patch.
E 50
I 50
D 69
	source code, you can probably up this number.  The syslogd patch
	is included in kernel jumbo patch for Solaris 2.2 as of revision
	-39 or so.  At least one person is running with patch 100999-45
D 54
	and their long lost sendmail logging is finally showing up.
E 54
I 54
	and their long lost sendmail logging is finally showing up.  At
	least one other person is running with patch 101318 installed
	under Solaris 2.3 with success.
E 69
I 69
	source code, you can probably up this number.  You can get patches
	that fix this problem: the patch ids are:

		Solaris 2.1	100834
		Solaris 2.2	100999
D 70
		Solaris 2.3	100318
E 70
I 70
		Solaris 2.3	101318
E 70

	Be sure you have the appropriate patch installed or you won't
	see system logging.
E 69
E 54
E 50

I 111
Solaris 2.4 (SunOS 5.4)
D 112
	Date: Fri, 17 Feb 1995 23:00:13 +0100
	From: nissen@montefiore.ulg.ac.be (Alain Nissen)
	To: sendmail@CS.Berkeley.EDU
	Subject: A bug inside Solaris 2.4 can cause problems to Sendmail
E 112
I 112
	If you include /usr/lib at the end of your LD_LIBRARY_PATH you run
	the risk of getting the wrong libraries under some circumstances.
	This is because of a new feature in Solaris 2.4, described by
	Rod.Evans@Eng.Sun.COM:
E 112

D 112
	I discovered a bug inside Solaris 2.4 which can cause problems with
	Sendmail 8.6.9 (and maybe other versions).  Here is a short
	description of the bug.  There isn't a bugid yet, nor a patchid
	(of course).  The bug has been reported to SunSoft (Belgium), and a
	bugid should be created in a few days.
E 112
I 112
	>> Prior to SunOS 5.4, any LD_LIBRARY_PATH setting was ignored by the
	>> runtime linker if the application was setxid (secure), thus your
	>> applications search path would be:
	>>
	>>	/usr/local/lib	LD_LIBRARY_PATH component - IGNORED
	>>	/usr/lib	LD_LIBRARY_PATH component - IGNORED
	>>	/usr/local/lib	RPATH - honored
	>>	/usr/lib	RPATH - honored
	>>
	>> the effect is that path 3 would be the first used, and this would
	>> satisfy your resolv.so lookup.
	>>
	>> In SunOS 5.4 we made the LD_LIBRARY_PATH a little more flexible.
	>> People who developed setxid applications wanted to be able to alter
	>> the library search path to some degree to allow for their own
	>> testing and debugging mechanisms.  It was decided that the only
	>> secure way to do this was to allow a `trusted' path to be used in
	>> LD_LIBRARY_PATH.  The only trusted directory we presently define
	>> is /usr/lib.  Thus a setuid root developer could play with some
	>> alternative shared object implementations and place them in
	>> /usr/lib (being root we assume they'ed have access to write in this
	>> directory).  This change was made as part of 1155380 - after a
	>> *huge* amount of discussion regarding the security aspect of things.
	>>
	>> So, in SunOS 5.4 your applications search path would be:
	>>
	>>	/usr/local/lib	from LD_LIBRARY_PATH - IGNORED (untrustworthy)
	>>	/usr/lib	from LD_LIBRARY_PATH - honored (trustworthy)
	>>	/usr/local/lib	from RPATH - honored
	>>	/usr/lib	from RPATH - honored
	>>
	>> here, path 2 would be the first used.
E 112

D 112
	When a root-setuid dynamically program is executed by a user
	different from root, then, at run-time, the dynamic libraries are
	first searched in /usr/lib, then is the contents of LD_RUN_PATH as
	it was at compilation-time.

	The correct behaviour (as it is in Solaris 2.3) should be to search
	at run-time first in the contents of LD_RUN_PATH as it was at
	compilation, then in /usr/lib.

	This bug causes problems with Sendmail if the following particular
	condition is encountered: you want to link Sendmail (at
	compilation-time) with BIND's shared libresolv.so library that has
	been put in /usr/local/lib (for example).

	By default, BIND's shared library is optionnaly merged inside the
	libc library.  But it is possible to build (by hand) a shared
	library which would be called libresolv.so and put in /usr/local/lib
	(for example).

	At compilation-time, the linker uses BIND's library, but, at run-time,
	it uses the original /usr/lib/libresolv.so library (because the name
	is the same as the one in /usr/local/lib), even if LD_RUN_PATH was
	containing /usr/local/lib before /usr/lib at compilation-time.

	When Sendmail is called from some mailer (for example, the BSD Mail),
	it runs uid=user and euid=root and the wrong library is used.
	Numerous "name server timeouts" or "host not found" errors may occur.

	A quick fix is to link "libresolv" and "lib44bsd" statically, while
	linking other libraries dynamically.  With GCC, this can be done using

		LIBDIRS= -L/usr/local/lib -R/usr/local/lib
		LIBS= -Xlinker -Bstatic -lresolv -l44bsd -Xlinker \
			-Bdynamic -lsocket -lnsl -lelf

	in the Makefile.SunOS.5.x.

	I hope this will help other Solaris 2.4 users.

		    ********************************************************
		    * Alain Nissen - Teacher Assistant                     *
	 _________  * Department of Computer Science (A.I.)                *
	| | |  _| | * University of Liege - Institut Montefiore, Bat B28,  *
	| | | | | | * Grande Traverse, 10, B-4000 Liege - Belgium (Europe) *
	| | | | | | * Phone: (+32)-41-662626          Fax: (+32)-41-662984 *
	| | |___| | *                                                      *
	| \_____/ | * E-mail: nissen@montefiore.ulg.ac.be                  *
	\_________/ * URL:    http://www.montefiore.ulg.ac.be/~nissen/     *
		    * Finger: nissen@finger.montefiore.ulg.ac.be           *
		    ********************************************************

E 112
E 111
I 103
Ultrix
	By default, the IDENT protocol is turned off on Ultrix.  If you
D 109
	are running Ultrix 4.4 or later, or if you have gotten a patch
	the TCP problem for an earlier version of Ultrix, you can turn
E 109
I 109
	are running Ultrix 4.4 or later, or if you have included patch
	CXO-8919 for Ultrix 4.2 or 4.3 to fix the TCP problem, you can turn
E 109
	IDENT on in the configuration file by setting the "ident" timeout
	to 30 seconds.

E 103
E 38
E 37
E 36
E 27
E 16
I 13
D 30
If you are compiling on OSF/1 (DEC Alpha), you must use -lmld.
E 30
I 30
OSF/1
D 47
	If you are compiling on OSF/1 (DEC Alpha), you must use -lmld.
E 47
I 47
D 50
	If you are compiling on OSF/1 (DEC Alpha), you must use -lmld
	and -non_shared (otherwise it core dumps on startup).  Also,
	the enclosed makefile removed /usr/sbin/smtpd; if you need it,
	just create the link to the sendmail binary.
E 50
I 50
D 112
	If you are compiling on OSF/1 (DEC Alpha), you must use 
E 112
I 112
	If you are compiling on OSF/1 (DEC Alpha), you must use
E 112
D 64
	-non_shared (otherwise it core dumps on startup).  You may also
E 64
I 64
	-L/usr/shlib (otherwise it core dumps on startup).  You may also
E 64
	need -mld to get the nlist() function, although some versions
	apparently don't need this.
	
	Also, the enclosed makefile removed /usr/sbin/smtpd; if you need
	it, just create the link to the sendmail binary.
E 50
E 47
E 30
I 19

I 74
IRIX
	The header files on SGI IRIX are completely prototyped, and as
	a result you can sometimes get some warning messages during
	compilation.  These can be ignored.  There are two errors in
	deliver only if you are using gcc, both of the form ``warning:
	passing arg N of `execve' from incompatible pointer type''.
	Also, if you compile with -DNIS, you will get a complaint
	about a declaration of struct dom_binding in a prototype
	when compiling map.c; this is not important because the
	function being prototyped is not used in that file.

I 87
	In order to compile sendmail you will have had to install
	the developers' option in order to get the necessary include
	files.

E 87
E 74
I 62
D 63
HP-UX 9.x
	I've had at least one report that the sendmail daemon dies
	every day during the run of calendar(1) from cron(8) and
	occassionally during SMTP server processes if and only if you
	compile in the code that calls getusershell(3).  If you are
	having this problem, compile with -DHASGETUSERSHELL=0 to
	turn it off, and please send e-mail to sendmail@CS.Berkeley.EDU
	so we can try to track this down.

E 63
E 62
D 30
If you are compiling on NeXT, you will have to create an empty file
D 27
"unistd.h".
E 27
I 27
"unistd.h" and create a file "dirent.h" containing:
E 30
I 30
D 114
NeXT
	If you are compiling on NeXT, you will have to create an empty
	file "unistd.h" and create a file "dirent.h" containing:
E 114
I 114
NeXT or NEXTSTEP
	NEXTSTEP 3.3 and earlier ship with the old DBM library.  You will
	need to acquire the new Berkeley DB from ftp.cs.berkeley.edu.
	Install it in /usr/local/{lib,include}.

	If you are compiling on NEXTSTEP, you will have to create an
	empty file "unistd.h" and create a file "dirent.h" containing:
E 114
E 30
E 27
E 19

I 27
D 30
	#include <sys/dir.h>
D 28
	#define direct	dirent
E 28
I 28
	#define dirent	direct
E 30
I 30
		#include <sys/dir.h>
		#define dirent	direct
E 30
I 29

D 30
(The Makefile.NeXT should try to do both of these for you.)
E 30
I 30
	(The Makefile.NeXT should try to do both of these for you.)
E 30
E 29
E 28

I 36
	Apparently, there is a bug in getservbyname on Nextstep 3.0
	that causes it to fail under some circumstances with the
	message "SYSERR: service "smtp" unknown" logged.  You should
	be able to work around this by including the line:

D 43
		OPort=25
E 43
I 43
		OOPort=25
E 43

	in your .cf file.
I 37

	You may have to use -DNeXT.
E 37

E 36
E 27
E 13
D 14
If you use both -DDBM and -DNEWDB, you must delete the module ndbm.o
E 14
I 14
D 30
If you use both -DNDBM and -DNEWDB, you must delete the module ndbm.o
E 14
D 15
from libdb.a.  This compatibility module maps ndbm calls into DB
calls, and breaks things rather badly.
E 15
I 15
from libdb.a and delete the file "ndbm.h" from the files that get
installed (that is, use the OLD ndbm.h, not the new ndbm.h).  This
compatibility module maps ndbm calls into DB calls, and breaks things
rather badly.
E 30
I 30
D 50
BSDI (BSD/386)
	I have reports that the "m4" from BSDI won't handle the config
	files properly.  I haven't had a chance to test this myself.
E 50
I 50
BSDI (BSD/386) 1.0, NetBSD 0.9, FreeBSD 1.0
	The "m4" from BSDI won't handle the config files properly.
	I haven't had a chance to test this myself.

	The M4 shipped in FreeBSD and NetBSD 0.9 don't handle the config
	files properly. One must use either GNU m4 1.1 or the PD-M4
	recently posted in comp.os.386bsd.bugs (and maybe others).
	NetBSD-current includes the PD-M4 (as stated in the NetBSD file
	CHANGES).
	
	FreeBSD 1.0 RELEASE has uname(2) now. Use -DUSEUNAME in order to
	use it (look into Makefile.FreeBSD). NetBSD-current may have
	it too but it has not been verified.

	You cannot port the latest version of the Berkeley db library
	and use it with sendmail without recompiling the world.  This
	is because C library routines use the older version which have
	incompatible header files -- the result is that it can't read
	other system files, such as /etc/passwd, unless you use the
	new db format throughout your system.  You should normally just
	use the version of db supplied in your release.  You may need
D 78
	to use -DOLD_NEWDB to make this work -- this turns off some
E 78
I 78
	to use -DOLD_NEWDB=1 to make this work -- this turns off some
E 78
	new interface calls (for file locking) that are not in older
	versions of db.  You'll get compile errors if you need this
	flag and don't have it set.
E 50
I 36

4.3BSD
	If you are running a "virgin" version of 4.3BSD, you'll have
	a very old resolver and be missing some header files.  The
	header files are simple -- create empty versions and everything
	will work fine.  For the resolver you should really port a new
	version (4.8.3 or later) of the resolver; 4.9 is available on
	gatekeeper.DEC.COM in pub/BSD/bind/4.9.  If you are really
	determined to continue to use your old, buggy version (or as
	a shortcut to get sendmail working -- I'm sure you have the
	best intentions to port a modern version of BIND), you can
	copy ../contrib/oldbind.compat.c into src and add
	oldbind.compat.o to OBJADD in the Makefile.
I 40

D 55
Linux
	From: Karl London <karl@borg.demon.co.uk>
	Subject: Little bit to add to a readme for Linux for 8.6
	Date: Fri, 10 Sep 1993 20:16:05 +0100 (BST)

	Below is a copy of a section of the /usr/include/unistd.h from
	linux libc-4.4.1 which needs changing because of a bug in the
	header files. Should be fixed for future releases..

	Karl

	The #if 0 and #endif are new!!

	-------

	   If OPTS begins with `--', then non-option arguments
	   are treated as arguments to the option '\0'.
	   This behavior is specific to the GNU `getopt'.  */
	#if 0
	extern int getopt __P ((int __argc, char *__const * __argv,
				__const char *__opts));
	#endif
	extern int opterr;
	extern int optind;
I 46

E 55
A/UX
	Date: Tue, 12 Oct 1993 18:28:28 -0400 (EDT)
	From: "Eric C. Hagberg" <hagberg@med.cornell.edu>
	Subject: Fix for A/UX ndbm

	I guess this isn't really a sendmail bug, however, it is something
	that A/UX users should be aware of when compiling sendmail 8.6.

	Apparently, the calls that sendmail is using to the ndbm routines
	in A/UX 3.0.x contain calls to "broken" routines, in that the
	aliases database will break when it gets "just a little big"
	(sorry I don't have exact numbers here, but it broke somewhere
	around 20-25 aliases for me.), making all aliases non-functional
	after exceeding this point.

	What I did was to get the gnu-dbm-1.6 package, compile it, and
	then re-compile sendmail with "-lgdbm", "-DNDBM", and using the
	ndbm.h header file that comes with the gnu-package. This makes
	things behave properly.

	I suppose porting the New Berkeley db package is another route,
	however, I made a quick attempt at it, and found it difficult
	(not easy at least); the gnu-dbm package "configured" and
	compiled easily.
I 94

SCO Unix
	From: Thomas Essebier <tom@stallion.oz.au>
	Organisation:  Stallion Technologies Pty Ltd.

	It will probably help those who are trying to configure sendmail 8.6.9
D 112
	to know that if they are on SCO, they had better set 
E 112
I 112
	to know that if they are on SCO, they had better set
E 112
		OI-dnsrch
	or they will core dump as soon as they try to use the resolver.
	ie. although SCO has _res.dnsrch defined, and is kinda BIND 4.8.3, it
	does not inititialise it, nor does it understand 'search' in
	/etc/named.boot.
		- sigh -
E 94

DG/UX
D 91
	Apparently, /bin/mail doesn't work properly for delivery on
	DG/UX -- the person who has this working, Douglas Anderson
D 82
	<dlander@afterlife.ncsc.mil>, used procmail instead.
E 82
I 82
	<dlander@afterlife.ncsc.mil>, used procmail instead.  The
	problem is that DG/UX /bin/mail requires that an environment
	variable be set (_FORCE_MAIL_LOCAL_=yes); sendmail has no
	mechanism for this.  Several people report that procmail works
	beautifully.
E 91
I 91
	Doug Anderson <dlander@afterlife.ncsc.mil> has successfully run
	V8 on the DG/UX 5.4.2 and 5.4R3.x platforms under heavy usage.
	Originally, the DG /bin/mail program wasn't compatible with
	the V8 sendmail, since the DG /bin/mail requires the environment
	variable "_FORCE_MAIL_LOCAL_=yes" be set.  Version 8.7 now includes
	this in the environment before invoking the local mailer.  Some
	have used procmail to avoid this problem in the past.  It works
	but some have experienced file locking problems with their DG/UX
	ports of procmail.
E 91
E 82
I 51

I 66
Apollo DomainOS
	If you are compiling on Apollo, you will have to create an empty
	file "unistd.h" and create a file "dirent.h" containing:

		#include <sys/dir.h>
		#define dirent	direct

	(The Makefile.DomainOS will attempt to do both of these for you.)
I 67

HP-UX 8.00
	Date: Mon, 24 Jan 1994 13:25:45 +0200
	From: Kimmo Suominen <Kimmo.Suominen@lut.fi>
	Subject: 8.6.5 w/ HP-UX 8.00 on s300

	Just compiled and fought with sendmail 8.6.5 on a HP9000/360 (ie. a
	series 300 machine) running HP-UX 8.00.

	I was getting segmentation fault when delivering to a local user.
	With debugging I saw it was faulting when doing _free@libc... *sigh*
	It seems the new implementation of malloc on s300 is buggy as of 8.0,
	so I tried out the one in -lmalloc (malloc(3X)).  With that it seems
	to work just dandy.

	When linking, you will get the following error:

	ld: multiply defined symbol _freespace in file /usr/lib/libmalloc.a

	but you can just ignore it.  You might want to add this info to the
	README file for the future...

Linux
	Something broke between versions 0.99.13 and 0.99.14 of Linux:
	the flock() system call gives errors.  If you are running .14,
	you must not use flock.  You can do this with -DHASFLOCK=0.

I 97
	Around the inclusion of bind-4.9.3 & linux libc-4.6.20, the
	initialization of the _res structure changed.  If /etc/hosts.conf
	was configured as "hosts, bind" the resolver code could return
	"Name server failure" errors.  This is supposedly fixed in
	later versions of libc (>= 4.6.29?), and later versions of
	sendmail (> 8.6.10) try to work around the problem.

	Some older versions (< 4.6.20?) of the libc/include files conflict
	with sendmail's version of cdefs.h.  Deleting sendmail's version
	on those systems should be non-harmful, and new versions don't care.

E 97
AIX
	This version of sendmail does not support MB, MG, and MR resource
	records, which are supported by AIX sendmail.
I 74

RISC/os
	RISC/os from MIPS is a merged AT&T/Berkeley system.  When you
	compile on that platform you will get duplicate definitions
	on many files.  You can ignore these.
E 74
E 67

E 66
I 56
System V Release 4 Based Systems
	There is a single Makefile that is intended for all SVR4-based
	systems (called Makefile.SVR4).  It defines __svr4__, which is
	predefined by some compilers.  If your compiler already defines
	this compile variable, you can delete the definition from the
	Makefile.

	It's been tested on Dell Issue 2.2.

E 56
DELL SVR4
	Date:      Mon, 06 Dec 1993 10:42:29 EST
	From: "Kimmo Suominen" <kim@grendel.lut.fi>
	Message-ID: <2d0352f9.lento29@lento29.UUCP>
	To: eric@cs.berkeley.edu
D 54
	Cc: sendmail@cs.berkeley.edu, "Kimmo Suominen" <kim@grendel.lut.fi>
E 54
I 54
	Cc: sendmail@cs.berkeley.edu
E 54
	Subject:   Notes for DELL SVR4

	Eric,

	Here are some notes for compiling Sendmail 8.6.4 on DELL SVR4.  I ran
	across these things when helping out some people who contacted me by
	e-mail.

	1) Use gcc 2.4.5 (or later?).  Dell distributes gcc 2.1 with their
	   Issue 2.2 Unix.  It is too old, and gives you problems with
	   clock.c, because sigset_t won't get defined in <sys/signal.h>.
	   This is due to a problematic protection rule in there, and is
	   fixed with gcc 2.4.5.

	2) If you don't use the new Berkeley DB (-DNEWDB), then you need
	   to add "-lc -lucb" to the libraries to link with.  This is because
	   the -ldbm distributed by Dell needs the bcopy, bcmp and bzero
	   functions.  It is important that you specify both libraries in
	   the given order to be sure you only get the BSTRING functions
	   from the UCB library (and not the signal routines etc.).

	3) Don't leave out "-lelf" even if compiling with "-lc -lucb".
	   The UCB library also has another copy of the nlist routines,
	   but we do want the ones from "-lelf".

	If anyone needs a compiled gcc 2.4.5 and/or a ported DB library, they
D 112
	can use anonymous ftp to fetch them from lut.fi in the /kim directory. 
E 112
I 112
	can use anonymous ftp to fetch them from lut.fi in the /kim directory.
E 112
	They are copies of what I use on grendel.lut.fi, and offering them
	does not imply that I would also support them.  I have sent the DB
	port for SVR4 back to Keith Bostic for inclusion in the official
	distribution, but I haven't heard anything from him as of today.

	- gcc-2.4.5-svr4.tar.gz	(gcc 2.4.5 and the corresponding libg++)
	- db-1.72.tar.gz	(with source, objects and a installed copy)

	Cheers
	+ Kim
D 112
	-- 
E 112
I 112
	--
E 112
	 *  Kimmo.Suominen@lut.fi  *  SysVr4 enthusiast at GRENDEL.LUT.FI  *
	*    KIM@FINFILES.BITNET   *  Postmaster and Hostmaster at LUT.FI   *
	 *    + 358 200 865 718    *  Unix area moderator at NIC.FUNET.FI  *
I 54
D 56

	---------------
	Since this is an SVR4-based system, you may need to set
	SYSLOG_BUFSIZE to something low.
E 56
E 54

I 81
ConvexOS 10.1 and below
	In order to use the name server, you must create the file
	/etc/use_nameserver.  If this file does not exist, the call
	to res_init() will fail and you will have absolutely no
	access to DNS, including MX records.
E 81
E 51

I 92
Amdahl UTS 2.1.5
	In order to get UTS to work, you will have to port BIND 4.9.
	The vendor's BIND is reported to be ``totally inadequate.''
	See sendmail/contrib/AmdahlUTS.patch for the patches necessary
	to get BIND 4.9 compiled for UTS.

I 99
UnixWare 2.0
	According to Alexander Kolbasov <sasha@unitech.gamma.ru>,
	the m4 on UnixWare 2.0 (still in Beta) will core dump on the
	config files.  GNU m4 and the m4 from UnixWare 1.x both work.

E 99
E 92
Non-DNS based sites
	This version of sendmail always tries to connect to the Domain
	Name System (DNS) to resolve names, regardless of the setting
	of the `I' option.  On most systems that are not running DNS,
	this will fail quickly and sendmail will continue, but on some
	systems it has a long timeout.  If you have this problem, you
	will have to recompile without NAMED_BIND.  Some people have
	claimed that they have successfully used "OI+USEVC" to force
	sendmail to use a virtual circuit -- this will always time out
	quickly, but also tells sendmail that a failed connection
	should requeue the message (probably not what you intended).
	A future release of sendmail will correct this problem.
E 46
E 40
E 36

Both NEWDB and NDBM
	If you use both -DNDBM and -DNEWDB, you must delete the module
	ndbm.o from libdb.a and delete the file "ndbm.h" from the files
	that get installed (that is, use the OLD ndbm.h, not the new
	ndbm.h).  This compatibility module maps ndbm calls into DB
	calls, and breaks things rather badly.
E 30
E 15
I 14

I 41
GNU getopt
	I'm told that GNU getopt has a problem in that it gets confused
	by the double call.  Use the version in conf.c instead.

I 75
BIND 4.9.2 and Ultrix
D 80
	If you are running on Ultrix, be sure you read the conf/Info.Ultrix
	carefully -- there is information in there that you need to know
	in order to avoid errors of the form:
E 80
I 80
	If you are running on Ultrix, be sure you read conf/Info.Ultrix
	in the BIND distribution very carefully -- there is information
	in there that you need to know in order to avoid errors of the
	form:
E 80

		/lib/libc.a(gethostent.o): sethostent: multiply defined
		/lib/libc.a(gethostent.o): endhostent: multiply defined
		/lib/libc.a(gethostent.o): gethostbyname: multiply defined
		/lib/libc.a(gethostent.o): gethostbyaddr: multiply defined

	during the link stage.

I 102
strtoul
	Some compilers (notably gcc) claim to be ANSI C but do not
	include the ANSI-required routine "strtoul".  If your compiler
	has this problem, you will get an error in srvrsmtp.c on the
	code:

	  # ifdef defined(__STDC__) && !defined(BROKEN_ANSI_LIBRARY)
			e->e_msgsize = strtoul(vp, (char **) NULL, 10);
	  # else
			e->e_msgsize = strtol(vp, (char **) NULL, 10);
	  # endif

	You can use -DBROKEN_ANSI_LIBRARY to get around this problem.

E 102
E 75
E 41
D 27
You probably want to look over the compilation options in conf.h
before you compile.  These are intended to be per-site information.
E 27
I 27

I 49
+--------------+
| MANUAL PAGES |
+--------------+

The manual pages have been written against the -mandoc macros
instead of the -man macros.  The latest version of groff has them
included.  You can also get a copy from FTP.UU.NET in directory
/systems/unix/bsd-sources/share/tmac.


I 53
+-----------------+
| DEBUGGING HOOKS |
+-----------------+

As of 8.6.5, sendmail daemons will catch a SIGUSR1 signal and log
some debugging output (logged at LOG_DEBUG severity).  The
information dumped is:

 * The value of the $j macro.
 * A warning if $j is not in the set $=w.
 * A list of the open file descriptors.
 * The contents of the connection cache.
 * If ruleset 89 is defined, it is evaluated and the results printed.

This allows you to get information regarding the runtime state of the
daemon on the fly.  This should not be done too frequently, since
the process of rewriting may lose memory which will not be recovered.
Also, ruleset 89 may call non-reentrant routines, so there is a small
non-zero probability that this will cause other problems.  It is
really only for debugging serious problems.

A typical formulation of ruleset 89 would be:

	R$*		$@ $>0 some test address


E 53
E 49
+-----------------------------+
| DESCRIPTION OF SOURCE FILES |
+-----------------------------+
E 27
E 14

E 12
E 11
D 3
Creating a Makefile
E 3
I 3
The following list describes the files in this directory:
E 3

D 3
You may have to create a new makefile.  There are only two
basic types: for a v6 system & for a v7 system.  All pathnames &
system dependent stuff should be in conf.c.  The makefile distributed
is for our ARPAVAX site, and should work for you.  You may want to
change some of the compile flags as listed in the makefile; these
control things like logging, hashed alias tables, and debugging
info.  We distribute makefile.m4 which can be turned into a makefile;
it may be easier in the long run to modify this file.

Creating a Configuration Table

The configuration table describes the mail world to sendmail.  This
table is quite complex, but in general the table from Berkeley can
be modified to work.  We use an m4 file to specify configuration for
multiple machines; the file whoami.m4 can probably be modified to
set the correct parameters for cf.m4 to generate a sendmail.cf.

Whoami.m4 defines or may define the following macros:

WHOAMI		From /usr/include/whoami, this drives the entire
		configuration.
BNHOST		If defined, the name of this host on BerkNet.
UNHOST		If defined, the name of this host on UUCPnet.
ANHOST		If defined, the name of this host on ArpaNet.
ENHOST		If defined, the name of this host on EtherNet.
m4_SCCS		If defined, we have the SCCS files here.
m4_VAX		If defined, this is a VAX.
m4_VFORK	If defined, we should use the VFORK syscall.
m4_DBMLIB	If defined, we have the DBM version of the alias
		file.

You should really read sendmail.doc before trying anything with
sendmail.  You can run this off using:
	nroff -me sendmail.doc
Among other things, this describes how to build a configuration file.

Creating Pseudo-Users.

Sometimes (particularly in Arpa-land) mail comes from a person who
doesn't really exist.  Some mail will be returned to them from a
pseudo-user named MAILER-DAEMON, which will of course be returned.
But MAILER-DAEMON does not exist, so it is returned.... and you have
a loop.  To break this, every site should have the entry:
	MAILER-DAEMON:root
in their aliases file.

Actual Installation

You will have to do the following things as root:

Put the new sysexits.h in /usr/include.  This defines some other
exit codes used by sendmail.  This is not dangerous unless you
have extended sysexits yourself.

Create the following files:
-rw-rw-rw- 1 root    5161 Jan 10 17:47 /usr/lib/aliases
-rw-rw-rw- 1 root    4096 Jan 10 17:47 /usr/lib/aliases.dir
-rw-rw-rw- 1 root   37888 Jan 10 17:47 /usr/lib/aliases.pag
drwxr-xr-x 2 eric      64 Nov  8 12:56 /usr/lib/mailers
-rwxr-xr-x 1 eric   63162 Jan  5 10:01 /usr/lib/sendmail
-rw-r--r-- 1 eric    3484 Jan  1 18:42 /usr/lib/sendmail.cf
-rw-r--r-- 1 eric     708 Nov  7 15:34 /usr/lib/sendmail.hf
-rw-rw-rw- 1 eric     168 Jan 10 19:11 /usr/lib/sendmail.st
drwxrwxrwx 2 eric     176 Jan 10 19:11 /usr/spool/mqueue

/usr/spool/mqueue may be some less permissive mode if sendmail
runs setuid to the owner (root is recommended, as sendmail will
then do certain file ownerships correctly).  Likewise, the
alias files need not be mode 666 unless you want users to be
able to update the alias file directly.  /usr/lib/sendmail.st
stores statistics and may be safely removed.

DESCRIPTION OF FILES

I 2
AUX		A directory of "other stuff" (which may or may
		not be interesting).  This stuff is UNSUPPORTED
		and given only for examples sake.  Many of these
		programs have not run in some time and may not
		even have reasonable sendmail calling conventions.
AUX/arpa.c	An old (v6 NCP) queueing program, formerly called
		by sendmail on an ARPANET gateway.
AUX/mail-dm.c	An old (v6 NCP) incoming FTP mail server module,
		which called sendmail one time long ago.
E 2
FILES		A list of "interesting" files.
E 3
I 3
D 11
Makefile	The makefile used here; this is created from
		makefile.m4.
Makefile.m4	A makefile template.
E 11
I 11
Makefile	The makefile used here; this version only works with
		the new Berkeley make.
Makefile.dist	A trimmed down version of the makefile that works with
		the old make.
E 11
E 3
READ_ME		This file.
D 16
TODO		New features to be put in (maybe) at some time.
Version.c	The version number and information about this
		version of sendmail.  Theoretically, this gets
		modified on every change.
E 16
I 16
TRACEFLAGS	My own personal list of the trace flags -- not guaranteed
		to be particularly up to date.
E 16
alias.c		Does name aliasing in all forms.
D 3
aliases.5	Documentation for the alias file used by sendmail.
D 2
arpa-mailer.8	Documentation for arpa.c.
arpa.c		The auxiliary mailer for the ARPANET.
arpadate.c	A subroutine used by sendmail & arpa.c which
E 2
I 2
arpadate.c	A subroutine used by sendmail & AUX/arpa.c which
E 2
		creates ARPANET standard dates.
I 2
asm.sed		A script to post-process the assembly language
		output from the C compiler; this implements some
		efficiency hacks.
E 3
I 3
arpadate.c	A subroutine which creates ARPANET standard dates.
E 3
E 2
D 6
bmove.c		A core-to-core move.  This is in a separate file
		because it can easily be replaced by a blindingly
		efficient version on Vaxes.
D 3
cf.m4		The m4 version of sendmail.cf.  This may be somewhat
		inscrutable.
E 3
I 3
bmove.*.s	Versions of bmove optimized for specific processors.
E 6
clock.c		Routines to implement real-time oriented functions
		in sendmail -- e.g., timeouts.
E 3
collect.c	The routine that actually reads the mail into a temp
		file.  It also does a certain amount of parsing of
		the header, etc.
conf.c		The configuration file.  This contains information
		that is presumed to be quite static and non-
		controversial, or code compiled in for efficiency
		reasons.  Most of the configuration is in sendmail.cf.
I 3
conf.h		Configuration that must be known everywhere.
E 3
convtime.c	A routine to sanely process times.
D 3
daemon.c	Routines to implement daemon mode.
E 3
I 3
daemon.c	Routines to implement daemon mode.  This version is
		specifically for Berkeley 4.1 IPC.
E 3
deliver.c	Routines to deliver mail.
I 16
domain.c	Routines that interface with DNS (the Domain Name
		System).
E 16
err.c		Routines to print error messages.
I 3
envelope.c	Routines to manipulate the envelope structure.
E 3
headers.c	Routines to process message headers.
macro.c		The macro expander.  This is used internally to
		insert information from the configuration file.
D 3
macros.m4 	Macros used by M4 when doing .cf configuration at
		Berkeley.
mailstats.c	A program to print out the mail statistics.
E 3
main.c		The main routine to sendmail.  This file also
		contains some miscellaneous routines.
I 16
map.c		Support for database maps.
mci.c		Routines that handle mail connection information caching.
E 16
D 3
makefile	The makefile used here; this is created from
		makefile.m4.
makefile.m4	A makefile template.
matchhdr.c	A routine used by arpa.c to perform a match on
		ARPANET format header items.
parse.c		The routines which do address parsing.
praliases.c	A debugging routine to print out the DBM version of
		the alias file.
E 3
I 3
parseaddr.c	The routines which do address parsing.
E 3
queue.c		Routines to implement message queueing.
readcf.c	The routine that reads the configuration file and
		translates it to internal form.
D 3
rmail.c		A program to replace /bin/rmail that reads those
		ugly UUCP header lines and replaces them by a real
		From line with a real address.
E 3
I 3
recipient.c	Routines that manipulate the recipient list.
E 3
savemail.c	Routines which save the letter on processing errors.
D 3
sendmail.8	Documentation for sendmail.
sendmail.cf	A sample configuration file.
sendmail.doc	A large paper on sendmail.
E 3
sendmail.h	Main header file for sendmail.
D 3
sendmail.hf	The help file.  This is used by the SMTP HELP command.
sendto.c	Routines to do address queueing.
spell.good	A list of words that spell chokes on for sendmail.doc
		but which are still ok.
E 3
srvrsmtp.c	Routines to implement server SMTP.
stab.c		Routines to manage the symbol table.
stats.c		Routines to collect and post the statistics.
sysexits.c	List of error messages associated with error codes
		in sysexits.h.
D 3
sysexits.h	List of exit statuses that could someday become a
		standard.  In any case, they are what sendmail &
		a handful of other programs use.
useful.h	A header file containing a few things that appear to
		be useful for even the most various programs.
userdbm.h	A header file for the -ldbm stuff.  This should be
		in /usr/include.
E 3
I 3
trace.c		The trace package.  These routines allow setting and
		testing of trace flags with a high granularity.
D 16
trace.h		Definitions needed for the trace package.
E 16
I 16
udb.c		The user database interface module.
E 16
E 3
usersmtp.c	Routines to implement user SMTP.
util.c		Some general purpose routines used by sendmail.
D 2
v6-mail.c	Local mailer under version 6.  This is included to
		permit you to see the sorts of modifications that
		had to take place.
E 2
D 3
vacation.1	Documentation for the vacation program.
vacation.c	A program that lets you automatically send a message
		to people saying "I am on vacation."
E 3
D 2
vax-mail.c	Local mailer under VM/UNIX (similar for V7).  This
		is also included as an example.  This is more complex
		than v6-mail.c because it has to be able to deal with
		UUCP mail also.  Beware of local hacks that will not
		apply to your installation.
E 2
D 16
version.c	A master file for Version.c -- it may not exist in
		your distribution.
E 16
I 16
version.c	The version number and information about this
		version of sendmail.  Theoretically, this gets
		modified on every change.
E 16
D 3
whoami.m4	An m4 file describing who we are.  This is driven by
		the file /usr/include/whoami, which should contain a
		single word giving your system name.
D 2

[This list was current as of 9/9/81]
E 2

CHANGES TO OTHER PROGRAMS

You will have to change your equivalent of /bin/mail to take a
"-d" flag.  If this flag is not asserted, /bin/mail should just
turn itself into /usr/lib/sendmail (this is probably in a routine
called "bulkmail" or "sendmail").  The code looks like something
like:

# ifdef SENDMAIL
	{search argv for a -d flag}
	if (!dflag)
	{
		argv[0] = "-sendmail";
		argv[argc] = 0;
		execv(SENDMAIL, argv);
		perror(SENDMAIL);
	}
	{ignore -d flag in further processing}
# endif

This is actually somewhat oversimplified.  See the example mailers
for something more realistic.  Besides the mailers in this directory,
see ../berknet/v6mail.c.

Argv[0] should begin with a "-" to indicate that it is being called
from /bin/mail.  [This is currently unused, but I have tentative
plans... isn't it easier to do it now?]

If you are running server FTP on arpanet, you will have to change
the incoming mail routine to accept mail for any address (rather than
checking to see that the user exists).  Instead of writing the
mail in some non-standard mailbox, pipe the mail to /usr/lib/sendmail
instead (include the -a flag).  Sendmail will give the "350 Enter
Mail" message, etc.  Our "mail-dm.c" is given as an example.

MISCELLANEOUS

This version of sendmail can really truly run as root if you want
it to.  It does some neat stuff if you do, but it is not necessary.

E 3

Eric Allman

(Version %I%, last update %G% %U%)
E 1
